<!DOCTYPE html><html><head><title>rndcoast</title><meta charset="utf-8" /></head><body><svg width="1582pt" height="478pt"
 viewBox="0.00 0.00 1582.35 478.08" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 474.08)">
<title>rndcoast</title>
<polygon fill="white" stroke="none" points="-4,4 -4,-474.08 1578.35,-474.08 1578.35,4 -4,4"/>
<!-- start -->
<g id="node1" class="node">
<title>start</title>
<ellipse fill="#ffffff" stroke="#000000" cx="1342.35" cy="-452.08" rx="27" ry="18"/>
</g>
<!-- map_enter_p_proc -->
<g id="node2" class="node">
<title>map_enter_p_proc</title>
<ellipse fill="#ffffff" stroke="#000000" cx="1065.35" cy="-380.08" rx="27" ry="18"/>
</g>
<!-- start&#45;&gt;map_enter_p_proc -->
<g id="edge1" class="edge">
<title>start&#45;&gt;map_enter_p_proc</title>
<path fill="none" stroke="#555555" stroke-dasharray="1,5" d="M1317.28,-444.74C1267.96,-432.28 1158.2,-404.54 1101.22,-390.14"/>
<polygon fill="#555555" stroke="#555555" points="1102.12,-386.51 1091.56,-387.45 1100.4,-393.3 1102.12,-386.51"/>
</g>
<!-- map_update_p_proc -->
<g id="node3" class="node">
<title>map_update_p_proc</title>
<ellipse fill="#ffffff" stroke="#000000" cx="1342.35" cy="-380.08" rx="27" ry="18"/>
</g>
<!-- start&#45;&gt;map_update_p_proc -->
<g id="edge2" class="edge">
<title>start&#45;&gt;map_update_p_proc</title>
<path fill="none" stroke="#555555" stroke-dasharray="1,5" d="M1342.35,-433.78C1342.35,-426.32 1342.35,-417.4 1342.35,-409.05"/>
<polygon fill="#555555" stroke="#555555" points="1345.85,-409.18 1342.35,-399.18 1338.85,-409.18 1345.85,-409.18"/>
</g>
<!-- map_exit_p_proc -->
<g id="node4" class="node">
<title>map_exit_p_proc</title>
<ellipse fill="#ffffff" stroke="#000000" cx="1414.35" cy="-380.08" rx="27" ry="18"/>
</g>
<!-- start&#45;&gt;map_exit_p_proc -->
<g id="edge3" class="edge">
<title>start&#45;&gt;map_exit_p_proc</title>
<path fill="none" stroke="#555555" stroke-dasharray="1,5" d="M1357.27,-436.58C1367.21,-426.91 1380.47,-414.02 1391.7,-403.1"/>
<polygon fill="#555555" stroke="#555555" points="1393.72,-406.05 1398.45,-396.57 1388.84,-401.03 1393.72,-406.05"/>
</g>
<!-- choose_start -->
<g id="node5" class="node">
<title>choose_start</title>
<ellipse fill="#ffffff" stroke="#000000" cx="1475.35" cy="-235.04" rx="27" ry="18"/>
</g>
<!-- map_enter_p_proc&#45;&gt;choose_start -->
<g id="edge4" class="edge">
<title>map_enter_p_proc&#45;&gt;choose_start</title>
<path fill="none" stroke="#555555" stroke-dasharray="1,5" d="M1092.27,-376.82C1173.47,-369.81 1412.01,-347.54 1439.35,-326.08 1458.46,-311.08 1467.46,-284.39 1471.68,-263.95"/>
<polygon fill="#555555" stroke="#555555" points="1475.26,-264.81 1473.57,-254.35 1468.37,-263.58 1475.26,-264.81"/>
</g>
<!-- Coast1 -->
<g id="node6" class="node">
<title>Coast1</title>
<ellipse fill="#ffffff" stroke="#000000" cx="134.35" cy="-235.04" rx="134.35" ry="91.04"/>
<text text-anchor="middle" x="134.35" y="-282.11" font-family="Times,serif" font-size="14.00">Вы видите нескольких</text>
<text text-anchor="middle" x="134.35" y="-264.86" font-family="Times,serif" font-size="14.00">странных парящих</text>
<text text-anchor="middle" x="134.35" y="-247.61" font-family="Times,serif" font-size="14.00">существ...</text>
<text text-anchor="middle" x="134.35" y="-230.36" font-family="Times,serif" font-size="14.00">&#45;&#45;&#45;</text>
<text text-anchor="middle" x="134.35" y="-213.11" font-family="Times,serif" font-size="14.00">Невдалеке вы видите</text>
<text text-anchor="middle" x="134.35" y="-195.86" font-family="Times,serif" font-size="14.00">жуткий полусъеденный</text>
<text text-anchor="middle" x="134.35" y="-178.61" font-family="Times,serif" font-size="14.00">труп.</text>
</g>
<!-- map_enter_p_proc&#45;&gt;Coast1 -->
<g id="edge5" class="edge">
<title>map_enter_p_proc&#45;&gt;Coast1</title>
<path fill="none" stroke="#555555" stroke-dasharray="1,5" d="M1037.93,-379.03C916.07,-378.53 423.22,-373.54 277.35,-326.08 262.96,-321.4 248.56,-314.94 234.74,-307.63"/>
<polygon fill="#555555" stroke="#555555" points="236.72,-304.17 226.27,-302.43 233.35,-310.31 236.72,-304.17"/>
</g>
<!-- Coast2 -->
<g id="node7" class="node">
<title>Coast2</title>
<ellipse fill="#ffffff" stroke="#000000" cx="313.35" cy="-235.04" rx="27" ry="18"/>
</g>
<!-- map_enter_p_proc&#45;&gt;Coast2 -->
<g id="edge6" class="edge">
<title>map_enter_p_proc&#45;&gt;Coast2</title>
<path fill="none" stroke="#555555" stroke-dasharray="1,5" d="M1038.06,-378.75C913.88,-377.01 405.79,-367.42 349.35,-326.08 329.64,-311.64 320.71,-284.64 316.67,-263.96"/>
<polygon fill="#555555" stroke="#555555" points="319.98,-263.53 314.89,-254.23 313.07,-264.67 319.98,-263.53"/>
</g>
<!-- Coast3 -->
<g id="node8" class="node">
<title>Coast3</title>
<ellipse fill="#ffffff" stroke="#000000" cx="514.35" cy="-235.04" rx="155.56" ry="42.25"/>
<text text-anchor="middle" x="514.35" y="-247.61" font-family="Times,serif" font-size="14.00">Вы видите небольшую стаю</text>
<text text-anchor="middle" x="514.35" y="-230.36" font-family="Times,serif" font-size="14.00">крыс. Она стремительно</text>
<text text-anchor="middle" x="514.35" y="-213.11" font-family="Times,serif" font-size="14.00">приближается.</text>
</g>
<!-- map_enter_p_proc&#45;&gt;Coast3 -->
<g id="edge7" class="edge">
<title>map_enter_p_proc&#45;&gt;Coast3</title>
<path fill="none" stroke="#555555" stroke-dasharray="1,5" d="M1038.4,-378.7C974.44,-377.1 809.14,-368.8 679.35,-326.08 645.65,-314.99 610.81,-297.07 581.88,-280.13"/>
<polygon fill="#555555" stroke="#555555" points="584.08,-276.78 573.7,-274.68 580.51,-282.8 584.08,-276.78"/>
</g>
<!-- Coast4 -->
<g id="node9" class="node">
<title>Coast4</title>
<ellipse fill="#ffffff" stroke="#000000" cx="836.35" cy="-235.04" rx="148.14" ry="30.05"/>
<text text-anchor="middle" x="836.35" y="-238.99" font-family="Times,serif" font-size="14.00">Вы видите, что налетчики</text>
<text text-anchor="middle" x="836.35" y="-221.74" font-family="Times,serif" font-size="14.00">атакуют группу крестьян!</text>
</g>
<!-- map_enter_p_proc&#45;&gt;Coast4 -->
<g id="edge8" class="edge">
<title>map_enter_p_proc&#45;&gt;Coast4</title>
<path fill="none" stroke="#555555" stroke-dasharray="1,5" d="M1046.22,-367.13C1012.32,-345.95 940.56,-301.13 890.44,-269.82"/>
<polygon fill="#555555" stroke="#555555" points="892.68,-266.47 882.34,-264.14 888.97,-272.41 892.68,-266.47"/>
</g>
<!-- Coast5 -->
<g id="node10" class="node">
<title>Coast5</title>
<ellipse fill="#ffffff" stroke="#000000" cx="1029.35" cy="-235.04" rx="27" ry="18"/>
</g>
<!-- map_enter_p_proc&#45;&gt;Coast5 -->
<g id="edge9" class="edge">
<title>map_enter_p_proc&#45;&gt;Coast5</title>
<path fill="none" stroke="#555555" stroke-dasharray="1,5" d="M1061.01,-361.83C1054.87,-337.42 1043.58,-292.58 1036.27,-263.55"/>
<polygon fill="#555555" stroke="#555555" points="1039.43,-262.75 1033.6,-253.91 1032.64,-264.46 1039.43,-262.75"/>
</g>
<!-- Coast6 -->
<g id="node11" class="node">
<title>Coast6</title>
<ellipse fill="#ffffff" stroke="#000000" cx="1288.35" cy="-235.04" rx="141.77" ry="30.05"/>
<text text-anchor="middle" x="1288.35" y="-238.99" font-family="Times,serif" font-size="14.00">Вы видите пару человек,</text>
<text text-anchor="middle" x="1288.35" y="-221.74" font-family="Times,serif" font-size="14.00">вышедших на рыбалку.</text>
</g>
<!-- map_enter_p_proc&#45;&gt;Coast6 -->
<g id="edge10" class="edge">
<title>map_enter_p_proc&#45;&gt;Coast6</title>
<path fill="none" stroke="#555555" stroke-dasharray="1,5" d="M1084.36,-366.88C1117.51,-345.62 1186.98,-301.06 1235.6,-269.88"/>
<polygon fill="#555555" stroke="#555555" points="1237.19,-272.37 1243.72,-264.03 1233.41,-266.48 1237.19,-272.37"/>
</g>
<!-- hunters -->
<g id="node12" class="node">
<title>hunters</title>
<ellipse fill="#ffffff" stroke="#000000" cx="1101.35" cy="-235.04" rx="27" ry="18"/>
</g>
<!-- map_enter_p_proc&#45;&gt;hunters -->
<g id="edge11" class="edge">
<title>map_enter_p_proc&#45;&gt;hunters</title>
<path fill="none" stroke="#555555" stroke-dasharray="1,5" d="M1069.69,-361.83C1075.83,-337.42 1087.12,-292.58 1094.43,-263.55"/>
<polygon fill="#555555" stroke="#555555" points="1098.06,-264.46 1097.1,-253.91 1091.27,-262.75 1098.06,-264.46"/>
</g>
<!-- Lighting -->
<g id="node13" class="node">
<title>Lighting</title>
<ellipse fill="#ffffff" stroke="#000000" cx="1547.35" cy="-235.04" rx="27" ry="18"/>
</g>
<!-- map_enter_p_proc&#45;&gt;Lighting -->
<g id="edge12" class="edge">
<title>map_enter_p_proc&#45;&gt;Lighting</title>
<path fill="none" stroke="#555555" stroke-dasharray="1,5" d="M1092.48,-377.46C1184.08,-371.77 1477.98,-351.68 1511.35,-326.08 1530.62,-311.3 1539.61,-284.58 1543.78,-264.07"/>
<polygon fill="#555555" stroke="#555555" points="1547.36,-264.89 1545.63,-254.43 1540.47,-263.68 1547.36,-264.89"/>
</g>
<!-- map_update_p_proc&#45;&gt;Lighting -->
<g id="edge13" class="edge">
<title>map_update_p_proc&#45;&gt;Lighting</title>
<path fill="none" stroke="#555555" stroke-dasharray="1,5" d="M1363.4,-368.38C1368.25,-366.13 1373.42,-363.89 1378.35,-362.08 1435.82,-340.92 1465.61,-366.8 1511.35,-326.08 1529.3,-310.1 1538.43,-283.94 1542.99,-263.92"/>
<polygon fill="#555555" stroke="#555555" points="1546.59,-264.75 1545.13,-254.25 1539.73,-263.37 1546.59,-264.75"/>
</g>
<!-- stranger -->
<g id="node14" class="node">
<title>stranger</title>
<ellipse fill="#ffffff" stroke="#000000" cx="754.35" cy="-90" rx="27" ry="18"/>
</g>
<!-- Coast1&#45;&gt;stranger -->
<g id="edge23" class="edge">
<title>Coast1&#45;&gt;stranger</title>
<path fill="none" stroke="#555555" stroke-dasharray="1,5" d="M225.88,-168.08C242.38,-158.65 259.9,-150.1 277.35,-144 358.4,-115.67 618.09,-98.6 716.27,-93.03"/>
<polygon fill="#555555" stroke="#555555" points="716.36,-96.47 726.15,-92.42 715.97,-89.48 716.36,-96.47"/>
</g>
<!-- Place_critter -->
<g id="node15" class="node">
<title>Place_critter</title>
<ellipse fill="#ffffff" stroke="#000000" cx="836.35" cy="-18" rx="27" ry="18"/>
</g>
<!-- Coast1&#45;&gt;Place_critter -->
<g id="edge20" class="edge">
<title>Coast1&#45;&gt;Place_critter</title>
<path fill="none" stroke="#555555" stroke-dasharray="1,5" d="M222.42,-165.86C234.69,-158.32 247.24,-150.89 259.35,-144 320.52,-109.22 333.11,-92.73 400.35,-72 541.6,-28.44 720.29,-20.63 798.16,-19.27"/>
<polygon fill="#555555" stroke="#555555" points="797.96,-22.76 807.91,-19.11 797.86,-15.76 797.96,-22.76"/>
</g>
<!-- Coast1&#45;&gt;Place_critter -->
<g id="edge21" class="edge">
<title>Coast1&#45;&gt;Place_critter</title>
<path fill="none" stroke="#555555" stroke-dasharray="1,5" d="M230.95,-171.58C246.33,-162.11 262.18,-152.63 277.35,-144 338.52,-109.22 351.11,-92.73 418.35,-72 553.82,-30.22 723.74,-21.33 798.31,-19.47"/>
<polygon fill="#555555" stroke="#555555" points="798.1,-22.95 808.02,-19.23 797.95,-15.95 798.1,-22.95"/>
</g>
<!-- Coast1&#45;&gt;Place_critter -->
<g id="edge22" class="edge">
<title>Coast1&#45;&gt;Place_critter</title>
<path fill="none" stroke="#555555" stroke-dasharray="1,5" d="M238.92,-177.54C257.64,-166.13 276.99,-154.44 295.35,-144 356.52,-109.22 369.11,-92.73 436.35,-72 565.24,-32.25 725.31,-22.27 798.05,-19.79"/>
<polygon fill="#555555" stroke="#555555" points="798.07,-23.26 807.96,-19.45 797.86,-16.26 798.07,-23.26"/>
</g>
<!-- Coast2&#45;&gt;stranger -->
<g id="edge25" class="edge">
<title>Coast2&#45;&gt;stranger</title>
<path fill="none" stroke="#555555" stroke-dasharray="1,5" d="M315.1,-216.69C318.19,-195.9 326.61,-161.66 349.35,-144 378.11,-121.67 621.44,-101.05 716.51,-93.78"/>
<polygon fill="#555555" stroke="#555555" points="716.64,-97.2 726.34,-92.96 716.11,-90.22 716.64,-97.2"/>
</g>
<!-- Coast2&#45;&gt;Place_critter -->
<g id="edge24" class="edge">
<title>Coast2&#45;&gt;Place_critter</title>
<path fill="none" stroke="#555555" stroke-dasharray="1,5" d="M315.53,-216.78C319.03,-196.4 327.85,-162.89 349.35,-144 417.69,-83.96 697.59,-38.82 799.24,-24.12"/>
<polygon fill="#555555" stroke="#555555" points="799.5,-27.48 808.9,-22.6 798.51,-20.55 799.5,-27.48"/>
</g>
<!-- Coast3&#45;&gt;stranger -->
<g id="edge27" class="edge">
<title>Coast3&#45;&gt;stranger</title>
<path fill="none" stroke="#555555" stroke-dasharray="1,5" d="M578.04,-196.08C625.97,-167.52 689.4,-129.71 725.65,-108.1"/>
<polygon fill="#555555" stroke="#555555" points="726.89,-110.84 733.69,-102.72 723.31,-104.83 726.89,-110.84"/>
</g>
<!-- Coast3&#45;&gt;Place_critter -->
<g id="edge26" class="edge">
<title>Coast3&#45;&gt;Place_critter</title>
<path fill="none" stroke="#555555" stroke-dasharray="1,5" d="M557.75,-194.27C597.51,-159.16 659.04,-108.09 718.35,-72 745.42,-55.52 778.5,-41.11 802.74,-31.49"/>
<polygon fill="#555555" stroke="#555555" points="803.83,-34.43 811.88,-27.54 801.29,-27.91 803.83,-34.43"/>
</g>
<!-- Coast4&#45;&gt;stranger -->
<g id="edge32" class="edge">
<title>Coast4&#45;&gt;stranger</title>
<path fill="none" stroke="#555555" stroke-dasharray="1,5" d="M819.56,-204.75C804.73,-178.89 783.33,-141.55 769.14,-116.8"/>
<polygon fill="#555555" stroke="#555555" points="771.73,-115.28 763.72,-108.34 765.66,-118.76 771.73,-115.28"/>
</g>
<!-- Coast4&#45;&gt;Place_critter -->
<g id="edge28" class="edge">
<title>Coast4&#45;&gt;Place_critter</title>
<path fill="none" stroke="#555555" stroke-dasharray="1,5" d="M821.98,-205.04C813.96,-163 814.14,-85.76 822.52,-45.3"/>
<polygon fill="#555555" stroke="#555555" points="826.14,-46.24 825.17,-35.69 819.35,-44.54 826.14,-46.24"/>
</g>
<!-- Coast4&#45;&gt;Place_critter -->
<g id="edge29" class="edge">
<title>Coast4&#45;&gt;Place_critter</title>
<path fill="none" stroke="#555555" stroke-dasharray="1,5" d="M831.53,-204.59C828.93,-163.04 828.96,-87.75 831.63,-47"/>
<polygon fill="#555555" stroke="#555555" points="835.18,-47.49 832.47,-37.25 828.2,-46.94 835.18,-47.49"/>
</g>
<!-- Coast4&#45;&gt;Place_critter -->
<g id="edge30" class="edge">
<title>Coast4&#45;&gt;Place_critter</title>
<path fill="none" stroke="#555555" stroke-dasharray="1,5" d="M841.17,-204.59C843.78,-163.04 843.74,-87.75 841.07,-47"/>
<polygon fill="#555555" stroke="#555555" points="844.5,-46.94 840.23,-37.25 837.52,-47.49 844.5,-46.94"/>
</g>
<!-- Coast4&#45;&gt;Place_critter -->
<g id="edge31" class="edge">
<title>Coast4&#45;&gt;Place_critter</title>
<path fill="none" stroke="#555555" stroke-dasharray="1,5" d="M850.72,-205.04C858.74,-163 858.56,-85.76 850.18,-45.3"/>
<polygon fill="#555555" stroke="#555555" points="853.35,-44.54 847.53,-35.69 846.56,-46.24 853.35,-44.54"/>
</g>
<!-- Coast5&#45;&gt;stranger -->
<g id="edge34" class="edge">
<title>Coast5&#45;&gt;stranger</title>
<path fill="none" stroke="#555555" stroke-dasharray="1,5" d="M1027.28,-216.66C1023.88,-196.16 1015.16,-162.53 993.35,-144 963.3,-118.47 851.27,-102.11 791.87,-95.03"/>
<polygon fill="#555555" stroke="#555555" points="792.41,-91.46 782.08,-93.78 791.61,-98.41 792.41,-91.46"/>
</g>
<!-- Coast5&#45;&gt;Place_critter -->
<g id="edge33" class="edge">
<title>Coast5&#45;&gt;Place_critter</title>
<path fill="none" stroke="#555555" stroke-dasharray="1,5" d="M1025.31,-216.79C1020.21,-197.63 1010.03,-166.43 993.35,-144 958.01,-96.47 900.36,-56.94 865.63,-35.74"/>
<polygon fill="#555555" stroke="#555555" points="867.85,-32.4 857.47,-30.26 864.25,-38.4 867.85,-32.4"/>
</g>
<!-- hunters&#45;&gt;stranger -->
<g id="edge19" class="edge">
<title>hunters&#45;&gt;stranger</title>
<path fill="none" stroke="#555555" stroke-dasharray="1,5" d="M1099.49,-216.84C1096.28,-196.19 1087.74,-162.09 1065.35,-144 1023.82,-110.44 865.12,-97.25 791.84,-92.88"/>
<polygon fill="#555555" stroke="#555555" points="792.45,-89.35 782.26,-92.27 792.05,-96.34 792.45,-89.35"/>
</g>
<!-- hunters&#45;&gt;Place_critter -->
<g id="edge15" class="edge">
<title>hunters&#45;&gt;Place_critter</title>
<path fill="none" stroke="#555555" stroke-dasharray="1,5" d="M1081.87,-222.06C1067.9,-203.59 1057.91,-167.8 1038.35,-144 991.63,-87.14 911.97,-52.11 866.91,-34.09"/>
<polygon fill="#555555" stroke="#555555" points="868.36,-30.51 857.77,-30.09 865.78,-37.02 868.36,-30.51"/>
</g>
<!-- hunters&#45;&gt;Place_critter -->
<g id="edge16" class="edge">
<title>hunters&#45;&gt;Place_critter</title>
<path fill="none" stroke="#555555" stroke-dasharray="1,5" d="M1091.68,-217.87C1084.43,-198.56 1074.52,-166.11 1056.35,-144 1006.36,-83.16 918.65,-47.31 870.33,-30.56"/>
<polygon fill="#555555" stroke="#555555" points="871.67,-26.98 861.08,-27.09 869.43,-33.61 871.67,-26.98"/>
</g>
<!-- hunters&#45;&gt;Place_critter -->
<g id="edge17" class="edge">
<title>hunters&#45;&gt;Place_critter</title>
<path fill="none" stroke="#555555" stroke-dasharray="1,5" d="M1104.3,-216.83C1102.08,-197.42 1092.2,-165.72 1074.35,-144 1021.06,-79.15 924.92,-42.69 872.48,-27.49"/>
<polygon fill="#555555" stroke="#555555" points="873.56,-23.88 862.98,-24.57 871.68,-30.63 873.56,-23.88"/>
</g>
<!-- hunters&#45;&gt;Place_critter -->
<g id="edge18" class="edge">
<title>hunters&#45;&gt;Place_critter</title>
<path fill="none" stroke="#555555" stroke-dasharray="1,5" d="M1116.74,-219.86C1121.12,-200.87 1111.16,-166.89 1092.35,-144 1035.89,-75.29 931.33,-38.45 873.48,-25.01"/>
<polygon fill="#555555" stroke="#555555" points="874.42,-21.41 863.9,-22.7 872.93,-28.25 874.42,-21.41"/>
</g>
<!-- stranger&#45;&gt;Place_critter -->
<g id="edge14" class="edge">
<title>stranger&#45;&gt;Place_critter</title>
<path fill="none" stroke="#555555" stroke-dasharray="1,5" d="M770.55,-75.17C782.34,-65.1 798.52,-51.29 811.88,-39.89"/>
<polygon fill="#555555" stroke="#555555" points="813.85,-41.96 819.18,-32.8 809.31,-36.63 813.85,-41.96"/>
</g>
</g>
</svg>
<script>window.Codes = {"start":"if (script_action == 15) then begin\n  call map_enter_p_proc;\nend\nelse begin\n  if (script_action == 23) then begin\n    call map_update_p_proc;\n  end\n  else begin\n    if (script_action == 16) then begin\n      call map_exit_p_proc;\n    end\n  end\nend\n","map_enter_p_proc":"dude_pos := random(0, 2);\ndude_rot := random(0, 5);\nif ((global_var(32) != 1) and metarule(14, 0)) then begin\n  Ranger_rerolls := has_trait(0, dude_obj, 47);\n  set_global_var(334, 0);\n  while(Encounter_Num == 0) do begin\n    Encounter_Num := random(1, 6) + random(1, 6) + random(1, 6);\n    if (get_critter_stat(dude_obj, 6) > 8) then begin\n      Encounter_Num := Encounter_Num + 2;\n    end\n    else begin\n      if (get_critter_stat(dude_obj, 6) > 7) then begin\n        Encounter_Num := Encounter_Num + 1;\n      end\n      else begin\n        if (get_critter_stat(dude_obj, 6) < 3) then begin\n          Encounter_Num := Encounter_Num - 1;\n        end\n      end\n    end\n    if ((global_var(123) != 3) and (global_var(158) > 2) and random(0, 1)) then begin\n      Encounter_Num := 7;\n    end\n    else begin\n      if (Encounter_Num <= 3) then begin\n        Encounter_Num := 1;\n      end\n      else begin\n        if (Encounter_Num <= 5) then begin\n          Encounter_Num := 2;\n        end\n        else begin\n          if (Encounter_Num <= 8) then begin\n            Encounter_Num := 3;\n          end\n          else begin\n            if (Encounter_Num <= 12) then begin\n              Encounter_Num := 4;\n            end\n            else begin\n              if (Encounter_Num <= 15) then begin\n                Encounter_Num := 5;\n              end\n              else begin\n                Encounter_Num := 6;\n              end\n            end\n          end\n        end\n      end\n    end\n    if (Ranger_rerolls) then begin\n      if ((Encounter_Num == 1) or (Encounter_Num == 2) or (Encounter_Num == 4) or (Encounter_Num == 5) or (Encounter_Num == 7)) then begin\n        Encounter_Num := 0;\n      end\n      Ranger_rerolls := Ranger_rerolls - 1;\n    end\n  end\n  if (global_var(295) > 0) then begin\n    Encounter_Num := global_var(295);\n    set_global_var(295, 0);\n    debug_msg(\"Coast encounter type: \" + Encounter_Num);\n  end\n  call choose_start;\n  Dude_tile := tile_num(dude_obj);\n  if (Encounter_Num == 1) then begin\n    call Coast1;\n  end\n  else begin\n    if (Encounter_Num == 2) then begin\n      call Coast2;\n    end\n    else begin\n      if (Encounter_Num == 3) then begin\n        call Coast3;\n      end\n      else begin\n        if (Encounter_Num == 4) then begin\n          call Coast4;\n        end\n        else begin\n          if (Encounter_Num == 5) then begin\n            call Coast5;\n          end\n          else begin\n            if (Encounter_Num == 6) then begin\n              call Coast6;\n            end\n            else begin\n              call hunters;\n            end\n          end\n        end\n      end\n    end\n  end\nend\nelse begin\n  if (metarule(14, 0)) then begin\n    if (dude_pos == 0) then begin\n      override_map_start(92, 98, 0, dude_rot);\n    end\n    else begin\n      if (dude_pos == 1) then begin\n        override_map_start(95, 109, 0, dude_rot);\n      end\n      else begin\n        override_map_start(92, 101, 0, dude_rot);\n      end\n    end\n  end\nend\ncall Lighting;\n","map_update_p_proc":"call Lighting;\n","map_exit_p_proc":"[]","stranger":"if (has_trait(0, dude_obj, 46) and (global_var(601) == 0) and random(0, 1)) then begin\n  Critter_type := 16777520;\n  Critter_script := 856;\n  Critter_direction := random(0, 1);\n  Outer_ring := 7;\n  Inner_ring := 4;\n  call Place_critter;\n  Critter_direction := dude_rot + (random(0, 2) - 1);\n  while(Critter_direction < 0) do begin\n    Critter_direction := Critter_direction + 6;\n  end\n  if (Critter_direction > 5) then begin\n    Critter_direction := Critter_direction % 6;\n  end\n  anim(Critter, 1000, Critter_direction);\n  Item := create_object_sid(40, 0, 0, -1);\n  add_mult_objs_to_inven(Critter, Item, 2);\n  Item := create_object_sid(116, 0, 0, -1);\n  add_obj_to_inven(Critter, Item);\n  Item := item_caps_adjust(Critter, random(7, 30) * ((2 * has_trait(0, dude_obj, 20)) + 1));\n  set_global_var(288, 12);\nend\n","Lighting":"variable LVar0 := 0;\nLVar0 := game_time_hour;\nif ((LVar0 >= 600) and (LVar0 < 700)) then begin\n  set_light_level(LVar0 - 600 + 40);\nend\nelse begin\n  if ((LVar0 >= 700) and (LVar0 < 1800)) then begin\n    set_light_level(100);\n  end\n  else begin\n    if ((LVar0 >= 1800) and (LVar0 < 1900)) then begin\n      set_light_level(100 - (LVar0 - 1800));\n    end\n    else begin\n      set_light_level(40);\n    end\n  end\nend\n","Place_critter":"variable LVar0 := 0;\nvariable LVar1 := 0;\nvariable LVar2 := 0;\nCritter := create_object_sid(Critter_type, 0, 0, Critter_script);\nLVar2 := random(Inner_ring, Outer_ring);\nif (restrict_range) then begin\n  LVar0 := random(0, 2);\nend\nelse begin\n  LVar0 := random(0, 5);\nend\nCritter_tile := tile_num_in_direction(Dude_tile, Critter_direction, LVar2);\nLVar1 := tile_num_in_direction(Critter_tile, LVar0, LVar2 / 2);\nif ((tile_distance(Dude_tile, LVar1) <= Outer_ring) and (tile_distance(Dude_tile, LVar1) >= Inner_ring)) then begin\n  Critter_tile := tile_num_in_direction(Critter_tile, LVar0, LVar2 / 2);\nend\ncritter_attempt_placement(Critter, Critter_tile, 0);\n","hunters":"Inner_ring := 8;\nOuter_ring := 5;\ngroup_angle := random(0, 5);\nCritter_direction := group_angle + random(0, 3 * 2) - 3;\nwhile(Critter_direction < 0) do begin\n  Critter_direction := Critter_direction + 6;\nend\nif (Critter_direction > 5) then begin\n  Critter_direction := Critter_direction % 6;\nend\nCritter_type := 16777349;\nCritter_script := 241;\ncall Place_critter;\nanim(Critter, 1000, rotation_to_tile(tile_num(Critter), tile_num(dude_obj)));\nItem := create_object_sid(23, 0, 0, -1);\nadd_obj_to_inven(Critter, Item);\nItem := create_object_sid(36, 0, 0, -1);\nadd_mult_objs_to_inven(Critter, Item, 4 * (has_trait(0, dude_obj, 40) + 1));\nItem := create_object_sid(17, 0, 0, -1);\nadd_obj_to_inven(Critter, Item);\nItem := item_caps_adjust(Critter, random(5, 30) * ((2 * has_trait(0, dude_obj, 20)) + 1));\nItem := create_object_sid(144, 0, 0, -1);\nadd_mult_objs_to_inven(Critter, Item, 2);\nCritter_direction := group_angle + random(0, 3 * 2) - 3;\nwhile(Critter_direction < 0) do begin\n  Critter_direction := Critter_direction + 6;\nend\nif (Critter_direction > 5) then begin\n  Critter_direction := Critter_direction % 6;\nend\nCritter_type := 16777467;\nCritter_script := 383;\ncall Place_critter;\nanim(Critter, 1000, rotation_to_tile(tile_num(Critter), tile_num(dude_obj)));\nItem := create_object_sid(7, 0, 0, -1);\nadd_obj_to_inven(Critter, Item);\nItem := create_object_sid(2, 0, 0, -1);\nadd_obj_to_inven(Critter, Item);\nif (random(0, 2) == 0) then begin\n  Item := item_caps_adjust(Critter, random(5, 30) * ((2 * has_trait(0, dude_obj, 20)) + 1));\nend\nCritter_direction := group_angle + random(0, 3 * 2) - 3;\nwhile(Critter_direction < 0) do begin\n  Critter_direction := Critter_direction + 6;\nend\nif (Critter_direction > 5) then begin\n  Critter_direction := Critter_direction % 6;\nend\nCritter_type := 16777472;\nCritter_script := 383;\ncall Place_critter;\nanim(Critter, 1000, rotation_to_tile(tile_num(Critter), tile_num(dude_obj)));\nItem := create_object_sid(143, 0, 0, -1);\nadd_obj_to_inven(Critter, Item);\nItem := create_object_sid(34, 0, 0, -1);\nadd_mult_objs_to_inven(Critter, Item, 3 * (has_trait(0, dude_obj, 40) + 1));\nItem := create_object_sid(2, 0, 0, -1);\nadd_obj_to_inven(Critter, Item);\nItem := create_object_sid(14, 0, 0, -1);\nadd_mult_objs_to_inven(Critter, Item, 2 * (has_trait(0, dude_obj, 40) + 1));\nif (random(0, 2) == 0) then begin\n  Item := item_caps_adjust(Critter, random(5, 40) * ((2 * has_trait(0, dude_obj, 20)) + 1));\nend\nCritter_direction := group_angle + random(0, 3 * 2) - 3;\nwhile(Critter_direction < 0) do begin\n  Critter_direction := Critter_direction + 6;\nend\nif (Critter_direction > 5) then begin\n  Critter_direction := Critter_direction % 6;\nend\nCritter_type := 16777462;\nCritter_script := 383;\ncall Place_critter;\nanim(Critter, 1000, rotation_to_tile(tile_num(Critter), tile_num(dude_obj)));\nItem := create_object_sid(18, 0, 0, -1);\nadd_obj_to_inven(Critter, Item);\nItem := create_object_sid(31, 0, 0, -1);\nadd_mult_objs_to_inven(Critter, Item, 2 * (has_trait(0, dude_obj, 40) + 1));\nItem := create_object_sid(2, 0, 0, -1);\nadd_obj_to_inven(Critter, Item);\nif (random(0, 2) == 0) then begin\n  Item := item_caps_adjust(Critter, random(5, 30) * ((2 * has_trait(0, dude_obj, 20)) + 1));\nend\ncall stranger;\n","Coast1":"display_msg(message_str(245, 100));\ndisplay_msg(message_str(245, 104));\nOuter_ring := (get_critter_stat(dude_obj, 1) / 3) + 7;\nInner_ring := (get_critter_stat(dude_obj, 1) / 3) + 4;\nTot_Critter_A := random(2, 4);\nCritter_type := 16777261;\nCritter_script := 953;\nif (restrict_range) then begin\n  group_angle := random(0, 1);\nend\nelse begin\n  group_angle := random(0, 5);\nend\nwhile(Tot_Critter_A) do begin\n  Critter_direction := group_angle + (random(0, 1 * 2) - 1);\n  while(Critter_direction < 0) do begin\n    Critter_direction := Critter_direction + 6;\n  end\n  if (Critter_direction > 5) then begin\n    Critter_direction := Critter_direction % 6;\n  end\n  call Place_critter;\n  anim(Critter, 1000, rotation_to_tile(tile_num(Critter), tile_num(dude_obj)));\n  Tot_Critter_A := Tot_Critter_A - 1;\nend\nOuter_ring := 3;\nInner_ring := 2;\nCritter_type := 16777261;\nCritter_script := 953;\nif (restrict_range) then begin\n  Critter_direction := random(0, 1);\nend\nelse begin\n  Critter_direction := group_angle + (random(0, 1 * 2) - 1);\nend\nwhile(Critter_direction < 0) do begin\n  Critter_direction := Critter_direction + 6;\nend\nif (Critter_direction > 5) then begin\n  Critter_direction := Critter_direction % 6;\nend\ncall Place_critter;\nanim(Critter, 1000, rotation_to_tile(tile_num(Critter), tile_num(dude_obj)));\nOuter_ring := 6;\nInner_ring := 3;\nCritter_type := 16777254;\nCritter_script := -1;\nif (restrict_range) then begin\n  Critter_direction := random(0, 1);\nend\nelse begin\n  Critter_direction := random(0, 5);\nend\ncall Place_critter;\nItem := create_object_sid(40, 0, 0, -1);\nadd_obj_to_inven(Critter, Item);\nItem := create_object_sid(34, 0, 0, -1);\nadd_mult_objs_to_inven(Critter, Item, has_trait(0, dude_obj, 40) + 1);\nItem := item_caps_adjust(Critter, random(4, 25) * (1 + (2 * has_trait(0, dude_obj, 20))));\nkill_critter(Critter, 61);\ncall stranger;\n","Coast2":"display_msg(message_str(112, 313));\nTot_Critter_A := random(4, 7);\nif ((game_time_hour >= 700) and (game_time_hour < 1800)) then begin\n  Outer_ring := 6;\n  Inner_ring := 3;\nend\nelse begin\n  Outer_ring := 4;\n  Inner_ring := 3;\nend\nCritter_type := 16777284;\nCritter_script := 735;\nwhile(Tot_Critter_A) do begin\n  Critter_direction := random(1, 2);\n  call Place_critter;\n  anim(Critter, 1000, rotation_to_tile(tile_num(Critter), tile_num(dude_obj)));\n  Tot_Critter_A := Tot_Critter_A - 1;\nend\ncall stranger;\n","Coast3":"display_msg(message_str(245, 101));\nOuter_ring := 4;\nInner_ring := 1;\nTot_Critter_A := random(8, 12);\nCritter_type := 16777264;\nCritter_script := 222;\nif (restrict_range) then begin\n  group_angle := random(0, 1);\nend\nelse begin\n  group_angle := random(0, 5);\nend\nwhile(Tot_Critter_A) do begin\n  if (restrict_range) then begin\n    Critter_direction := group_angle;\n  end\n  else begin\n    Critter_direction := group_angle + random(0, 1 * 2) - 1;\n  end\n  while(Critter_direction < 0) do begin\n    Critter_direction := Critter_direction + 6;\n  end\n  if (Critter_direction > 5) then begin\n    Critter_direction := Critter_direction % 6;\n  end\n  call Place_critter;\n  anim(Critter, 1000, rotation_to_tile(tile_num(Critter), tile_num(dude_obj)));\n  Tot_Critter_A := Tot_Critter_A - 1;\nend\ncall stranger;\n","Coast4":"display_msg(message_str(245, 102));\nset_global_var(290, 0);\nset_global_var(291, 0);\nset_global_var(292, 0);\ngroup_angle := random(0, 2);\nMapX := (Dude_tile % 200) + 8;\nMapY := (Dude_tile / 200) + 6;\nif ((game_time_hour >= 1900) or (game_time_hour < 600)) then begin\n  Critter := create_object_sid(33555044, 0, 0, -1);\n  critter_attempt_placement(Critter, ((MapY + 4) * 200) + (MapX - 2), 0);\n  Critter := create_object_sid(33555044, 0, 0, -1);\n  critter_attempt_placement(Critter, ((MapY + 6) * 200) + (MapX + 4), 0);\n  Critter := create_object_sid(33554640, 0, 0, -1);\n  critter_attempt_placement(Critter, ((MapY + 5) * 200) + (MapX - 4), 0);\n  Critter := create_object_sid(33554640, 0, 0, -1);\n  critter_attempt_placement(Critter, ((MapY + 6) * 200) + (MapX - 7), 0);\n  Critter := create_object_sid(33554641, 0, 0, -1);\n  critter_attempt_placement(Critter, ((MapY + 7) * 200) + MapX, 0);\n  Critter := create_object_sid(33554640, 0, 0, -1);\n  critter_attempt_placement(Critter, ((MapY + 4) * 200) + (MapX + 2), 0);\nend\nelse begin\n  Critter := create_object_sid(33554710, 0, 0, -1);\n  critter_attempt_placement(Critter, ((MapY + 4) * 200) + (MapX - 3), 0);\n  Critter := create_object_sid(33554711, 0, 0, -1);\n  critter_attempt_placement(Critter, ((MapY + 4) * 200) + (MapX - 3), 0);\n  Critter := create_object_sid(33554712, 0, 0, -1);\n  critter_attempt_placement(Critter, ((MapY + 4) * 200) + (MapX - 3), 0);\n  Critter := create_object_sid(33554866, 0, 0, -1);\n  critter_attempt_placement(Critter, ((MapY + 4) * 200) + (MapX - 3), 0);\n  Critter := create_object_sid(33554710, 0, 0, -1);\n  critter_attempt_placement(Critter, ((MapY + 6) * 200) + (MapX + 4), 0);\n  Critter := create_object_sid(33554711, 0, 0, -1);\n  critter_attempt_placement(Critter, ((MapY + 6) * 200) + (MapX + 4), 0);\n  Critter := create_object_sid(33554712, 0, 0, -1);\n  critter_attempt_placement(Critter, ((MapY + 6) * 200) + (MapX + 4), 0);\n  Critter := create_object_sid(33554866, 0, 0, -1);\n  critter_attempt_placement(Critter, ((MapY + 6) * 200) + (MapX + 4), 0);\n  Critter := create_object_sid(33554435, 0, 0, -1);\n  critter_attempt_placement(Critter, ((MapY + 5) * 200) + (MapX + 1), 0);\n  Critter := create_object_sid(33554529, 0, 0, -1);\n  critter_attempt_placement(Critter, ((MapY + 5) * 200) + (MapX + 2), 0);\n  Critter := create_object_sid(33554530, 0, 0, -1);\n  critter_attempt_placement(Critter, ((MapY + 7) * 200) + (MapX + 1), 0);\n  Critter := create_object_sid(33554528, 0, 0, -1);\n  critter_attempt_placement(Critter, ((MapY + 2) * 200) + MapX, 0);\n  Critter := create_object_sid(33554527, 0, 0, -1);\n  critter_attempt_placement(Critter, ((MapY + 5) * 200) + (MapX - 1), 0);\n  Critter := create_object_sid(33554833 + 1, 0, 0, -1);\n  critter_attempt_placement(Critter, ((MapY + 2) * 200) + (MapX - 3), 0);\n  Critter := create_object_sid(33554833 + 1, 0, 0, -1);\n  critter_attempt_placement(Critter, ((MapY + 8) * 200) + (MapX + 5), 0);\n  Critter := create_object_sid(33554833 + 2, 0, 0, -1);\n  critter_attempt_placement(Critter, ((MapY + 4) * 200) + (MapX + 4), 0);\nend\nOuter_ring := 9;\nInner_ring := 6;\nTot_Critter_A := random(3, 4);\nset_global_var(289, Tot_Critter_A);\nCritter_script := 750;\nwhile(Tot_Critter_A) do begin\n  if (random(0, 1)) then begin\n    Critter_type := 16777247;\n    Item := create_object_sid(7, 0, 0, -1);\n    add_obj_to_inven(Critter, Item);\n  end\n  else begin\n    Critter_type := 16777419;\n    Item := create_object_sid(21, 0, 0, -1);\n    add_obj_to_inven(Critter, Item);\n  end\n  Critter_direction := group_angle + (random(0, 2) - 1);\n  while(Critter_direction < 0) do begin\n    Critter_direction := Critter_direction + 6;\n  end\n  if (Critter_direction > 5) then begin\n    Critter_direction := Critter_direction % 6;\n  end\n  call Place_critter;\n  if (group_angle == 0) then begin\n    Critter_direction := 3;\n  end\n  else begin\n    if (group_angle == 1) then begin\n      Critter_direction := 4;\n    end\n    else begin\n      if (group_angle == 2) then begin\n        Critter_direction := 5;\n      end\n      else begin\n        if (group_angle == 3) then begin\n          Critter_direction := 0;\n        end\n        else begin\n          if (group_angle == 4) then begin\n            Critter_direction := 1;\n          end\n          else begin\n            if (group_angle == 5) then begin\n              Critter_direction := 2;\n            end\n          end\n        end\n      end\n    end\n  end\n  if (random(0, 1) == 0) then begin\n    Critter_direction := Critter_direction + (random(0, 2) - 1);\n    while(Critter_direction < 0) do begin\n      Critter_direction := Critter_direction + 6;\n    end\n    if (Critter_direction > 5) then begin\n      Critter_direction := Critter_direction % 6;\n    end\n  end\n  anim(Critter, 1000, Critter_direction);\n  if (random(0, 2) == 0) then begin\n    Item := item_caps_adjust(Critter, random(6, 15) * (1 + (1 * has_trait(0, dude_obj, 20))));\n  end\n  if (random(0, 1)) then begin\n    if (random(0, 2) == 0) then begin\n      Item := create_object_sid(125, 0, 0, -1);\n    end\n    else begin\n      Item := create_object_sid(124, 0, 0, -1);\n    end\n    add_obj_to_inven(Critter, Item);\n  end\n  Tot_Critter_A := Tot_Critter_A - 1;\nend\nvictim := Critter;\nCritter_script := 713;\nif (group_angle == 0) then begin\n  group_angle := 3;\nend\nelse begin\n  if (group_angle == 1) then begin\n    group_angle := 4;\n  end\n  else begin\n    if (group_angle == 2) then begin\n      group_angle := 5;\n    end\n    else begin\n      if (group_angle == 3) then begin\n        group_angle := 0;\n      end\n      else begin\n        if (group_angle == 4) then begin\n          group_angle := 1;\n        end\n        else begin\n          if (group_angle == 5) then begin\n            group_angle := 2;\n          end\n        end\n      end\n    end\n  end\nend\nTot_Critter_A := random(3, 5);\nset_global_var(288, 6);\nwhile(Tot_Critter_A) do begin\n  Critter_direction := random(0, 5);\n  if (Critter_direction == 0) then begin\n    Critter_type := 16777386;\n  end\n  else begin\n    if (Critter_direction == 1) then begin\n      Critter_type := 16777248;\n    end\n    else begin\n      if (Critter_direction == 2) then begin\n        Critter_type := 16777387;\n      end\n      else begin\n        if (Critter_direction == 3) then begin\n          Critter_type := 16777388;\n        end\n        else begin\n          Critter_type := 16777236;\n        end\n      end\n    end\n  end\n  Critter_direction := group_angle + (random(0, 2) - 1);\n  while(Critter_direction < 0) do begin\n    Critter_direction := Critter_direction + 6;\n  end\n  if (Critter_direction > 5) then begin\n    Critter_direction := Critter_direction % 6;\n  end\n  call Place_critter;\n  if (random(0, 2) == 0) then begin\n    Item := item_caps_adjust(Critter, random(2, 4) * (1 + (1 * has_trait(0, dude_obj, 20))));\n  end\n  if (group_angle == 0) then begin\n    Critter_direction := 3;\n  end\n  else begin\n    if (group_angle == 1) then begin\n      Critter_direction := 4;\n    end\n    else begin\n      if (group_angle == 2) then begin\n        Critter_direction := 5;\n      end\n      else begin\n        if (group_angle == 3) then begin\n          Critter_direction := 0;\n        end\n        else begin\n          if (group_angle == 4) then begin\n            Critter_direction := 1;\n          end\n          else begin\n            if (group_angle == 5) then begin\n              Critter_direction := 2;\n            end\n          end\n        end\n      end\n    end\n  end\n  if (random(0, 2) == 0) then begin\n    Critter_direction := Critter_direction + (random(0, 2) - 1);\n    while(Critter_direction < 0) do begin\n      Critter_direction := Critter_direction + 6;\n    end\n    if (Critter_direction > 5) then begin\n      Critter_direction := Critter_direction % 6;\n    end\n  end\n  anim(Critter, 1000, Critter_direction);\n  Tot_Critter_A := Tot_Critter_A - 1;\nend\nCritter_type := 16777258;\nCritter_script := 713;\nset_global_var(288, 68);\nTot_Critter_A := random(1, 2);\nwhile(Tot_Critter_A) do begin\n  Critter_direction := group_angle + (random(0, 2) - 1);\n  while(Critter_direction < 0) do begin\n    Critter_direction := Critter_direction + 6;\n  end\n  if (Critter_direction > 5) then begin\n    Critter_direction := Critter_direction % 6;\n  end\n  call Place_critter;\n  if (random(0, 2) == 0) then begin\n    Item := create_object_sid(163, 0, 0, -1);\n    add_obj_to_inven(Critter, Item);\n  end\n  if (random(0, 2) == 0) then begin\n    Item := item_caps_adjust(Critter, random(2, 4) * (1 + (1 * has_trait(0, dude_obj, 20))));\n  end\n  if (group_angle == 0) then begin\n    Critter_direction := 3;\n  end\n  else begin\n    if (group_angle == 1) then begin\n      Critter_direction := 4;\n    end\n    else begin\n      if (group_angle == 2) then begin\n        Critter_direction := 5;\n      end\n      else begin\n        if (group_angle == 3) then begin\n          Critter_direction := 0;\n        end\n        else begin\n          if (group_angle == 4) then begin\n            Critter_direction := 1;\n          end\n          else begin\n            if (group_angle == 5) then begin\n              Critter_direction := 2;\n            end\n          end\n        end\n      end\n    end\n  end\n  if (random(0, 2) == 0) then begin\n    Critter_direction := Critter_direction + (random(0, 2) - 1);\n    while(Critter_direction < 0) do begin\n      Critter_direction := Critter_direction + 6;\n    end\n    if (Critter_direction > 5) then begin\n      Critter_direction := Critter_direction % 6;\n    end\n  end\n  anim(Critter, 1000, Critter_direction);\n  Tot_Critter_A := Tot_Critter_A - 1;\nend\nCritter_type := 16777252;\nCritter_script := 713;\nset_global_var(288, 8);\nCritter_direction := group_angle + (random(0, 2) - 1);\nwhile(Critter_direction < 0) do begin\n  Critter_direction := Critter_direction + 6;\nend\nif (Critter_direction > 5) then begin\n  Critter_direction := Critter_direction % 6;\nend\ncall Place_critter;\nif (group_angle == 0) then begin\n  Critter_direction := 3;\nend\nelse begin\n  if (group_angle == 1) then begin\n    Critter_direction := 4;\n  end\n  else begin\n    if (group_angle == 2) then begin\n      Critter_direction := 5;\n    end\n    else begin\n      if (group_angle == 3) then begin\n        Critter_direction := 0;\n      end\n      else begin\n        if (group_angle == 4) then begin\n          Critter_direction := 1;\n        end\n        else begin\n          if (group_angle == 5) then begin\n            Critter_direction := 2;\n          end\n        end\n      end\n    end\n  end\nend\nif (random(0, 2) == 0) then begin\n  Critter_direction := Critter_direction + (random(0, 2) - 1);\n  while(Critter_direction < 0) do begin\n    Critter_direction := Critter_direction + 6;\n  end\n  if (Critter_direction > 5) then begin\n    Critter_direction := Critter_direction % 6;\n  end\nend\nanim(Critter, 1000, Critter_direction);\nattack_setup(victim, Critter);\ncall stranger;\n","Coast5":"display_msg(message_str(112, 313));\nOuter_ring := 6;\nInner_ring := 4;\nTot_Critter_A := random(4, 6);\nCritter_type := 16777284;\nCritter_script := 735;\nif (restrict_range) then begin\n  group_angle := random(1, 2);\nend\nelse begin\n  group_angle := random(0, 5);\nend\nwhile(Tot_Critter_A) do begin\n  if (restrict_range) then begin\n    Critter_direction := group_angle;\n  end\n  else begin\n    Critter_direction := group_angle + random(0, 1 * 2) - 1;\n  end\n  while(Critter_direction < 0) do begin\n    Critter_direction := Critter_direction + 6;\n  end\n  if (Critter_direction > 5) then begin\n    Critter_direction := Critter_direction % 6;\n  end\n  call Place_critter;\n  anim(Critter, 1000, rotation_to_tile(tile_num(Critter), tile_num(dude_obj)));\n  Tot_Critter_A := Tot_Critter_A - 1;\nend\ncall stranger;\n","Coast6":"display_msg(message_str(245, 103));\nif ((game_time_hour >= 1900) or (game_time_hour < 600)) then begin\n  Critter := create_object_sid(33554640, 0, 0, -1);\n  critter_attempt_placement(Critter, ((MapY - 4) * 200) + (MapX + 2), 0);\n  Critter := create_object_sid(33554641, 0, 0, -1);\n  critter_attempt_placement(Critter, ((MapY + 2) * 200) + (MapX + 2), 0);\n  Critter := create_object_sid(33555044, 0, 0, -1);\n  critter_attempt_placement(Critter, ((MapY - 1) * 200) + (MapX + 2), 0);\n  Critter := create_object_sid(33554747, 0, 0, -1);\n  critter_attempt_placement(Critter, ((MapY + 6) * 200) + (MapX + 6), 0);\nend\nelse begin\n  Critter := create_object_sid(33554833 + 1, 0, 0, -1);\n  critter_attempt_placement(Critter, ((MapY - 3) * 200) + (MapX + 3), 0);\n  Critter := create_object_sid(33554833 + 1, 0, 0, -1);\n  critter_attempt_placement(Critter, ((MapY + 2) * 200) + (MapX + 2), 0);\n  Critter := create_object_sid(33554710, 0, 0, -1);\n  critter_attempt_placement(Critter, ((MapY - 1) * 200) + (MapX + 2), 0);\n  Critter := create_object_sid(33554711, 0, 0, -1);\n  critter_attempt_placement(Critter, ((MapY - 1) * 200) + (MapX + 2), 0);\n  Critter := create_object_sid(33554712, 0, 0, -1);\n  critter_attempt_placement(Critter, ((MapY - 1) * 200) + (MapX + 2), 0);\n  Critter := create_object_sid(33554866, 0, 0, -1);\n  critter_attempt_placement(Critter, ((MapY - 1) * 200) + (MapX + 2), 0);\n  Critter := create_object_sid(33554747, 0, 0, -1);\n  critter_attempt_placement(Critter, ((MapY + 6) * 200) + (MapX + 6), 0);\nend\nCritter := create_object_sid(16777229, 0, 0, 644);\ncritter_attempt_placement(Critter, ((MapY + 2) * 200) + (MapX + 11), 0);\nanim(Critter, 1000, 3);\nItem := create_object_sid(7, 0, 0, -1);\nadd_obj_to_inven(Critter, Item);\nItem := create_object_sid(109, 0, 0, -1);\nadd_obj_to_inven(Critter, Item);\nItem := create_object_sid(18, 0, 0, -1);\nadd_obj_to_inven(Critter, Item);\nItem := create_object_sid(31, 0, 0, -1);\nadd_mult_objs_to_inven(Critter, Item, 2);\nItem := item_caps_adjust(Critter, random(50, 100) * (has_trait(0, dude_obj, 20) + 1));\nItem := create_object_sid(81, 0, 0, -1);\nadd_mult_objs_to_inven(Critter, Item, 3);\nCritter := create_object_sid(16777258, 0, 0, 645);\ncritter_attempt_placement(Critter, ((MapY + 4) * 200) + (MapX + 10), 0);\nanim(Critter, 1000, 3);\nItem := create_object_sid(7, 0, 0, -1);\nadd_obj_to_inven(Critter, Item);\nItem := create_object_sid(103, 0, 0, -1);\nadd_obj_to_inven(Critter, Item);\nItem := item_caps_adjust(Critter, random(2, 3) * (has_trait(0, dude_obj, 20) + 1));\n","choose_start":"if ((Encounter_Num == 2) or (Encounter_Num == 5)) then begin\n  override_map_start(92, 97, 0, dude_rot);\nend\nelse begin\n  if (Encounter_Num == 6) then begin\n    if (cur_map_index == 20) then begin\n      MapX := 113;\n      MapY := 93;\n      override_map_start(MapX, MapY, 0, dude_rot);\n    end\n    else begin\n      MapX := 103;\n      MapY := 94;\n      override_map_start(MapX, MapY, 0, dude_rot);\n    end\n  end\n  else begin\n    if ((Encounter_Num == 4) or (Encounter_Num == 7)) then begin\n      override_map_start(94, 98, 0, dude_rot);\n    end\n    else begin\n      if (dude_pos == 0) then begin\n        override_map_start(99, 102, 0, dude_rot);\n      end\n      else begin\n        restrict_range := 1;\n        if (dude_pos == 1) then begin\n          override_map_start(108, 94, 0, dude_rot);\n        end\n        else begin\n          override_map_start(111, 104, 0, dude_rot);\n        end\n      end\n    end\n  end\nend\n"}</script></body><script src="../jquery.js"></script><script src="../underscore.js"></script><script>(function() {
  var downAt, hideCode, nodes, positionCode, showCode;

  $('svg').attr('unselectable', 'on').css({
    '-moz-user-select': '-moz-none',
    '-moz-user-select': 'none',
    '-o-user-select': 'none',
    '-khtml-user-select': 'none',
    '-webkit-user-select': 'none',
    '-ms-user-select': 'none',
    'user-select': 'none'
  }).bind('selectstart', function() {
    return false;
  });

  $('<div/>', {
    id: 'thecode'
  }).appendTo('body');

  $('#thecode').css({
    'pointer-events': 'none',
    background: 'white',
    padding: '1em',
    outline: 'solid gray 1px',
    'white-space': 'pre',
    position: 'fixed',
    left: 0,
    top: 0
  });

  showCode = function(name, code, x, y) {
    $('#thecode').show();
    $('#thecode').text("# " + name + "\n" + code);
    return positionCode(x, y);
  };

  hideCode = function() {
    return $('#thecode').hide();
  };

  positionCode = function(x, y) {
    return $('#thecode').css({
      left: x,
      top: y
    });
  };

  nodes = $('.node');

  _.each(nodes, function(node) {
    var nodeName;
    nodeName = $(node).find('title').text();
    $(node).mousemove(function(e) {
      return showCode(nodeName, Codes[nodeName], e.clientX, e.clientY);
    });
    return $(node).mouseleave(function() {
      return hideCode();
    });
  });

  $('svg title').remove();

  downAt = null;

  $('svg').mousedown(function(e) {
    var x, y;
    x = e.pageX;
    y = e.pageY;
    return downAt = {
      x: x,
      y: y
    };
  });

  $('svg').mousemove(function(e) {
    var delta, x, y;
    if (!downAt) {
      return;
    }
    x = e.pageX;
    y = e.pageY;
    delta = {
      x: x - downAt.x,
      y: y - downAt.y
    };
    window.scrollBy(-delta.x, -delta.y);
    return false;
  });

  $('svg').mouseup(function(e) {
    return downAt = null;
  });

  $('svg').mouseleave(function(e) {
    return downAt = null;
  });

}).call(this);
</script></html>