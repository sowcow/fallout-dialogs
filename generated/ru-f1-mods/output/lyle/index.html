<!DOCTYPE html><html><head><title>lyle</title><meta charset="utf-8" /></head><body><svg width="1247pt" height="1141pt"
 viewBox="0.00 0.00 1247.25 1141.02" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 1137.02)">
<title>lyle</title>
<polygon fill="white" stroke="none" points="-4,4 -4,-1137.02 1243.25,-1137.02 1243.25,4 -4,4"/>
<!-- start -->
<g id="node1" class="node">
<title>start</title>
<ellipse fill="#ffffff" stroke="#000000" cx="27" cy="-944.4" rx="27" ry="18"/>
</g>
<!-- critter_p_proc -->
<g id="node2" class="node">
<title>critter_p_proc</title>
<ellipse fill="#ffffff" stroke="#000000" cx="99" cy="-944.4" rx="27" ry="18"/>
</g>
<!-- flee_dude -->
<g id="node3" class="node">
<title>flee_dude</title>
<ellipse fill="#ffffff" stroke="#000000" cx="63" cy="-676.53" rx="27" ry="18"/>
</g>
<!-- critter_p_proc&#45;&gt;flee_dude -->
<g id="edge1" class="edge">
<title>critter_p_proc&#45;&gt;flee_dude</title>
<path fill="none" stroke="#555555" stroke-dasharray="1,5" d="M96.69,-926.37C90.64,-881.64 74.24,-760.54 66.78,-705.47"/>
<polygon fill="#555555" stroke="#555555" points="70.14,-705.21 65.33,-695.77 63.21,-706.15 70.14,-705.21"/>
</g>
<!-- sleeping -->
<g id="node4" class="node">
<title>sleeping</title>
<ellipse fill="#ffffff" stroke="#000000" cx="135" cy="-676.53" rx="27" ry="18"/>
</g>
<!-- critter_p_proc&#45;&gt;sleeping -->
<g id="edge2" class="edge">
<title>critter_p_proc&#45;&gt;sleeping</title>
<path fill="none" stroke="#555555" stroke-dasharray="1,5" d="M101.31,-926.37C107.36,-881.64 123.76,-760.54 131.22,-705.47"/>
<polygon fill="#555555" stroke="#555555" points="134.79,-706.15 132.67,-695.77 127.86,-705.21 134.79,-706.15"/>
</g>
<!-- damage_p_proc -->
<g id="node5" class="node">
<title>damage_p_proc</title>
<ellipse fill="#ffffff" stroke="#000000" cx="171" cy="-944.4" rx="27" ry="18"/>
</g>
<!-- destroy_p_proc -->
<g id="node6" class="node">
<title>destroy_p_proc</title>
<ellipse fill="#ffffff" stroke="#000000" cx="243" cy="-944.4" rx="27" ry="18"/>
</g>
<!-- look_at_p_proc -->
<g id="node7" class="node">
<title>look_at_p_proc</title>
<ellipse fill="#ffffff" stroke="#000000" cx="392" cy="-944.4" rx="103.82" ry="18"/>
<text text-anchor="middle" x="392" y="-939.73" font-family="Times,serif" font-size="14.00">Вы видите Лайла.</text>
</g>
<!-- map_enter_p_proc -->
<g id="node8" class="node">
<title>map_enter_p_proc</title>
<ellipse fill="#ffffff" stroke="#000000" cx="541" cy="-944.4" rx="27" ry="18"/>
</g>
<!-- pickup_p_proc -->
<g id="node9" class="node">
<title>pickup_p_proc</title>
<ellipse fill="#ffffff" stroke="#000000" cx="730" cy="-944.4" rx="143.9" ry="30.05"/>
<text text-anchor="middle" x="730" y="-948.35" font-family="Times,serif" font-size="14.00">Так это ты воруешь воду!</text>
<text text-anchor="middle" x="730" y="-931.1" font-family="Times,serif" font-size="14.00">Предатель!</text>
</g>
<!-- talk_p_proc -->
<g id="node10" class="node">
<title>talk_p_proc</title>
<ellipse fill="#ffffff" stroke="#000000" cx="1049" cy="-944.4" rx="157.15" ry="188.62"/>
<text text-anchor="middle" x="1049" y="-1060.48" font-family="Times,serif" font-size="14.00">Как можно было совершить</text>
<text text-anchor="middle" x="1049" y="-1043.23" font-family="Times,serif" font-size="14.00">такое предательство?</text>
<text text-anchor="middle" x="1049" y="-1025.98" font-family="Times,serif" font-size="14.00">Оставь меня в покое!</text>
<text text-anchor="middle" x="1049" y="-1008.73" font-family="Times,serif" font-size="14.00">&#45;&#45;&#45;</text>
<text text-anchor="middle" x="1049" y="-991.48" font-family="Times,serif" font-size="14.00">Я очень рад, что это</text>
<text text-anchor="middle" x="1049" y="-974.23" font-family="Times,serif" font-size="14.00">суровое испытание наконец</text>
<text text-anchor="middle" x="1049" y="-956.98" font-family="Times,serif" font-size="14.00">окончено. Спасибо.</text>
<text text-anchor="middle" x="1049" y="-939.73" font-family="Times,serif" font-size="14.00">&#45;&#45;&#45;</text>
<text text-anchor="middle" x="1049" y="-922.48" font-family="Times,serif" font-size="14.00">Спасибо, за помощь в</text>
<text text-anchor="middle" x="1049" y="-905.23" font-family="Times,serif" font-size="14.00">поимке вора. Отлично</text>
<text text-anchor="middle" x="1049" y="-887.98" font-family="Times,serif" font-size="14.00">сработано. Но,</text>
<text text-anchor="middle" x="1049" y="-870.73" font-family="Times,serif" font-size="14.00">пожалуйста, поторопись с</text>
<text text-anchor="middle" x="1049" y="-853.48" font-family="Times,serif" font-size="14.00">поисками водяного чипа,</text>
<text text-anchor="middle" x="1049" y="-836.23" font-family="Times,serif" font-size="14.00">иначе это не будет иметь</text>
<text text-anchor="middle" x="1049" y="-818.98" font-family="Times,serif" font-size="14.00">значения!</text>
</g>
<!-- Lyle01 -->
<g id="node11" class="node">
<title>Lyle01</title>
<ellipse fill="#ffffff" stroke="#000000" cx="1049" cy="-676.53" rx="55.86" ry="42.25"/>
<text text-anchor="middle" x="1049" y="-689.11" font-family="Times,serif" font-size="14.00">Привет, </text>
<text text-anchor="middle" x="1049" y="-671.86" font-family="Times,serif" font-size="14.00">&#45;&#45;&#45;</text>
<text text-anchor="middle" x="1049" y="-654.61" font-family="Times,serif" font-size="14.00">.</text>
</g>
<!-- talk_p_proc&#45;&gt;Lyle01 -->
<g id="edge3" class="edge">
<title>talk_p_proc&#45;&gt;Lyle01</title>
<path fill="none" stroke="#555555" stroke-dasharray="1,5" d="M1049,-755.5C1049,-746.55 1049,-737.99 1049,-730.05"/>
<polygon fill="#555555" stroke="#555555" points="1052.5,-730.25 1049,-720.25 1045.5,-730.25 1052.5,-730.25"/>
</g>
<!-- Lyle02 -->
<g id="node12" class="node">
<title>Lyle02</title>
<ellipse fill="#ffffff" stroke="#000000" cx="939" cy="-416.81" rx="151.85" ry="164.23"/>
<text text-anchor="middle" x="939" y="-515.63" font-family="Times,serif" font-size="14.00">Не очень хорошо. С тех</text>
<text text-anchor="middle" x="939" y="-498.38" font-family="Times,serif" font-size="14.00">пор как у меня украли</text>
<text text-anchor="middle" x="939" y="-481.13" font-family="Times,serif" font-size="14.00">один водный паек, все</text>
<text text-anchor="middle" x="939" y="-463.88" font-family="Times,serif" font-size="14.00">пошло хуже и хуже. Все</text>
<text text-anchor="middle" x="939" y="-446.63" font-family="Times,serif" font-size="14.00">начинают бояться, и никто</text>
<text text-anchor="middle" x="939" y="-429.38" font-family="Times,serif" font-size="14.00">не знает, что делать.</text>
<text text-anchor="middle" x="939" y="-412.13" font-family="Times,serif" font-size="14.00">&#45;&#45;&#45;</text>
<text text-anchor="middle" x="939" y="-394.88" font-family="Times,serif" font-size="14.00">Справляемся потихоньку.</text>
<text text-anchor="middle" x="939" y="-377.63" font-family="Times,serif" font-size="14.00">Но, надеюсь, ты поскорее</text>
<text text-anchor="middle" x="939" y="-360.38" font-family="Times,serif" font-size="14.00">найдешь водяной чип. Все</text>
<text text-anchor="middle" x="939" y="-343.13" font-family="Times,serif" font-size="14.00">ужасно нервничают,</text>
<text text-anchor="middle" x="939" y="-325.88" font-family="Times,serif" font-size="14.00">времени осталось не так</text>
<text text-anchor="middle" x="939" y="-308.63" font-family="Times,serif" font-size="14.00">много.</text>
</g>
<!-- Lyle01&#45;&gt;Lyle02 -->
<g id="edge4" class="edge">
<title>Lyle01&#45;&gt;Lyle02</title>
<path fill="none" stroke="#007199" d="M996.92,-660.2C975.55,-651.07 952.95,-637.09 940.5,-616.28 935.76,-608.36 932,-599.93 929.06,-591.18"/>
<polygon fill="#007199" stroke="#007199" points="932.17,-590.37 925.98,-581.77 925.46,-592.35 932.17,-590.37"/>
<text text-anchor="middle" x="1039.25" y="-602.98" font-family="Times,serif" font-size="14.00" fill="#007199">Привет, Лайл. Как ты тут?</text>
</g>
<!-- LyleEnd -->
<g id="node13" class="node">
<title>LyleEnd</title>
<ellipse fill="#ffffff" stroke="#000000" cx="1159" cy="-416.81" rx="27" ry="18"/>
</g>
<!-- Lyle01&#45;&gt;LyleEnd -->
<g id="edge5" class="edge">
<title>Lyle01&#45;&gt;LyleEnd</title>
<path fill="none" stroke="#999400" d="M1096.58,-653.89C1111.95,-644.52 1127.46,-632.04 1137,-616.28 1169.34,-562.85 1167.06,-486.34 1162.87,-445.69"/>
<polygon fill="#999400" stroke="#999400" points="1166.26,-445.52 1161.63,-435.99 1159.3,-446.32 1166.26,-445.52"/>
<text text-anchor="middle" x="1187.75" y="-602.98" font-family="Times,serif" font-size="14.00" fill="#999400">Уаахыннгх!</text>
</g>
<!-- Lyle03 -->
<g id="node14" class="node">
<title>Lyle03</title>
<ellipse fill="#ffffff" stroke="#000000" cx="797" cy="-91.04" rx="115.39" ry="18"/>
<text text-anchor="middle" x="797" y="-86.36" font-family="Times,serif" font-size="14.00">Да, я тоже надеюсь.</text>
</g>
<!-- Lyle02&#45;&gt;Lyle03 -->
<g id="edge6" class="edge">
<title>Lyle02&#45;&gt;Lyle03</title>
<path fill="none" stroke="#680099" d="M874.23,-268.13C849.42,-211.55 823.57,-152.63 808.96,-119.32"/>
<polygon fill="#680099" stroke="#680099" points="811.85,-118.19 804.63,-110.44 805.44,-121 811.85,-118.19"/>
<text text-anchor="middle" x="948.5" y="-221.28" font-family="Times,serif" font-size="14.00" fill="#680099">Да, плохо. Надеюсь, все</text>
<text text-anchor="middle" x="948.5" y="-204.03" font-family="Times,serif" font-size="14.00" fill="#680099">наладится.</text>
</g>
<!-- Lyle04 -->
<g id="node15" class="node">
<title>Lyle04</title>
<ellipse fill="#ffffff" stroke="#000000" cx="1082" cy="-91.04" rx="151.85" ry="91.04"/>
<text text-anchor="middle" x="1082" y="-138.11" font-family="Times,serif" font-size="14.00">Спасибо. Я уверен, ты тут</text>
<text text-anchor="middle" x="1082" y="-120.86" font-family="Times,serif" font-size="14.00">разберешься со всем. И,</text>
<text text-anchor="middle" x="1082" y="-103.61" font-family="Times,serif" font-size="14.00">пожалуйста, поторопись,</text>
<text text-anchor="middle" x="1082" y="-86.36" font-family="Times,serif" font-size="14.00">скорее найди водяной чип.</text>
<text text-anchor="middle" x="1082" y="-69.11" font-family="Times,serif" font-size="14.00">Этого безумия и не было</text>
<text text-anchor="middle" x="1082" y="-51.86" font-family="Times,serif" font-size="14.00">бы, будь у нас рабочий</text>
<text text-anchor="middle" x="1082" y="-34.61" font-family="Times,serif" font-size="14.00">водяной чип!</text>
</g>
<!-- Lyle02&#45;&gt;Lyle04 -->
<g id="edge7" class="edge">
<title>Lyle02&#45;&gt;Lyle04</title>
<path fill="none" stroke="#00993b" d="M1020.89,-277.94C1028.15,-263.52 1035.01,-248.9 1041,-234.58 1046.73,-220.88 1051.97,-206.11 1056.63,-191.46"/>
<polygon fill="#00993b" stroke="#00993b" points="1060.15,-192.93 1059.77,-182.35 1053.46,-190.86 1060.15,-192.93"/>
<text text-anchor="middle" x="1146.62" y="-221.28" font-family="Times,serif" font-size="14.00" fill="#00993b">Посмотрим сейчас, что я</text>
<text text-anchor="middle" x="1146.62" y="-204.03" font-family="Times,serif" font-size="14.00" fill="#00993b">могу сделать.</text>
</g>
</g>
</svg>
<script>window.Codes = {"start":"[]","critter_p_proc":"if (hostile) then begin\n  hostile := 0;\n  attack_complex(dude_obj, 0, 1, 0, 0, 30000, 0, 0);\nend\nelse begin\n  if (local_var(5)) then begin\n    if (tile_distance_objs(self_obj, dude_obj) < 8) then begin\n      call flee_dude;\n    end\n    else begin\n      if (tile_distance(tile_num(dude_obj), home_tile) > 4) then begin\n        if (local_var(4) == 0) then begin\n          animate_move_obj_to_tile(self_obj, home_tile, 0);\n        end\n      end\n    end\n  end\nend\ncall sleeping;\n","damage_p_proc":"if (source_obj == dude_obj) then begin\n  set_local_var(5, 1);\nend\n","destroy_p_proc":"if (source_obj == dude_obj) then begin\n  if (((global_var(160) + global_var(159)) >= 25) and ((global_var(159) > (2 * global_var(160))) or (global_var(156) == 1))) then begin\n    set_global_var(156, 1);\n    set_global_var(157, 0);\n  end\n  if (((global_var(160) + global_var(159)) >= 25) and ((global_var(160) > (3 * global_var(159))) or (global_var(157) == 1))) then begin\n    set_global_var(157, 1);\n    set_global_var(156, 0);\n  end\n  set_global_var(159, global_var(159) + 1);\n  if ((global_var(159) % 2) == 0) then begin\n    set_global_var(155, global_var(155) - 1);\n  end\nend\nif (source_obj == dude_obj) then begin\n  set_global_var(261, 1);\nend\n","look_at_p_proc":"script_overrides;\ndisplay_msg(message_str(507, 100));\n","map_enter_p_proc":"critter_add_trait(self_obj, 1, 6, 1);\nsleep_time := 1920;\nwake_time := 710;\nhome_tile := 24911;\nsleep_tile := home_tile;\n","pickup_p_proc":"if ((game_time / (10 * 60 * 60 * 24)) >= 30) then begin\n  float_msg(self_obj, message_str(507, 101), 0);\nend\nset_global_var(261, 1);\nhostile := 1;\n","talk_p_proc":"if (local_var(4) == 1) then begin\n  float_msg(self_obj, message_str(185, 166), 0);\nend\nelse begin\n  if (global_var(261) or local_var(5)) then begin\n    float_msg(self_obj, message_str(507, 114), 0);\n  end\n  else begin\n    if (global_var(101) == 2) then begin\n      float_msg(self_obj, message_str(507, 102), 0);\n    end\n    else begin\n      if (global_var(188) == 2) then begin\n        float_msg(self_obj, message_str(507, 113), 0);\n      end\n      else begin\n        start_gdialog(507, self_obj, 4, -1, -1);\n        gsay_start;\n        call Lyle01;\n        gsay_end;\n        end_dialogue;\n      end\n    end\n  end\nend\n","Lyle01":"gsay_reply(507, message_str(507, 103) + proto_data(obj_pid(dude_obj), 1) + message_str(507, 104));\ngiq_option(4, 507, 105, Lyle02, 50);\ngiq_option(-3, 507, 107, LyleEnd, 50);\n","Lyle02":"if ((game_time / (10 * 60 * 60 * 24)) < 30) then begin\n  gsay_message(507, 106, 50);\nend\nelse begin\n  gsay_reply(507, 108);\n  giq_option(4, 507, 109, Lyle03, 50);\n  giq_option(4, 507, 110, Lyle04, 49);\nend\n","Lyle03":"gsay_message(507, 111, 50);\n","Lyle04":"set_global_var(188, 1);\ngsay_message(507, 112, 49);\n","LyleEnd":"[]","flee_dude":"variable LVar0 := 0;\nvariable LVar1 := 0;\nvariable LVar2 := 0;\nwhile(LVar1 < 5) do begin\n  if (tile_distance(tile_num(dude_obj), tile_num_in_direction(tile_num(self_obj), LVar1, 3)) > LVar2) then begin\n    LVar0 := tile_num_in_direction(tile_num(self_obj), LVar1, 3);\n    LVar2 := tile_distance(tile_num(dude_obj), LVar0);\n  end\n  LVar1 := LVar1 + 1;\nend\nanimate_move_obj_to_tile(self_obj, LVar0, 1);\n","sleeping":"if (local_var(4) == 1) then begin\n  if (not(night_person) and (game_time_hour >= wake_time) and (game_time_hour < sleep_time) or (night_person and ((game_time_hour >= wake_time) or (game_time_hour < sleep_time)))) then begin\n    if (((game_time_hour - wake_time) < 10) and ((game_time_hour - wake_time) > 0)) then begin\n      if (tile_num(self_obj) != home_tile) then begin\n        animate_move_obj_to_tile(self_obj, home_tile, 0);\n      end\n      else begin\n        set_local_var(4, 0);\n      end\n    end\n    else begin\n      move_to(self_obj, home_tile, elevation(self_obj));\n      if (tile_num(self_obj) == home_tile) then begin\n        set_local_var(4, 0);\n      end\n    end\n  end\nend\nelse begin\n  if (night_person and (game_time_hour >= sleep_time) and (game_time_hour < wake_time) or (not(night_person) and ((game_time_hour >= sleep_time) or (game_time_hour < wake_time)))) then begin\n    if (((game_time_hour - sleep_time) < 10) and ((game_time_hour - sleep_time) > 0)) then begin\n      if (tile_num(self_obj) != sleep_tile) then begin\n        animate_move_obj_to_tile(self_obj, self_obj, 0);\n      end\n      else begin\n        set_local_var(4, 1);\n      end\n    end\n    else begin\n      if (tile_num(self_obj) != sleep_tile) then begin\n        move_to(self_obj, sleep_tile, elevation(self_obj));\n      end\n      else begin\n        set_local_var(4, 1);\n      end\n    end\n  end\nend\n"}</script></body><script src="../jquery.js"></script><script src="../underscore.js"></script><script>(function() {
  var downAt, hideCode, nodes, positionCode, showCode;

  $('svg').attr('unselectable', 'on').css({
    '-moz-user-select': '-moz-none',
    '-moz-user-select': 'none',
    '-o-user-select': 'none',
    '-khtml-user-select': 'none',
    '-webkit-user-select': 'none',
    '-ms-user-select': 'none',
    'user-select': 'none'
  }).bind('selectstart', function() {
    return false;
  });

  $('<div/>', {
    id: 'thecode'
  }).appendTo('body');

  $('#thecode').css({
    'pointer-events': 'none',
    background: 'white',
    padding: '1em',
    outline: 'solid gray 1px',
    'white-space': 'pre',
    position: 'fixed',
    left: 0,
    top: 0
  });

  showCode = function(name, code, x, y) {
    $('#thecode').show();
    $('#thecode').text("# " + name + "\n" + code);
    return positionCode(x, y);
  };

  hideCode = function() {
    return $('#thecode').hide();
  };

  positionCode = function(x, y) {
    return $('#thecode').css({
      left: x,
      top: y
    });
  };

  nodes = $('.node');

  _.each(nodes, function(node) {
    var nodeName;
    nodeName = $(node).find('title').text();
    $(node).mousemove(function(e) {
      return showCode(nodeName, Codes[nodeName], e.clientX, e.clientY);
    });
    return $(node).mouseleave(function() {
      return hideCode();
    });
  });

  $('svg title').remove();

  downAt = null;

  $('svg').mousedown(function(e) {
    var x, y;
    x = e.pageX;
    y = e.pageY;
    return downAt = {
      x: x,
      y: y
    };
  });

  $('svg').mousemove(function(e) {
    var delta, x, y;
    if (!downAt) {
      return;
    }
    x = e.pageX;
    y = e.pageY;
    delta = {
      x: x - downAt.x,
      y: y - downAt.y
    };
    window.scrollBy(-delta.x, -delta.y);
    return false;
  });

  $('svg').mouseup(function(e) {
    return downAt = null;
  });

  $('svg').mouseleave(function(e) {
    return downAt = null;
  });

}).call(this);
</script></html>