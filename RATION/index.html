<!DOCTYPE html><html><head><title>RATION</title><meta charset="utf-8" /></head><body><svg width="1286pt" height="188pt"
 viewBox="0.00 0.00 1286.00 188.00" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 184)">
<title>RATION</title>
<polygon fill="white" stroke="none" points="-4,4 -4,-184 1282,-184 1282,4 -4,4"/>
<!-- start -->
<g id="node1" class="node"><title>start</title>
<ellipse fill="#ffffff" stroke="#000000" cx="27" cy="-162" rx="27" ry="18"/>
</g>
<!-- do_dialogue -->
<g id="node2" class="node"><title>do_dialogue</title>
<ellipse fill="#ffffff" stroke="#000000" cx="27" cy="-90" rx="27" ry="18"/>
</g>
<!-- start&#45;&gt;do_dialogue -->
<g id="edge1" class="edge"><title>start&#45;&gt;do_dialogue</title>
<path fill="none" stroke="#555555" stroke-dasharray="1,5" d="M27,-143.697C27,-135.983 27,-126.712 27,-118.112"/>
<polygon fill="#555555" stroke="#555555" points="30.5001,-118.104 27,-108.104 23.5001,-118.104 30.5001,-118.104"/>
</g>
<!-- ration01 -->
<g id="node3" class="node"><title>ration01</title>
<ellipse fill="#ffffff" stroke="#000000" cx="27" cy="-18" rx="27" ry="18"/>
</g>
<!-- do_dialogue&#45;&gt;ration01 -->
<g id="edge2" class="edge"><title>do_dialogue&#45;&gt;ration01</title>
<path fill="none" stroke="#555555" stroke-dasharray="1,5" d="M27,-71.6966C27,-63.9827 27,-54.7125 27,-46.1124"/>
<polygon fill="#555555" stroke="#555555" points="30.5001,-46.1043 27,-36.1043 23.5001,-46.1044 30.5001,-46.1043"/>
</g>
<!-- ration02 -->
<g id="node4" class="node"><title>ration02</title>
<ellipse fill="#ffffff" stroke="#000000" cx="99" cy="-162" rx="27" ry="18"/>
</g>
<!-- ration03 -->
<g id="node5" class="node"><title>ration03</title>
<ellipse fill="#ffffff" stroke="#000000" cx="171" cy="-162" rx="27" ry="18"/>
</g>
<!-- ration03a -->
<g id="node6" class="node"><title>ration03a</title>
<ellipse fill="#ffffff" stroke="#000000" cx="99" cy="-90" rx="27" ry="18"/>
</g>
<!-- ration03&#45;&gt;ration03a -->
<g id="edge3" class="edge"><title>ration03&#45;&gt;ration03a</title>
<path fill="none" stroke="#555555" stroke-dasharray="1,5" d="M156.43,-146.834C146.25,-136.938 132.476,-123.546 120.969,-112.359"/>
<polygon fill="#555555" stroke="#555555" points="123.405,-109.846 113.796,-105.385 118.526,-114.865 123.405,-109.846"/>
</g>
<!-- ration03b -->
<g id="node7" class="node"><title>ration03b</title>
<ellipse fill="#ffffff" stroke="#000000" cx="171" cy="-90" rx="27" ry="18"/>
</g>
<!-- ration03&#45;&gt;ration03b -->
<g id="edge4" class="edge"><title>ration03&#45;&gt;ration03b</title>
<path fill="none" stroke="#555555" stroke-dasharray="1,5" d="M171,-143.697C171,-135.983 171,-126.712 171,-118.112"/>
<polygon fill="#555555" stroke="#555555" points="174.5,-118.104 171,-108.104 167.5,-118.104 174.5,-118.104"/>
</g>
<!-- ration03c -->
<g id="node8" class="node"><title>ration03c</title>
<ellipse fill="#ffffff" stroke="#000000" cx="243" cy="-90" rx="27" ry="18"/>
</g>
<!-- ration03&#45;&gt;ration03c -->
<g id="edge5" class="edge"><title>ration03&#45;&gt;ration03c</title>
<path fill="none" stroke="#555555" stroke-dasharray="1,5" d="M185.57,-146.834C195.75,-136.938 209.524,-123.546 221.031,-112.359"/>
<polygon fill="#555555" stroke="#555555" points="223.474,-114.865 228.204,-105.385 218.595,-109.846 223.474,-114.865"/>
</g>
<!-- ration04 -->
<g id="node9" class="node"><title>ration04</title>
<ellipse fill="#ffffff" stroke="#000000" cx="243" cy="-162" rx="27" ry="18"/>
</g>
<!-- ration05 -->
<g id="node10" class="node"><title>ration05</title>
<ellipse fill="#ffffff" stroke="#000000" cx="315" cy="-162" rx="27" ry="18"/>
</g>
<!-- ration06 -->
<g id="node11" class="node"><title>ration06</title>
<ellipse fill="#ffffff" stroke="#000000" cx="387" cy="-162" rx="27" ry="18"/>
</g>
<!-- ration07 -->
<g id="node12" class="node"><title>ration07</title>
<ellipse fill="#ffffff" stroke="#000000" cx="459" cy="-162" rx="27" ry="18"/>
</g>
<!-- rationend -->
<g id="node13" class="node"><title>rationend</title>
<ellipse fill="#ffffff" stroke="#000000" cx="531" cy="-162" rx="27" ry="18"/>
</g>
<!-- get_reaction -->
<g id="node14" class="node"><title>get_reaction</title>
<ellipse fill="#ffffff" stroke="#000000" cx="603" cy="-162" rx="27" ry="18"/>
</g>
<!-- ReactToLevel -->
<g id="node15" class="node"><title>ReactToLevel</title>
<ellipse fill="#ffffff" stroke="#000000" cx="747" cy="-90" rx="27" ry="18"/>
</g>
<!-- get_reaction&#45;&gt;ReactToLevel -->
<g id="edge6" class="edge"><title>get_reaction&#45;&gt;ReactToLevel</title>
<path fill="none" stroke="#555555" stroke-dasharray="1,5" d="M624.248,-150.671C648.602,-138.832 688.719,-119.331 716.428,-105.862"/>
<polygon fill="#555555" stroke="#555555" points="718.202,-108.891 725.665,-101.371 715.141,-102.595 718.202,-108.891"/>
</g>
<!-- LevelToReact -->
<g id="node16" class="node"><title>LevelToReact</title>
<ellipse fill="#ffffff" stroke="#000000" cx="999" cy="-90" rx="27" ry="18"/>
</g>
<!-- UpReact -->
<g id="node17" class="node"><title>UpReact</title>
<ellipse fill="#ffffff" stroke="#000000" cx="675" cy="-162" rx="27" ry="18"/>
</g>
<!-- UpReact&#45;&gt;ReactToLevel -->
<g id="edge7" class="edge"><title>UpReact&#45;&gt;ReactToLevel</title>
<path fill="none" stroke="#555555" stroke-dasharray="1,5" d="M689.57,-146.834C699.75,-136.938 713.524,-123.546 725.031,-112.359"/>
<polygon fill="#555555" stroke="#555555" points="727.474,-114.865 732.204,-105.385 722.595,-109.846 727.474,-114.865"/>
</g>
<!-- DownReact -->
<g id="node18" class="node"><title>DownReact</title>
<ellipse fill="#ffffff" stroke="#000000" cx="747" cy="-162" rx="27" ry="18"/>
</g>
<!-- DownReact&#45;&gt;ReactToLevel -->
<g id="edge8" class="edge"><title>DownReact&#45;&gt;ReactToLevel</title>
<path fill="none" stroke="#555555" stroke-dasharray="1,5" d="M747,-143.697C747,-135.983 747,-126.712 747,-118.112"/>
<polygon fill="#555555" stroke="#555555" points="750.5,-118.104 747,-108.104 743.5,-118.104 750.5,-118.104"/>
</g>
<!-- BottomReact -->
<g id="node19" class="node"><title>BottomReact</title>
<ellipse fill="#ffffff" stroke="#000000" cx="1107" cy="-162" rx="27" ry="18"/>
</g>
<!-- TopReact -->
<g id="node20" class="node"><title>TopReact</title>
<ellipse fill="#ffffff" stroke="#000000" cx="1179" cy="-162" rx="27" ry="18"/>
</g>
<!-- BigUpReact -->
<g id="node21" class="node"><title>BigUpReact</title>
<ellipse fill="#ffffff" stroke="#000000" cx="819" cy="-162" rx="27" ry="18"/>
</g>
<!-- BigUpReact&#45;&gt;ReactToLevel -->
<g id="edge9" class="edge"><title>BigUpReact&#45;&gt;ReactToLevel</title>
<path fill="none" stroke="#555555" stroke-dasharray="1,5" d="M804.43,-146.834C794.25,-136.938 780.476,-123.546 768.969,-112.359"/>
<polygon fill="#555555" stroke="#555555" points="771.405,-109.846 761.796,-105.385 766.526,-114.865 771.405,-109.846"/>
</g>
<!-- BigDownReact -->
<g id="node22" class="node"><title>BigDownReact</title>
<ellipse fill="#ffffff" stroke="#000000" cx="891" cy="-162" rx="27" ry="18"/>
</g>
<!-- BigDownReact&#45;&gt;ReactToLevel -->
<g id="edge10" class="edge"><title>BigDownReact&#45;&gt;ReactToLevel</title>
<path fill="none" stroke="#555555" stroke-dasharray="1,5" d="M869.752,-150.671C845.398,-138.832 805.281,-119.331 777.572,-105.862"/>
<polygon fill="#555555" stroke="#555555" points="778.859,-102.595 768.335,-101.371 775.798,-108.891 778.859,-102.595"/>
</g>
<!-- UpReactLevel -->
<g id="node23" class="node"><title>UpReactLevel</title>
<ellipse fill="#ffffff" stroke="#000000" cx="963" cy="-162" rx="27" ry="18"/>
</g>
<!-- UpReactLevel&#45;&gt;LevelToReact -->
<g id="edge11" class="edge"><title>UpReactLevel&#45;&gt;LevelToReact</title>
<path fill="none" stroke="#555555" stroke-dasharray="1,5" d="M971.35,-144.765C975.712,-136.283 981.147,-125.714 986.041,-116.197"/>
<polygon fill="#555555" stroke="#555555" points="989.235,-117.641 990.696,-107.147 983.01,-114.439 989.235,-117.641"/>
</g>
<!-- DownReactLevel -->
<g id="node24" class="node"><title>DownReactLevel</title>
<ellipse fill="#ffffff" stroke="#000000" cx="1035" cy="-162" rx="27" ry="18"/>
</g>
<!-- DownReactLevel&#45;&gt;LevelToReact -->
<g id="edge12" class="edge"><title>DownReactLevel&#45;&gt;LevelToReact</title>
<path fill="none" stroke="#555555" stroke-dasharray="1,5" d="M1026.65,-144.765C1022.29,-136.283 1016.85,-125.714 1011.96,-116.197"/>
<polygon fill="#555555" stroke="#555555" points="1014.99,-114.439 1007.3,-107.147 1008.77,-117.641 1014.99,-114.439"/>
</g>
<!-- Goodbyes -->
<g id="node25" class="node"><title>Goodbyes</title>
<ellipse fill="#ffffff" stroke="#000000" cx="1251" cy="-162" rx="27" ry="18"/>
</g>
</g>
</svg>
<script>window.Codes = {"start":"if ((script_action == 11) and (crying == 0)) then begin\n  call do_dialogue;\nend\nelse begin\n  if (script_action == 4) then begin\n    hostile := 1;\n  end\n  else begin\n    if (script_action == 12) then begin\n      if (hostile) then begin\n        hostile := 0;\n        attack_complex(dude_obj, 0, 1, 0, 0, 30000, 0, 0);\n      end\n    end\n    else begin\n      if ((script_action == 21) or (script_action == 3)) then begin\n        script_overrides;\n        if (crying == 1) then begin\n          PICK := myname;\n          if (PICK == 1) then begin\n            display_msg(\"You see Cindy crying.\");\n          end\n          else begin\n            if (PICK > 2) then begin\n              display_msg(\"You see Lisa crying.\");\n            end\n            else begin\n              if (PICK > 3) then begin\n                display_msg(\"You see Sandy crying.\");\n              end\n              else begin\n                if (PICK > 4) then begin\n                  display_msg(\"You see Mary crying.\");\n                end\n                else begin\n                  if (PICK > 5) then begin\n                    display_msg(\"You see Stacy crying.\");\n                  end\n                  else begin\n                    if (PICK > 6) then begin\n                      display_msg(\"You see Susan crying.\");\n                    end\n                  end\n                end\n              end\n            end\n          end\n        end\n        else begin\n          PICK := myname;\n          if (PICK == 1) then begin\n            display_msg(\"You see Cindy.\");\n          end\n          else begin\n            if (PICK > 2) then begin\n              display_msg(\"You see Lisa.\");\n            end\n            else begin\n              if (PICK > 3) then begin\n                display_msg(\"You see Sandy.\");\n              end\n              else begin\n                if (PICK > 4) then begin\n                  display_msg(\"You see Mary.\");\n                end\n                else begin\n                  if (PICK > 5) then begin\n                    display_msg(\"You see Stacy.\");\n                  end\n                  else begin\n                    if (PICK > 6) then begin\n                      display_msg(\"You see Susan.\");\n                    end\n                  end\n                end\n              end\n            end\n          end\n        end\n      end\n      else begin\n        if (script_action == 18) then begin\n          if (source_obj == dude_obj) then begin\n            set_global_var(159, global_var(159) + 1);\n          end\n        end\n      end\n    end\n  end\nend\n","do_dialogue":"start_gdialog(168, self_obj, 4, -1, -1);\nsayStart;\ncall ration01;\nsayEnd;\nend_dialogue;\n","ration01":"sayReply(0, \"Hello, \" + proto_data(obj_pid(dude_obj), 1) + \". Have you found the water chip yet?\");\nif (get_critter_stat(dude_obj, 4) >= 4) then begin\n  sayOption(\"No, not yet.\", ration03);\nend\nif (get_critter_stat(dude_obj, 4) >= 4) then begin\n  sayOption(\"I will. How are you doing?\", ration04);\nend\nif (-get_critter_stat(dude_obj, 4) >= -3) then begin\n  sayOption(\"Urug!\", ration02);\nend\nif (get_critter_stat(dude_obj, 4) >= 0) then begin\n  sayOption(\"\", rationend);\nend\n","ration02":"crying := 1;\nsayReply(0, \"Oh . . . you don't understand me. I guess we really don't have much hope after all. Excuse me while I cry.\");\nif (-get_critter_stat(dude_obj, 4) >= -3) then begin\n  sayOption(\"Ugg!\", rationend);\nend\nif (get_critter_stat(dude_obj, 4) >= 0) then begin\n  sayOption(\"\", rationend);\nend\n","ration03":"PICK := random(1, 3);\nif (PICK == 1) then begin\n  call ration03a;\nend\nelse begin\n  if (PICK > 2) then begin\n    call ration03b;\n  end\n  else begin\n    if (PICK > 3) then begin\n      call ration03c;\n    end\n  end\nend\n","ration03a":"sayReply(0, \"Please find it before my baby dies of thirst.\");\nsayOption(\"[Done]\", rationend);\nif (get_critter_stat(dude_obj, 4) >= 0) then begin\n  sayOption(\"\", rationend);\nend\n","ration03b":"sayReply(0, \"You've got to find it! Don't let us die like this!\");\nsayOption(\"[Done]\", rationend);\nif (get_critter_stat(dude_obj, 4) >= 0) then begin\n  sayOption(\"\", rationend);\nend\n","ration03c":"sayReply(0, \"Keep trying. I believe in you. I know you will do everything you can to save us.\");\nsayOption(\"[Done]\", rationend);\nif (get_critter_stat(dude_obj, 4) >= 0) then begin\n  sayOption(\"\", rationend);\nend\n","ration04":"sayReply(0, \"I am afraid of what is happening. Someone has been stealing water and now everyone is on edge.\");\nif (get_critter_stat(dude_obj, 4) >= 4) then begin\n  sayOption(\"Who would do such a thing?\", ration05);\nend\nif (get_critter_stat(dude_obj, 4) >= 4) then begin\n  sayOption(\"What happened?\", ration06);\nend\n","ration05":"sayReply(0, \"Some people have been accused and fights have broken out over it but nobody really knows.\");\nif (get_critter_stat(dude_obj, 4) >= 4) then begin\n  sayOption(\"Ok. Thanks.\", rationend);\nend\nif (get_critter_stat(dude_obj, 4) >= 0) then begin\n  sayOption(\"\", rationend);\nend\n","ration06":"sayReply(0, \"Some people reported that their water had been stolen. They weren't given more water but some friends shared with them. After this everybody got very paranoid and started guarding their water. A few days later someone knocked the guard out in the ration supply area and stole water.\");\nif (get_critter_stat(dude_obj, 4) >= 4) then begin\n  sayOption(\"That is terrible! What can I do?\", ration07);\nend\nif (get_critter_stat(dude_obj, 4) >= 0) then begin\n  sayOption(\"\", rationend);\nend\n","ration07":"sayReply(0, \"Maybe you can stop whoever is doing this.\");\nif (get_critter_stat(dude_obj, 4) >= 4) then begin\n  sayOption(\"I'll take a look around.\", rationend);\nend\nif (get_critter_stat(dude_obj, 4) >= 0) then begin\n  sayOption(\"\", rationend);\nend\n","rationend":"[]","get_reaction":"if (not(got_reaction)) then begin\n  got_reaction := 1;\n  reaction := reaction + ((get_critter_stat(dude_obj, 3) - 5) * 5);\n  reaction := reaction + (10 * has_trait(0, dude_obj, 10));\n  if (has_trait(0, dude_obj, 39)) then begin\n    if (global_var(155) > 0) then begin\n      reaction := reaction + global_var(155);\n    end\n    else begin\n      reaction := reaction - global_var(155);\n    end\n  end\n  else begin\n    if (badguy) then begin\n      reaction := reaction - global_var(155);\n    end\n    else begin\n      reaction := reaction + global_var(155);\n    end\n  end\n  if (global_var(158) > 2) then begin\n    reaction := reaction - 30;\n  end\n  if ((global_var(160) > (3 * global_var(159))) or (global_var(157) == 1)) then begin\n    reaction := reaction + 20;\n  end\n  if ((global_var(159) > (2 * global_var(160))) or (global_var(156) == 1)) then begin\n    reaction := reaction - 20;\n  end\n  call ReactToLevel;\nend\n","ReactToLevel":"if (reaction < 24) then begin\n  reaction_level := 1;\nend\nelse begin\n  if (reaction < 74) then begin\n    reaction_level := 2;\n  end\n  else begin\n    reaction_level := 3;\n  end\nend\n","LevelToReact":"if (reaction_level == 1) then begin\n  reaction := random(1, 24);\nend\nelse begin\n  if (reaction_level == 2) then begin\n    reaction := random(25, 74);\n  end\n  else begin\n    reaction := random(75, 100);\n  end\nend\n","UpReact":"reaction := reaction + 10;\ncall ReactToLevel;\n","DownReact":"reaction := reaction - 10;\ncall ReactToLevel;\n","BottomReact":"reaction_level := 1;\nreaction := 1;\n","TopReact":"reaction := 100;\nreaction_level := 3;\n","BigUpReact":"reaction := reaction + 25;\ncall ReactToLevel;\n","BigDownReact":"reaction := reaction - 25;\ncall ReactToLevel;\n","UpReactLevel":"reaction_level := reaction_level + 1;\nif (reaction_level > 3) then begin\n  reaction_level := 3;\nend\ncall LevelToReact;\n","DownReactLevel":"reaction_level := reaction_level - 1;\nif (reaction_level < 1) then begin\n  reaction_level := 1;\nend\ncall LevelToReact;\n","Goodbyes":"variable LVar0 := 0;\nLVar0 := random(1, 6);\nif (LVar0 == 1) then begin\n  exit_line := \"Thanks, bye.\";\nend\nif (LVar0 == 2) then begin\n  exit_line := \"Okay, thanks.\";\nend\nif (LVar0 == 3) then begin\n  exit_line := \"Hmm. Bye.\";\nend\nif (LVar0 == 4) then begin\n  exit_line := \"See ya.\";\nend\nif (LVar0 == 5) then begin\n  exit_line := \"Thanks.\";\nend\nif (LVar0 == 6) then begin\n  exit_line := \"Okay, bye.\";\nend\n"}</script></body><script src="../jquery.js"></script><script src="../underscore.js"></script><script type="text/javascript">(function() {
  var downAt, hideCode, nodes, positionCode, showCode;

  $('svg').attr('unselectable', 'on').css({
    '-moz-user-select': '-moz-none',
    '-moz-user-select': 'none',
    '-o-user-select': 'none',
    '-khtml-user-select': 'none',
    '-webkit-user-select': 'none',
    '-ms-user-select': 'none',
    'user-select': 'none'
  }).bind('selectstart', function() {
    return false;
  });

  $('<div/>', {
    id: 'thecode'
  }).appendTo('body');

  $('#thecode').css({
    'pointer-events': 'none',
    background: 'white',
    padding: '1em',
    outline: 'solid gray 1px',
    'white-space': 'pre',
    position: 'fixed',
    left: 0,
    top: 0
  });

  showCode = function(code, x, y) {
    $('#thecode').show();
    $('#thecode').text(code);
    return positionCode(x, y);
  };

  hideCode = function() {
    return $('#thecode').hide();
  };

  positionCode = function(x, y) {
    return $('#thecode').css({
      left: x,
      top: y
    });
  };

  nodes = $('.node');

  _.each(nodes, function(node) {
    var nodeName;
    nodeName = $(node).find('title').text();
    $(node).mousemove(function(e) {
      return showCode(Codes[nodeName], e.clientX, e.clientY);
    });
    return $(node).mouseleave(function() {
      return hideCode();
    });
  });

  $('svg title').remove();

  downAt = null;

  $('svg').mousedown(function(e) {
    var x, y;
    x = e.pageX;
    y = e.pageY;
    return downAt = {
      x: x,
      y: y
    };
  });

  $('svg').mousemove(function(e) {
    var delta, x, y;
    if (!downAt) {
      return;
    }
    x = e.pageX;
    y = e.pageY;
    delta = {
      x: x - downAt.x,
      y: y - downAt.y
    };
    window.scrollBy(-delta.x, -delta.y);
    return false;
  });

  $('svg').mouseup(function(e) {
    return downAt = null;
  });

  $('svg').mouseleave(function(e) {
    return downAt = null;
  });

}).call(this);
</script></html>