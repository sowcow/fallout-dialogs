<!DOCTYPE html><html><head><title>ncPrzFtr</title><meta charset="utf-8" /></head><body><svg width="1554pt" height="262pt"
 viewBox="0.00 0.00 1554.00 261.79" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 257.79)">
<title>ncPrzFtr</title>
<polygon fill="white" stroke="none" points="-4,4 -4,-257.79 1550,-257.79 1550,4 -4,4"/>
<!-- checkPartyMembersNearDoor -->
<g id="node1" class="node">
<title>checkPartyMembersNearDoor</title>
<ellipse fill="#ffffff" stroke="#000000" cx="27" cy="-211.54" rx="27" ry="18"/>
</g>
<!-- ChooseFromList -->
<g id="node2" class="node">
<title>ChooseFromList</title>
<ellipse fill="#ffffff" stroke="#000000" cx="135" cy="-66.64" rx="112.61" ry="66.64"/>
<text text-anchor="middle" x="135" y="-96.47" font-family="Times,serif" font-size="14.00">He looks pretty</text>
<text text-anchor="middle" x="135" y="-79.22" font-family="Times,serif" font-size="14.00">run&#45;of&#45;the&#45;mill.</text>
<text text-anchor="middle" x="135" y="-61.97" font-family="Times,serif" font-size="14.00">&#45;&#45;&#45;</text>
<text text-anchor="middle" x="135" y="-44.72" font-family="Times,serif" font-size="14.00">Doesn&#39;t look all that</text>
<text text-anchor="middle" x="135" y="-27.47" font-family="Times,serif" font-size="14.00">tough.</text>
</g>
<!-- CLICK_PREV -->
<g id="node3" class="node">
<title>CLICK_PREV</title>
<ellipse fill="#ffffff" stroke="#000000" cx="99" cy="-211.54" rx="27" ry="18"/>
</g>
<!-- CLICK_PREV&#45;&gt;ChooseFromList -->
<g id="edge1" class="edge">
<title>CLICK_PREV&#45;&gt;ChooseFromList</title>
<path fill="none" stroke="#555555" stroke-dasharray="1,5" d="M103.34,-193.3C106.56,-180.53 111.19,-162.14 115.93,-143.36"/>
<polygon fill="#555555" stroke="#555555" points="119.51,-144.47 118.56,-133.91 112.72,-142.76 119.51,-144.47"/>
</g>
<!-- CLICK_0 -->
<g id="node4" class="node">
<title>CLICK_0</title>
<ellipse fill="#ffffff" stroke="#000000" cx="243" cy="-211.54" rx="27" ry="18"/>
</g>
<!-- stored_node -->
<g id="node5" class="node">
<title>stored_node</title>
<ellipse fill="none" stroke="black" cx="387" cy="-66.64" rx="72.25" ry="18"/>
<text text-anchor="middle" x="387" y="-61.97" font-family="Times,serif" font-size="14.00">stored_node</text>
</g>
<!-- CLICK_0&#45;&gt;stored_node -->
<g id="edge2" class="edge">
<title>CLICK_0&#45;&gt;stored_node</title>
<path fill="none" stroke="#555555" stroke-dasharray="1,5" d="M255.65,-195.33C262.4,-187.4 270.96,-177.64 279,-169.29 305.61,-141.66 337.82,-111.77 360.1,-91.6"/>
<polygon fill="#555555" stroke="#555555" points="362.04,-94.67 367.13,-85.38 357.35,-89.47 362.04,-94.67"/>
</g>
<!-- CLICK_1 -->
<g id="node6" class="node">
<title>CLICK_1</title>
<ellipse fill="#ffffff" stroke="#000000" cx="315" cy="-211.54" rx="27" ry="18"/>
</g>
<!-- CLICK_1&#45;&gt;stored_node -->
<g id="edge3" class="edge">
<title>CLICK_1&#45;&gt;stored_node</title>
<path fill="none" stroke="#555555" stroke-dasharray="1,5" d="M323.26,-194.15C335.55,-169.75 358.79,-123.63 373.55,-94.33"/>
<polygon fill="#555555" stroke="#555555" points="377.02,-96.24 378.39,-85.73 370.77,-93.09 377.02,-96.24"/>
</g>
<!-- CLICK_2 -->
<g id="node7" class="node">
<title>CLICK_2</title>
<ellipse fill="#ffffff" stroke="#000000" cx="387" cy="-211.54" rx="27" ry="18"/>
</g>
<!-- CLICK_2&#45;&gt;stored_node -->
<g id="edge4" class="edge">
<title>CLICK_2&#45;&gt;stored_node</title>
<path fill="none" stroke="#555555" stroke-dasharray="1,5" d="M387,-193.3C387,-169.06 387,-124.6 387,-95.59"/>
<polygon fill="#555555" stroke="#555555" points="390.5,-95.94 387,-85.94 383.5,-95.94 390.5,-95.94"/>
</g>
<!-- CLICK_3 -->
<g id="node8" class="node">
<title>CLICK_3</title>
<ellipse fill="#ffffff" stroke="#000000" cx="459" cy="-211.54" rx="27" ry="18"/>
</g>
<!-- CLICK_3&#45;&gt;stored_node -->
<g id="edge5" class="edge">
<title>CLICK_3&#45;&gt;stored_node</title>
<path fill="none" stroke="#555555" stroke-dasharray="1,5" d="M450.74,-194.15C438.45,-169.75 415.21,-123.63 400.45,-94.33"/>
<polygon fill="#555555" stroke="#555555" points="403.23,-93.09 395.61,-85.73 396.98,-96.24 403.23,-93.09"/>
</g>
<!-- CLICK_4 -->
<g id="node9" class="node">
<title>CLICK_4</title>
<ellipse fill="#ffffff" stroke="#000000" cx="531" cy="-211.54" rx="27" ry="18"/>
</g>
<!-- CLICK_4&#45;&gt;stored_node -->
<g id="edge6" class="edge">
<title>CLICK_4&#45;&gt;stored_node</title>
<path fill="none" stroke="#555555" stroke-dasharray="1,5" d="M518.35,-195.33C511.6,-187.4 503.04,-177.64 495,-169.29 468.39,-141.66 436.18,-111.77 413.9,-91.6"/>
<polygon fill="#555555" stroke="#555555" points="416.65,-89.47 406.87,-85.38 411.96,-94.67 416.65,-89.47"/>
</g>
<!-- CLICK_MORE -->
<g id="node10" class="node">
<title>CLICK_MORE</title>
<ellipse fill="#ffffff" stroke="#000000" cx="171" cy="-211.54" rx="27" ry="18"/>
</g>
<!-- CLICK_MORE&#45;&gt;ChooseFromList -->
<g id="edge7" class="edge">
<title>CLICK_MORE&#45;&gt;ChooseFromList</title>
<path fill="none" stroke="#555555" stroke-dasharray="1,5" d="M166.66,-193.3C163.44,-180.53 158.81,-162.14 154.07,-143.36"/>
<polygon fill="#555555" stroke="#555555" points="157.28,-142.76 151.44,-133.91 150.49,-144.47 157.28,-142.76"/>
</g>
<!-- start -->
<g id="node11" class="node">
<title>start</title>
<ellipse fill="#ffffff" stroke="#000000" cx="603" cy="-211.54" rx="27" ry="18"/>
</g>
<!-- critter_p_proc -->
<g id="node12" class="node">
<title>critter_p_proc</title>
<ellipse fill="#ffffff" stroke="#000000" cx="963" cy="-211.54" rx="27" ry="18"/>
</g>
<!-- fight over: start&quot;) -->
<g id="node13" class="node">
<title>fight over: start&quot;)</title>
<ellipse fill="none" stroke="black" cx="753" cy="-66.64" rx="99.08" ry="18"/>
<text text-anchor="middle" x="753" y="-61.97" font-family="Times,serif" font-size="14.00">fight over: start&quot;)</text>
</g>
<!-- critter_p_proc&#45;&gt;fight over: start&quot;) -->
<g id="edge8" class="edge">
<title>critter_p_proc&#45;&gt;fight over: start&quot;)</title>
<path fill="none" stroke="#555555" stroke-dasharray="1,5" d="M941.76,-200.48C931.12,-191.52 920.42,-178.45 909,-169.29 882.94,-148.38 871.95,-149.97 843,-133.29 819.36,-119.67 793.21,-103.8 774.63,-91.07"/>
<polygon fill="#555555" stroke="#555555" points="776.84,-87.64 766.65,-84.73 772.8,-93.36 776.84,-87.64"/>
</g>
<!-- critter_p_proc&#45;&gt;fight over: start&quot;) -->
<g id="edge10" class="edge">
<title>critter_p_proc&#45;&gt;fight over: start&quot;)</title>
<path fill="none" stroke="#555555" stroke-dasharray="1,5" d="M951.49,-194.83C944.93,-186.58 936.19,-176.67 927,-169.29 900.94,-148.38 889.95,-149.97 861,-133.29 836.76,-119.32 809.89,-102.99 789.01,-90.11"/>
<polygon fill="#555555" stroke="#555555" points="791.21,-86.74 780.87,-84.45 787.53,-92.69 791.21,-86.74"/>
</g>
<!-- critter_p_proc&#45;&gt;fight over: start&quot;) -->
<g id="edge12" class="edge">
<title>critter_p_proc&#45;&gt;fight over: start&quot;)</title>
<path fill="none" stroke="#555555" stroke-dasharray="1,5" d="M966.52,-193.21C961.8,-185.31 953.6,-176.19 945,-169.29 918.94,-148.38 907.95,-149.97 879,-133.29 853.85,-118.8 825.86,-101.76 802.19,-88.67"/>
<polygon fill="#555555" stroke="#555555" points="804.13,-85.2 793.67,-83.5 800.79,-91.35 804.13,-85.2"/>
</g>
<!-- fight over: end&quot;) -->
<g id="node14" class="node">
<title>fight over: end&quot;)</title>
<ellipse fill="none" stroke="black" cx="963" cy="-66.64" rx="93.3" ry="18"/>
<text text-anchor="middle" x="963" y="-61.97" font-family="Times,serif" font-size="14.00">fight over: end&quot;)</text>
</g>
<!-- critter_p_proc&#45;&gt;fight over: end&quot;) -->
<g id="edge9" class="edge">
<title>critter_p_proc&#45;&gt;fight over: end&quot;)</title>
<path fill="none" stroke="#555555" stroke-dasharray="1,5" d="M954.01,-194.15C948.75,-170.07 948.09,-124.84 952.04,-95.49"/>
<polygon fill="#555555" stroke="#555555" points="955.65,-96.17 953.86,-85.73 948.75,-95.01 955.65,-96.17"/>
</g>
<!-- critter_p_proc&#45;&gt;fight over: end&quot;) -->
<g id="edge11" class="edge">
<title>critter_p_proc&#45;&gt;fight over: end&quot;)</title>
<path fill="none" stroke="#555555" stroke-dasharray="1,5" d="M963,-193.3C963,-169.06 963,-124.6 963,-95.59"/>
<polygon fill="#555555" stroke="#555555" points="966.5,-95.94 963,-85.94 959.5,-95.94 966.5,-95.94"/>
</g>
<!-- critter_p_proc&#45;&gt;fight over: end&quot;) -->
<g id="edge13" class="edge">
<title>critter_p_proc&#45;&gt;fight over: end&quot;)</title>
<path fill="none" stroke="#555555" stroke-dasharray="1,5" d="M971.99,-194.15C977.25,-170.07 977.91,-124.84 973.96,-95.49"/>
<polygon fill="#555555" stroke="#555555" points="977.25,-95.01 972.14,-85.73 970.35,-96.17 977.25,-95.01"/>
</g>
<!-- destroy_p_proc -->
<g id="node15" class="node">
<title>destroy_p_proc</title>
<ellipse fill="#ffffff" stroke="#000000" cx="675" cy="-211.54" rx="27" ry="18"/>
</g>
<!-- destroy_p_proc&#45;&gt;fight over: start&quot;) -->
<g id="edge14" class="edge">
<title>destroy_p_proc&#45;&gt;fight over: start&quot;)</title>
<path fill="none" stroke="#555555" stroke-dasharray="1,5" d="M683.95,-194.15C697.26,-169.75 722.44,-123.63 738.43,-94.33"/>
<polygon fill="#555555" stroke="#555555" points="741.95,-96.18 743.67,-85.73 735.81,-92.83 741.95,-96.18"/>
</g>
<!-- destroy_p_proc&#45;&gt;fight over: end&quot;) -->
<g id="edge15" class="edge">
<title>destroy_p_proc&#45;&gt;fight over: end&quot;)</title>
<path fill="none" stroke="#555555" stroke-dasharray="1,5" d="M685.19,-194.64C691.59,-185.9 700.59,-175.59 711,-169.29 769.65,-133.78 797.95,-160.22 861,-133.29 886.75,-122.29 913.26,-105.01 932.8,-90.94"/>
<polygon fill="#555555" stroke="#555555" points="934.54,-93.28 940.53,-84.54 930.4,-87.63 934.54,-93.28"/>
</g>
<!-- look_at_p_proc -->
<g id="node16" class="node">
<title>look_at_p_proc</title>
<ellipse fill="#ffffff" stroke="#000000" cx="1061" cy="-211.54" rx="52.68" ry="42.25"/>
<text text-anchor="middle" x="1061" y="-224.11" font-family="Times,serif" font-size="14.00">You see </text>
<text text-anchor="middle" x="1061" y="-206.86" font-family="Times,serif" font-size="14.00">&#45;&#45;&#45;</text>
<text text-anchor="middle" x="1061" y="-189.61" font-family="Times,serif" font-size="14.00">.</text>
</g>
<!-- description_p_proc -->
<g id="node17" class="node">
<title>description_p_proc</title>
<ellipse fill="#ffffff" stroke="#000000" cx="1159" cy="-211.54" rx="27" ry="18"/>
</g>
<!-- damage_p_proc -->
<g id="node18" class="node">
<title>damage_p_proc</title>
<ellipse fill="#ffffff" stroke="#000000" cx="747" cy="-211.54" rx="27" ry="18"/>
</g>
<!-- damage_p_proc&#45;&gt;fight over: start&quot;) -->
<g id="edge16" class="edge">
<title>damage_p_proc&#45;&gt;fight over: start&quot;)</title>
<path fill="none" stroke="#555555" stroke-dasharray="1,5" d="M747.72,-193.3C748.74,-169.06 750.61,-124.6 751.83,-95.59"/>
<polygon fill="#555555" stroke="#555555" points="755.35,-96.08 752.27,-85.94 748.36,-95.79 755.35,-96.08"/>
</g>
<!-- damage_p_proc&#45;&gt;fight over: end&quot;) -->
<g id="edge17" class="edge">
<title>damage_p_proc&#45;&gt;fight over: end&quot;)</title>
<path fill="none" stroke="#555555" stroke-dasharray="1,5" d="M758.01,-194.99C764.54,-186.57 773.41,-176.47 783,-169.29 813.56,-146.4 827.53,-151.67 861,-133.29 884.9,-120.17 910.72,-103.52 930.4,-90.28"/>
<polygon fill="#555555" stroke="#555555" points="931.95,-92.78 938.26,-84.27 928.02,-86.99 931.95,-92.78"/>
</g>
<!-- map_enter_p_proc -->
<g id="node19" class="node">
<title>map_enter_p_proc</title>
<ellipse fill="#ffffff" stroke="#000000" cx="1231" cy="-211.54" rx="27" ry="18"/>
</g>
<!-- map_update_p_proc -->
<g id="node20" class="node">
<title>map_update_p_proc</title>
<ellipse fill="#ffffff" stroke="#000000" cx="1303" cy="-211.54" rx="27" ry="18"/>
</g>
<!-- combat_p_proc -->
<g id="node21" class="node">
<title>combat_p_proc</title>
<ellipse fill="#ffffff" stroke="#000000" cx="819" cy="-211.54" rx="27" ry="18"/>
</g>
<!-- combat_p_proc&#45;&gt;fight over: start&quot;) -->
<g id="edge18" class="edge">
<title>combat_p_proc&#45;&gt;fight over: start&quot;)</title>
<path fill="none" stroke="#555555" stroke-dasharray="1,5" d="M798.45,-199.33C775.35,-177.18 750.09,-127.22 743.97,-95.61"/>
<polygon fill="#555555" stroke="#555555" points="747.34,-95.36 742.62,-85.87 740.4,-96.23 747.34,-95.36"/>
</g>
<!-- combat_p_proc&#45;&gt;fight over: start&quot;) -->
<g id="edge20" class="edge">
<title>combat_p_proc&#45;&gt;fight over: start&quot;)</title>
<path fill="none" stroke="#555555" stroke-dasharray="1,5" d="M803.94,-196.32C787.34,-172.8 764.65,-125.42 754.81,-95.18"/>
<polygon fill="#555555" stroke="#555555" points="757.96,-94.51 751.8,-85.89 751.24,-96.48 757.96,-94.51"/>
</g>
<!-- combat_p_proc&#45;&gt;fight over: start&quot;) -->
<g id="edge22" class="edge">
<title>combat_p_proc&#45;&gt;fight over: start&quot;)</title>
<path fill="none" stroke="#555555" stroke-dasharray="1,5" d="M811.3,-193.87C800.03,-169.48 778.94,-123.8 765.45,-94.6"/>
<polygon fill="#555555" stroke="#555555" points="768.23,-93.26 760.86,-85.65 761.87,-96.2 768.23,-93.26"/>
</g>
<!-- combat_p_proc&#45;&gt;fight over: start&quot;) -->
<g id="edge24" class="edge">
<title>combat_p_proc&#45;&gt;fight over: start&quot;)</title>
<path fill="none" stroke="#555555" stroke-dasharray="1,5" d="M820.21,-193.3C813.96,-168.49 793.24,-122.53 775.68,-93.6"/>
<polygon fill="#555555" stroke="#555555" points="778.2,-92.05 769.87,-85.5 772.3,-95.81 778.2,-92.05"/>
</g>
<!-- combat_p_proc&#45;&gt;fight over: start&quot;) -->
<g id="edge26" class="edge">
<title>combat_p_proc&#45;&gt;fight over: start&quot;)</title>
<path fill="none" stroke="#555555" stroke-dasharray="1,5" d="M829.41,-194.43C828.96,-169.69 808.1,-122.14 785.79,-92.83"/>
<polygon fill="#555555" stroke="#555555" points="787.89,-90.87 778.84,-85.36 782.48,-95.31 787.89,-90.87"/>
</g>
<!-- combat_p_proc&#45;&gt;fight over: end&quot;) -->
<g id="edge19" class="edge">
<title>combat_p_proc&#45;&gt;fight over: end&quot;)</title>
<path fill="none" stroke="#555555" stroke-dasharray="1,5" d="M798.6,-199.42C799.3,-190.97 809.5,-179.15 819,-169.29 846.96,-140.26 881.11,-108.72 911.66,-88.6"/>
<polygon fill="#555555" stroke="#555555" points="912.98,-91.27 919.59,-82.99 909.26,-85.35 912.98,-91.27"/>
</g>
<!-- combat_p_proc&#45;&gt;fight over: end&quot;) -->
<g id="edge21" class="edge">
<title>combat_p_proc&#45;&gt;fight over: end&quot;)</title>
<path fill="none" stroke="#555555" stroke-dasharray="1,5" d="M816.85,-193.35C821.8,-185.81 829.61,-176.96 837,-169.29 864.12,-141.13 897.06,-110.62 923.14,-90.45"/>
<polygon fill="#555555" stroke="#555555" points="924.8,-92.83 930.7,-84.02 920.6,-87.23 924.8,-92.83"/>
</g>
<!-- combat_p_proc&#45;&gt;fight over: end&quot;) -->
<g id="edge23" class="edge">
<title>combat_p_proc&#45;&gt;fight over: end&quot;)</title>
<path fill="none" stroke="#555555" stroke-dasharray="1,5" d="M831.65,-195.33C838.4,-187.4 846.96,-177.64 855,-169.29 881.45,-141.83 913.44,-112.13 935.71,-91.96"/>
<polygon fill="#555555" stroke="#555555" points="937.65,-95.02 942.73,-85.73 932.96,-89.82 937.65,-95.02"/>
</g>
<!-- combat_p_proc&#45;&gt;fight over: end&quot;) -->
<g id="edge25" class="edge">
<title>combat_p_proc&#45;&gt;fight over: end&quot;)</title>
<path fill="none" stroke="#555555" stroke-dasharray="1,5" d="M841.27,-200.8C852.17,-192.29 862.98,-179.7 873,-169.29 898.94,-142.35 930.22,-113.26 949.13,-93.13"/>
<polygon fill="#555555" stroke="#555555" points="951.3,-95.84 955.43,-86.09 946.12,-91.14 951.3,-95.84"/>
</g>
<!-- combat_p_proc&#45;&gt;fight over: end&quot;) -->
<g id="edge27" class="edge">
<title>combat_p_proc&#45;&gt;fight over: end&quot;)</title>
<path fill="none" stroke="#555555" stroke-dasharray="1,5" d="M845.04,-205.83C865.29,-198.03 878.74,-182.02 891,-169.29 916.6,-142.71 947.38,-114.04 963.21,-93.94"/>
<polygon fill="#555555" stroke="#555555" points="966.57,-96.26 969.52,-86.09 960.87,-92.2 966.57,-96.26"/>
</g>
<!-- pickup_p_proc -->
<g id="node22" class="node">
<title>pickup_p_proc</title>
<ellipse fill="#ffffff" stroke="#000000" cx="1375" cy="-211.54" rx="27" ry="18"/>
</g>
<!-- timed_event_p_proc -->
<g id="node23" class="node">
<title>timed_event_p_proc</title>
<ellipse fill="#ffffff" stroke="#000000" cx="891" cy="-211.54" rx="27" ry="18"/>
</g>
<!-- timed_event_p_proc&#45;&gt;fight over: start&quot;) -->
<g id="edge28" class="edge">
<title>timed_event_p_proc&#45;&gt;fight over: start&quot;)</title>
<path fill="none" stroke="#555555" stroke-dasharray="1,5" d="M866.19,-203.7C851.29,-195.41 839.04,-181.09 828,-169.29 803.26,-142.86 773.87,-113.8 757.89,-93.55"/>
<polygon fill="#555555" stroke="#555555" points="760.3,-91.91 751.56,-85.91 754.65,-96.04 760.3,-91.91"/>
</g>
<!-- timed_event_p_proc&#45;&gt;fight over: start&quot;) -->
<g id="edge30" class="edge">
<title>timed_event_p_proc&#45;&gt;fight over: start&quot;)</title>
<path fill="none" stroke="#555555" stroke-dasharray="1,5" d="M872.86,-198.07C864.44,-189.78 854.83,-178.73 846,-169.29 820.93,-142.5 791.07,-113.02 771.86,-92.73"/>
<polygon fill="#555555" stroke="#555555" points="774.94,-90.84 765.57,-85.91 769.82,-95.61 774.94,-90.84"/>
</g>
<!-- timed_event_p_proc&#45;&gt;fight over: start&quot;) -->
<g id="edge32" class="edge">
<title>timed_event_p_proc&#45;&gt;fight over: start&quot;)</title>
<path fill="none" stroke="#555555" stroke-dasharray="1,5" d="M885.1,-193.85C879.35,-186.25 871.4,-177.2 864,-169.29 838.44,-141.98 807.91,-111.87 785.16,-91.56"/>
<polygon fill="#555555" stroke="#555555" points="787.98,-88.51 778.15,-84.55 783.37,-93.77 787.98,-88.51"/>
</g>
<!-- timed_event_p_proc&#45;&gt;fight over: start&quot;) -->
<g id="edge34" class="edge">
<title>timed_event_p_proc&#45;&gt;fight over: start&quot;)</title>
<path fill="none" stroke="#555555" stroke-dasharray="1,5" d="M901.93,-194.64C897.91,-186.88 889.66,-177.48 882,-169.29 855.91,-141.41 824.64,-110.62 797.93,-90.31"/>
<polygon fill="#555555" stroke="#555555" points="800.2,-86.91 790.06,-83.85 796.08,-92.56 800.2,-86.91"/>
</g>
<!-- timed_event_p_proc&#45;&gt;fight over: end&quot;) -->
<g id="edge29" class="edge">
<title>timed_event_p_proc&#45;&gt;fight over: end&quot;)</title>
<path fill="none" stroke="#555555" stroke-dasharray="1,5" d="M885.88,-193.59C890.48,-168.66 913.26,-121.96 934.35,-92.96"/>
<polygon fill="#555555" stroke="#555555" points="937.48,-95.63 940.81,-85.58 931.93,-91.36 937.48,-95.63"/>
</g>
<!-- timed_event_p_proc&#45;&gt;fight over: end&quot;) -->
<g id="edge31" class="edge">
<title>timed_event_p_proc&#45;&gt;fight over: end&quot;)</title>
<path fill="none" stroke="#555555" stroke-dasharray="1,5" d="M895.1,-193.3C904.94,-168.63 927.65,-123.02 944.31,-94.07"/>
<polygon fill="#555555" stroke="#555555" points="947.62,-96.33 949.69,-85.94 941.6,-92.77 947.62,-96.33"/>
</g>
<!-- timed_event_p_proc&#45;&gt;fight over: end&quot;) -->
<g id="edge33" class="edge">
<title>timed_event_p_proc&#45;&gt;fight over: end&quot;)</title>
<path fill="none" stroke="#555555" stroke-dasharray="1,5" d="M903.24,-194.98C918.05,-171.01 941.71,-124.74 954.63,-95.07"/>
<polygon fill="#555555" stroke="#555555" points="958.23,-96.54 958.87,-85.96 951.77,-93.83 958.23,-96.54"/>
</g>
<!-- timed_event_p_proc&#45;&gt;fight over: end&quot;) -->
<g id="edge35" class="edge">
<title>timed_event_p_proc&#45;&gt;fight over: end&quot;)</title>
<path fill="none" stroke="#555555" stroke-dasharray="1,5" d="M909.08,-198.36C929.75,-175.75 955.92,-126.8 965.36,-95.64"/>
<polygon fill="#555555" stroke="#555555" points="968.98,-96.59 968.04,-86.04 962.19,-94.88 968.98,-96.59"/>
</g>
<!-- Node998 -->
<g id="node24" class="node">
<title>Node998</title>
<ellipse fill="#ffffff" stroke="#000000" cx="1447" cy="-211.54" rx="27" ry="18"/>
</g>
<!-- Node999 -->
<g id="node25" class="node">
<title>Node999</title>
<ellipse fill="#ffffff" stroke="#000000" cx="1519" cy="-211.54" rx="27" ry="18"/>
</g>
</g>
</svg>
<script>window.Codes = {"checkPartyMembersNearDoor":"if (party_member_obj(16777278) != 0) then begin\n  if (tile_distance_objs(self_obj, party_member_obj(16777278)) <= 5) then begin\n    return 1;\n  end\nend\nif (party_member_obj(16777376) != 0) then begin\n  if (tile_distance_objs(self_obj, party_member_obj(16777376)) <= 5) then begin\n    return 1;\n  end\nend\nif (party_member_obj(16777377) != 0) then begin\n  if (tile_distance_objs(self_obj, party_member_obj(16777377)) <= 5) then begin\n    return 1;\n  end\nend\nif (party_member_obj(16777305) != 0) then begin\n  if (tile_distance_objs(self_obj, party_member_obj(16777305)) <= 5) then begin\n    return 1;\n  end\nend\nif (party_member_obj(16777313) != 0) then begin\n  if (tile_distance_objs(self_obj, party_member_obj(16777313)) <= 5) then begin\n    return 1;\n  end\nend\nif (party_member_obj(16777323) != 0) then begin\n  if (tile_distance_objs(self_obj, party_member_obj(16777323)) <= 5) then begin\n    return 1;\n  end\nend\nif (party_member_obj(16777352) != 0) then begin\n  if (tile_distance_objs(self_obj, party_member_obj(16777352)) <= 5) then begin\n    return 1;\n  end\nend\nif (party_member_obj(16777378) != 0) then begin\n  if (tile_distance_objs(self_obj, party_member_obj(16777378)) <= 5) then begin\n    return 1;\n  end\nend\nif (party_member_obj(16777368) != 0) then begin\n  if (tile_distance_objs(self_obj, party_member_obj(16777368)) <= 5) then begin\n    return 1;\n  end\nend\nif (party_member_obj(16777379) != 0) then begin\n  if (tile_distance_objs(self_obj, party_member_obj(16777379)) <= 5) then begin\n    return 1;\n  end\nend\nif (party_member_obj(16777380) != 0) then begin\n  if (tile_distance_objs(self_obj, party_member_obj(16777380)) <= 5) then begin\n    return 1;\n  end\nend\nif (party_member_obj(16777295) != 0) then begin\n  if (tile_distance_objs(self_obj, party_member_obj(16777295)) <= 5) then begin\n    return 1;\n  end\nend\nif (party_member_obj(16777381) != 0) then begin\n  if (tile_distance_objs(self_obj, party_member_obj(16777381)) <= 5) then begin\n    return 1;\n  end\nend\nif (party_member_obj(16777407) != 0) then begin\n  if (tile_distance_objs(self_obj, party_member_obj(16777407)) <= 5) then begin\n    return 1;\n  end\nend\nif (party_member_obj(16777411) != 0) then begin\n  if (tile_distance_objs(self_obj, party_member_obj(16777411)) <= 5) then begin\n    return 1;\n  end\nend\nif (party_member_obj(16777412) != 0) then begin\n  if (tile_distance_objs(self_obj, party_member_obj(16777412)) <= 5) then begin\n    return 1;\n  end\nend\nif (party_member_obj(16777413) != 0) then begin\n  if (tile_distance_objs(self_obj, party_member_obj(16777413)) <= 5) then begin\n    return 1;\n  end\nend\nif (party_member_obj(16777481) != 0) then begin\n  if (tile_distance_objs(self_obj, party_member_obj(16777481)) <= 5) then begin\n    return 1;\n  end\nend\nif (party_member_obj(16777558) != 0) then begin\n  if (tile_distance_objs(self_obj, party_member_obj(16777558)) <= 5) then begin\n    return 1;\n  end\nend\nif (party_member_obj(16777600) != 0) then begin\n  if (tile_distance_objs(self_obj, party_member_obj(16777600)) <= 5) then begin\n    return 1;\n  end\nend\nreturn 0;\n","ChooseFromList":"variable LVar0 := 0;\ngsay_reply(1088, stored_msg);\nif (message_str(353, top_msg - 1) != \"\") then begin\n  giq_option(1, 1088, message_str(353, 150), CLICK_PREV, 50);\nend\nif (LVar0 == 0) then begin\n  if (message_str(353, top_msg + 0) != \"\") then begin\n    giq_option(1, 1088, message_str(353, top_msg + 0), CLICK_0, 50);\n  end\n  else begin\n    LVar0 := 1;\n  end\nend\nif (LVar0 == 0) then begin\n  if (message_str(353, top_msg + 1) != \"\") then begin\n    giq_option(1, 1088, message_str(353, top_msg + 1), CLICK_1, 50);\n  end\n  else begin\n    LVar0 := 1;\n  end\nend\nif (LVar0 == 0) then begin\n  if (message_str(353, top_msg + 2) != \"\") then begin\n    giq_option(1, 1088, message_str(353, top_msg + 2), CLICK_2, 50);\n  end\n  else begin\n    LVar0 := 1;\n  end\nend\nif (LVar0 == 0) then begin\n  if (message_str(353, top_msg + 3) != \"\") then begin\n    giq_option(1, 1088, message_str(353, top_msg + 3), CLICK_3, 50);\n  end\n  else begin\n    LVar0 := 1;\n  end\nend\nif (LVar0 == 0) then begin\n  if (message_str(353, top_msg + 4) != \"\") then begin\n    giq_option(1, 1088, message_str(353, top_msg + 4), CLICK_4, 50);\n  end\n  else begin\n    LVar0 := 1;\n  end\nend\nif (LVar0 == 0) then begin\n  if (message_str(353, top_msg + 5) != \"\") then begin\n    giq_option(1, 1088, message_str(353, 151), CLICK_MORE, 50);\n  end\nend\n","CLICK_PREV":"top_msg := top_msg - 5;\ncall ChooseFromList;\n","CLICK_0":"set_global_var(var_num, (global_var(var_num) / 100 * 100) + (top_msg % 100));\ncall stored_node;\n","CLICK_1":"set_global_var(var_num, (global_var(var_num) / 100 * 100) + ((top_msg + 1) % 100));\ncall stored_node;\n","CLICK_2":"set_global_var(var_num, (global_var(var_num) / 100 * 100) + ((top_msg + 2) % 100));\ncall stored_node;\n","CLICK_3":"set_global_var(var_num, (global_var(var_num) / 100 * 100) + ((top_msg + 3) % 100));\ncall stored_node;\n","CLICK_4":"set_global_var(var_num, (global_var(var_num) / 100 * 100) + ((top_msg + 4) % 100));\ncall stored_node;\n","CLICK_MORE":"top_msg := top_msg + 5;\ncall ChooseFromList;\n","start":"if (((global_var(495) bwand 8192) != 0) == 0) then begin\n  prize_fighter_obj := self_obj;\nend\n","critter_p_proc":"if (global_var(507) != 0) then begin\n  if (critter_is_fleeing(self_obj)) then begin\n    if (2 != 0) then begin\n      if (global_var(510) == 0) then begin\n        set_global_var(510, 2);\n        last_timed_obj := announcer_obj;\n        last_timed_param := last_timed_param;\n        metarule3(100, announcer_obj, 200, 0);\n        add_timer_event(announcer_obj, game_ticks(5), 200);\n      end\n    end\n    else begin\n      set_global_var(510, 0);\n    end\n    debug_msg(\"set_fight_status(\" + 2 + \") == \" + global_var(510));\n    debug_msg(\"call fight over: start\");\n    gfade_out(10);\n    set_global_var(507, 0);\n    if (cur_map_index == 55) then begin\n      if (announcer_obj != 0) then begin\n        last_timed_obj := announcer_obj;\n        last_timed_param := last_timed_param;\n        metarule3(100, announcer_obj, 48, 0);\n        add_timer_event(announcer_obj, game_ticks(0), 48);\n      end\n    end\n    set_global_var(694, global_var(694) bwor 2);\n    move_to(dude_obj, 25076, elevation(self_obj));\n    anim(dude_obj, 1000, 3);\n    if (prize_fighter_obj != 0) then begin\n      if ((global_var(495) bwand 8192) != 0) then begin\n        if (has_trait(1, prize_fighter_obj, 666) == 1) then begin\n          set_obj_visibility(prize_fighter_obj, 1);\n        end\n        prize_fighter_obj := 0;\n      end\n      else begin\n        animate_stand_obj(prize_fighter_obj);\n        critter_injure(prize_fighter_obj, 2 bwor 8388608);\n        move_to(prize_fighter_obj, 25674, elevation(self_obj));\n        anim(prize_fighter_obj, 1000, 3);\n      end\n    end\n    if (has_trait(1, ring_girl_obj, 666) == 1) then begin\n      set_obj_visibility(ring_girl_obj, 1);\n    end\n    if (has_trait(1, announcer_obj, 666) == 0) then begin\n      set_obj_visibility(announcer_obj, 0);\n    end\n    if (cur_map_index == 55) then begin\n      if (announcer_obj != 0) then begin\n        last_timed_obj := announcer_obj;\n        last_timed_param := last_timed_param;\n        metarule3(100, announcer_obj, 48, 0);\n        add_timer_event(announcer_obj, game_ticks(0), 48);\n      end\n    end\n    set_global_var(694, global_var(694) bwor 2);\n    gfade_in(10);\n    debug_msg(\"call fight over: end\");\n    debug_msg(\"win boxing match\");\n  end\n  else begin\n    if (critter_state(self_obj) bwand 2) then begin\n      if (1 != 0) then begin\n        if (global_var(510) == 0) then begin\n          set_global_var(510, 1);\n          last_timed_obj := announcer_obj;\n          last_timed_param := last_timed_param;\n          metarule3(100, announcer_obj, 200, 0);\n          add_timer_event(announcer_obj, game_ticks(5), 200);\n        end\n      end\n      else begin\n        set_global_var(510, 0);\n      end\n      debug_msg(\"set_fight_status(\" + 1 + \") == \" + global_var(510));\n      debug_msg(\"call fight over: start\");\n      gfade_out(10);\n      set_global_var(507, 0);\n      if (cur_map_index == 55) then begin\n        if (announcer_obj != 0) then begin\n          last_timed_obj := announcer_obj;\n          last_timed_param := last_timed_param;\n          metarule3(100, announcer_obj, 48, 0);\n          add_timer_event(announcer_obj, game_ticks(0), 48);\n        end\n      end\n      set_global_var(694, global_var(694) bwor 2);\n      move_to(dude_obj, 25076, elevation(self_obj));\n      anim(dude_obj, 1000, 3);\n      if (prize_fighter_obj != 0) then begin\n        if ((global_var(495) bwand 8192) != 0) then begin\n          if (has_trait(1, prize_fighter_obj, 666) == 1) then begin\n            set_obj_visibility(prize_fighter_obj, 1);\n          end\n          prize_fighter_obj := 0;\n        end\n        else begin\n          animate_stand_obj(prize_fighter_obj);\n          critter_injure(prize_fighter_obj, 2 bwor 8388608);\n          move_to(prize_fighter_obj, 25674, elevation(self_obj));\n          anim(prize_fighter_obj, 1000, 3);\n        end\n      end\n      if (has_trait(1, ring_girl_obj, 666) == 1) then begin\n        set_obj_visibility(ring_girl_obj, 1);\n      end\n      if (has_trait(1, announcer_obj, 666) == 0) then begin\n        set_obj_visibility(announcer_obj, 0);\n      end\n      if (cur_map_index == 55) then begin\n        if (announcer_obj != 0) then begin\n          last_timed_obj := announcer_obj;\n          last_timed_param := last_timed_param;\n          metarule3(100, announcer_obj, 48, 0);\n          add_timer_event(announcer_obj, game_ticks(0), 48);\n        end\n      end\n      set_global_var(694, global_var(694) bwor 2);\n      gfade_in(10);\n      debug_msg(\"call fight over: end\");\n      debug_msg(\"win boxing match\");\n    end\n    else begin\n      if (critter_state(dude_obj) bwand 2) then begin\n        if (-1 != 0) then begin\n          if (global_var(510) == 0) then begin\n            set_global_var(510, -1);\n            last_timed_obj := announcer_obj;\n            last_timed_param := last_timed_param;\n            metarule3(100, announcer_obj, 200, 0);\n            add_timer_event(announcer_obj, game_ticks(5), 200);\n          end\n        end\n        else begin\n          set_global_var(510, 0);\n        end\n        debug_msg(\"set_fight_status(\" + -1 + \") == \" + global_var(510));\n        debug_msg(\"call fight over: start\");\n        gfade_out(10);\n        set_global_var(507, 0);\n        if (cur_map_index == 55) then begin\n          if (announcer_obj != 0) then begin\n            last_timed_obj := announcer_obj;\n            last_timed_param := last_timed_param;\n            metarule3(100, announcer_obj, 48, 0);\n            add_timer_event(announcer_obj, game_ticks(0), 48);\n          end\n        end\n        set_global_var(694, global_var(694) bwor 2);\n        move_to(dude_obj, 25076, elevation(self_obj));\n        anim(dude_obj, 1000, 3);\n        if (prize_fighter_obj != 0) then begin\n          if ((global_var(495) bwand 8192) != 0) then begin\n            if (has_trait(1, prize_fighter_obj, 666) == 1) then begin\n              set_obj_visibility(prize_fighter_obj, 1);\n            end\n            prize_fighter_obj := 0;\n          end\n          else begin\n            animate_stand_obj(prize_fighter_obj);\n            critter_injure(prize_fighter_obj, 2 bwor 8388608);\n            move_to(prize_fighter_obj, 25674, elevation(self_obj));\n            anim(prize_fighter_obj, 1000, 3);\n          end\n        end\n        if (has_trait(1, ring_girl_obj, 666) == 1) then begin\n          set_obj_visibility(ring_girl_obj, 1);\n        end\n        if (has_trait(1, announcer_obj, 666) == 0) then begin\n          set_obj_visibility(announcer_obj, 0);\n        end\n        if (cur_map_index == 55) then begin\n          if (announcer_obj != 0) then begin\n            last_timed_obj := announcer_obj;\n            last_timed_param := last_timed_param;\n            metarule3(100, announcer_obj, 48, 0);\n            add_timer_event(announcer_obj, game_ticks(0), 48);\n          end\n        end\n        set_global_var(694, global_var(694) bwor 2);\n        gfade_in(10);\n        debug_msg(\"call fight over: end\");\n        debug_msg(\"lose boxing match\");\n      end\n      else begin\n        attack_complex(dude_obj, 0, 1, 0, 0, 30000, 0, 0);\n      end\n    end\n  end\nend\n","destroy_p_proc":"if (obj_pid(self_obj) == 16777649) then begin\n  set_global_var(495, global_var(495) bwor 512);\nend\nelse begin\n  if (obj_pid(self_obj) == 16777648) then begin\n    set_global_var(495, global_var(495) bwor 1024);\n  end\n  else begin\n    if (obj_pid(self_obj) == 16777647) then begin\n      set_global_var(495, global_var(495) bwor 2048);\n    end\n  end\nend\nset_global_var(495, global_var(495) bwor 8192);\nif (1 != 0) then begin\n  if (global_var(510) == 0) then begin\n    set_global_var(510, 1);\n    last_timed_obj := announcer_obj;\n    last_timed_param := last_timed_param;\n    metarule3(100, announcer_obj, 200, 0);\n    add_timer_event(announcer_obj, game_ticks(5), 200);\n  end\nend\nelse begin\n  set_global_var(510, 0);\nend\ndebug_msg(\"set_fight_status(\" + 1 + \") == \" + global_var(510));\ndebug_msg(\"call fight over: start\");\ngfade_out(10);\nset_global_var(507, 0);\nif (cur_map_index == 55) then begin\n  if (announcer_obj != 0) then begin\n    last_timed_obj := announcer_obj;\n    last_timed_param := last_timed_param;\n    metarule3(100, announcer_obj, 48, 0);\n    add_timer_event(announcer_obj, game_ticks(0), 48);\n  end\nend\nset_global_var(694, global_var(694) bwor 2);\nmove_to(dude_obj, 25076, elevation(self_obj));\nanim(dude_obj, 1000, 3);\nif (prize_fighter_obj != 0) then begin\n  if ((global_var(495) bwand 8192) != 0) then begin\n    if (has_trait(1, prize_fighter_obj, 666) == 1) then begin\n      set_obj_visibility(prize_fighter_obj, 1);\n    end\n    prize_fighter_obj := 0;\n  end\n  else begin\n    animate_stand_obj(prize_fighter_obj);\n    critter_injure(prize_fighter_obj, 2 bwor 8388608);\n    move_to(prize_fighter_obj, 25674, elevation(self_obj));\n    anim(prize_fighter_obj, 1000, 3);\n  end\nend\nif (has_trait(1, ring_girl_obj, 666) == 1) then begin\n  set_obj_visibility(ring_girl_obj, 1);\nend\nif (has_trait(1, announcer_obj, 666) == 0) then begin\n  set_obj_visibility(announcer_obj, 0);\nend\nif (cur_map_index == 55) then begin\n  if (announcer_obj != 0) then begin\n    last_timed_obj := announcer_obj;\n    last_timed_param := last_timed_param;\n    metarule3(100, announcer_obj, 48, 0);\n    add_timer_event(announcer_obj, game_ticks(0), 48);\n  end\nend\nset_global_var(694, global_var(694) bwor 2);\ngfade_in(10);\ndebug_msg(\"call fight over: end\");\ndebug_msg(\"win boxing match\");\nremoved_qty := obj_is_carrying_obj_pid(self_obj, 489);\nif (1 < removed_qty) then begin\n  removed_qty := 1;\nend\nif (removed_qty > 0) then begin\n  restock_obj := obj_carrying_pid_obj(self_obj, 489);\n  if (obj_type(self_obj) == 1) then begin\n    restock_obj := obj_carrying_pid_obj(self_obj, 489);\n    if (critter_inven_obj(self_obj, 0) == restock_obj) then begin\n      if (obj_item_subtype(critter_inven_obj(self_obj, 0)) == 0) then begin\n        restock_obj := critter_inven_obj(self_obj, 0);\n        debug_msg(\"armour pid == \" + obj_pid(restock_obj));\n        rm_obj_from_inven(self_obj, restock_obj);\n        add_obj_to_inven(self_obj, restock_obj);\n      end\n    end\n    else begin\n      if ((critter_inven_obj(self_obj, 2) == restock_obj) or (critter_inven_obj(self_obj, 1) == restock_obj)) then begin\n        metarule(43, self_obj);\n      end\n    end\n  end\n  restock_amt := rm_mult_objs_from_inven(self_obj, restock_obj, removed_qty);\n  destroy_object(restock_obj);\nend\nrestock_obj := 0;\nrestock_amt := 0;\n","look_at_p_proc":"script_overrides;\ndisplay_msg(message_str(1088, 100) + message_str(353, 700 + (50 * ((global_var(495) bwand 4096) != 0)) + global_var(504)) + message_str(1088, 101));\n","description_p_proc":"script_overrides;\ndisplay_msg(message_str(1088, random(150, 152)));\n","damage_p_proc":"if (source_obj == dude_obj) then begin\n  set_local_var(1, local_var(1) + 1);\n  debug_msg(\"total punches dude thrown == \" + local_var(1));\n  if (target_obj != 0) then begin\n    if ((obj_pid(target_obj) != 497) and (obj_pid(target_obj) != 496)) then begin\n      if (-3 != 0) then begin\n        if (global_var(510) == 0) then begin\n          set_global_var(510, -3);\n          last_timed_obj := announcer_obj;\n          last_timed_param := last_timed_param;\n          metarule3(100, announcer_obj, 200, 0);\n          add_timer_event(announcer_obj, game_ticks(5), 200);\n        end\n      end\n      else begin\n        set_global_var(510, 0);\n      end\n      debug_msg(\"set_fight_status(\" + -3 + \") == \" + global_var(510));\n      debug_msg(\"call fight over: start\");\n      gfade_out(10);\n      set_global_var(507, 0);\n      if (cur_map_index == 55) then begin\n        if (announcer_obj != 0) then begin\n          last_timed_obj := announcer_obj;\n          last_timed_param := last_timed_param;\n          metarule3(100, announcer_obj, 48, 0);\n          add_timer_event(announcer_obj, game_ticks(0), 48);\n        end\n      end\n      set_global_var(694, global_var(694) bwor 2);\n      move_to(dude_obj, 25076, elevation(self_obj));\n      anim(dude_obj, 1000, 3);\n      if (prize_fighter_obj != 0) then begin\n        if ((global_var(495) bwand 8192) != 0) then begin\n          if (has_trait(1, prize_fighter_obj, 666) == 1) then begin\n            set_obj_visibility(prize_fighter_obj, 1);\n          end\n          prize_fighter_obj := 0;\n        end\n        else begin\n          animate_stand_obj(prize_fighter_obj);\n          critter_injure(prize_fighter_obj, 2 bwor 8388608);\n          move_to(prize_fighter_obj, 25674, elevation(self_obj));\n          anim(prize_fighter_obj, 1000, 3);\n        end\n      end\n      if (has_trait(1, ring_girl_obj, 666) == 1) then begin\n        set_obj_visibility(ring_girl_obj, 1);\n      end\n      if (has_trait(1, announcer_obj, 666) == 0) then begin\n        set_obj_visibility(announcer_obj, 0);\n      end\n      if (cur_map_index == 55) then begin\n        if (announcer_obj != 0) then begin\n          last_timed_obj := announcer_obj;\n          last_timed_param := last_timed_param;\n          metarule3(100, announcer_obj, 48, 0);\n          add_timer_event(announcer_obj, game_ticks(0), 48);\n        end\n      end\n      set_global_var(694, global_var(694) bwor 2);\n      gfade_in(10);\n      debug_msg(\"call fight over: end\");\n      debug_msg(\"lose boxing match\");\n    end\n    else begin\n      if ((global_var(495) bwand -2147483648) != 0) then begin\n        if (obj_pid(self_obj) == 16777647) then begin\n          the_roll := roll_vs_skill(dude_obj, 3, -get_critter_stat(self_obj, 7));\n          if (is_success(the_roll)) then begin\n            if (is_critical(the_roll)) then begin\n              if (((global_var(694) bwand 1) != 0) == 0) then begin\n                display_msg(message_str(353, 1700));\n                restock_obj := create_object_sid(485, 0, 0, -1);\n                add_mult_objs_to_inven(dude_obj, restock_obj, 1);\n              end\n              set_global_var(694, global_var(694) bwor 1);\n            end\n          end\n        end\n      end\n    end\n  end\nend\n","map_enter_p_proc":"if (((global_var(495) bwand 8192) != 0) == 0) then begin\n  prize_fighter_obj := self_obj;\nend\n","map_update_p_proc":"if (((global_var(495) bwand 8192) != 0) == 0) then begin\n  prize_fighter_obj := self_obj;\nend\n","combat_p_proc":"debug_msg(\"seconds til round is over == \" + ((global_var(507) - game_time) / 10));\ndebug_msg(\"   critter_state(self_obj) == \" + critter_state(self_obj));\ndebug_msg(\"   critter_state(dude_obj) == \" + critter_state(dude_obj));\nif ((((global_var(507) - game_time) / 10) <= 0) and (global_var(507) != 0)) then begin\n  play_sfx(\"boxbel2\");\n  if (has_trait(1, announcer_obj, 666) == 1) then begin\n    set_obj_visibility(announcer_obj, 1);\n  end\n  if (has_trait(1, ring_girl_obj, 666) == 1) then begin\n    set_obj_visibility(ring_girl_obj, 1);\n  end\n  gfade_out(10);\n  debug_msg(\"end boxing round start\");\n  if (cur_map_index == 55) then begin\n    if (announcer_obj != 0) then begin\n      last_timed_obj := announcer_obj;\n      last_timed_param := last_timed_param;\n      metarule3(100, announcer_obj, 48, 0);\n      add_timer_event(announcer_obj, game_ticks(0), 48);\n    end\n  end\n  set_global_var(694, global_var(694) bwor 2);\n  debug_msg(\"combat terminated\");\n  set_global_var(507, 0);\n  set_global_var(506, global_var(506) + 1);\n  animate_stand_obj(dude_obj);\n  if ((prize_fighter_obj != 0) and (((global_var(495) bwand 8192) != 0) == 0)) then begin\n    animate_stand_obj(prize_fighter_obj);\n  end\n  if (global_var(510) == 0) then begin\n    debug_msg(\"check_fight_status(fight_status_fighting)\");\n    debug_msg(\"move_boxers_to_corners: start\");\n    move_to(dude_obj, 24479, elevation(self_obj));\n    critter_injure(dude_obj, 2 bwor 8388608);\n    if ((prize_fighter_obj != 0) and (((global_var(495) bwand 8192) != 0) == 0)) then begin\n      move_to(prize_fighter_obj, 26471, elevation(self_obj));\n      animate_stand_obj(prize_fighter_obj);\n      critter_injure(prize_fighter_obj, 2 bwor 8388608);\n      anim(dude_obj, 1000, rotation_to_tile(tile_num(dude_obj), tile_num(prize_fighter_obj)));\n      anim(prize_fighter_obj, 1000, rotation_to_tile(tile_num(prize_fighter_obj), tile_num(dude_obj)));\n    end\n    animate_stand_obj(dude_obj);\n    debug_msg(\"move_boxers_to_corners: end\");\n    set_global_var(508, global_var(508) + 9);\n    set_global_var(509, global_var(509) + 9);\n    if ((local_var(1) > local_var(2)) or ((local_var(1) == local_var(2)) and random(0, 1))) then begin\n      set_global_var(508, global_var(508) + 1);\n    end\n    else begin\n      set_global_var(509, global_var(509) + 1);\n    end\n    if (global_var(506) <= 12) then begin\n      critter_heal(dude_obj, get_critter_stat(dude_obj, 2));\n      critter_heal(prize_fighter_obj, get_critter_stat(prize_fighter_obj, 2));\n      set_local_var(1, 0);\n      set_local_var(2, 0);\n      if (has_trait(1, ring_girl_obj, 666) == 0) then begin\n        set_obj_visibility(ring_girl_obj, 0);\n      end\n      last_timed_obj := announcer_obj;\n      last_timed_param := last_timed_param;\n      metarule3(100, announcer_obj, 110, 0);\n      add_timer_event(announcer_obj, game_ticks(5), 110);\n    end\n    else begin\n      if (global_var(509) > global_var(508)) then begin\n        if (-4 != 0) then begin\n          if (global_var(510) == 0) then begin\n            set_global_var(510, -4);\n            last_timed_obj := announcer_obj;\n            last_timed_param := last_timed_param;\n            metarule3(100, announcer_obj, 200, 0);\n            add_timer_event(announcer_obj, game_ticks(5), 200);\n          end\n        end\n        else begin\n          set_global_var(510, 0);\n        end\n        debug_msg(\"set_fight_status(\" + -4 + \") == \" + global_var(510));\n        debug_msg(\"call fight over: start\");\n        gfade_out(10);\n        set_global_var(507, 0);\n        if (cur_map_index == 55) then begin\n          if (announcer_obj != 0) then begin\n            last_timed_obj := announcer_obj;\n            last_timed_param := last_timed_param;\n            metarule3(100, announcer_obj, 48, 0);\n            add_timer_event(announcer_obj, game_ticks(0), 48);\n          end\n        end\n        set_global_var(694, global_var(694) bwor 2);\n        move_to(dude_obj, 25076, elevation(self_obj));\n        anim(dude_obj, 1000, 3);\n        if (prize_fighter_obj != 0) then begin\n          if ((global_var(495) bwand 8192) != 0) then begin\n            if (has_trait(1, prize_fighter_obj, 666) == 1) then begin\n              set_obj_visibility(prize_fighter_obj, 1);\n            end\n            prize_fighter_obj := 0;\n          end\n          else begin\n            animate_stand_obj(prize_fighter_obj);\n            critter_injure(prize_fighter_obj, 2 bwor 8388608);\n            move_to(prize_fighter_obj, 25674, elevation(self_obj));\n            anim(prize_fighter_obj, 1000, 3);\n          end\n        end\n        if (has_trait(1, ring_girl_obj, 666) == 1) then begin\n          set_obj_visibility(ring_girl_obj, 1);\n        end\n        if (has_trait(1, announcer_obj, 666) == 0) then begin\n          set_obj_visibility(announcer_obj, 0);\n        end\n        if (cur_map_index == 55) then begin\n          if (announcer_obj != 0) then begin\n            last_timed_obj := announcer_obj;\n            last_timed_param := last_timed_param;\n            metarule3(100, announcer_obj, 48, 0);\n            add_timer_event(announcer_obj, game_ticks(0), 48);\n          end\n        end\n        set_global_var(694, global_var(694) bwor 2);\n        gfade_in(10);\n        debug_msg(\"call fight over: end\");\n        debug_msg(\"lose boxing match\");\n      end\n      else begin\n        if (4 != 0) then begin\n          if (global_var(510) == 0) then begin\n            set_global_var(510, 4);\n            last_timed_obj := announcer_obj;\n            last_timed_param := last_timed_param;\n            metarule3(100, announcer_obj, 200, 0);\n            add_timer_event(announcer_obj, game_ticks(5), 200);\n          end\n        end\n        else begin\n          set_global_var(510, 0);\n        end\n        debug_msg(\"set_fight_status(\" + 4 + \") == \" + global_var(510));\n        debug_msg(\"call fight over: start\");\n        gfade_out(10);\n        set_global_var(507, 0);\n        if (cur_map_index == 55) then begin\n          if (announcer_obj != 0) then begin\n            last_timed_obj := announcer_obj;\n            last_timed_param := last_timed_param;\n            metarule3(100, announcer_obj, 48, 0);\n            add_timer_event(announcer_obj, game_ticks(0), 48);\n          end\n        end\n        set_global_var(694, global_var(694) bwor 2);\n        move_to(dude_obj, 25076, elevation(self_obj));\n        anim(dude_obj, 1000, 3);\n        if (prize_fighter_obj != 0) then begin\n          if ((global_var(495) bwand 8192) != 0) then begin\n            if (has_trait(1, prize_fighter_obj, 666) == 1) then begin\n              set_obj_visibility(prize_fighter_obj, 1);\n            end\n            prize_fighter_obj := 0;\n          end\n          else begin\n            animate_stand_obj(prize_fighter_obj);\n            critter_injure(prize_fighter_obj, 2 bwor 8388608);\n            move_to(prize_fighter_obj, 25674, elevation(self_obj));\n            anim(prize_fighter_obj, 1000, 3);\n          end\n        end\n        if (has_trait(1, ring_girl_obj, 666) == 1) then begin\n          set_obj_visibility(ring_girl_obj, 1);\n        end\n        if (has_trait(1, announcer_obj, 666) == 0) then begin\n          set_obj_visibility(announcer_obj, 0);\n        end\n        if (cur_map_index == 55) then begin\n          if (announcer_obj != 0) then begin\n            last_timed_obj := announcer_obj;\n            last_timed_param := last_timed_param;\n            metarule3(100, announcer_obj, 48, 0);\n            add_timer_event(announcer_obj, game_ticks(0), 48);\n          end\n        end\n        set_global_var(694, global_var(694) bwor 2);\n        gfade_in(10);\n        debug_msg(\"call fight over: end\");\n        debug_msg(\"win boxing match\");\n      end\n    end\n  end\n  if (cur_map_index == 55) then begin\n    if (announcer_obj != 0) then begin\n      last_timed_obj := announcer_obj;\n      last_timed_param := last_timed_param;\n      metarule3(100, announcer_obj, 48, 0);\n      add_timer_event(announcer_obj, game_ticks(0), 48);\n    end\n  end\n  set_global_var(694, global_var(694) bwor 2);\n  gfade_in(10);\n  debug_msg(\"end boxing round end\");\nend\nif (global_var(507) != 0) then begin\n  if (fixed_param == 2) then begin\n    set_local_var(2, local_var(2) + 1);\n    debug_msg(\"total punches boxer thrown == \" + local_var(2));\n    if (obj_pid(self_obj) == 16777647) then begin\n      the_roll := roll_vs_skill(self_obj, 3, -get_critter_stat(dude_obj, 7));\n      if (is_success(the_roll)) then begin\n        if (is_critical(the_roll)) then begin\n          if (((global_var(495) bwand -2147483648) != 0) == 0) then begin\n            global_temp := get_critter_stat(dude_obj, 3) - 1;\n            set_critter_stat(dude_obj, 3, global_temp);\n            display_msg(message_str(353, 1600));\n            restock_obj := create_object_sid(484, 0, 0, -1);\n            add_mult_objs_to_inven(dude_obj, restock_obj, 1);\n          end\n          set_global_var(495, global_var(495) bwor -2147483648);\n        end\n      end\n    end\n  end\n  else begin\n    if (fixed_param == 4) then begin\n      debug_msg(\"boxer: COMBAT_SUBTYPE_TURN\");\n      if (critter_is_fleeing(self_obj)) then begin\n        if (2 != 0) then begin\n          if (global_var(510) == 0) then begin\n            set_global_var(510, 2);\n            last_timed_obj := announcer_obj;\n            last_timed_param := last_timed_param;\n            metarule3(100, announcer_obj, 200, 0);\n            add_timer_event(announcer_obj, game_ticks(5), 200);\n          end\n        end\n        else begin\n          set_global_var(510, 0);\n        end\n        debug_msg(\"set_fight_status(\" + 2 + \") == \" + global_var(510));\n        debug_msg(\"call fight over: start\");\n        gfade_out(10);\n        set_global_var(507, 0);\n        if (cur_map_index == 55) then begin\n          if (announcer_obj != 0) then begin\n            last_timed_obj := announcer_obj;\n            last_timed_param := last_timed_param;\n            metarule3(100, announcer_obj, 48, 0);\n            add_timer_event(announcer_obj, game_ticks(0), 48);\n          end\n        end\n        set_global_var(694, global_var(694) bwor 2);\n        move_to(dude_obj, 25076, elevation(self_obj));\n        anim(dude_obj, 1000, 3);\n        if (prize_fighter_obj != 0) then begin\n          if ((global_var(495) bwand 8192) != 0) then begin\n            if (has_trait(1, prize_fighter_obj, 666) == 1) then begin\n              set_obj_visibility(prize_fighter_obj, 1);\n            end\n            prize_fighter_obj := 0;\n          end\n          else begin\n            animate_stand_obj(prize_fighter_obj);\n            critter_injure(prize_fighter_obj, 2 bwor 8388608);\n            move_to(prize_fighter_obj, 25674, elevation(self_obj));\n            anim(prize_fighter_obj, 1000, 3);\n          end\n        end\n        if (has_trait(1, ring_girl_obj, 666) == 1) then begin\n          set_obj_visibility(ring_girl_obj, 1);\n        end\n        if (has_trait(1, announcer_obj, 666) == 0) then begin\n          set_obj_visibility(announcer_obj, 0);\n        end\n        if (cur_map_index == 55) then begin\n          if (announcer_obj != 0) then begin\n            last_timed_obj := announcer_obj;\n            last_timed_param := last_timed_param;\n            metarule3(100, announcer_obj, 48, 0);\n            add_timer_event(announcer_obj, game_ticks(0), 48);\n          end\n        end\n        set_global_var(694, global_var(694) bwor 2);\n        gfade_in(10);\n        debug_msg(\"call fight over: end\");\n        debug_msg(\"win boxing match\");\n      end\n      else begin\n        if (critter_state(self_obj) bwand 2) then begin\n          if (1 != 0) then begin\n            if (global_var(510) == 0) then begin\n              set_global_var(510, 1);\n              last_timed_obj := announcer_obj;\n              last_timed_param := last_timed_param;\n              metarule3(100, announcer_obj, 200, 0);\n              add_timer_event(announcer_obj, game_ticks(5), 200);\n            end\n          end\n          else begin\n            set_global_var(510, 0);\n          end\n          debug_msg(\"set_fight_status(\" + 1 + \") == \" + global_var(510));\n          debug_msg(\"call fight over: start\");\n          gfade_out(10);\n          set_global_var(507, 0);\n          if (cur_map_index == 55) then begin\n            if (announcer_obj != 0) then begin\n              last_timed_obj := announcer_obj;\n              last_timed_param := last_timed_param;\n              metarule3(100, announcer_obj, 48, 0);\n              add_timer_event(announcer_obj, game_ticks(0), 48);\n            end\n          end\n          set_global_var(694, global_var(694) bwor 2);\n          move_to(dude_obj, 25076, elevation(self_obj));\n          anim(dude_obj, 1000, 3);\n          if (prize_fighter_obj != 0) then begin\n            if ((global_var(495) bwand 8192) != 0) then begin\n              if (has_trait(1, prize_fighter_obj, 666) == 1) then begin\n                set_obj_visibility(prize_fighter_obj, 1);\n              end\n              prize_fighter_obj := 0;\n            end\n            else begin\n              animate_stand_obj(prize_fighter_obj);\n              critter_injure(prize_fighter_obj, 2 bwor 8388608);\n              move_to(prize_fighter_obj, 25674, elevation(self_obj));\n              anim(prize_fighter_obj, 1000, 3);\n            end\n          end\n          if (has_trait(1, ring_girl_obj, 666) == 1) then begin\n            set_obj_visibility(ring_girl_obj, 1);\n          end\n          if (has_trait(1, announcer_obj, 666) == 0) then begin\n            set_obj_visibility(announcer_obj, 0);\n          end\n          if (cur_map_index == 55) then begin\n            if (announcer_obj != 0) then begin\n              last_timed_obj := announcer_obj;\n              last_timed_param := last_timed_param;\n              metarule3(100, announcer_obj, 48, 0);\n              add_timer_event(announcer_obj, game_ticks(0), 48);\n            end\n          end\n          set_global_var(694, global_var(694) bwor 2);\n          gfade_in(10);\n          debug_msg(\"call fight over: end\");\n          debug_msg(\"win boxing match\");\n        end\n        else begin\n          if (critter_state(dude_obj) bwand 2) then begin\n            if (-1 != 0) then begin\n              if (global_var(510) == 0) then begin\n                set_global_var(510, -1);\n                last_timed_obj := announcer_obj;\n                last_timed_param := last_timed_param;\n                metarule3(100, announcer_obj, 200, 0);\n                add_timer_event(announcer_obj, game_ticks(5), 200);\n              end\n            end\n            else begin\n              set_global_var(510, 0);\n            end\n            debug_msg(\"set_fight_status(\" + -1 + \") == \" + global_var(510));\n            debug_msg(\"call fight over: start\");\n            gfade_out(10);\n            set_global_var(507, 0);\n            if (cur_map_index == 55) then begin\n              if (announcer_obj != 0) then begin\n                last_timed_obj := announcer_obj;\n                last_timed_param := last_timed_param;\n                metarule3(100, announcer_obj, 48, 0);\n                add_timer_event(announcer_obj, game_ticks(0), 48);\n              end\n            end\n            set_global_var(694, global_var(694) bwor 2);\n            move_to(dude_obj, 25076, elevation(self_obj));\n            anim(dude_obj, 1000, 3);\n            if (prize_fighter_obj != 0) then begin\n              if ((global_var(495) bwand 8192) != 0) then begin\n                if (has_trait(1, prize_fighter_obj, 666) == 1) then begin\n                  set_obj_visibility(prize_fighter_obj, 1);\n                end\n                prize_fighter_obj := 0;\n              end\n              else begin\n                animate_stand_obj(prize_fighter_obj);\n                critter_injure(prize_fighter_obj, 2 bwor 8388608);\n                move_to(prize_fighter_obj, 25674, elevation(self_obj));\n                anim(prize_fighter_obj, 1000, 3);\n              end\n            end\n            if (has_trait(1, ring_girl_obj, 666) == 1) then begin\n              set_obj_visibility(ring_girl_obj, 1);\n            end\n            if (has_trait(1, announcer_obj, 666) == 0) then begin\n              set_obj_visibility(announcer_obj, 0);\n            end\n            if (cur_map_index == 55) then begin\n              if (announcer_obj != 0) then begin\n                last_timed_obj := announcer_obj;\n                last_timed_param := last_timed_param;\n                metarule3(100, announcer_obj, 48, 0);\n                add_timer_event(announcer_obj, game_ticks(0), 48);\n              end\n            end\n            set_global_var(694, global_var(694) bwor 2);\n            gfade_in(10);\n            debug_msg(\"call fight over: end\");\n            debug_msg(\"lose boxing match\");\n          end\n          else begin\n            if (anim_busy(self_obj) == 0) then begin\n              if (random(1, 3) != 2) then begin\n                if ((obj_item_subtype(critter_inven_obj(self_obj, 1)) == 3) or (obj_item_subtype(critter_inven_obj(self_obj, 2)) == 3)) then begin\n                  debug_msg(\"unweilding boxer weapon\");\n                  metarule(43, self_obj);\n                end\n                else begin\n                  if (obj_art_fid(self_obj) == 16777312) then begin\n                    if (obj_is_carrying_obj_pid(self_obj, 489) > 0) then begin\n                      debug_msg(\"weilding boxer weapon\");\n                      wield_obj_critter(self_obj, obj_carrying_pid_obj(self_obj, 489));\n                    end\n                  end\n                end\n              end\n            end\n          end\n        end\n      end\n    end\n  end\nend\n","pickup_p_proc":"script_overrides;\n","timed_event_p_proc":"if (fixed_param == 41) then begin\n  if (critter_state(dude_obj) bwand 2) then begin\n    if (-1 != 0) then begin\n      if (global_var(510) == 0) then begin\n        set_global_var(510, -1);\n        last_timed_obj := announcer_obj;\n        last_timed_param := last_timed_param;\n        metarule3(100, announcer_obj, 200, 0);\n        add_timer_event(announcer_obj, game_ticks(5), 200);\n      end\n    end\n    else begin\n      set_global_var(510, 0);\n    end\n    debug_msg(\"set_fight_status(\" + -1 + \") == \" + global_var(510));\n    debug_msg(\"call fight over: start\");\n    gfade_out(10);\n    set_global_var(507, 0);\n    if (cur_map_index == 55) then begin\n      if (announcer_obj != 0) then begin\n        last_timed_obj := announcer_obj;\n        last_timed_param := last_timed_param;\n        metarule3(100, announcer_obj, 48, 0);\n        add_timer_event(announcer_obj, game_ticks(0), 48);\n      end\n    end\n    set_global_var(694, global_var(694) bwor 2);\n    move_to(dude_obj, 25076, elevation(self_obj));\n    anim(dude_obj, 1000, 3);\n    if (prize_fighter_obj != 0) then begin\n      if ((global_var(495) bwand 8192) != 0) then begin\n        if (has_trait(1, prize_fighter_obj, 666) == 1) then begin\n          set_obj_visibility(prize_fighter_obj, 1);\n        end\n        prize_fighter_obj := 0;\n      end\n      else begin\n        animate_stand_obj(prize_fighter_obj);\n        critter_injure(prize_fighter_obj, 2 bwor 8388608);\n        move_to(prize_fighter_obj, 25674, elevation(self_obj));\n        anim(prize_fighter_obj, 1000, 3);\n      end\n    end\n    if (has_trait(1, ring_girl_obj, 666) == 1) then begin\n      set_obj_visibility(ring_girl_obj, 1);\n    end\n    if (has_trait(1, announcer_obj, 666) == 0) then begin\n      set_obj_visibility(announcer_obj, 0);\n    end\n    if (cur_map_index == 55) then begin\n      if (announcer_obj != 0) then begin\n        last_timed_obj := announcer_obj;\n        last_timed_param := last_timed_param;\n        metarule3(100, announcer_obj, 48, 0);\n        add_timer_event(announcer_obj, game_ticks(0), 48);\n      end\n    end\n    set_global_var(694, global_var(694) bwor 2);\n    gfade_in(10);\n    debug_msg(\"call fight over: end\");\n    debug_msg(\"lose boxing match\");\n  end\n  else begin\n    if (1 != 0) then begin\n      if (global_var(510) == 0) then begin\n        set_global_var(510, 1);\n        last_timed_obj := announcer_obj;\n        last_timed_param := last_timed_param;\n        metarule3(100, announcer_obj, 200, 0);\n        add_timer_event(announcer_obj, game_ticks(5), 200);\n      end\n    end\n    else begin\n      set_global_var(510, 0);\n    end\n    debug_msg(\"set_fight_status(\" + 1 + \") == \" + global_var(510));\n    debug_msg(\"call fight over: start\");\n    gfade_out(10);\n    set_global_var(507, 0);\n    if (cur_map_index == 55) then begin\n      if (announcer_obj != 0) then begin\n        last_timed_obj := announcer_obj;\n        last_timed_param := last_timed_param;\n        metarule3(100, announcer_obj, 48, 0);\n        add_timer_event(announcer_obj, game_ticks(0), 48);\n      end\n    end\n    set_global_var(694, global_var(694) bwor 2);\n    move_to(dude_obj, 25076, elevation(self_obj));\n    anim(dude_obj, 1000, 3);\n    if (prize_fighter_obj != 0) then begin\n      if ((global_var(495) bwand 8192) != 0) then begin\n        if (has_trait(1, prize_fighter_obj, 666) == 1) then begin\n          set_obj_visibility(prize_fighter_obj, 1);\n        end\n        prize_fighter_obj := 0;\n      end\n      else begin\n        animate_stand_obj(prize_fighter_obj);\n        critter_injure(prize_fighter_obj, 2 bwor 8388608);\n        move_to(prize_fighter_obj, 25674, elevation(self_obj));\n        anim(prize_fighter_obj, 1000, 3);\n      end\n    end\n    if (has_trait(1, ring_girl_obj, 666) == 1) then begin\n      set_obj_visibility(ring_girl_obj, 1);\n    end\n    if (has_trait(1, announcer_obj, 666) == 0) then begin\n      set_obj_visibility(announcer_obj, 0);\n    end\n    if (cur_map_index == 55) then begin\n      if (announcer_obj != 0) then begin\n        last_timed_obj := announcer_obj;\n        last_timed_param := last_timed_param;\n        metarule3(100, announcer_obj, 48, 0);\n        add_timer_event(announcer_obj, game_ticks(0), 48);\n      end\n    end\n    set_global_var(694, global_var(694) bwor 2);\n    gfade_in(10);\n    debug_msg(\"call fight over: end\");\n    debug_msg(\"win boxing match\");\n  end\nend\nelse begin\n  if (fixed_param == 42) then begin\n    play_sfx(\"boxbel2\");\n    if (has_trait(1, announcer_obj, 666) == 1) then begin\n      set_obj_visibility(announcer_obj, 1);\n    end\n    if (has_trait(1, ring_girl_obj, 666) == 1) then begin\n      set_obj_visibility(ring_girl_obj, 1);\n    end\n    gfade_out(10);\n    debug_msg(\"end boxing round start\");\n    if (cur_map_index == 55) then begin\n      if (announcer_obj != 0) then begin\n        last_timed_obj := announcer_obj;\n        last_timed_param := last_timed_param;\n        metarule3(100, announcer_obj, 48, 0);\n        add_timer_event(announcer_obj, game_ticks(0), 48);\n      end\n    end\n    set_global_var(694, global_var(694) bwor 2);\n    debug_msg(\"combat terminated\");\n    set_global_var(507, 0);\n    set_global_var(506, global_var(506) + 1);\n    animate_stand_obj(dude_obj);\n    if ((prize_fighter_obj != 0) and (((global_var(495) bwand 8192) != 0) == 0)) then begin\n      animate_stand_obj(prize_fighter_obj);\n    end\n    if (global_var(510) == 0) then begin\n      debug_msg(\"check_fight_status(fight_status_fighting)\");\n      debug_msg(\"move_boxers_to_corners: start\");\n      move_to(dude_obj, 24479, elevation(self_obj));\n      critter_injure(dude_obj, 2 bwor 8388608);\n      if ((prize_fighter_obj != 0) and (((global_var(495) bwand 8192) != 0) == 0)) then begin\n        move_to(prize_fighter_obj, 26471, elevation(self_obj));\n        animate_stand_obj(prize_fighter_obj);\n        critter_injure(prize_fighter_obj, 2 bwor 8388608);\n        anim(dude_obj, 1000, rotation_to_tile(tile_num(dude_obj), tile_num(prize_fighter_obj)));\n        anim(prize_fighter_obj, 1000, rotation_to_tile(tile_num(prize_fighter_obj), tile_num(dude_obj)));\n      end\n      animate_stand_obj(dude_obj);\n      debug_msg(\"move_boxers_to_corners: end\");\n      set_global_var(508, global_var(508) + 9);\n      set_global_var(509, global_var(509) + 9);\n      if ((local_var(1) > local_var(2)) or ((local_var(1) == local_var(2)) and random(0, 1))) then begin\n        set_global_var(508, global_var(508) + 1);\n      end\n      else begin\n        set_global_var(509, global_var(509) + 1);\n      end\n      if (global_var(506) <= 12) then begin\n        critter_heal(dude_obj, get_critter_stat(dude_obj, 2));\n        critter_heal(prize_fighter_obj, get_critter_stat(prize_fighter_obj, 2));\n        set_local_var(1, 0);\n        set_local_var(2, 0);\n        if (has_trait(1, ring_girl_obj, 666) == 0) then begin\n          set_obj_visibility(ring_girl_obj, 0);\n        end\n        last_timed_obj := announcer_obj;\n        last_timed_param := last_timed_param;\n        metarule3(100, announcer_obj, 110, 0);\n        add_timer_event(announcer_obj, game_ticks(5), 110);\n      end\n      else begin\n        if (global_var(509) > global_var(508)) then begin\n          if (-4 != 0) then begin\n            if (global_var(510) == 0) then begin\n              set_global_var(510, -4);\n              last_timed_obj := announcer_obj;\n              last_timed_param := last_timed_param;\n              metarule3(100, announcer_obj, 200, 0);\n              add_timer_event(announcer_obj, game_ticks(5), 200);\n            end\n          end\n          else begin\n            set_global_var(510, 0);\n          end\n          debug_msg(\"set_fight_status(\" + -4 + \") == \" + global_var(510));\n          debug_msg(\"call fight over: start\");\n          gfade_out(10);\n          set_global_var(507, 0);\n          if (cur_map_index == 55) then begin\n            if (announcer_obj != 0) then begin\n              last_timed_obj := announcer_obj;\n              last_timed_param := last_timed_param;\n              metarule3(100, announcer_obj, 48, 0);\n              add_timer_event(announcer_obj, game_ticks(0), 48);\n            end\n          end\n          set_global_var(694, global_var(694) bwor 2);\n          move_to(dude_obj, 25076, elevation(self_obj));\n          anim(dude_obj, 1000, 3);\n          if (prize_fighter_obj != 0) then begin\n            if ((global_var(495) bwand 8192) != 0) then begin\n              if (has_trait(1, prize_fighter_obj, 666) == 1) then begin\n                set_obj_visibility(prize_fighter_obj, 1);\n              end\n              prize_fighter_obj := 0;\n            end\n            else begin\n              animate_stand_obj(prize_fighter_obj);\n              critter_injure(prize_fighter_obj, 2 bwor 8388608);\n              move_to(prize_fighter_obj, 25674, elevation(self_obj));\n              anim(prize_fighter_obj, 1000, 3);\n            end\n          end\n          if (has_trait(1, ring_girl_obj, 666) == 1) then begin\n            set_obj_visibility(ring_girl_obj, 1);\n          end\n          if (has_trait(1, announcer_obj, 666) == 0) then begin\n            set_obj_visibility(announcer_obj, 0);\n          end\n          if (cur_map_index == 55) then begin\n            if (announcer_obj != 0) then begin\n              last_timed_obj := announcer_obj;\n              last_timed_param := last_timed_param;\n              metarule3(100, announcer_obj, 48, 0);\n              add_timer_event(announcer_obj, game_ticks(0), 48);\n            end\n          end\n          set_global_var(694, global_var(694) bwor 2);\n          gfade_in(10);\n          debug_msg(\"call fight over: end\");\n          debug_msg(\"lose boxing match\");\n        end\n        else begin\n          if (4 != 0) then begin\n            if (global_var(510) == 0) then begin\n              set_global_var(510, 4);\n              last_timed_obj := announcer_obj;\n              last_timed_param := last_timed_param;\n              metarule3(100, announcer_obj, 200, 0);\n              add_timer_event(announcer_obj, game_ticks(5), 200);\n            end\n          end\n          else begin\n            set_global_var(510, 0);\n          end\n          debug_msg(\"set_fight_status(\" + 4 + \") == \" + global_var(510));\n          debug_msg(\"call fight over: start\");\n          gfade_out(10);\n          set_global_var(507, 0);\n          if (cur_map_index == 55) then begin\n            if (announcer_obj != 0) then begin\n              last_timed_obj := announcer_obj;\n              last_timed_param := last_timed_param;\n              metarule3(100, announcer_obj, 48, 0);\n              add_timer_event(announcer_obj, game_ticks(0), 48);\n            end\n          end\n          set_global_var(694, global_var(694) bwor 2);\n          move_to(dude_obj, 25076, elevation(self_obj));\n          anim(dude_obj, 1000, 3);\n          if (prize_fighter_obj != 0) then begin\n            if ((global_var(495) bwand 8192) != 0) then begin\n              if (has_trait(1, prize_fighter_obj, 666) == 1) then begin\n                set_obj_visibility(prize_fighter_obj, 1);\n              end\n              prize_fighter_obj := 0;\n            end\n            else begin\n              animate_stand_obj(prize_fighter_obj);\n              critter_injure(prize_fighter_obj, 2 bwor 8388608);\n              move_to(prize_fighter_obj, 25674, elevation(self_obj));\n              anim(prize_fighter_obj, 1000, 3);\n            end\n          end\n          if (has_trait(1, ring_girl_obj, 666) == 1) then begin\n            set_obj_visibility(ring_girl_obj, 1);\n          end\n          if (has_trait(1, announcer_obj, 666) == 0) then begin\n            set_obj_visibility(announcer_obj, 0);\n          end\n          if (cur_map_index == 55) then begin\n            if (announcer_obj != 0) then begin\n              last_timed_obj := announcer_obj;\n              last_timed_param := last_timed_param;\n              metarule3(100, announcer_obj, 48, 0);\n              add_timer_event(announcer_obj, game_ticks(0), 48);\n            end\n          end\n          set_global_var(694, global_var(694) bwor 2);\n          gfade_in(10);\n          debug_msg(\"call fight over: end\");\n          debug_msg(\"win boxing match\");\n        end\n      end\n    end\n    if (cur_map_index == 55) then begin\n      if (announcer_obj != 0) then begin\n        last_timed_obj := announcer_obj;\n        last_timed_param := last_timed_param;\n        metarule3(100, announcer_obj, 48, 0);\n        add_timer_event(announcer_obj, game_ticks(0), 48);\n      end\n    end\n    set_global_var(694, global_var(694) bwor 2);\n    gfade_in(10);\n    debug_msg(\"end boxing round end\");\n  end\nend\n","Node998":"[]","Node999":"[]"}</script></body><script src="../jquery.js"></script><script src="../underscore.js"></script><script>(function() {
  var downAt, hideCode, nodes, positionCode, showCode;

  $('svg').attr('unselectable', 'on').css({
    '-moz-user-select': '-moz-none',
    '-moz-user-select': 'none',
    '-o-user-select': 'none',
    '-khtml-user-select': 'none',
    '-webkit-user-select': 'none',
    '-ms-user-select': 'none',
    'user-select': 'none'
  }).bind('selectstart', function() {
    return false;
  });

  $('<div/>', {
    id: 'thecode'
  }).appendTo('body');

  $('#thecode').css({
    'pointer-events': 'none',
    background: 'white',
    padding: '1em',
    outline: 'solid gray 1px',
    'white-space': 'pre',
    position: 'fixed',
    left: 0,
    top: 0
  });

  showCode = function(code, x, y) {
    $('#thecode').show();
    $('#thecode').text(code);
    return positionCode(x, y);
  };

  hideCode = function() {
    return $('#thecode').hide();
  };

  positionCode = function(x, y) {
    return $('#thecode').css({
      left: x,
      top: y
    });
  };

  nodes = $('.node');

  _.each(nodes, function(node) {
    var nodeName;
    nodeName = $(node).find('title').text();
    $(node).mousemove(function(e) {
      return showCode(Codes[nodeName], e.clientX, e.clientY);
    });
    return $(node).mouseleave(function() {
      return hideCode();
    });
  });

  $('svg title').remove();

  downAt = null;

  $('svg').mousedown(function(e) {
    var x, y;
    x = e.pageX;
    y = e.pageY;
    return downAt = {
      x: x,
      y: y
    };
  });

  $('svg').mousemove(function(e) {
    var delta, x, y;
    if (!downAt) {
      return;
    }
    x = e.pageX;
    y = e.pageY;
    delta = {
      x: x - downAt.x,
      y: y - downAt.y
    };
    window.scrollBy(-delta.x, -delta.y);
    return false;
  });

  $('svg').mouseup(function(e) {
    return downAt = null;
  });

  $('svg').mouseleave(function(e) {
    return downAt = null;
  });

}).call(this);
</script></html>