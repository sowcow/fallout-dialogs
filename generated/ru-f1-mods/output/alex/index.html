<!DOCTYPE html><html><head><title>alex</title><meta charset="utf-8" /></head><body><svg width="1052pt" height="670pt"
 viewBox="0.00 0.00 1052.39 670.18" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 666.18)">
<title>alex</title>
<polygon fill="white" stroke="none" points="-4,4 -4,-666.18 1048.39,-666.18 1048.39,4 -4,4"/>
<!-- start -->
<g id="node1" class="node">
<title>start</title>
<ellipse fill="#ffffff" stroke="#000000" cx="334.14" cy="-644.18" rx="27" ry="18"/>
</g>
<!-- critter_p_proc -->
<g id="node2" class="node">
<title>critter_p_proc</title>
<ellipse fill="#ffffff" stroke="#000000" cx="165.14" cy="-546.93" rx="27" ry="18"/>
</g>
<!-- start&#45;&gt;critter_p_proc -->
<g id="edge1" class="edge">
<title>start&#45;&gt;critter_p_proc</title>
<path fill="none" stroke="#555555" stroke-dasharray="1,5" d="M309.12,-636.83C281.02,-628.87 234.92,-613.27 201.14,-589.18 194.43,-584.4 188.15,-578.13 182.76,-571.93"/>
<polygon fill="#555555" stroke="#555555" points="185.05,-570.2 176.02,-564.66 179.62,-574.62 185.05,-570.2"/>
</g>
<!-- destroy_p_proc -->
<g id="node3" class="node">
<title>destroy_p_proc</title>
<ellipse fill="#ffffff" stroke="#000000" cx="237.14" cy="-546.93" rx="27" ry="18"/>
</g>
<!-- start&#45;&gt;destroy_p_proc -->
<g id="edge2" class="edge">
<title>start&#45;&gt;destroy_p_proc</title>
<path fill="none" stroke="#555555" stroke-dasharray="1,5" d="M317.57,-629.52C305,-618.91 287.49,-603.63 273.14,-589.18 267.65,-583.65 261.98,-577.44 256.82,-571.54"/>
<polygon fill="#555555" stroke="#555555" points="258.86,-569.54 249.69,-564.24 253.55,-574.11 258.86,-569.54"/>
</g>
<!-- look_at_p_proc -->
<g id="node4" class="node">
<title>look_at_p_proc</title>
<ellipse fill="#ffffff" stroke="#000000" cx="431.14" cy="-546.93" rx="149.2" ry="42.25"/>
<text text-anchor="middle" x="431.14" y="-559.51" font-family="Times,serif" font-size="14.00">Вы видите Алекса,</text>
<text text-anchor="middle" x="431.14" y="-542.26" font-family="Times,serif" font-size="14.00">Регулятора. Он на ночном</text>
<text text-anchor="middle" x="431.14" y="-525.01" font-family="Times,serif" font-size="14.00">дежурстве.</text>
</g>
<!-- start&#45;&gt;look_at_p_proc -->
<g id="edge3" class="edge">
<title>start&#45;&gt;look_at_p_proc</title>
<path fill="none" stroke="#555555" stroke-dasharray="1,5" d="M348.87,-628.72C358.09,-619.67 370.53,-607.44 382.95,-595.25"/>
<polygon fill="#555555" stroke="#555555" points="384.97,-598.19 389.65,-588.69 380.07,-593.2 384.97,-598.19"/>
</g>
<!-- talk_p_proc -->
<g id="node5" class="node">
<title>talk_p_proc</title>
<ellipse fill="#ffffff" stroke="#000000" cx="647.14" cy="-546.93" rx="48.58" ry="18"/>
<text text-anchor="middle" x="647.14" y="-542.26" font-family="Times,serif" font-size="14.00">Входи, </text>
</g>
<!-- start&#45;&gt;talk_p_proc -->
<g id="edge4" class="edge">
<title>start&#45;&gt;talk_p_proc</title>
<path fill="none" stroke="#555555" stroke-dasharray="1,5" d="M360.92,-641.12C408.61,-636.67 510.61,-623.64 589.14,-589.18 600.03,-584.4 610.93,-577.39 620.29,-570.49"/>
<polygon fill="#555555" stroke="#555555" points="621.95,-572.87 627.75,-564 617.68,-567.31 621.95,-572.87"/>
</g>
<!-- sleeping -->
<g id="node6" class="node">
<title>sleeping</title>
<ellipse fill="#ffffff" stroke="#000000" cx="165.14" cy="-437.63" rx="27" ry="18"/>
</g>
<!-- critter_p_proc&#45;&gt;sleeping -->
<g id="edge5" class="edge">
<title>critter_p_proc&#45;&gt;sleeping</title>
<path fill="none" stroke="#555555" stroke-dasharray="1,5" d="M165.14,-528.69C165.14,-511.95 165.14,-486.26 165.14,-466.6"/>
<polygon fill="#555555" stroke="#555555" points="168.64,-466.83 165.14,-456.83 161.64,-466.83 168.64,-466.83"/>
</g>
<!-- Alex01 -->
<g id="node7" class="node">
<title>Alex01</title>
<ellipse fill="#ffffff" stroke="#000000" cx="772.14" cy="-437.63" rx="140.18" ry="30.05"/>
<text text-anchor="middle" x="772.14" y="-441.58" font-family="Times,serif" font-size="14.00">Извини, я не могу тебя</text>
<text text-anchor="middle" x="772.14" y="-424.33" font-family="Times,serif" font-size="14.00">пустить. Приходи утром.</text>
</g>
<!-- talk_p_proc&#45;&gt;Alex01 -->
<g id="edge6" class="edge">
<title>talk_p_proc&#45;&gt;Alex01</title>
<path fill="none" stroke="#555555" stroke-dasharray="1,5" d="M665.85,-529.87C683,-515.15 709,-492.83 730.98,-473.96"/>
<polygon fill="#555555" stroke="#555555" points="732.88,-476.09 738.19,-466.92 728.32,-470.78 732.88,-476.09"/>
</g>
<!-- Alex02 -->
<g id="node8" class="node">
<title>Alex02</title>
<ellipse fill="#ffffff" stroke="#000000" cx="521.14" cy="-437.63" rx="93.3" ry="18"/>
<text text-anchor="middle" x="521.14" y="-432.96" font-family="Times,serif" font-size="14.00">Стой! Кто идет?</text>
</g>
<!-- talk_p_proc&#45;&gt;Alex02 -->
<g id="edge7" class="edge">
<title>talk_p_proc&#45;&gt;Alex02</title>
<path fill="none" stroke="#555555" stroke-dasharray="1,5" d="M628.28,-529.87C607.27,-511.98 573.12,-482.9 549.03,-462.38"/>
<polygon fill="#555555" stroke="#555555" points="551.85,-459.33 541.96,-455.51 547.31,-464.66 551.85,-459.33"/>
</g>
<!-- Alex03 -->
<g id="node9" class="node">
<title>Alex03</title>
<ellipse fill="#ffffff" stroke="#000000" cx="267.14" cy="-246.04" rx="159.81" ry="42.25"/>
<text text-anchor="middle" x="267.14" y="-258.61" font-family="Times,serif" font-size="14.00">Посторонним не место в</text>
<text text-anchor="middle" x="267.14" y="-241.36" font-family="Times,serif" font-size="14.00">Адитуме. Это распоряжение</text>
<text text-anchor="middle" x="267.14" y="-224.11" font-family="Times,serif" font-size="14.00">мэра.</text>
</g>
<!-- Alex02&#45;&gt;Alex03 -->
<g id="edge8" class="edge">
<title>Alex02&#45;&gt;Alex03</title>
<path fill="none" stroke="#939900" d="M434.14,-430.85C372.8,-424.81 298.02,-412.83 277.39,-389.58 256.05,-365.53 253.68,-329.31 256.56,-299.4"/>
<polygon fill="#939900" stroke="#939900" points="260.12,-300.04 257.82,-289.69 253.17,-299.21 260.12,-300.04"/>
<text text-anchor="middle" x="364.01" y="-376.28" font-family="Times,serif" font-size="14.00" fill="#939900">Я просто путешествую.</text>
<text text-anchor="middle" x="364.01" y="-359.03" font-family="Times,serif" font-size="14.00" fill="#939900">Можно мне войти?</text>
</g>
<!-- Alex05 -->
<g id="node10" class="node">
<title>Alex05</title>
<ellipse fill="#ffffff" stroke="#000000" cx="662.14" cy="-246.04" rx="141.77" ry="91.04"/>
<text text-anchor="middle" x="662.14" y="-293.11" font-family="Times,serif" font-size="14.00">Слушай, я на дежурстве,</text>
<text text-anchor="middle" x="662.14" y="-275.86" font-family="Times,serif" font-size="14.00">так что это как раз мое</text>
<text text-anchor="middle" x="662.14" y="-258.61" font-family="Times,serif" font-size="14.00">дело. Или ты сейчас</text>
<text text-anchor="middle" x="662.14" y="-241.36" font-family="Times,serif" font-size="14.00">развернешься и уйдешь</text>
<text text-anchor="middle" x="662.14" y="-224.11" font-family="Times,serif" font-size="14.00">подобру&#45;поздорову, или</text>
<text text-anchor="middle" x="662.14" y="-206.86" font-family="Times,serif" font-size="14.00">мне придется применить</text>
<text text-anchor="middle" x="662.14" y="-189.61" font-family="Times,serif" font-size="14.00">силу.</text>
</g>
<!-- Alex02&#45;&gt;Alex05 -->
<g id="edge9" class="edge">
<title>Alex02&#45;&gt;Alex05</title>
<path fill="none" stroke="#720099" d="M533.9,-419.47C547.97,-400.56 571.69,-368.66 594.94,-337.4"/>
<polygon fill="#720099" stroke="#720099" points="598.32,-339.72 601.48,-329.61 592.7,-335.54 598.32,-339.72"/>
<text text-anchor="middle" x="628.01" y="-367.65" font-family="Times,serif" font-size="14.00" fill="#720099">Не твое дело.</text>
</g>
<!-- Alex06 -->
<g id="node11" class="node">
<title>Alex06</title>
<ellipse fill="#ffffff" stroke="#000000" cx="448.14" cy="-42.25" rx="93.3" ry="18"/>
<text text-anchor="middle" x="448.14" y="-37.57" font-family="Times,serif" font-size="14.00">Приходи утром.</text>
</g>
<!-- Alex02&#45;&gt;Alex06 -->
<g id="edge10" class="edge">
<title>Alex02&#45;&gt;Alex06</title>
<path fill="none" stroke="#009945" d="M571.57,-422.16C614.7,-409.74 671.47,-393.27 682.14,-389.58 741.42,-369.09 774.95,-386.84 813.14,-337.08 876.94,-253.93 908.88,-178.9 837.14,-102.5 815.34,-79.29 582.2,-91.51 551.14,-84.5 530.62,-79.87 508.87,-71.69 490.67,-63.82"/>
<polygon fill="#009945" stroke="#009945" points="492.24,-60.25 481.68,-59.39 489.4,-66.64 492.24,-60.25"/>
<text text-anchor="middle" x="960.76" y="-249.99" font-family="Times,serif" font-size="14.00" fill="#009945">Прошу прощения, уже</text>
<text text-anchor="middle" x="960.76" y="-232.74" font-family="Times,serif" font-size="14.00" fill="#009945">ухожу.</text>
</g>
<!-- Alex02&#45;&gt;Alex06 -->
<g id="edge11" class="edge">
<title>Alex02&#45;&gt;Alex06</title>
<path fill="none" stroke="#991900" d="M510.17,-419.45C498.51,-400.22 480.6,-367.72 472.14,-337.08 458.45,-287.5 451.46,-134.65 449.09,-71.25"/>
<polygon fill="#991900" stroke="#991900" points="452.56,-71.37 448.7,-61.5 445.57,-71.62 452.56,-71.37"/>
<text text-anchor="middle" x="491.64" y="-241.36" font-family="Times,serif" font-size="14.00" fill="#991900">Э&#45;э&#45;э.</text>
</g>
<!-- Alex03&#45;&gt;Alex06 -->
<g id="edge13" class="edge">
<title>Alex03&#45;&gt;Alex06</title>
<path fill="none" stroke="#419900" d="M260.46,-203.56C257.85,-172.54 259.68,-130.77 281.89,-102.5 294.61,-86.3 339.85,-70.77 379.93,-59.67"/>
<polygon fill="#419900" stroke="#419900" points="380.78,-62.8 389.52,-56.81 378.95,-56.04 380.78,-62.8"/>
<text text-anchor="middle" x="365.76" y="-123.7" font-family="Times,serif" font-size="14.00" fill="#419900">Прошу прощения, уже</text>
<text text-anchor="middle" x="365.76" y="-106.45" font-family="Times,serif" font-size="14.00" fill="#419900">ухожу.</text>
</g>
<!-- Alex04 -->
<g id="node12" class="node">
<title>Alex04</title>
<ellipse fill="#ffffff" stroke="#000000" cx="148.14" cy="-42.25" rx="148.14" ry="42.25"/>
<text text-anchor="middle" x="148.14" y="-54.82" font-family="Times,serif" font-size="14.00">Извини, но я не могу тебя</text>
<text text-anchor="middle" x="148.14" y="-37.57" font-family="Times,serif" font-size="14.00">впустить. Уходи, или мне</text>
<text text-anchor="middle" x="148.14" y="-20.32" font-family="Times,serif" font-size="14.00">придется тебя убить.</text>
</g>
<!-- Alex03&#45;&gt;Alex04 -->
<g id="edge12" class="edge">
<title>Alex03&#45;&gt;Alex04</title>
<path fill="none" stroke="#001499" d="M207.94,-206.59C185.35,-188.45 162.06,-164.69 149.64,-137 143.96,-124.34 141.9,-109.72 141.67,-95.85"/>
<polygon fill="#001499" stroke="#001499" points="145.19,-95.99 141.85,-85.94 138.19,-95.88 145.19,-95.99"/>
<text text-anchor="middle" x="204.89" y="-123.7" font-family="Times,serif" font-size="14.00" fill="#001499">Мне бы только</text>
<text text-anchor="middle" x="204.89" y="-106.45" font-family="Times,serif" font-size="14.00" fill="#001499">переночевать.</text>
</g>
<!-- Alex05&#45;&gt;Alex06 -->
<g id="edge14" class="edge">
<title>Alex05&#45;&gt;Alex06</title>
<path fill="none" stroke="#99006d" d="M562.33,-180.84C544.62,-167.39 527.02,-152.53 511.89,-137 492.15,-116.74 474.48,-89.68 462.78,-69.84"/>
<polygon fill="#99006d" stroke="#99006d" points="465.41,-68.39 457.38,-61.47 459.34,-71.88 465.41,-68.39"/>
<text text-anchor="middle" x="594.76" y="-123.7" font-family="Times,serif" font-size="14.00" fill="#99006d">Прошу прощения, уже</text>
<text text-anchor="middle" x="594.76" y="-106.45" font-family="Times,serif" font-size="14.00" fill="#99006d">ухожу.</text>
</g>
<!-- Alex07 -->
<g id="node13" class="node">
<title>Alex07</title>
<ellipse fill="#ffffff" stroke="#000000" cx="701.14" cy="-42.25" rx="141.24" ry="30.05"/>
<text text-anchor="middle" x="701.14" y="-46.2" font-family="Times,serif" font-size="14.00">Ах так. Ну все, оружие к</text>
<text text-anchor="middle" x="701.14" y="-28.95" font-family="Times,serif" font-size="14.00">бою!</text>
</g>
<!-- Alex05&#45;&gt;Alex07 -->
<g id="edge15" class="edge">
<title>Alex05&#45;&gt;Alex07</title>
<path fill="none" stroke="#009998" d="M679.47,-155.36C684.37,-130.02 689.45,-103.72 693.46,-82.97"/>
<polygon fill="#009998" stroke="#009998" points="697.05,-83.84 695.51,-73.36 690.18,-82.51 697.05,-83.84"/>
<text text-anchor="middle" x="764.14" y="-123.7" font-family="Times,serif" font-size="14.00" fill="#009998">Уйди с глаз долой!</text>
<text text-anchor="middle" x="764.14" y="-106.45" font-family="Times,serif" font-size="14.00" fill="#009998">Поборники закона...</text>
</g>
</g>
</svg>
<script>window.Codes = {"start":"if (not(initialized)) then begin\n  critter_add_trait(self_obj, 1, 6, 49);\n  sleep_tile := 14275;\n  home_tile := 11300;\n  wake_time := 2030;\n  sleep_time := 730;\n  night_person := 1;\n  if (obj_is_carrying_obj_pid(self_obj, 41) == 0) then begin\n    item_caps_adjust(self_obj, random(0, 20));\n  end\n  initialized := 1;\nend\nelse begin\n  if (script_action == 12) then begin\n    call critter_p_proc;\n  end\n  else begin\n    if (script_action == 18) then begin\n      call destroy_p_proc;\n    end\n    else begin\n      if (script_action == 21) then begin\n        call look_at_p_proc;\n      end\n      else begin\n        if (script_action == 11) then begin\n          call talk_p_proc;\n        end\n      end\n    end\n  end\nend\n","critter_p_proc":"if (obj_can_see_obj(self_obj, dude_obj)) then begin\n  if (hostile) then begin\n    hostile := 0;\n    attack_complex(dude_obj, 0, 1, 0, 0, 30000, 0, 0);\n  end\n  else begin\n    if (local_var(0) == 0) then begin\n      if (tile_distance_objs(self_obj, dude_obj) < 12) then begin\n        dialogue_system_enter;\n      end\n    end\n    if (tile_distance(tile_num(dude_obj), 10700) > tile_distance(tile_num(dude_obj), 11900)) then begin\n      if (global_var(128) < 2) then begin\n        hostile := 1;\n      end\n    end\n  end\nend\nelse begin\n  call sleeping;\nend\n","destroy_p_proc":"if (source_obj == dude_obj) then begin\n  if (((global_var(160) + global_var(159)) >= 25) and ((global_var(159) > (2 * global_var(160))) or (global_var(156) == 1))) then begin\n    set_global_var(156, 1);\n    set_global_var(157, 0);\n  end\n  if (((global_var(160) + global_var(159)) >= 25) and ((global_var(160) > (3 * global_var(159))) or (global_var(157) == 1))) then begin\n    set_global_var(157, 1);\n    set_global_var(156, 0);\n  end\n  set_global_var(159, global_var(159) + 1);\n  if ((global_var(159) % 2) == 0) then begin\n    set_global_var(155, global_var(155) - 1);\n  end\nend\n","look_at_p_proc":"if (local_var(0)) then begin\n  script_overrides;\n  display_msg(message_str(670, 100));\nend\n","talk_p_proc":"if (global_var(128) == 2) then begin\n  float_msg(self_obj, message_str(670, 101) + proto_data(obj_pid(dude_obj), 1), 0);\nend\nelse begin\n  if (local_var(0)) then begin\n    call Alex01;\n  end\n  else begin\n    start_gdialog(670, self_obj, 4, -1, -1);\n    gsay_start;\n    call Alex02;\n    gsay_end;\n    end_dialogue;\n  end\nend\n","Alex01":"float_msg(self_obj, message_str(670, 102), 0);\n","Alex02":"set_local_var(0, 1);\ngsay_reply(670, 103);\ngiq_option(4, 670, 104, Alex03, 50);\ngiq_option(4, 670, 105, Alex05, 51);\ngiq_option(4, 670, 106, Alex06, 50);\ngiq_option(-3, 670, 114, Alex06, 50);\n","Alex03":"gsay_reply(670, 107);\ngiq_option(4, 670, 108, Alex04, 50);\ngiq_option(4, 670, 106, Alex06, 50);\n","Alex04":"gsay_message(670, 109, 50);\n","Alex05":"gsay_reply(670, 110);\ngiq_option(4, 670, 106, Alex06, 50);\ngiq_option(4, 670, 111, Alex07, 50);\n","Alex06":"gsay_message(670, 112, 50);\n","Alex07":"hostile := 1;\ngsay_message(670, 113, 51);\n","sleeping":"if (local_var(1) == 1) then begin\n  if (not(night_person) and (game_time_hour >= wake_time) and (game_time_hour < sleep_time) or (night_person and ((game_time_hour >= wake_time) or (game_time_hour < sleep_time)))) then begin\n    if (((game_time_hour - wake_time) < 10) and ((game_time_hour - wake_time) > 0)) then begin\n      if (tile_num(self_obj) != home_tile) then begin\n        animate_move_obj_to_tile(self_obj, home_tile, 0);\n      end\n      else begin\n        set_local_var(1, 0);\n      end\n    end\n    else begin\n      move_to(self_obj, home_tile, elevation(self_obj));\n      if (tile_num(self_obj) == home_tile) then begin\n        set_local_var(1, 0);\n      end\n    end\n  end\nend\nelse begin\n  if (night_person and (game_time_hour >= sleep_time) and (game_time_hour < wake_time) or (not(night_person) and ((game_time_hour >= sleep_time) or (game_time_hour < wake_time)))) then begin\n    if (((game_time_hour - sleep_time) < 10) and ((game_time_hour - sleep_time) > 0)) then begin\n      if (tile_num(self_obj) != sleep_tile) then begin\n        animate_move_obj_to_tile(self_obj, self_obj, 0);\n      end\n      else begin\n        set_local_var(1, 1);\n      end\n    end\n    else begin\n      if (tile_num(self_obj) != sleep_tile) then begin\n        move_to(self_obj, sleep_tile, elevation(self_obj));\n      end\n      else begin\n        set_local_var(1, 1);\n      end\n    end\n  end\nend\n"}</script></body><script src="../jquery.js"></script><script src="../underscore.js"></script><script>(function() {
  var downAt, hideCode, nodes, positionCode, showCode;

  $('svg').attr('unselectable', 'on').css({
    '-moz-user-select': '-moz-none',
    '-moz-user-select': 'none',
    '-o-user-select': 'none',
    '-khtml-user-select': 'none',
    '-webkit-user-select': 'none',
    '-ms-user-select': 'none',
    'user-select': 'none'
  }).bind('selectstart', function() {
    return false;
  });

  $('<div/>', {
    id: 'thecode'
  }).appendTo('body');

  $('#thecode').css({
    'pointer-events': 'none',
    background: 'white',
    padding: '1em',
    outline: 'solid gray 1px',
    'white-space': 'pre',
    position: 'fixed',
    left: 0,
    top: 0
  });

  showCode = function(code, x, y) {
    $('#thecode').show();
    $('#thecode').text(code);
    return positionCode(x, y);
  };

  hideCode = function() {
    return $('#thecode').hide();
  };

  positionCode = function(x, y) {
    return $('#thecode').css({
      left: x,
      top: y
    });
  };

  nodes = $('.node');

  _.each(nodes, function(node) {
    var nodeName;
    nodeName = $(node).find('title').text();
    $(node).mousemove(function(e) {
      return showCode(Codes[nodeName], e.clientX, e.clientY);
    });
    return $(node).mouseleave(function() {
      return hideCode();
    });
  });

  $('svg title').remove();

  downAt = null;

  $('svg').mousedown(function(e) {
    var x, y;
    x = e.pageX;
    y = e.pageY;
    return downAt = {
      x: x,
      y: y
    };
  });

  $('svg').mousemove(function(e) {
    var delta, x, y;
    if (!downAt) {
      return;
    }
    x = e.pageX;
    y = e.pageY;
    delta = {
      x: x - downAt.x,
      y: y - downAt.y
    };
    window.scrollBy(-delta.x, -delta.y);
    return false;
  });

  $('svg').mouseup(function(e) {
    return downAt = null;
  });

  $('svg').mouseleave(function(e) {
    return downAt = null;
  });

}).call(this);
</script></html>