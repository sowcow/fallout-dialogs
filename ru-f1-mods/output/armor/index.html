<!DOCTYPE html><html><head><title>armor</title><meta charset="utf-8" /></head><body><svg width="854pt" height="744pt"
 viewBox="0.00 0.00 853.73 744.37" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 740.37)">
<title>armor</title>
<polygon fill="white" stroke="none" points="-4,4 -4,-740.37 849.73,-740.37 849.73,4 -4,4"/>
<!-- start -->
<g id="node1" class="node">
<title>start</title>
<ellipse fill="#ffffff" stroke="#000000" cx="376.55" cy="-718.37" rx="27" ry="18"/>
</g>
<!-- look_at_p_proc -->
<g id="node2" class="node">
<title>look_at_p_proc</title>
<ellipse fill="#ffffff" stroke="#000000" cx="146.55" cy="-634.32" rx="146.55" ry="30.05"/>
<text text-anchor="middle" x="146.55" y="-638.27" font-family="Times,serif" font-size="14.00">Вы видите поврежденную</text>
<text text-anchor="middle" x="146.55" y="-621.02" font-family="Times,serif" font-size="14.00">силовую броню.</text>
</g>
<!-- start&#45;&gt;look_at_p_proc -->
<g id="edge1" class="edge">
<title>start&#45;&gt;look_at_p_proc</title>
<path fill="none" stroke="#555555" stroke-dasharray="1,5" d="M353.23,-709.05C324.09,-698.65 272.67,-680.31 228.42,-664.52"/>
<polygon fill="#555555" stroke="#555555" points="229.81,-660.95 219.22,-660.88 227.46,-667.54 229.81,-660.95"/>
</g>
<!-- use_p_proc -->
<g id="node3" class="node">
<title>use_p_proc</title>
<ellipse fill="#ffffff" stroke="#000000" cx="348.55" cy="-526.01" rx="146.02" ry="42.25"/>
<text text-anchor="middle" x="348.55" y="-538.59" font-family="Times,serif" font-size="14.00">Вы не сможете</text>
<text text-anchor="middle" x="348.55" y="-521.34" font-family="Times,serif" font-size="14.00">использовать это, пока не</text>
<text text-anchor="middle" x="348.55" y="-504.09" font-family="Times,serif" font-size="14.00">почините.</text>
</g>
<!-- start&#45;&gt;use_p_proc -->
<g id="edge2" class="edge">
<title>start&#45;&gt;use_p_proc</title>
<path fill="none" stroke="#555555" stroke-dasharray="1,5" d="M362.8,-702.44C354.59,-692.47 344.93,-678.61 340.55,-664.37 332.16,-637.1 333.34,-605.38 336.99,-579.29"/>
<polygon fill="#555555" stroke="#555555" points="340.59,-579.91 338.68,-569.49 333.68,-578.83 340.59,-579.91"/>
</g>
<!-- pickup_p_proc -->
<g id="node4" class="node">
<title>pickup_p_proc</title>
<ellipse fill="#ffffff" stroke="#000000" cx="376.55" cy="-634.32" rx="27" ry="18"/>
</g>
<!-- start&#45;&gt;pickup_p_proc -->
<g id="edge3" class="edge">
<title>start&#45;&gt;pickup_p_proc</title>
<path fill="none" stroke="#555555" stroke-dasharray="1,5" d="M376.55,-699.97C376.55,-689.41 376.55,-675.7 376.55,-663.62"/>
<polygon fill="#555555" stroke="#555555" points="380.05,-663.69 376.55,-653.69 373.05,-663.69 380.05,-663.69"/>
</g>
<!-- use_skill_on_p_proc -->
<g id="node5" class="node">
<title>use_skill_on_p_proc</title>
<ellipse fill="#ffffff" stroke="#000000" cx="555.55" cy="-526.01" rx="27" ry="18"/>
</g>
<!-- start&#45;&gt;use_skill_on_p_proc -->
<g id="edge4" class="edge">
<title>start&#45;&gt;use_skill_on_p_proc</title>
<path fill="none" stroke="#555555" stroke-dasharray="1,5" d="M387.4,-701.69C394.61,-691.19 404.25,-677.02 412.55,-664.37 429.87,-637.94 428.57,-626.98 450.55,-604.26 470.35,-583.8 480.6,-585.12 503.55,-568.26 512.51,-561.68 522.1,-554.2 530.58,-547.43"/>
<polygon fill="#555555" stroke="#555555" points="532.34,-549.71 537.93,-540.71 527.95,-544.25 532.34,-549.71"/>
</g>
<!-- use_obj_on_p_proc -->
<g id="node6" class="node">
<title>use_obj_on_p_proc</title>
<ellipse fill="#ffffff" stroke="#000000" cx="571.55" cy="-634.32" rx="112.24" ry="18"/>
<text text-anchor="middle" x="571.55" y="-629.64" font-family="Times,serif" font-size="14.00">Это ничего не даст.</text>
</g>
<!-- start&#45;&gt;use_obj_on_p_proc -->
<g id="edge5" class="edge">
<title>start&#45;&gt;use_obj_on_p_proc</title>
<path fill="none" stroke="#555555" stroke-dasharray="1,5" d="M398.92,-707.96C428.92,-695.33 483,-672.58 522.66,-655.89"/>
<polygon fill="#555555" stroke="#555555" points="523.81,-658.78 531.66,-651.68 521.09,-652.33 523.81,-658.78"/>
</g>
<!-- pickup_p_proc&#45;&gt;use_p_proc -->
<g id="edge6" class="edge">
<title>pickup_p_proc&#45;&gt;use_p_proc</title>
<path fill="none" stroke="#555555" stroke-dasharray="1,5" d="M372.05,-616.24C369.34,-605.95 365.73,-592.24 362.15,-578.67"/>
<polygon fill="#555555" stroke="#555555" points="365.37,-578.15 359.44,-569.37 358.6,-579.94 365.37,-578.15"/>
</g>
<!-- try_skill -->
<g id="node7" class="node">
<title>try_skill</title>
<ellipse fill="#ffffff" stroke="#000000" cx="555.55" cy="-356.72" rx="147.08" ry="91.04"/>
<text text-anchor="middle" x="555.55" y="-403.8" font-family="Times,serif" font-size="14.00">Очевидно, навык ремонта</text>
<text text-anchor="middle" x="555.55" y="-386.55" font-family="Times,serif" font-size="14.00">вы еще не освоили.</text>
<text text-anchor="middle" x="555.55" y="-369.3" font-family="Times,serif" font-size="14.00">&#45;&#45;&#45;</text>
<text text-anchor="middle" x="555.55" y="-352.05" font-family="Times,serif" font-size="14.00">Кажется, не хватает</text>
<text text-anchor="middle" x="555.55" y="-334.8" font-family="Times,serif" font-size="14.00">какой&#45;то детали.</text>
<text text-anchor="middle" x="555.55" y="-317.55" font-family="Times,serif" font-size="14.00">&#45;&#45;&#45;</text>
<text text-anchor="middle" x="555.55" y="-300.3" font-family="Times,serif" font-size="14.00">Это ничего не даст.</text>
</g>
<!-- use_skill_on_p_proc&#45;&gt;try_skill -->
<g id="edge7" class="edge">
<title>use_skill_on_p_proc&#45;&gt;try_skill</title>
<path fill="none" stroke="#555555" stroke-dasharray="1,5" d="M555.55,-507.74C555.55,-495.47 555.55,-477.89 555.55,-459.04"/>
<polygon fill="#555555" stroke="#555555" points="559.05,-459.16 555.55,-449.16 552.05,-459.16 559.05,-459.16"/>
</g>
<!-- use_obj_on_p_proc&#45;&gt;use_skill_on_p_proc -->
<g id="edge8" class="edge">
<title>use_obj_on_p_proc&#45;&gt;use_skill_on_p_proc</title>
<path fill="none" stroke="#555555" stroke-dasharray="1,5" d="M568.98,-616.24C566.5,-599.75 562.7,-574.5 559.77,-555.07"/>
<polygon fill="#555555" stroke="#555555" points="563.11,-554.77 558.17,-545.4 556.19,-555.81 563.11,-554.77"/>
</g>
<!-- chance -->
<g id="node8" class="node">
<title>chance</title>
<ellipse fill="#ffffff" stroke="#000000" cx="555.55" cy="-211.68" rx="27" ry="18"/>
</g>
<!-- try_skill&#45;&gt;chance -->
<g id="edge11" class="edge">
<title>try_skill&#45;&gt;chance</title>
<path fill="none" stroke="#555555" stroke-dasharray="1,5" d="M549.01,-265.54C549.21,-256.61 549.56,-248.09 550.07,-240.61"/>
<polygon fill="#555555" stroke="#555555" points="553.63,-241.04 550.98,-230.78 546.65,-240.45 553.63,-241.04"/>
</g>
<!-- try_skill&#45;&gt;chance -->
<g id="edge12" class="edge">
<title>try_skill&#45;&gt;chance</title>
<path fill="none" stroke="#555555" stroke-dasharray="1,5" d="M562.09,-265.54C561.89,-256.61 561.53,-248.09 561.03,-240.61"/>
<polygon fill="#555555" stroke="#555555" points="564.44,-240.45 560.12,-230.78 557.47,-241.04 564.44,-240.45"/>
</g>
<!-- fixed -->
<g id="node9" class="node">
<title>fixed</title>
<ellipse fill="#ffffff" stroke="#000000" cx="405.55" cy="-78.84" rx="142.31" ry="78.84"/>
<text text-anchor="middle" x="405.55" y="-117.29" font-family="Times,serif" font-size="14.00">Вы ремонтируете броню.</text>
<text text-anchor="middle" x="405.55" y="-100.04" font-family="Times,serif" font-size="14.00">&#45;&#45;&#45;</text>
<text text-anchor="middle" x="405.55" y="-82.79" font-family="Times,serif" font-size="14.00">Вы получаете </text>
<text text-anchor="middle" x="405.55" y="-65.54" font-family="Times,serif" font-size="14.00">&#45;&#45;&#45;</text>
<text text-anchor="middle" x="405.55" y="-48.29" font-family="Times,serif" font-size="14.00">очков опыта за ремонт</text>
<text text-anchor="middle" x="405.55" y="-31.04" font-family="Times,serif" font-size="14.00">силовой брони.</text>
</g>
<!-- chance&#45;&gt;fixed -->
<g id="edge9" class="edge">
<title>chance&#45;&gt;fixed</title>
<path fill="none" stroke="#555555" stroke-dasharray="1,5" d="M539.5,-196.68C527,-185.78 508.6,-169.73 489.41,-153"/>
<polygon fill="#555555" stroke="#555555" points="492,-149.73 482.16,-145.8 487.39,-155.01 492,-149.73"/>
</g>
<!-- failure -->
<g id="node10" class="node">
<title>failure</title>
<ellipse fill="#ffffff" stroke="#000000" cx="705.55" cy="-78.84" rx="140.18" ry="30.05"/>
<text text-anchor="middle" x="705.55" y="-82.79" font-family="Times,serif" font-size="14.00">Вам не удалось</text>
<text text-anchor="middle" x="705.55" y="-65.54" font-family="Times,serif" font-size="14.00">отремонтировать броню.</text>
</g>
<!-- chance&#45;&gt;failure -->
<g id="edge10" class="edge">
<title>chance&#45;&gt;failure</title>
<path fill="none" stroke="#555555" stroke-dasharray="1,5" d="M571.6,-196.68C593.66,-177.44 634.11,-142.16 664.8,-115.38"/>
<polygon fill="#555555" stroke="#555555" points="666.55,-117.64 671.78,-108.42 661.94,-112.36 666.55,-117.64"/>
</g>
</g>
</svg>
<script>window.Codes = {"start":"bonus := 0;\nif (script_action == 21) then begin\n  call look_at_p_proc;\nend\nelse begin\n  if (script_action == 6) then begin\n    call use_p_proc;\n  end\n  else begin\n    if (script_action == 4) then begin\n      call pickup_p_proc;\n    end\n    else begin\n      if (script_action == 8) then begin\n        call use_skill_on_p_proc;\n      end\n      else begin\n        if (script_action == 7) then begin\n          call use_obj_on_p_proc;\n        end\n      end\n    end\n  end\nend\n","use_p_proc":"if (source_obj != dude_obj) then begin\nend\nelse begin\n  display_msg(message_str(936, 101));\nend\n","pickup_p_proc":"call use_p_proc;\n","look_at_p_proc":"display_msg(message_str(936, 100));\n","use_skill_on_p_proc":"use_skill := action_being_used;\ncall try_skill;\n","use_obj_on_p_proc":"if (obj_pid(obj_being_used_with) == 75) then begin\n  bonus := 10;\n  use_skill := 13;\n  call use_skill_on_p_proc;\nend\nelse begin\n  display_msg(message_str(936, 105));\nend\n","chance":"Test := roll_vs_skill(dude_obj, 13, bonus);\nif (is_success(Test)) then begin\n  call fixed;\nend\nelse begin\n  call failure;\nend\n","try_skill":"if (use_skill == 13) then begin\n  if (global_var(304) > 1) then begin\n    if (global_var(304) == 3) then begin\n      if (has_skill(dude_obj, 13) < 75) then begin\n        script_overrides;\n        display_msg(message_str(936, 103));\n      end\n      else begin\n        call chance;\n      end\n    end\n    else begin\n      call chance;\n    end\n  end\n  else begin\n    script_overrides;\n    display_msg(message_str(936, 102));\n  end\nend\nelse begin\n  script_overrides;\n  display_msg(message_str(936, 105));\nend\n","fixed":"script_overrides;\nset_global_var(304, 4);\ndisplay_msg(message_str(936, 104));\ncreate_object_sid(3, 22475, 0, -1);\ntemp := 500;\ndisplay_msg(message_str(936, 107) + temp + message_str(936, 108));\ngive_exp_points(temp);\ndestroy_object(self_obj);\n","failure":"script_overrides;\nset_global_var(304, 3);\ndisplay_msg(message_str(936, 106));\n"}</script></body><script src="../jquery.js"></script><script src="../underscore.js"></script><script>(function() {
  var downAt, hideCode, nodes, positionCode, showCode;

  $('svg').attr('unselectable', 'on').css({
    '-moz-user-select': '-moz-none',
    '-moz-user-select': 'none',
    '-o-user-select': 'none',
    '-khtml-user-select': 'none',
    '-webkit-user-select': 'none',
    '-ms-user-select': 'none',
    'user-select': 'none'
  }).bind('selectstart', function() {
    return false;
  });

  $('<div/>', {
    id: 'thecode'
  }).appendTo('body');

  $('#thecode').css({
    'pointer-events': 'none',
    background: 'white',
    padding: '1em',
    outline: 'solid gray 1px',
    'white-space': 'pre',
    position: 'fixed',
    left: 0,
    top: 0
  });

  showCode = function(code, x, y) {
    $('#thecode').show();
    $('#thecode').text(code);
    return positionCode(x, y);
  };

  hideCode = function() {
    return $('#thecode').hide();
  };

  positionCode = function(x, y) {
    return $('#thecode').css({
      left: x,
      top: y
    });
  };

  nodes = $('.node');

  _.each(nodes, function(node) {
    var nodeName;
    nodeName = $(node).find('title').text();
    $(node).mousemove(function(e) {
      return showCode(Codes[nodeName], e.clientX, e.clientY);
    });
    return $(node).mouseleave(function() {
      return hideCode();
    });
  });

  $('svg title').remove();

  downAt = null;

  $('svg').mousedown(function(e) {
    var x, y;
    x = e.pageX;
    y = e.pageY;
    return downAt = {
      x: x,
      y: y
    };
  });

  $('svg').mousemove(function(e) {
    var delta, x, y;
    if (!downAt) {
      return;
    }
    x = e.pageX;
    y = e.pageY;
    delta = {
      x: x - downAt.x,
      y: y - downAt.y
    };
    window.scrollBy(-delta.x, -delta.y);
    return false;
  });

  $('svg').mouseup(function(e) {
    return downAt = null;
  });

  $('svg').mouseleave(function(e) {
    return downAt = null;
  });

}).call(this);
</script></html>