<!DOCTYPE html><html><head><title>peasantc</title><meta charset="utf-8" /></head><body><svg width="1384pt" height="1451pt"
 viewBox="0.00 0.00 1384.11 1450.83" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 1446.83)">
<title>peasantc</title>
<polygon fill="white" stroke="none" points="-4,4 -4,-1446.83 1380.11,-1446.83 1380.11,4 -4,4"/>
<!-- start -->
<g id="node1" class="node">
<title>start</title>
<ellipse fill="#ffffff" stroke="#000000" cx="27" cy="-1363.99" rx="27" ry="18"/>
</g>
<!-- critter_p_proc -->
<g id="node2" class="node">
<title>critter_p_proc</title>
<ellipse fill="#ffffff" stroke="#000000" cx="99" cy="-1363.99" rx="27" ry="18"/>
</g>
<!-- flee_dude -->
<g id="node3" class="node">
<title>flee_dude</title>
<ellipse fill="#ffffff" stroke="#000000" cx="99" cy="-1218.1" rx="27" ry="18"/>
</g>
<!-- critter_p_proc&#45;&gt;flee_dude -->
<g id="edge1" class="edge">
<title>critter_p_proc&#45;&gt;flee_dude</title>
<path fill="none" stroke="#555555" stroke-dasharray="1,5" d="M99,-1345.64C99,-1321.22 99,-1276.46 99,-1247.24"/>
<polygon fill="#555555" stroke="#555555" points="102.5,-1247.52 99,-1237.52 95.5,-1247.52 102.5,-1247.52"/>
</g>
<!-- damage_p_proc -->
<g id="node4" class="node">
<title>damage_p_proc</title>
<ellipse fill="#ffffff" stroke="#000000" cx="171" cy="-1363.99" rx="27" ry="18"/>
</g>
<!-- destroy_p_proc -->
<g id="node5" class="node">
<title>destroy_p_proc</title>
<ellipse fill="#ffffff" stroke="#000000" cx="243" cy="-1363.99" rx="27" ry="18"/>
</g>
<!-- map_enter_p_proc -->
<g id="node6" class="node">
<title>map_enter_p_proc</title>
<ellipse fill="#ffffff" stroke="#000000" cx="315" cy="-1363.99" rx="27" ry="18"/>
</g>
<!-- map_update_p_proc -->
<g id="node7" class="node">
<title>map_update_p_proc</title>
<ellipse fill="#ffffff" stroke="#000000" cx="387" cy="-1363.99" rx="27" ry="18"/>
</g>
<!-- sleeping -->
<g id="node8" class="node">
<title>sleeping</title>
<ellipse fill="#ffffff" stroke="#000000" cx="387" cy="-1218.1" rx="27" ry="18"/>
</g>
<!-- map_update_p_proc&#45;&gt;sleeping -->
<g id="edge2" class="edge">
<title>map_update_p_proc&#45;&gt;sleeping</title>
<path fill="none" stroke="#555555" stroke-dasharray="1,5" d="M387,-1345.64C387,-1321.22 387,-1276.46 387,-1247.24"/>
<polygon fill="#555555" stroke="#555555" points="390.5,-1247.52 387,-1237.52 383.5,-1247.52 390.5,-1247.52"/>
</g>
<!-- pickup_p_proc -->
<g id="node9" class="node">
<title>pickup_p_proc</title>
<ellipse fill="#ffffff" stroke="#000000" cx="554" cy="-1363.99" rx="122.23" ry="18"/>
<text text-anchor="middle" x="554" y="-1359.32" font-family="Times,serif" font-size="14.00">Оставь меня в покое!</text>
</g>
<!-- talk_p_proc -->
<g id="node10" class="node">
<title>talk_p_proc</title>
<ellipse fill="#ffffff" stroke="#000000" cx="832" cy="-1363.99" rx="138.06" ry="78.84"/>
<text text-anchor="middle" x="832" y="-1402.44" font-family="Times,serif" font-size="14.00">Оставь меня в покое!</text>
<text text-anchor="middle" x="832" y="-1385.19" font-family="Times,serif" font-size="14.00">&#45;&#45;&#45;</text>
<text text-anchor="middle" x="832" y="-1367.94" font-family="Times,serif" font-size="14.00">Убирайся!</text>
<text text-anchor="middle" x="832" y="-1350.69" font-family="Times,serif" font-size="14.00">&#45;&#45;&#45;</text>
<text text-anchor="middle" x="832" y="-1333.44" font-family="Times,serif" font-size="14.00">Я слышал о тебе плохие</text>
<text text-anchor="middle" x="832" y="-1316.19" font-family="Times,serif" font-size="14.00">слова, они правдивы?</text>
</g>
<!-- PeasantC00 -->
<g id="node11" class="node">
<title>PeasantC00</title>
<ellipse fill="#ffffff" stroke="#000000" cx="832" cy="-1218.1" rx="147.61" ry="30.05"/>
<text text-anchor="middle" x="832" y="-1222.05" font-family="Times,serif" font-size="14.00">Надеюсь, ты не выкинешь</text>
<text text-anchor="middle" x="832" y="-1204.8" font-family="Times,serif" font-size="14.00">меня отсюда.</text>
</g>
<!-- talk_p_proc&#45;&gt;PeasantC00 -->
<g id="edge3" class="edge">
<title>talk_p_proc&#45;&gt;PeasantC00</title>
<path fill="none" stroke="#555555" stroke-dasharray="1,5" d="M832,-1284.73C832,-1275.95 832,-1267.29 832,-1259.29"/>
<polygon fill="#555555" stroke="#555555" points="835.5,-1259.47 832,-1249.47 828.5,-1259.47 835.5,-1259.47"/>
</g>
<!-- PeasantCEnd -->
<g id="node12" class="node">
<title>PeasantCEnd</title>
<ellipse fill="#ffffff" stroke="#000000" cx="746" cy="-30.05" rx="27" ry="18"/>
</g>
<!-- PeasantC00&#45;&gt;PeasantCEnd -->
<g id="edge4" class="edge">
<title>PeasantC00&#45;&gt;PeasantCEnd</title>
<path fill="none" stroke="#889900" d="M769.07,-1190.66C721.02,-1165.79 663,-1123.47 663,-1064.1 663,-1064.1 663,-1064.1 663,-361.96 663,-245.63 711.85,-113.02 734.6,-57.59"/>
<polygon fill="#889900" stroke="#889900" points="738.16,-59.13 738.78,-48.56 731.7,-56.44 738.16,-59.13"/>
<text text-anchor="middle" x="679.12" y="-741.02" font-family="Times,serif" font-size="14.00" fill="#889900">Нет.</text>
</g>
<!-- PeasantC00a -->
<g id="node13" class="node">
<title>PeasantC00a</title>
<ellipse fill="#ffffff" stroke="#000000" cx="846" cy="-1063.1" rx="27" ry="18"/>
</g>
<!-- PeasantC00&#45;&gt;PeasantC00a -->
<g id="edge5" class="edge">
<title>PeasantC00&#45;&gt;PeasantC00a</title>
<path fill="none" stroke="#7e0099" d="M831.17,-1187.59C831.04,-1172.07 831.34,-1152.74 833,-1135.55 834.39,-1121.08 837.17,-1105.16 839.8,-1092.03"/>
<polygon fill="#7e0099" stroke="#7e0099" points="843.42,-1092.81 842.03,-1082.31 836.56,-1091.39 843.42,-1092.81"/>
<text text-anchor="middle" x="932" y="-1156.75" font-family="Times,serif" font-size="14.00" fill="#7e0099">Довольно странный способ</text>
<text text-anchor="middle" x="932" y="-1139.5" font-family="Times,serif" font-size="14.00" fill="#7e0099">начинать разговор.</text>
</g>
<!-- PeasantC01 -->
<g id="node14" class="node">
<title>PeasantC01</title>
<ellipse fill="#ffffff" stroke="#000000" cx="1053" cy="-1063.1" rx="148.14" ry="54.45"/>
<text text-anchor="middle" x="1053" y="-1084.3" font-family="Times,serif" font-size="14.00">Да ладно, если хочешь,</text>
<text text-anchor="middle" x="1053" y="-1067.05" font-family="Times,serif" font-size="14.00">оставайся тут на время. Я</text>
<text text-anchor="middle" x="1053" y="-1049.8" font-family="Times,serif" font-size="14.00">думаю, мы тут в</text>
<text text-anchor="middle" x="1053" y="-1032.55" font-family="Times,serif" font-size="14.00">безопасности.</text>
</g>
<!-- PeasantC00&#45;&gt;PeasantC01 -->
<g id="edge6" class="edge">
<title>PeasantC00&#45;&gt;PeasantC01</title>
<path fill="none" stroke="#009951" d="M950.91,-1199.93C986.21,-1192.53 1018.75,-1182.64 1031,-1170.05 1041.91,-1158.83 1048.05,-1143.7 1051.37,-1128.39"/>
<polygon fill="#009951" stroke="#009951" points="1054.95,-1129.26 1053.24,-1118.81 1048.05,-1128.04 1054.95,-1129.26"/>
<text text-anchor="middle" x="1071.5" y="-1148.12" font-family="Times,serif" font-size="14.00" fill="#009951">Ым&#45;м.</text>
</g>
<!-- PeasantC03 -->
<g id="node15" class="node">
<title>PeasantC03</title>
<ellipse fill="#ffffff" stroke="#000000" cx="846" cy="-880.61" rx="155.03" ry="91.04"/>
<text text-anchor="middle" x="846" y="-927.69" font-family="Times,serif" font-size="14.00">Ну, это правда. После</text>
<text text-anchor="middle" x="846" y="-910.44" font-family="Times,serif" font-size="14.00">того, что случилось с</text>
<text text-anchor="middle" x="846" y="-893.19" font-family="Times,serif" font-size="14.00">моими друзьями, мне</text>
<text text-anchor="middle" x="846" y="-875.94" font-family="Times,serif" font-size="14.00">приходится защищать свою</text>
<text text-anchor="middle" x="846" y="-858.69" font-family="Times,serif" font-size="14.00">территорию. Надеюсь, что</text>
<text text-anchor="middle" x="846" y="-841.44" font-family="Times,serif" font-size="14.00">ты не собираешься меня</text>
<text text-anchor="middle" x="846" y="-824.19" font-family="Times,serif" font-size="14.00">убивать.</text>
</g>
<!-- PeasantC00a&#45;&gt;PeasantC03 -->
<g id="edge7" class="edge">
<title>PeasantC00a&#45;&gt;PeasantC03</title>
<path fill="none" stroke="#555555" stroke-dasharray="1,5" d="M846,-1044.79C846,-1029.81 846,-1006.8 846,-982.75"/>
<polygon fill="#555555" stroke="#555555" points="849.5,-983.03 846,-973.03 842.5,-983.03 849.5,-983.03"/>
</g>
<!-- PeasantC02 -->
<g id="node16" class="node">
<title>PeasantC02</title>
<ellipse fill="#ffffff" stroke="#000000" cx="1178" cy="-880.61" rx="159.28" ry="54.45"/>
<text text-anchor="middle" x="1178" y="-901.81" font-family="Times,serif" font-size="14.00">Да уж, в наши дни нужно</text>
<text text-anchor="middle" x="1178" y="-884.56" font-family="Times,serif" font-size="14.00">быть осторожным. Надеюсь,</text>
<text text-anchor="middle" x="1178" y="-867.31" font-family="Times,serif" font-size="14.00">у тебя жизнь получше, чем</text>
<text text-anchor="middle" x="1178" y="-850.06" font-family="Times,serif" font-size="14.00">у меня.</text>
</g>
<!-- PeasantC00a&#45;&gt;PeasantC02 -->
<g id="edge8" class="edge">
<title>PeasantC00a&#45;&gt;PeasantC02</title>
<path fill="none" stroke="#555555" stroke-dasharray="1,5" d="M857.09,-1046.49C866.28,-1034.59 880.34,-1018.6 896,-1008.65 940.95,-980.07 961,-992.54 1010,-971.65 1036.18,-960.49 1063.74,-946.67 1088.78,-933.23"/>
<polygon fill="#555555" stroke="#555555" points="1090.13,-935.94 1097.25,-928.1 1086.79,-929.78 1090.13,-935.94"/>
</g>
<!-- PeasantC03&#45;&gt;PeasantCEnd -->
<g id="edge11" class="edge">
<title>PeasantC03&#45;&gt;PeasantCEnd</title>
<path fill="none" stroke="#359900" d="M812.72,-791.23C802.72,-762.91 792.23,-731.26 784,-701.82 716.61,-460.79 735.49,-152.57 743.37,-59.13"/>
<polygon fill="#359900" stroke="#359900" points="746.93,-59.61 744.31,-49.34 739.95,-59 746.93,-59.61"/>
<text text-anchor="middle" x="787.12" y="-634.52" font-family="Times,serif" font-size="14.00" fill="#359900">Нет.</text>
</g>
<!-- PeasantC04 -->
<g id="node17" class="node">
<title>PeasantC04</title>
<ellipse fill="#ffffff" stroke="#000000" cx="828" cy="-683.82" rx="34.9" ry="18"/>
<text text-anchor="middle" x="828" y="-679.15" font-family="Times,serif" font-size="14.00">Бей!</text>
</g>
<!-- PeasantC03&#45;&gt;PeasantC04 -->
<g id="edge9" class="edge">
<title>PeasantC03&#45;&gt;PeasantC04</title>
<path fill="none" stroke="#992400" d="M830.83,-789.53C830.12,-783.47 829.49,-777.44 829,-771.57 827.36,-752.06 827.13,-729.99 827.3,-713"/>
<polygon fill="#992400" stroke="#992400" points="830.81,-713.19 827.47,-703.14 823.81,-713.08 830.81,-713.19"/>
<text text-anchor="middle" x="910" y="-758.27" font-family="Times,serif" font-size="14.00" fill="#992400">Нет, я тебе не сделаю</text>
<text text-anchor="middle" x="910" y="-741.02" font-family="Times,serif" font-size="14.00" fill="#992400">больно. Ну, не очень</text>
<text text-anchor="middle" x="910" y="-723.77" font-family="Times,serif" font-size="14.00" fill="#992400">больно.</text>
</g>
<!-- PeasantC03a -->
<g id="node18" class="node">
<title>PeasantC03a</title>
<ellipse fill="#ffffff" stroke="#000000" cx="1013" cy="-683.82" rx="27" ry="18"/>
</g>
<!-- PeasantC03&#45;&gt;PeasantC03a -->
<g id="edge10" class="edge">
<title>PeasantC03&#45;&gt;PeasantC03a</title>
<path fill="none" stroke="#000899" d="M952.43,-814.13C967,-801.48 980.53,-787.23 991,-771.57 1002.67,-754.11 1008.15,-730.91 1010.73,-712.89"/>
<polygon fill="#000899" stroke="#000899" points="1014.29,-713.52 1012.01,-703.17 1007.34,-712.69 1014.29,-713.52"/>
<text text-anchor="middle" x="1059.62" y="-741.02" font-family="Times,serif" font-size="14.00" fill="#000899">С чего вдруг?</text>
</g>
<!-- PeasantC06 -->
<g id="node19" class="node">
<title>PeasantC06</title>
<ellipse fill="#ffffff" stroke="#000000" cx="936" cy="-362.96" rx="161.93" ry="249.61"/>
<text text-anchor="middle" x="936" y="-522.16" font-family="Times,serif" font-size="14.00">Это &quot;услужливые&quot; лекари</text>
<text text-anchor="middle" x="936" y="-504.91" font-family="Times,serif" font-size="14.00">хотели получить жилье</text>
<text text-anchor="middle" x="936" y="-487.66" font-family="Times,serif" font-size="14.00">моего друга, и они его</text>
<text text-anchor="middle" x="936" y="-470.41" font-family="Times,serif" font-size="14.00">получили. Я даже не знаю,</text>
<text text-anchor="middle" x="936" y="-453.16" font-family="Times,serif" font-size="14.00">что с ним произошло.</text>
<text text-anchor="middle" x="936" y="-435.91" font-family="Times,serif" font-size="14.00">&#45;&#45;&#45;</text>
<text text-anchor="middle" x="936" y="-418.66" font-family="Times,serif" font-size="14.00">Никто мне не хочет</text>
<text text-anchor="middle" x="936" y="-401.41" font-family="Times,serif" font-size="14.00">помочь.</text>
<text text-anchor="middle" x="936" y="-384.16" font-family="Times,serif" font-size="14.00">&#45;&#45;&#45;</text>
<text text-anchor="middle" x="936" y="-366.91" font-family="Times,serif" font-size="14.00">Гизмо мне в лицо</text>
<text text-anchor="middle" x="936" y="-349.66" font-family="Times,serif" font-size="14.00">рассмеялся, когда я</text>
<text text-anchor="middle" x="936" y="-332.41" font-family="Times,serif" font-size="14.00">попросил его о помощи.</text>
<text text-anchor="middle" x="936" y="-315.16" font-family="Times,serif" font-size="14.00">&#45;&#45;&#45;</text>
<text text-anchor="middle" x="936" y="-297.91" font-family="Times,serif" font-size="14.00">А Киллиан слишком занят</text>
<text text-anchor="middle" x="936" y="-280.66" font-family="Times,serif" font-size="14.00">тем, что вычищает конюшни</text>
<text text-anchor="middle" x="936" y="-263.41" font-family="Times,serif" font-size="14.00">после Гизмо, чтобы</text>
<text text-anchor="middle" x="936" y="-246.16" font-family="Times,serif" font-size="14.00">помочь.</text>
<text text-anchor="middle" x="936" y="-228.91" font-family="Times,serif" font-size="14.00">&#45;&#45;&#45;</text>
<text text-anchor="middle" x="936" y="-211.66" font-family="Times,serif" font-size="14.00">А Киллиан слишком занят,</text>
<text text-anchor="middle" x="936" y="-194.41" font-family="Times,serif" font-size="14.00">чтобы мне помочь.</text>
</g>
<!-- PeasantC03a&#45;&gt;PeasantC06 -->
<g id="edge12" class="edge">
<title>PeasantC03a&#45;&gt;PeasantC06</title>
<path fill="none" stroke="#555555" stroke-dasharray="1,5" d="M1008.86,-665.68C1005.61,-652.21 1000.66,-631.74 994.85,-607.67"/>
<polygon fill="#555555" stroke="#555555" points="998.06,-607.05 992.31,-598.15 991.26,-608.69 998.06,-607.05"/>
</g>
<!-- PeasantC05 -->
<g id="node20" class="node">
<title>PeasantC05</title>
<ellipse fill="#ffffff" stroke="#000000" cx="1246" cy="-362.96" rx="130.11" ry="30.05"/>
<text text-anchor="middle" x="1246" y="-366.91" font-family="Times,serif" font-size="14.00">Нет никакой причины.</text>
<text text-anchor="middle" x="1246" y="-349.66" font-family="Times,serif" font-size="14.00">Правда.</text>
</g>
<!-- PeasantC03a&#45;&gt;PeasantC05 -->
<g id="edge13" class="edge">
<title>PeasantC03a&#45;&gt;PeasantC05</title>
<path fill="none" stroke="#555555" stroke-dasharray="1,5" d="M1032.92,-671.4C1053.39,-658.93 1085.25,-637.4 1107,-612.57 1164,-547.5 1208.01,-455.26 1230.16,-403.38"/>
<polygon fill="#555555" stroke="#555555" points="1233.77,-404.82 1234.43,-394.25 1227.32,-402.11 1233.77,-404.82"/>
</g>
<!-- PeasantC06&#45;&gt;PeasantCEnd -->
<g id="edge15" class="edge">
<title>PeasantC06&#45;&gt;PeasantCEnd</title>
<path fill="none" stroke="#008e99" d="M828.78,-175.23C801.76,-128.17 776.09,-83.45 760.69,-56.63"/>
<polygon fill="#008e99" stroke="#008e99" points="763.32,-55.19 755.31,-48.26 757.25,-58.68 763.32,-55.19"/>
<text text-anchor="middle" x="807.75" y="-82.05" font-family="Times,serif" font-size="14.00" fill="#008e99">Позор.</text>
</g>
<!-- PeasantC07 -->
<g id="node21" class="node">
<title>PeasantC07</title>
<ellipse fill="#ffffff" stroke="#000000" cx="936" cy="-30.05" rx="137" ry="30.05"/>
<text text-anchor="middle" x="936" y="-34" font-family="Times,serif" font-size="14.00">Надеюсь, что так, очень</text>
<text text-anchor="middle" x="936" y="-16.75" font-family="Times,serif" font-size="14.00">надеюсь.</text>
</g>
<!-- PeasantC06&#45;&gt;PeasantC07 -->
<g id="edge14" class="edge">
<title>PeasantC06&#45;&gt;PeasantC07</title>
<path fill="none" stroke="#990061" d="M936,-113.28C936,-97.76 936,-83.56 936,-71.49"/>
<polygon fill="#990061" stroke="#990061" points="939.5,-71.6 936,-61.6 932.5,-71.6 939.5,-71.6"/>
<text text-anchor="middle" x="988.88" y="-82.05" font-family="Times,serif" font-size="14.00" fill="#990061">Ты в порядке?</text>
</g>
</g>
</svg>
<script>window.Codes = {"start":"[]","critter_p_proc":"if (global_var(628) == 1) then begin\n  if (obj_can_see_obj(self_obj, dude_obj)) then begin\n    call flee_dude;\n  end\nend\n","damage_p_proc":"if (source_obj == dude_obj) then begin\n  set_global_var(247, 1);\nend\n","destroy_p_proc":"if (source_obj == dude_obj) then begin\n  set_global_var(628, 1);\n  set_global_var(247, 1);\n  set_global_var(155, global_var(155) - 5);\n  if (((global_var(160) + global_var(159)) >= 25) and ((global_var(159) > (2 * global_var(160))) or (global_var(156) == 1))) then begin\n    set_global_var(156, 1);\n    set_global_var(157, 0);\n  end\n  if (((global_var(160) + global_var(159)) >= 25) and ((global_var(160) > (3 * global_var(159))) or (global_var(157) == 1))) then begin\n    set_global_var(157, 1);\n    set_global_var(156, 0);\n  end\n  set_global_var(159, global_var(159) + 1);\n  if ((global_var(159) % 2) == 0) then begin\n    set_global_var(155, global_var(155) - 1);\n  end\nend\n","map_enter_p_proc":"if (map_var(2) == 1) then begin\n  set_obj_visibility(self_obj, 1);\n  removal_ptr := self_obj;\nend\nelse begin\n  sleep_time := random(2215, 2230);\n  wake_time := random(715, 730);\n  if ((game_time / (10 * 60 * 60 * 24)) < 80) then begin\n    sleep_tile := 15275;\n    home_tile := 14267;\n  end\n  else begin\n    sleep_tile := 23524;\n    home_tile := 23923;\n  end\nend\ncritter_add_trait(self_obj, 1, 6, 16);\ncritter_add_trait(self_obj, 1, 5, 6);\nif (not(night_person) and (game_time_hour >= wake_time) and (game_time_hour < sleep_time) or (night_person and ((game_time_hour >= wake_time) or (game_time_hour < sleep_time)))) then begin\n  move_to(self_obj, home_tile, elevation(self_obj));\nend\nif (night_person and (game_time_hour >= sleep_time) and (game_time_hour < wake_time) or (not(night_person) and ((game_time_hour >= sleep_time) or (game_time_hour < wake_time)))) then begin\n  move_to(self_obj, sleep_tile, elevation(self_obj));\nend\n","map_update_p_proc":"call sleeping;\n","pickup_p_proc":"set_local_var(1, 1);\nfloat_msg(self_obj, message_str(438, 124), 2);\n","talk_p_proc":"if (local_var(2) == 1) then begin\n  float_msg(self_obj, message_str(185, 166), 0);\nend\nelse begin\n  if (local_var(1) == 1) then begin\n    float_msg(self_obj, message_str(438, 124), 2);\n  end\n  else begin\n    if ((game_time / (10 * 60 * 60 * 24)) < 80) then begin\n      set_local_var(0, 1);\n      if (global_var(628) == 1) then begin\n        float_msg(self_obj, message_str(438, 100), 2);\n      end\n      else begin\n        if (global_var(155) < -10) then begin\n          float_msg(self_obj, message_str(438, 101), 7);\n        end\n        else begin\n          if (get_critter_stat(dude_obj, 34) == 0) then begin\n            float_msg(self_obj, message_str(438, random(102, 103)), 3);\n          end\n          else begin\n            float_msg(self_obj, message_str(438, random(102, 104)), 3);\n          end\n        end\n      end\n    end\n    else begin\n      set_map_var(2, 1);\n      start_gdialog(438, self_obj, 4, -1, -1);\n      gsay_start;\n      call PeasantC00;\n      gsay_end;\n      end_dialogue;\n    end\n  end\nend\n","PeasantC00":"gsay_reply(438, 105);\ngiq_option(4, 438, 106, PeasantCEnd, 50);\ngiq_option(5, 438, 107, PeasantC00a, 50);\ngiq_option(-3, 438, 108, PeasantC01, 50);\n","PeasantC00a":"if (is_success(roll_vs_skill(dude_obj, 14, 0))) then begin\n  call PeasantC03;\nend\nelse begin\n  call PeasantC02;\nend\n","PeasantC01":"gsay_message(438, 109, 50);\n","PeasantC02":"gsay_message(438, 110, 50);\n","PeasantC03":"gsay_reply(438, 111);\ngiq_option(5, 438, 112, PeasantC04, 51);\ngiq_option(6, 438, 113, PeasantC03a, 50);\ngiq_option(4, 438, 106, PeasantCEnd, 50);\n","PeasantC03a":"if (is_success(roll_vs_skill(dude_obj, 14, -10))) then begin\n  call PeasantC06;\nend\nelse begin\n  call PeasantC05;\nend\n","PeasantC04":"set_local_var(1, 1);\ngsay_message(438, 114, 51);\n","PeasantC05":"gsay_message(438, 115, 50);\n","PeasantC06":"variable LVar0 := 0;\nLVar0 := message_str(438, 116);\nif (global_var(37) == 1) then begin\n  if (global_var(38) == 1) then begin\n    LVar0 := LVar0 + message_str(438, 120);\n  end\n  else begin\n    LVar0 := LVar0 + message_str(438, 119);\n  end\nend\nelse begin\n  if (global_var(38) == 1) then begin\n    LVar0 := LVar0 + message_str(438, 118);\n  end\n  else begin\n    LVar0 := LVar0 + message_str(438, 117);\n  end\nend\ngsay_reply(438, LVar0);\ngiq_option(5, 438, 121, PeasantC07, 50);\ngiq_option(5, 438, 122, PeasantCEnd, 50);\n","PeasantC07":"gsay_message(438, 123, 50);\n","PeasantCEnd":"[]","sleeping":"if (local_var(2) == 1) then begin\n  if (not(night_person) and (game_time_hour >= wake_time) and (game_time_hour < sleep_time) or (night_person and ((game_time_hour >= wake_time) or (game_time_hour < sleep_time)))) then begin\n    if (((game_time_hour - wake_time) < 10) and ((game_time_hour - wake_time) > 0)) then begin\n      if (tile_num(self_obj) != home_tile) then begin\n        animate_move_obj_to_tile(self_obj, home_tile, 0);\n      end\n      else begin\n        set_local_var(2, 0);\n      end\n    end\n    else begin\n      move_to(self_obj, home_tile, elevation(self_obj));\n      if (tile_num(self_obj) == home_tile) then begin\n        set_local_var(2, 0);\n      end\n    end\n  end\nend\nelse begin\n  if (night_person and (game_time_hour >= sleep_time) and (game_time_hour < wake_time) or (not(night_person) and ((game_time_hour >= sleep_time) or (game_time_hour < wake_time)))) then begin\n    if (((game_time_hour - sleep_time) < 10) and ((game_time_hour - sleep_time) > 0)) then begin\n      if (tile_num(self_obj) != sleep_tile) then begin\n        animate_move_obj_to_tile(self_obj, sleep_tile, 0);\n      end\n      else begin\n        set_local_var(2, 1);\n      end\n    end\n    else begin\n      if (tile_num(self_obj) != sleep_tile) then begin\n        move_to(self_obj, sleep_tile, elevation(self_obj));\n      end\n      else begin\n        set_local_var(2, 1);\n      end\n    end\n  end\nend\n","flee_dude":"variable LVar0 := 0;\nvariable LVar1 := 0;\nvariable LVar2 := 0;\nwhile(LVar1 < 5) do begin\n  if (tile_distance(tile_num(dude_obj), tile_num_in_direction(tile_num(self_obj), LVar1, 3)) > LVar2) then begin\n    LVar0 := tile_num_in_direction(tile_num(self_obj), LVar1, 3);\n    LVar2 := tile_distance(tile_num(dude_obj), LVar0);\n  end\n  LVar1 := LVar1 + 1;\nend\nanimate_move_obj_to_tile(self_obj, LVar0, 1);\n"}</script></body><script src="../jquery.js"></script><script src="../underscore.js"></script><script>(function() {
  var downAt, hideCode, nodes, positionCode, showCode;

  $('svg').attr('unselectable', 'on').css({
    '-moz-user-select': '-moz-none',
    '-moz-user-select': 'none',
    '-o-user-select': 'none',
    '-khtml-user-select': 'none',
    '-webkit-user-select': 'none',
    '-ms-user-select': 'none',
    'user-select': 'none'
  }).bind('selectstart', function() {
    return false;
  });

  $('<div/>', {
    id: 'thecode'
  }).appendTo('body');

  $('#thecode').css({
    'pointer-events': 'none',
    background: 'white',
    padding: '1em',
    outline: 'solid gray 1px',
    'white-space': 'pre',
    position: 'fixed',
    left: 0,
    top: 0
  });

  showCode = function(code, x, y) {
    $('#thecode').show();
    $('#thecode').text(code);
    return positionCode(x, y);
  };

  hideCode = function() {
    return $('#thecode').hide();
  };

  positionCode = function(x, y) {
    return $('#thecode').css({
      left: x,
      top: y
    });
  };

  nodes = $('.node');

  _.each(nodes, function(node) {
    var nodeName;
    nodeName = $(node).find('title').text();
    $(node).mousemove(function(e) {
      return showCode(Codes[nodeName], e.clientX, e.clientY);
    });
    return $(node).mouseleave(function() {
      return hideCode();
    });
  });

  $('svg title').remove();

  downAt = null;

  $('svg').mousedown(function(e) {
    var x, y;
    x = e.pageX;
    y = e.pageY;
    return downAt = {
      x: x,
      y: y
    };
  });

  $('svg').mousemove(function(e) {
    var delta, x, y;
    if (!downAt) {
      return;
    }
    x = e.pageX;
    y = e.pageY;
    delta = {
      x: x - downAt.x,
      y: y - downAt.y
    };
    window.scrollBy(-delta.x, -delta.y);
    return false;
  });

  $('svg').mouseup(function(e) {
    return downAt = null;
  });

  $('svg').mouseleave(function(e) {
    return downAt = null;
  });

}).call(this);
</script></html>