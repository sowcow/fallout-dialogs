<!DOCTYPE html><html><head><title>RATION</title><meta charset="utf-8" /></head><body><svg width="1286pt" height="188pt"
 viewBox="0.00 0.00 1286.00 188.00" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 184)">
<title>RATION</title>
<polygon fill="white" stroke="none" points="-4,4 -4,-184 1282,-184 1282,4 -4,4"/>
<!-- start -->
<g id="node1" class="node">
<title>start</title>
<ellipse fill="#ffffff" stroke="#000000" cx="27" cy="-162" rx="27" ry="18"/>
</g>
<!-- do_dialogue -->
<g id="node2" class="node">
<title>do_dialogue</title>
<ellipse fill="#ffffff" stroke="#000000" cx="27" cy="-90" rx="27" ry="18"/>
</g>
<!-- start&#45;&gt;do_dialogue -->
<g id="edge1" class="edge">
<title>start&#45;&gt;do_dialogue</title>
<path fill="none" stroke="#555555" stroke-dasharray="1,5" d="M27,-143.7C27,-136.24 27,-127.32 27,-118.97"/>
<polygon fill="#555555" stroke="#555555" points="30.5,-119.1 27,-109.1 23.5,-119.1 30.5,-119.1"/>
</g>
<!-- ration01 -->
<g id="node3" class="node">
<title>ration01</title>
<ellipse fill="#ffffff" stroke="#000000" cx="27" cy="-18" rx="27" ry="18"/>
</g>
<!-- do_dialogue&#45;&gt;ration01 -->
<g id="edge2" class="edge">
<title>do_dialogue&#45;&gt;ration01</title>
<path fill="none" stroke="#555555" stroke-dasharray="1,5" d="M27,-71.7C27,-64.24 27,-55.32 27,-46.97"/>
<polygon fill="#555555" stroke="#555555" points="30.5,-47.1 27,-37.1 23.5,-47.1 30.5,-47.1"/>
</g>
<!-- ration02 -->
<g id="node4" class="node">
<title>ration02</title>
<ellipse fill="#ffffff" stroke="#000000" cx="99" cy="-162" rx="27" ry="18"/>
</g>
<!-- ration03 -->
<g id="node5" class="node">
<title>ration03</title>
<ellipse fill="#ffffff" stroke="#000000" cx="171" cy="-162" rx="27" ry="18"/>
</g>
<!-- ration03a -->
<g id="node6" class="node">
<title>ration03a</title>
<ellipse fill="#ffffff" stroke="#000000" cx="99" cy="-90" rx="27" ry="18"/>
</g>
<!-- ration03&#45;&gt;ration03a -->
<g id="edge3" class="edge">
<title>ration03&#45;&gt;ration03a</title>
<path fill="none" stroke="#555555" stroke-dasharray="1,5" d="M156.08,-146.5C146.14,-136.83 132.88,-123.94 121.65,-113.02"/>
<polygon fill="#555555" stroke="#555555" points="124.51,-110.95 114.9,-106.49 119.63,-115.97 124.51,-110.95"/>
</g>
<!-- ration03b -->
<g id="node7" class="node">
<title>ration03b</title>
<ellipse fill="#ffffff" stroke="#000000" cx="171" cy="-90" rx="27" ry="18"/>
</g>
<!-- ration03&#45;&gt;ration03b -->
<g id="edge4" class="edge">
<title>ration03&#45;&gt;ration03b</title>
<path fill="none" stroke="#555555" stroke-dasharray="1,5" d="M171,-143.7C171,-136.24 171,-127.32 171,-118.97"/>
<polygon fill="#555555" stroke="#555555" points="174.5,-119.1 171,-109.1 167.5,-119.1 174.5,-119.1"/>
</g>
<!-- ration03c -->
<g id="node8" class="node">
<title>ration03c</title>
<ellipse fill="#ffffff" stroke="#000000" cx="243" cy="-90" rx="27" ry="18"/>
</g>
<!-- ration03&#45;&gt;ration03c -->
<g id="edge5" class="edge">
<title>ration03&#45;&gt;ration03c</title>
<path fill="none" stroke="#555555" stroke-dasharray="1,5" d="M185.92,-146.5C195.86,-136.83 209.12,-123.94 220.35,-113.02"/>
<polygon fill="#555555" stroke="#555555" points="222.37,-115.97 227.1,-106.49 217.49,-110.95 222.37,-115.97"/>
</g>
<!-- ration04 -->
<g id="node9" class="node">
<title>ration04</title>
<ellipse fill="#ffffff" stroke="#000000" cx="243" cy="-162" rx="27" ry="18"/>
</g>
<!-- ration05 -->
<g id="node10" class="node">
<title>ration05</title>
<ellipse fill="#ffffff" stroke="#000000" cx="315" cy="-162" rx="27" ry="18"/>
</g>
<!-- ration06 -->
<g id="node11" class="node">
<title>ration06</title>
<ellipse fill="#ffffff" stroke="#000000" cx="387" cy="-162" rx="27" ry="18"/>
</g>
<!-- ration07 -->
<g id="node12" class="node">
<title>ration07</title>
<ellipse fill="#ffffff" stroke="#000000" cx="459" cy="-162" rx="27" ry="18"/>
</g>
<!-- rationend -->
<g id="node13" class="node">
<title>rationend</title>
<ellipse fill="#ffffff" stroke="#000000" cx="531" cy="-162" rx="27" ry="18"/>
</g>
<!-- get_reaction -->
<g id="node14" class="node">
<title>get_reaction</title>
<ellipse fill="#ffffff" stroke="#000000" cx="603" cy="-162" rx="27" ry="18"/>
</g>
<!-- ReactToLevel -->
<g id="node15" class="node">
<title>ReactToLevel</title>
<ellipse fill="#ffffff" stroke="#000000" cx="747" cy="-90" rx="27" ry="18"/>
</g>
<!-- get_reaction&#45;&gt;ReactToLevel -->
<g id="edge6" class="edge">
<title>get_reaction&#45;&gt;ReactToLevel</title>
<path fill="none" stroke="#555555" stroke-dasharray="1,5" d="M624.56,-150.52C648.88,-138.7 688.62,-119.38 716.2,-105.97"/>
<polygon fill="#555555" stroke="#555555" points="717.3,-108.84 724.76,-101.32 714.24,-102.55 717.3,-108.84"/>
</g>
<!-- LevelToReact -->
<g id="node16" class="node">
<title>LevelToReact</title>
<ellipse fill="#ffffff" stroke="#000000" cx="999" cy="-90" rx="27" ry="18"/>
</g>
<!-- UpReact -->
<g id="node17" class="node">
<title>UpReact</title>
<ellipse fill="#ffffff" stroke="#000000" cx="675" cy="-162" rx="27" ry="18"/>
</g>
<!-- UpReact&#45;&gt;ReactToLevel -->
<g id="edge7" class="edge">
<title>UpReact&#45;&gt;ReactToLevel</title>
<path fill="none" stroke="#555555" stroke-dasharray="1,5" d="M689.92,-146.5C699.86,-136.83 713.12,-123.94 724.35,-113.02"/>
<polygon fill="#555555" stroke="#555555" points="726.37,-115.97 731.1,-106.49 721.49,-110.95 726.37,-115.97"/>
</g>
<!-- DownReact -->
<g id="node18" class="node">
<title>DownReact</title>
<ellipse fill="#ffffff" stroke="#000000" cx="747" cy="-162" rx="27" ry="18"/>
</g>
<!-- DownReact&#45;&gt;ReactToLevel -->
<g id="edge8" class="edge">
<title>DownReact&#45;&gt;ReactToLevel</title>
<path fill="none" stroke="#555555" stroke-dasharray="1,5" d="M747,-143.7C747,-136.24 747,-127.32 747,-118.97"/>
<polygon fill="#555555" stroke="#555555" points="750.5,-119.1 747,-109.1 743.5,-119.1 750.5,-119.1"/>
</g>
<!-- BottomReact -->
<g id="node19" class="node">
<title>BottomReact</title>
<ellipse fill="#ffffff" stroke="#000000" cx="1107" cy="-162" rx="27" ry="18"/>
</g>
<!-- TopReact -->
<g id="node20" class="node">
<title>TopReact</title>
<ellipse fill="#ffffff" stroke="#000000" cx="1179" cy="-162" rx="27" ry="18"/>
</g>
<!-- BigUpReact -->
<g id="node21" class="node">
<title>BigUpReact</title>
<ellipse fill="#ffffff" stroke="#000000" cx="819" cy="-162" rx="27" ry="18"/>
</g>
<!-- BigUpReact&#45;&gt;ReactToLevel -->
<g id="edge9" class="edge">
<title>BigUpReact&#45;&gt;ReactToLevel</title>
<path fill="none" stroke="#555555" stroke-dasharray="1,5" d="M804.08,-146.5C794.14,-136.83 780.88,-123.94 769.65,-113.02"/>
<polygon fill="#555555" stroke="#555555" points="772.51,-110.95 762.9,-106.49 767.63,-115.97 772.51,-110.95"/>
</g>
<!-- BigDownReact -->
<g id="node22" class="node">
<title>BigDownReact</title>
<ellipse fill="#ffffff" stroke="#000000" cx="891" cy="-162" rx="27" ry="18"/>
</g>
<!-- BigDownReact&#45;&gt;ReactToLevel -->
<g id="edge10" class="edge">
<title>BigDownReact&#45;&gt;ReactToLevel</title>
<path fill="none" stroke="#555555" stroke-dasharray="1,5" d="M869.44,-150.52C845.12,-138.7 805.38,-119.38 777.8,-105.97"/>
<polygon fill="#555555" stroke="#555555" points="779.76,-102.55 769.24,-101.32 776.7,-108.84 779.76,-102.55"/>
</g>
<!-- UpReactLevel -->
<g id="node23" class="node">
<title>UpReactLevel</title>
<ellipse fill="#ffffff" stroke="#000000" cx="963" cy="-162" rx="27" ry="18"/>
</g>
<!-- UpReactLevel&#45;&gt;LevelToReact -->
<g id="edge11" class="edge">
<title>UpReactLevel&#45;&gt;LevelToReact</title>
<path fill="none" stroke="#555555" stroke-dasharray="1,5" d="M971.35,-144.76C975.62,-136.46 980.92,-126.15 985.73,-116.79"/>
<polygon fill="#555555" stroke="#555555" points="989.23,-118.64 990.7,-108.15 983.01,-115.44 989.23,-118.64"/>
</g>
<!-- DownReactLevel -->
<g id="node24" class="node">
<title>DownReactLevel</title>
<ellipse fill="#ffffff" stroke="#000000" cx="1035" cy="-162" rx="27" ry="18"/>
</g>
<!-- DownReactLevel&#45;&gt;LevelToReact -->
<g id="edge12" class="edge">
<title>DownReactLevel&#45;&gt;LevelToReact</title>
<path fill="none" stroke="#555555" stroke-dasharray="1,5" d="M1026.65,-144.76C1022.38,-136.46 1017.08,-126.15 1012.27,-116.79"/>
<polygon fill="#555555" stroke="#555555" points="1014.99,-115.44 1007.3,-108.15 1008.77,-118.64 1014.99,-115.44"/>
</g>
<!-- Goodbyes -->
<g id="node25" class="node">
<title>Goodbyes</title>
<ellipse fill="#ffffff" stroke="#000000" cx="1251" cy="-162" rx="27" ry="18"/>
</g>
</g>
</svg>
<script>window.Codes = {"start":"if ((script_action == 11) and (crying == 0)) then begin\n  call do_dialogue;\nend\nelse begin\n  if (script_action == 4) then begin\n    hostile := 1;\n  end\n  else begin\n    if (script_action == 12) then begin\n      if (hostile) then begin\n        hostile := 0;\n        attack_complex(dude_obj, 0, 1, 0, 0, 30000, 0, 0);\n      end\n    end\n    else begin\n      if ((script_action == 21) or (script_action == 3)) then begin\n        script_overrides;\n        if (crying == 1) then begin\n          PICK := myname;\n          if (PICK == 1) then begin\n            display_msg(\"You see Cindy crying.\");\n          end\n          else begin\n            if (PICK > 2) then begin\n              display_msg(\"You see Lisa crying.\");\n            end\n            else begin\n              if (PICK > 3) then begin\n                display_msg(\"You see Sandy crying.\");\n              end\n              else begin\n                if (PICK > 4) then begin\n                  display_msg(\"You see Mary crying.\");\n                end\n                else begin\n                  if (PICK > 5) then begin\n                    display_msg(\"You see Stacy crying.\");\n                  end\n                  else begin\n                    if (PICK > 6) then begin\n                      display_msg(\"You see Susan crying.\");\n                    end\n                  end\n                end\n              end\n            end\n          end\n        end\n        else begin\n          PICK := myname;\n          if (PICK == 1) then begin\n            display_msg(\"You see Cindy.\");\n          end\n          else begin\n            if (PICK > 2) then begin\n              display_msg(\"You see Lisa.\");\n            end\n            else begin\n              if (PICK > 3) then begin\n                display_msg(\"You see Sandy.\");\n              end\n              else begin\n                if (PICK > 4) then begin\n                  display_msg(\"You see Mary.\");\n                end\n                else begin\n                  if (PICK > 5) then begin\n                    display_msg(\"You see Stacy.\");\n                  end\n                  else begin\n                    if (PICK > 6) then begin\n                      display_msg(\"You see Susan.\");\n                    end\n                  end\n                end\n              end\n            end\n          end\n        end\n      end\n      else begin\n        if (script_action == 18) then begin\n          if (source_obj == dude_obj) then begin\n            set_global_var(159, global_var(159) + 1);\n          end\n        end\n      end\n    end\n  end\nend\n","do_dialogue":"start_gdialog(168, self_obj, 4, -1, -1);\nsayStart;\ncall ration01;\nsayEnd;\nend_dialogue;\n","ration01":"sayReply(0, \"Hello, \" + proto_data(obj_pid(dude_obj), 1) + \". Have you found the water chip yet?\");\nif (get_critter_stat(dude_obj, 4) >= 4) then begin\n  sayOption(\"No, not yet.\", ration03);\nend\nif (get_critter_stat(dude_obj, 4) >= 4) then begin\n  sayOption(\"I will. How are you doing?\", ration04);\nend\nif (-get_critter_stat(dude_obj, 4) >= -3) then begin\n  sayOption(\"Urug!\", ration02);\nend\nif (get_critter_stat(dude_obj, 4) >= 0) then begin\n  sayOption(\"\", rationend);\nend\n","ration02":"crying := 1;\nsayReply(0, \"Oh . . . you don't understand me. I guess we really don't have much hope after all. Excuse me while I cry.\");\nif (-get_critter_stat(dude_obj, 4) >= -3) then begin\n  sayOption(\"Ugg!\", rationend);\nend\nif (get_critter_stat(dude_obj, 4) >= 0) then begin\n  sayOption(\"\", rationend);\nend\n","ration03":"PICK := random(1, 3);\nif (PICK == 1) then begin\n  call ration03a;\nend\nelse begin\n  if (PICK > 2) then begin\n    call ration03b;\n  end\n  else begin\n    if (PICK > 3) then begin\n      call ration03c;\n    end\n  end\nend\n","ration03a":"sayReply(0, \"Please find it before my baby dies of thirst.\");\nsayOption(\"[Done]\", rationend);\nif (get_critter_stat(dude_obj, 4) >= 0) then begin\n  sayOption(\"\", rationend);\nend\n","ration03b":"sayReply(0, \"You've got to find it! Don't let us die like this!\");\nsayOption(\"[Done]\", rationend);\nif (get_critter_stat(dude_obj, 4) >= 0) then begin\n  sayOption(\"\", rationend);\nend\n","ration03c":"sayReply(0, \"Keep trying. I believe in you. I know you will do everything you can to save us.\");\nsayOption(\"[Done]\", rationend);\nif (get_critter_stat(dude_obj, 4) >= 0) then begin\n  sayOption(\"\", rationend);\nend\n","ration04":"sayReply(0, \"I am afraid of what is happening. Someone has been stealing water and now everyone is on edge.\");\nif (get_critter_stat(dude_obj, 4) >= 4) then begin\n  sayOption(\"Who would do such a thing?\", ration05);\nend\nif (get_critter_stat(dude_obj, 4) >= 4) then begin\n  sayOption(\"What happened?\", ration06);\nend\n","ration05":"sayReply(0, \"Some people have been accused and fights have broken out over it but nobody really knows.\");\nif (get_critter_stat(dude_obj, 4) >= 4) then begin\n  sayOption(\"Ok. Thanks.\", rationend);\nend\nif (get_critter_stat(dude_obj, 4) >= 0) then begin\n  sayOption(\"\", rationend);\nend\n","ration06":"sayReply(0, \"Some people reported that their water had been stolen. They weren't given more water but some friends shared with them. After this everybody got very paranoid and started guarding their water. A few days later someone knocked the guard out in the ration supply area and stole water.\");\nif (get_critter_stat(dude_obj, 4) >= 4) then begin\n  sayOption(\"That is terrible! What can I do?\", ration07);\nend\nif (get_critter_stat(dude_obj, 4) >= 0) then begin\n  sayOption(\"\", rationend);\nend\n","ration07":"sayReply(0, \"Maybe you can stop whoever is doing this.\");\nif (get_critter_stat(dude_obj, 4) >= 4) then begin\n  sayOption(\"I'll take a look around.\", rationend);\nend\nif (get_critter_stat(dude_obj, 4) >= 0) then begin\n  sayOption(\"\", rationend);\nend\n","rationend":"[]","get_reaction":"if (not(got_reaction)) then begin\n  got_reaction := 1;\n  reaction := reaction + ((get_critter_stat(dude_obj, 3) - 5) * 5);\n  reaction := reaction + (10 * has_trait(0, dude_obj, 10));\n  if (has_trait(0, dude_obj, 39)) then begin\n    if (global_var(155) > 0) then begin\n      reaction := reaction + global_var(155);\n    end\n    else begin\n      reaction := reaction - global_var(155);\n    end\n  end\n  else begin\n    if (badguy) then begin\n      reaction := reaction - global_var(155);\n    end\n    else begin\n      reaction := reaction + global_var(155);\n    end\n  end\n  if (global_var(158) > 2) then begin\n    reaction := reaction - 30;\n  end\n  if ((global_var(160) > (3 * global_var(159))) or (global_var(157) == 1)) then begin\n    reaction := reaction + 20;\n  end\n  if ((global_var(159) > (2 * global_var(160))) or (global_var(156) == 1)) then begin\n    reaction := reaction - 20;\n  end\n  call ReactToLevel;\nend\n","ReactToLevel":"if (reaction < 24) then begin\n  reaction_level := 1;\nend\nelse begin\n  if (reaction < 74) then begin\n    reaction_level := 2;\n  end\n  else begin\n    reaction_level := 3;\n  end\nend\n","LevelToReact":"if (reaction_level == 1) then begin\n  reaction := random(1, 24);\nend\nelse begin\n  if (reaction_level == 2) then begin\n    reaction := random(25, 74);\n  end\n  else begin\n    reaction := random(75, 100);\n  end\nend\n","UpReact":"reaction := reaction + 10;\ncall ReactToLevel;\n","DownReact":"reaction := reaction - 10;\ncall ReactToLevel;\n","BottomReact":"reaction_level := 1;\nreaction := 1;\n","TopReact":"reaction := 100;\nreaction_level := 3;\n","BigUpReact":"reaction := reaction + 25;\ncall ReactToLevel;\n","BigDownReact":"reaction := reaction - 25;\ncall ReactToLevel;\n","UpReactLevel":"reaction_level := reaction_level + 1;\nif (reaction_level > 3) then begin\n  reaction_level := 3;\nend\ncall LevelToReact;\n","DownReactLevel":"reaction_level := reaction_level - 1;\nif (reaction_level < 1) then begin\n  reaction_level := 1;\nend\ncall LevelToReact;\n","Goodbyes":"variable LVar0 := 0;\nLVar0 := random(1, 6);\nif (LVar0 == 1) then begin\n  exit_line := \"Thanks, bye.\";\nend\nif (LVar0 == 2) then begin\n  exit_line := \"Okay, thanks.\";\nend\nif (LVar0 == 3) then begin\n  exit_line := \"Hmm. Bye.\";\nend\nif (LVar0 == 4) then begin\n  exit_line := \"See ya.\";\nend\nif (LVar0 == 5) then begin\n  exit_line := \"Thanks.\";\nend\nif (LVar0 == 6) then begin\n  exit_line := \"Okay, bye.\";\nend\n"}</script></body><script src="../jquery.js"></script><script src="../underscore.js"></script><script>(function() {
  var downAt, hideCode, nodes, positionCode, showCode;

  $('svg').attr('unselectable', 'on').css({
    '-moz-user-select': '-moz-none',
    '-moz-user-select': 'none',
    '-o-user-select': 'none',
    '-khtml-user-select': 'none',
    '-webkit-user-select': 'none',
    '-ms-user-select': 'none',
    'user-select': 'none'
  }).bind('selectstart', function() {
    return false;
  });

  $('<div/>', {
    id: 'thecode'
  }).appendTo('body');

  $('#thecode').css({
    'pointer-events': 'none',
    background: 'white',
    padding: '1em',
    outline: 'solid gray 1px',
    'white-space': 'pre',
    position: 'fixed',
    left: 0,
    top: 0
  });

  showCode = function(name, code, x, y) {
    $('#thecode').show();
    $('#thecode').text("# " + name + "\n" + code);
    return positionCode(x, y);
  };

  hideCode = function() {
    return $('#thecode').hide();
  };

  positionCode = function(x, y) {
    return $('#thecode').css({
      left: x,
      top: y
    });
  };

  nodes = $('.node');

  _.each(nodes, function(node) {
    var nodeName;
    nodeName = $(node).find('title').text();
    $(node).mousemove(function(e) {
      return showCode(nodeName, Codes[nodeName], e.clientX, e.clientY);
    });
    return $(node).mouseleave(function() {
      return hideCode();
    });
  });

  $('svg title').remove();

  downAt = null;

  $('svg').mousedown(function(e) {
    var x, y;
    x = e.pageX;
    y = e.pageY;
    return downAt = {
      x: x,
      y: y
    };
  });

  $('svg').mousemove(function(e) {
    var delta, x, y;
    if (!downAt) {
      return;
    }
    x = e.pageX;
    y = e.pageY;
    delta = {
      x: x - downAt.x,
      y: y - downAt.y
    };
    window.scrollBy(-delta.x, -delta.y);
    return false;
  });

  $('svg').mouseup(function(e) {
    return downAt = null;
  });

  $('svg').mouseleave(function(e) {
    return downAt = null;
  });

}).call(this);
</script></html>