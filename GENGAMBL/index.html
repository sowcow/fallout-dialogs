<!DOCTYPE html><html><head><title>GENGAMBL</title><meta charset="utf-8" /></head><body><svg width="752pt" height="421pt"
 viewBox="0.00 0.00 752.41 420.70" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 416.701)">
<title>GENGAMBL</title>
<polygon fill="white" stroke="none" points="-4,4 -4,-416.701 748.409,-416.701 748.409,4 -4,4"/>
<!-- start -->
<g id="node1" class="node"><title>start</title>
<ellipse fill="#ffffff" stroke="#000000" cx="291" cy="-394.701" rx="27" ry="18"/>
</g>
<!-- critter_p_proc -->
<g id="node2" class="node"><title>critter_p_proc</title>
<ellipse fill="#ffffff" stroke="#000000" cx="27" cy="-322.701" rx="27" ry="18"/>
</g>
<!-- start&#45;&gt;critter_p_proc -->
<g id="edge1" class="edge"><title>start&#45;&gt;critter_p_proc</title>
<path fill="none" stroke="#555555" stroke-dasharray="1,5" d="M264.849,-389.491C221.929,-382.171 134.199,-365.47 63,-340.701 61.0905,-340.036 59.1474,-339.302 57.2033,-338.522"/>
<polygon fill="#555555" stroke="#555555" points="58.1916,-335.135 47.6253,-334.359 55.401,-341.555 58.1916,-335.135"/>
</g>
<!-- destroy_p_proc -->
<g id="node3" class="node"><title>destroy_p_proc</title>
<ellipse fill="#ffffff" stroke="#000000" cx="99" cy="-322.701" rx="27" ry="18"/>
</g>
<!-- start&#45;&gt;destroy_p_proc -->
<g id="edge2" class="edge"><title>start&#45;&gt;destroy_p_proc</title>
<path fill="none" stroke="#555555" stroke-dasharray="1,5" d="M266.905,-386.451C235.989,-376.936 180.874,-359.255 135,-340.701 133.174,-339.962 131.308,-339.177 129.434,-338.365"/>
<polygon fill="#555555" stroke="#555555" points="130.697,-335.096 120.143,-334.174 127.819,-341.477 130.697,-335.096"/>
</g>
<!-- look_at_p_proc -->
<g id="node4" class="node"><title>look_at_p_proc</title>
<ellipse fill="#ffffff" stroke="#000000" cx="227" cy="-322.701" rx="82.5854" ry="18"/>
<text text-anchor="middle" x="227" y="-319.001" font-family="Times,serif" font-size="14.00">You see a gambler.</text>
</g>
<!-- start&#45;&gt;look_at_p_proc -->
<g id="edge3" class="edge"><title>start&#45;&gt;look_at_p_proc</title>
<path fill="none" stroke="#555555" stroke-dasharray="1,5" d="M277.427,-378.855C269.24,-369.901 258.612,-358.276 249.225,-348.009"/>
<polygon fill="#555555" stroke="#555555" points="251.681,-345.508 242.35,-340.49 246.515,-350.232 251.681,-345.508"/>
</g>
<!-- map_enter_p_proc -->
<g id="node5" class="node"><title>map_enter_p_proc</title>
<ellipse fill="#ffffff" stroke="#000000" cx="355" cy="-322.701" rx="27" ry="18"/>
</g>
<!-- start&#45;&gt;map_enter_p_proc -->
<g id="edge4" class="edge"><title>start&#45;&gt;map_enter_p_proc</title>
<path fill="none" stroke="#555555" stroke-dasharray="1,5" d="M304.573,-378.855C313.312,-369.296 324.834,-356.695 334.658,-345.95"/>
<polygon fill="#555555" stroke="#555555" points="337.282,-348.266 341.447,-338.524 332.116,-343.543 337.282,-348.266"/>
</g>
<!-- talk_p_proc -->
<g id="node6" class="node"><title>talk_p_proc</title>
<ellipse fill="#ffffff" stroke="#000000" cx="427" cy="-322.701" rx="27" ry="18"/>
</g>
<!-- start&#45;&gt;talk_p_proc -->
<g id="edge5" class="edge"><title>start&#45;&gt;talk_p_proc</title>
<path fill="none" stroke="#555555" stroke-dasharray="1,5" d="M311.655,-383.069C334.422,-371.351 371.243,-352.399 397.147,-339.066"/>
<polygon fill="#555555" stroke="#555555" points="398.861,-342.121 406.15,-334.432 395.657,-335.897 398.861,-342.121"/>
</g>
<!-- timed_event_p_proc -->
<g id="node7" class="node"><title>timed_event_p_proc</title>
<ellipse fill="#ffffff" stroke="#000000" cx="499" cy="-322.701" rx="27" ry="18"/>
</g>
<!-- start&#45;&gt;timed_event_p_proc -->
<g id="edge6" class="edge"><title>start&#45;&gt;timed_event_p_proc</title>
<path fill="none" stroke="#555555" stroke-dasharray="1,5" d="M312.047,-382.977C316.888,-380.732 322.065,-378.502 327,-376.701 385.736,-355.262 404.264,-362.139 463,-340.701 464.85,-340.025 466.735,-339.289 468.623,-338.515"/>
<polygon fill="#555555" stroke="#555555" points="470.201,-341.645 477.953,-334.424 467.39,-335.235 470.201,-341.645"/>
</g>
<!-- gambler1 -->
<g id="node8" class="node"><title>gambler1</title>
<ellipse fill="#ffffff" stroke="#000000" cx="217" cy="-134.35" rx="92.7622" ry="134.201"/>
<text text-anchor="middle" x="217" y="-214.15" font-family="Times,serif" font-size="14.00">Ack! It&#39;s a stick up</text>
<text text-anchor="middle" x="217" y="-199.15" font-family="Times,serif" font-size="14.00">!</text>
<text text-anchor="middle" x="217" y="-184.15" font-family="Times,serif" font-size="14.00">&#45;&#45;&#45;</text>
<text text-anchor="middle" x="217" y="-169.15" font-family="Times,serif" font-size="14.00">I don&#39;t want a</text>
<text text-anchor="middle" x="217" y="-154.15" font-family="Times,serif" font-size="14.00">ny trouble with you.</text>
<text text-anchor="middle" x="217" y="-123.15" font-family="Times,serif" font-size="14.00">&#45;&#45;&#45;</text>
<text text-anchor="middle" x="217" y="-108.15" font-family="Times,serif" font-size="14.00">He&#39;s got a gun!</text>
<text text-anchor="middle" x="217" y="-77.1503" font-family="Times,serif" font-size="14.00">&#45;&#45;&#45;</text>
<text text-anchor="middle" x="217" y="-62.1503" font-family="Times,serif" font-size="14.00">She&#39;s got a gun</text>
<text text-anchor="middle" x="217" y="-47.1503" font-family="Times,serif" font-size="14.00">!</text>
</g>
<!-- talk_p_proc&#45;&gt;gambler1 -->
<g id="edge7" class="edge"><title>talk_p_proc&#45;&gt;gambler1</title>
<path fill="none" stroke="#555555" stroke-dasharray="1,5" d="M405.563,-311.491C375.129,-296.951 322.653,-271.698 319,-268.701 308.301,-259.924 298.063,-249.816 288.481,-239.173"/>
<polygon fill="#555555" stroke="#555555" points="290.844,-236.559 281.624,-231.34 285.577,-241.17 290.844,-236.559"/>
</g>
<!-- gambler3 -->
<g id="node9" class="node"><title>gambler3</title>
<ellipse fill="#ffffff" stroke="#000000" cx="355" cy="-134.35" rx="27" ry="18"/>
</g>
<!-- talk_p_proc&#45;&gt;gambler3 -->
<g id="edge8" class="edge"><title>talk_p_proc&#45;&gt;gambler3</title>
<path fill="none" stroke="#555555" stroke-dasharray="1,5" d="M414.5,-306.293C406.788,-296.134 397.216,-282.248 391,-268.701 374.932,-233.682 364.853,-190.092 359.574,-162.484"/>
<polygon fill="#555555" stroke="#555555" points="362.97,-161.597 357.723,-152.392 356.085,-162.86 362.97,-161.597"/>
</g>
<!-- gambler4 -->
<g id="node10" class="node"><title>gambler4</title>
<ellipse fill="#ffffff" stroke="#000000" cx="427" cy="-134.35" rx="27" ry="18"/>
</g>
<!-- talk_p_proc&#45;&gt;gambler4 -->
<g id="edge9" class="edge"><title>talk_p_proc&#45;&gt;gambler4</title>
<path fill="none" stroke="#555555" stroke-dasharray="1,5" d="M427,-304.503C427,-272.054 427,-201.562 427,-162.601"/>
<polygon fill="#555555" stroke="#555555" points="430.5,-162.506 427,-152.506 423.5,-162.506 430.5,-162.506"/>
</g>
<!-- gambler2 -->
<g id="node11" class="node"><title>gambler2</title>
<ellipse fill="#ffffff" stroke="#000000" cx="499" cy="-134.35" rx="27" ry="18"/>
</g>
<!-- talk_p_proc&#45;&gt;gambler2 -->
<g id="edge10" class="edge"><title>talk_p_proc&#45;&gt;gambler2</title>
<path fill="none" stroke="#555555" stroke-dasharray="1,5" d="M439.5,-306.293C447.212,-296.134 456.784,-282.248 463,-268.701 479.068,-233.682 489.147,-190.092 494.426,-162.484"/>
<polygon fill="#555555" stroke="#555555" points="497.915,-162.86 496.277,-152.392 491.03,-161.597 497.915,-162.86"/>
</g>
<!-- gambler5 -->
<g id="node12" class="node"><title>gambler5</title>
<ellipse fill="#ffffff" stroke="#000000" cx="644" cy="-134.35" rx="100.318" ry="132.872"/>
<text text-anchor="middle" x="644" y="-213.15" font-family="Times,serif" font-size="14.00">Hey, how are you doi</text>
<text text-anchor="middle" x="644" y="-198.15" font-family="Times,serif" font-size="14.00">ng today? I&#39;m doing </text>
<text text-anchor="middle" x="644" y="-183.15" font-family="Times,serif" font-size="14.00">OK.</text>
<text text-anchor="middle" x="644" y="-168.15" font-family="Times,serif" font-size="14.00">&#45;&#45;&#45;</text>
<text text-anchor="middle" x="644" y="-153.15" font-family="Times,serif" font-size="14.00">Hey, how are</text>
<text text-anchor="middle" x="644" y="-138.15" font-family="Times,serif" font-size="14.00"> you doing tonight? </text>
<text text-anchor="middle" x="644" y="-123.15" font-family="Times,serif" font-size="14.00">I&#39;m doing OK.</text>
<text text-anchor="middle" x="644" y="-108.15" font-family="Times,serif" font-size="14.00">&#45;&#45;&#45;</text>
<text text-anchor="middle" x="644" y="-93.1503" font-family="Times,serif" font-size="14.00">He</text>
<text text-anchor="middle" x="644" y="-78.1503" font-family="Times,serif" font-size="14.00">y, how are you doing</text>
<text text-anchor="middle" x="644" y="-63.1503" font-family="Times,serif" font-size="14.00"> today? I&#39;m doing OK</text>
<text text-anchor="middle" x="644" y="-48.1503" font-family="Times,serif" font-size="14.00">.</text>
</g>
<!-- talk_p_proc&#45;&gt;gambler5 -->
<g id="edge11" class="edge"><title>talk_p_proc&#45;&gt;gambler5</title>
<path fill="none" stroke="#555555" stroke-dasharray="1,5" d="M448.425,-311.475C478.843,-296.916 531.299,-271.638 535,-268.701 546.323,-259.714 557.256,-249.366 567.543,-238.492"/>
<polygon fill="#555555" stroke="#555555" points="570.349,-240.612 574.559,-230.889 565.205,-235.865 570.349,-240.612"/>
</g>
<!-- damage_p_proc -->
<g id="node13" class="node"><title>damage_p_proc</title>
<ellipse fill="#ffffff" stroke="#000000" cx="363" cy="-394.701" rx="27" ry="18"/>
</g>
<!-- pickup_p_proc -->
<g id="node14" class="node"><title>pickup_p_proc</title>
<ellipse fill="#ffffff" stroke="#000000" cx="435" cy="-394.701" rx="27" ry="18"/>
</g>
</g>
</svg>
<script>window.Codes = {"start":"if (script_action == 12) then begin\n  call critter_p_proc;\nend\nelse begin\n  if (script_action == 18) then begin\n    call destroy_p_proc;\n  end\n  else begin\n    if (script_action == 21) then begin\n      call look_at_p_proc;\n    end\n    else begin\n      if (script_action == 15) then begin\n        call map_enter_p_proc;\n      end\n      else begin\n        if (script_action == 11) then begin\n          call talk_p_proc;\n        end\n        else begin\n          if (script_action == 22) then begin\n            call timed_event_p_proc;\n          end\n        end\n      end\n    end\n  end\nend\n","critter_p_proc":"if ((obj_item_subtype(critter_inven_obj(dude_obj, 1)) == 3) or (obj_item_subtype(critter_inven_obj(dude_obj, 2)) == 3)) then begin\n  if (obj_can_see_obj(self_obj, dude_obj)) then begin\n    if (tile_distance_objs(self_obj, dude_obj) < 12) then begin\n      if (not(weapon_check)) then begin\n        dialogue_system_enter;\n        add_timer_event(self_obj, game_ticks(600), 1);\n      end\n    end\n  end\nend\nif (hostile) then begin\n  attack_complex(dude_obj, 0, 1, 0, 0, 30000, 0, 0);\nend\nif (global_var(247) == 1) then begin\n  if (obj_can_see_obj(self_obj, dude_obj)) then begin\n    attack_complex(dude_obj, 0, 1, 0, 0, 30000, 0, 0);\n  end\nend\nif (cur_map_index == 11) then begin\n  if ((global_var(104) == 2) or (global_var(38) == 1)) then begin\n    destroy_object(self_obj);\n  end\nend\n","destroy_p_proc":"if (source_obj == dude_obj) then begin\n  set_global_var(247, 1);\n  if (source_obj == dude_obj) then begin\n    if (((global_var(160) + global_var(159)) >= 25) and ((global_var(159) > (2 * global_var(160))) or (global_var(156) == 1))) then begin\n      set_global_var(156, 1);\n      set_global_var(157, 0);\n    end\n    if (((global_var(160) + global_var(159)) >= 25) and ((global_var(160) > (3 * global_var(159))) or (global_var(157) == 1))) then begin\n      set_global_var(157, 1);\n      set_global_var(156, 0);\n    end\n    set_global_var(159, global_var(159) + 1);\n    if ((global_var(159) % 2) == 0) then begin\n      set_global_var(155, global_var(155) - 1);\n    end\n  end\nend\n","look_at_p_proc":"script_overrides;\ndisplay_msg(message_str(351, 100));\n","map_enter_p_proc":"if (local_var(0) == 0) then begin\n  set_local_var(0, tile_num(self_obj));\nend\nif (not(obj_is_carrying_obj_pid(self_obj, 41))) then begin\n  item_caps_adjust(self_obj, random(0, 200));\nend\nif (cur_map_index == 11) then begin\n  critter_add_trait(self_obj, 1, 6, 24);\n  if ((global_var(104) == 2) or (global_var(38) == 1)) then begin\n    destroy_object(self_obj);\n  end\nend\n","talk_p_proc":"script_overrides;\nif ((obj_item_subtype(critter_inven_obj(dude_obj, 1)) == 3) or (obj_item_subtype(critter_inven_obj(dude_obj, 2)) == 3)) then begin\n  call gambler1;\nend\nelse begin\n  if (global_var(158) > 2) then begin\n    call gambler3;\n  end\n  else begin\n    if (global_var(105) == 2) then begin\n      call gambler4;\n    end\n    else begin\n      if (global_var(155) < -10) then begin\n        call gambler2;\n      end\n      else begin\n        call gambler5;\n      end\n    end\n  end\nend\n","timed_event_p_proc":"weapon_check := 0;\n","damage_p_proc":"if (source_obj == dude_obj) then begin\n  set_global_var(247, 1);\nend\n","gambler1":"variable LVar0 := 0;\nweapon_check := 1;\nLVar0 := random(1, 3);\nif (LVar0 == 1) then begin\n  float_msg(self_obj, message_str(351, 101), 0);\nend\nelse begin\n  if (LVar0 == 2) then begin\n    float_msg(self_obj, message_str(351, 102), 0);\n  end\n  else begin\n    if (LVar0 == 3) then begin\n      if (get_critter_stat(dude_obj, 34) == 0) then begin\n        float_msg(self_obj, message_str(351, 103), 0);\n      end\n      else begin\n        float_msg(self_obj, message_str(351, 104), 0);\n      end\n    end\n  end\nend\n","gambler2":"float_msg(self_obj, message_str(351, random(105, 107)), 0);\n","gambler3":"float_msg(self_obj, message_str(351, random(108, 110)), 0);\n","gambler4":"float_msg(self_obj, message_str(351, random(111, 113)), 0);\n","gambler5":"variable LVar0 := 0;\nLVar0 := random(1, 6);\nif (LVar0 == 1) then begin\n  if ((game_time_hour >= 700) and (game_time_hour < 1800)) then begin\n    float_msg(self_obj, message_str(351, 114), 0);\n  end\n  else begin\n    float_msg(self_obj, message_str(351, 115), 0);\n  end\nend\nelse begin\n  float_msg(self_obj, message_str(351, 114 + LVar0), 0);\nend\n","pickup_p_proc":"hostile := 1;\n"}</script></body><script src="../jquery.js"></script><script src="../underscore.js"></script><script type="text/javascript">(function() {
  var downAt, hideCode, nodes, positionCode, showCode;

  $('svg').attr('unselectable', 'on').css({
    '-moz-user-select': '-moz-none',
    '-moz-user-select': 'none',
    '-o-user-select': 'none',
    '-khtml-user-select': 'none',
    '-webkit-user-select': 'none',
    '-ms-user-select': 'none',
    'user-select': 'none'
  }).bind('selectstart', function() {
    return false;
  });

  $('<div/>', {
    id: 'thecode'
  }).appendTo('body');

  $('#thecode').css({
    'pointer-events': 'none',
    background: 'white',
    padding: '1em',
    outline: 'solid gray 1px',
    'white-space': 'pre',
    position: 'fixed',
    left: 0,
    top: 0
  });

  showCode = function(code, x, y) {
    $('#thecode').show();
    $('#thecode').text(code);
    return positionCode(x, y);
  };

  hideCode = function() {
    return $('#thecode').hide();
  };

  positionCode = function(x, y) {
    return $('#thecode').css({
      left: x,
      top: y
    });
  };

  nodes = $('.node');

  _.each(nodes, function(node) {
    var nodeName;
    nodeName = $(node).find('title').text();
    $(node).mousemove(function(e) {
      return showCode(Codes[nodeName], e.clientX, e.clientY);
    });
    return $(node).mouseleave(function() {
      return hideCode();
    });
  });

  $('svg title').remove();

  downAt = null;

  $('svg').mousedown(function(e) {
    var x, y;
    x = e.pageX;
    y = e.pageY;
    return downAt = {
      x: x,
      y: y
    };
  });

  $('svg').mousemove(function(e) {
    var delta, x, y;
    if (!downAt) {
      return;
    }
    x = e.pageX;
    y = e.pageY;
    delta = {
      x: x - downAt.x,
      y: y - downAt.y
    };
    window.scrollBy(-delta.x, -delta.y);
    return false;
  });

  $('svg').mouseup(function(e) {
    return downAt = null;
  });

  $('svg').mouseleave(function(e) {
    return downAt = null;
  });

}).call(this);
</script></html>