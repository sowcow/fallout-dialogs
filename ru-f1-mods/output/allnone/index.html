<!DOCTYPE html><html><head><title>allnone</title><meta charset="utf-8" /></head><body><svg width="1196pt" height="376pt"
 viewBox="0.00 0.00 1196.49 376.25" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 372.25)">
<title>allnone</title>
<polygon fill="white" stroke="none" points="-4,4 -4,-372.25 1192.49,-372.25 1192.49,4 -4,4"/>
<!-- start -->
<g id="node1" class="node">
<title>start</title>
<ellipse fill="#ffffff" stroke="#000000" cx="27" cy="-326" rx="27" ry="18"/>
</g>
<!-- look_at_p_proc -->
<g id="node2" class="node">
<title>look_at_p_proc</title>
<ellipse fill="#ffffff" stroke="#000000" cx="223" cy="-326" rx="150.79" ry="42.25"/>
<text text-anchor="middle" x="223" y="-338.57" font-family="Times,serif" font-size="14.00">Вы видите Митча,</text>
<text text-anchor="middle" x="223" y="-321.32" font-family="Times,serif" font-size="14.00">владельца универсального</text>
<text text-anchor="middle" x="223" y="-304.07" font-family="Times,serif" font-size="14.00">магазина.</text>
</g>
<!-- critter_p_proc -->
<g id="node3" class="node">
<title>critter_p_proc</title>
<ellipse fill="#ffffff" stroke="#000000" cx="419" cy="-326" rx="27" ry="18"/>
</g>
<!-- pickup_p_proc -->
<g id="node4" class="node">
<title>pickup_p_proc</title>
<ellipse fill="#ffffff" stroke="#000000" cx="491" cy="-326" rx="27" ry="18"/>
</g>
<!-- talk_p_proc -->
<g id="node5" class="node">
<title>talk_p_proc</title>
<ellipse fill="#ffffff" stroke="#000000" cx="563" cy="-326" rx="27" ry="18"/>
</g>
<!-- Get_Stuff -->
<g id="node6" class="node">
<title>Get_Stuff</title>
<ellipse fill="#ffffff" stroke="#000000" cx="422" cy="-228.75" rx="27" ry="18"/>
</g>
<!-- talk_p_proc&#45;&gt;Get_Stuff -->
<g id="edge1" class="edge">
<title>talk_p_proc&#45;&gt;Get_Stuff</title>
<path fill="none" stroke="#555555" stroke-dasharray="1,5" d="M551.56,-309.2C545.02,-300.92 536.28,-291.01 527,-283.75 520.57,-278.72 481.52,-259.06 452.91,-244.91"/>
<polygon fill="#555555" stroke="#555555" points="454.82,-241.45 444.3,-240.17 451.72,-247.73 454.82,-241.45"/>
</g>
<!-- get_reaction -->
<g id="node7" class="node">
<title>get_reaction</title>
<ellipse fill="#ffffff" stroke="#000000" cx="494" cy="-228.75" rx="27" ry="18"/>
</g>
<!-- talk_p_proc&#45;&gt;get_reaction -->
<g id="edge2" class="edge">
<title>talk_p_proc&#45;&gt;get_reaction</title>
<path fill="none" stroke="#555555" stroke-dasharray="1,5" d="M551.61,-309.27C540.72,-294.24 524.15,-271.37 511.57,-254.01"/>
<polygon fill="#555555" stroke="#555555" points="514.11,-252.55 505.41,-246.5 508.44,-256.65 514.11,-252.55"/>
</g>
<!-- Merchant00 -->
<g id="node8" class="node">
<title>Merchant00</title>
<ellipse fill="#ffffff" stroke="#000000" cx="654" cy="-228.75" rx="115.39" ry="18"/>
<text text-anchor="middle" x="654" y="-224.07" font-family="Times,serif" font-size="14.00">Я могу вам помочь?</text>
</g>
<!-- talk_p_proc&#45;&gt;Merchant00 -->
<g id="edge3" class="edge">
<title>talk_p_proc&#45;&gt;Merchant00</title>
<path fill="none" stroke="#555555" stroke-dasharray="1,5" d="M575.73,-309.86C582.5,-301.95 591.04,-292.19 599,-283.75 608.23,-273.96 618.69,-263.53 628,-254.47"/>
<polygon fill="#555555" stroke="#555555" points="630.06,-257.38 634.82,-247.92 625.19,-252.35 630.06,-257.38"/>
</g>
<!-- Put_Stuff -->
<g id="node9" class="node">
<title>Put_Stuff</title>
<ellipse fill="#ffffff" stroke="#000000" cx="814" cy="-228.75" rx="27" ry="18"/>
</g>
<!-- talk_p_proc&#45;&gt;Put_Stuff -->
<g id="edge4" class="edge">
<title>talk_p_proc&#45;&gt;Put_Stuff</title>
<path fill="none" stroke="#555555" stroke-dasharray="1,5" d="M573.12,-308.98C579.49,-300.2 588.49,-289.88 599,-283.75 669.15,-242.78 700.95,-272.5 778,-246.75 779.71,-246.18 781.45,-245.54 783.19,-244.87"/>
<polygon fill="#555555" stroke="#555555" points="784.2,-247.82 792.02,-240.67 781.45,-241.38 784.2,-247.82"/>
</g>
<!-- ReactToLevel -->
<g id="node18" class="node">
<title>ReactToLevel</title>
<ellipse fill="#ffffff" stroke="#000000" cx="161" cy="-115.25" rx="27" ry="18"/>
</g>
<!-- get_reaction&#45;&gt;ReactToLevel -->
<g id="edge11" class="edge">
<title>get_reaction&#45;&gt;ReactToLevel</title>
<path fill="none" stroke="#555555" stroke-dasharray="1,5" d="M473.03,-216.81C468.18,-214.58 462.98,-212.41 458,-210.75 345.67,-173.37 299.31,-217.07 197,-157.5 189.77,-153.29 183.26,-147.1 177.82,-140.79"/>
<polygon fill="#555555" stroke="#555555" points="180.06,-138.97 171.11,-133.28 174.56,-143.3 180.06,-138.97"/>
</g>
<!-- Merchant01 -->
<g id="node13" class="node">
<title>Merchant01</title>
<ellipse fill="#ffffff" stroke="#000000" cx="346" cy="-115.25" rx="140.18" ry="30.05"/>
<text text-anchor="middle" x="346" y="-119.2" font-family="Times,serif" font-size="14.00">Отлично. Вот что у меня</text>
<text text-anchor="middle" x="346" y="-101.95" font-family="Times,serif" font-size="14.00">есть.</text>
</g>
<!-- Merchant00&#45;&gt;Merchant01 -->
<g id="edge5" class="edge">
<title>Merchant00&#45;&gt;Merchant01</title>
<path fill="none" stroke="#996b00" d="M570.81,-216.02C542.42,-210.64 510.84,-203.09 483,-192.75 453.34,-181.73 422.38,-164.96 397.42,-149.93"/>
<polygon fill="#996b00" stroke="#996b00" points="399.52,-146.5 389.16,-144.27 395.87,-152.47 399.52,-146.5"/>
<text text-anchor="middle" x="567" y="-179.45" font-family="Times,serif" font-size="14.00" fill="#996b00">Я хочу кое&#45;что купить.</text>
</g>
<!-- Merchant02 -->
<g id="node14" class="node">
<title>Merchant02</title>
<ellipse fill="#ffffff" stroke="#000000" cx="656" cy="-115.25" rx="151.85" ry="30.05"/>
<text text-anchor="middle" x="656" y="-119.2" font-family="Times,serif" font-size="14.00">Замечательно, я всегда</text>
<text text-anchor="middle" x="656" y="-101.95" font-family="Times,serif" font-size="14.00">ищу что&#45;нибудь новенькое.</text>
</g>
<!-- Merchant00&#45;&gt;Merchant02 -->
<g id="edge6" class="edge">
<title>Merchant00&#45;&gt;Merchant02</title>
<path fill="none" stroke="#3f0099" d="M654.31,-210.33C654.57,-195.96 654.95,-175 655.28,-156.51"/>
<polygon fill="#3f0099" stroke="#3f0099" points="658.79,-156.75 655.47,-146.69 651.79,-156.63 658.79,-156.75"/>
<text text-anchor="middle" x="742.75" y="-179.45" font-family="Times,serif" font-size="14.00" fill="#3f0099">Я хочу кое&#45;что продать.</text>
</g>
<!-- Merchant03 -->
<g id="node15" class="node">
<title>Merchant03</title>
<ellipse fill="#ffffff" stroke="#000000" cx="853" cy="-115.25" rx="27" ry="18"/>
</g>
<!-- Merchant00&#45;&gt;Merchant03 -->
<g id="edge7" class="edge">
<title>Merchant00&#45;&gt;Merchant03</title>
<path fill="none" stroke="#009912" d="M734.98,-215.66C777.98,-208.55 823.5,-199.64 831,-192.75 844.4,-180.44 849.83,-160.57 851.95,-144.16"/>
<polygon fill="#009912" stroke="#009912" points="855.5,-144.77 852.95,-134.49 848.53,-144.12 855.5,-144.77"/>
<text text-anchor="middle" x="904" y="-179.45" font-family="Times,serif" font-size="14.00" fill="#009912">Да нет, спасибо.</text>
</g>
<!-- Merchant04 -->
<g id="node16" class="node">
<title>Merchant04</title>
<ellipse fill="#ffffff" stroke="#000000" cx="1043" cy="-115.25" rx="145.49" ry="42.25"/>
<text text-anchor="middle" x="1043" y="-127.82" font-family="Times,serif" font-size="14.00">Извини, я тебя не</text>
<text text-anchor="middle" x="1043" y="-110.57" font-family="Times,serif" font-size="14.00">понимаю. Приходи, когда</text>
<text text-anchor="middle" x="1043" y="-93.32" font-family="Times,serif" font-size="14.00">поумнеешь.</text>
</g>
<!-- Merchant00&#45;&gt;Merchant04 -->
<g id="edge8" class="edge">
<title>Merchant00&#45;&gt;Merchant04</title>
<path fill="none" stroke="#99001a" d="M736.98,-215.88C750.67,-214.07 764.73,-212.29 778,-210.75 820.13,-205.87 929.72,-211 968,-192.75 982.05,-186.05 994.93,-175.56 1005.9,-164.46"/>
<polygon fill="#99001a" stroke="#99001a" points="1007.88,-167.41 1012.18,-157.73 1002.78,-162.61 1007.88,-167.41"/>
<text text-anchor="middle" x="1021.88" y="-179.45" font-family="Times,serif" font-size="14.00" fill="#99001a">Эм&#45;м&#45;м.</text>
</g>
<!-- destroy_p_proc -->
<g id="node10" class="node">
<title>destroy_p_proc</title>
<ellipse fill="#ffffff" stroke="#000000" cx="635" cy="-326" rx="27" ry="18"/>
</g>
<!-- damage_p_proc -->
<g id="node11" class="node">
<title>damage_p_proc</title>
<ellipse fill="#ffffff" stroke="#000000" cx="707" cy="-326" rx="27" ry="18"/>
</g>
<!-- map_enter_p_proc -->
<g id="node12" class="node">
<title>map_enter_p_proc</title>
<ellipse fill="#ffffff" stroke="#000000" cx="779" cy="-326" rx="27" ry="18"/>
</g>
<!-- Merchant05 -->
<g id="node17" class="node">
<title>Merchant05</title>
<ellipse fill="#ffffff" stroke="#000000" cx="500" cy="-18" rx="122.76" ry="18"/>
<text text-anchor="middle" x="500" y="-13.32" font-family="Times,serif" font-size="14.00">Спасибо. Заходи еще.</text>
</g>
<!-- Merchant01&#45;&gt;Merchant05 -->
<g id="edge9" class="edge">
<title>Merchant01&#45;&gt;Merchant05</title>
<path fill="none" stroke="#555555" stroke-dasharray="1,5" d="M390.96,-86.44C414,-72.19 441.71,-55.05 463.43,-41.62"/>
<polygon fill="#555555" stroke="#555555" points="464.98,-44.16 471.64,-35.92 461.3,-38.21 464.98,-44.16"/>
</g>
<!-- Merchant02&#45;&gt;Merchant05 -->
<g id="edge10" class="edge">
<title>Merchant02&#45;&gt;Merchant05</title>
<path fill="none" stroke="#555555" stroke-dasharray="1,5" d="M610.04,-86.19C586.71,-71.94 558.75,-54.87 536.85,-41.5"/>
<polygon fill="#555555" stroke="#555555" points="538.92,-38.05 528.56,-35.83 535.28,-44.03 538.92,-38.05"/>
</g>
</g>
</svg>
<script>window.Codes = {"start":"[]","look_at_p_proc":"script_overrides;\ndisplay_msg(message_str(782, 100));\n","critter_p_proc":"if (hostile) then begin\n  hostile := 0;\n  attack_complex(dude_obj, 0, 1, 0, 0, 30000, 0, 0);\nend\n","pickup_p_proc":"if (source_obj == dude_obj) then begin\n  hostile := 1;\nend\n","talk_p_proc":"variable LVar0 := 0;\ncall Get_Stuff;\ncall get_reaction;\nif (((game_time / 10) - local_var(4)) > (60 * 60 * 24 * 3)) then begin\n  set_local_var(4, game_time / 10);\n  set_local_var(5, random(1000, 1500));\n  LVar0 := item_caps_adjust(self_obj, local_var(5));\nend\nelse begin\n  LVar0 := item_caps_adjust(self_obj, local_var(5));\nend\nstart_gdialog(782, self_obj, 4, -1, -1);\ngsay_start;\ncall Merchant00;\ngsay_end;\nend_dialogue;\nset_local_var(5, item_caps_total(self_obj));\nLVar0 := item_caps_adjust(self_obj, -1 * local_var(5));\ncall Put_Stuff;\n","destroy_p_proc":"move_obj_inven_to_obj(Mitch_Box_Ptr, self_obj);\nif (source_obj == dude_obj) then begin\n  if (((global_var(160) + global_var(159)) >= 25) and ((global_var(159) > (2 * global_var(160))) or (global_var(156) == 1))) then begin\n    set_global_var(156, 1);\n    set_global_var(157, 0);\n  end\n  if (((global_var(160) + global_var(159)) >= 25) and ((global_var(160) > (3 * global_var(159))) or (global_var(157) == 1))) then begin\n    set_global_var(157, 1);\n    set_global_var(156, 0);\n  end\n  set_global_var(159, global_var(159) + 1);\n  if ((global_var(159) % 2) == 0) then begin\n    set_global_var(155, global_var(155) - 1);\n  end\nend\n","damage_p_proc":"variable LVar0 := 0;\nLVar0 := obj_pid(source_obj);\nif (party_member_obj(LVar0) != 0) then begin\n  set_global_var(248, 1);\nend\n","map_enter_p_proc":"variable LVar0 := 0;\nif (Only_Once) then begin\n  Only_Once := 0;\n  critter_add_trait(self_obj, 1, 6, 41);\n  critter_add_trait(self_obj, 1, 5, 50);\nend\n","Merchant00":"gsay_reply(782, 101);\ngiq_option(4, 782, 102, Merchant01, 50);\ngiq_option(4, 782, 103, Merchant02, 50);\ngiq_option(4, 782, 104, Merchant03, 50);\ngiq_option(-3, 782, 105, Merchant04, 50);\n","Merchant01":"gsay_message(782, 106, 50);\ngdialog_mod_barter(0);\ncall Merchant05;\n","Merchant02":"gsay_message(782, 107, 50);\ngdialog_mod_barter(0);\ncall Merchant05;\n","Merchant03":"[]","Merchant04":"gsay_message(782, 108, 50);\n","Merchant05":"gsay_message(782, 109, 50);\n","Get_Stuff":"move_obj_inven_to_obj(Mitch_Box_Ptr, self_obj);\n","Put_Stuff":"move_obj_inven_to_obj(self_obj, Mitch_Box_Ptr);\n","get_reaction":"if (local_var(2) == 0) then begin\n  set_local_var(0, 50);\n  set_local_var(1, 2);\n  set_local_var(2, 1);\n  set_local_var(0, local_var(0) + (5 * get_critter_stat(dude_obj, 3)) - 25);\n  set_local_var(0, local_var(0) + (10 * has_trait(0, dude_obj, 10)));\n  if (has_trait(0, dude_obj, 39)) then begin\n    if (global_var(155) > 0) then begin\n      set_local_var(0, local_var(0) + global_var(155));\n    end\n    else begin\n      set_local_var(0, local_var(0) - global_var(155));\n    end\n  end\n  else begin\n    if (local_var(3) == 1) then begin\n      set_local_var(0, local_var(0) - global_var(155));\n    end\n    else begin\n      set_local_var(0, local_var(0) + global_var(155));\n    end\n  end\n  if (global_var(158) > 2) then begin\n    set_local_var(0, local_var(0) - 30);\n  end\n  if (((global_var(160) + global_var(159)) >= 25) and ((global_var(160) > (3 * global_var(159))) or (global_var(157) == 1))) then begin\n    set_local_var(0, local_var(0) + 20);\n  end\n  if (((global_var(160) + global_var(159)) >= 25) and ((global_var(159) > (2 * global_var(160))) or (global_var(156) == 1))) then begin\n    set_local_var(0, local_var(0) - 20);\n  end\n  call ReactToLevel;\nend\n","ReactToLevel":"if (local_var(0) <= 25) then begin\n  set_local_var(1, 1);\nend\nelse begin\n  if (local_var(0) <= 75) then begin\n    set_local_var(1, 2);\n  end\n  else begin\n    set_local_var(1, 3);\n  end\nend\n"}</script></body><script src="../jquery.js"></script><script src="../underscore.js"></script><script>(function() {
  var downAt, hideCode, nodes, positionCode, showCode;

  $('svg').attr('unselectable', 'on').css({
    '-moz-user-select': '-moz-none',
    '-moz-user-select': 'none',
    '-o-user-select': 'none',
    '-khtml-user-select': 'none',
    '-webkit-user-select': 'none',
    '-ms-user-select': 'none',
    'user-select': 'none'
  }).bind('selectstart', function() {
    return false;
  });

  $('<div/>', {
    id: 'thecode'
  }).appendTo('body');

  $('#thecode').css({
    'pointer-events': 'none',
    background: 'white',
    padding: '1em',
    outline: 'solid gray 1px',
    'white-space': 'pre',
    position: 'fixed',
    left: 0,
    top: 0
  });

  showCode = function(code, x, y) {
    $('#thecode').show();
    $('#thecode').text(code);
    return positionCode(x, y);
  };

  hideCode = function() {
    return $('#thecode').hide();
  };

  positionCode = function(x, y) {
    return $('#thecode').css({
      left: x,
      top: y
    });
  };

  nodes = $('.node');

  _.each(nodes, function(node) {
    var nodeName;
    nodeName = $(node).find('title').text();
    $(node).mousemove(function(e) {
      return showCode(Codes[nodeName], e.clientX, e.clientY);
    });
    return $(node).mouseleave(function() {
      return hideCode();
    });
  });

  $('svg title').remove();

  downAt = null;

  $('svg').mousedown(function(e) {
    var x, y;
    x = e.pageX;
    y = e.pageY;
    return downAt = {
      x: x,
      y: y
    };
  });

  $('svg').mousemove(function(e) {
    var delta, x, y;
    if (!downAt) {
      return;
    }
    x = e.pageX;
    y = e.pageY;
    delta = {
      x: x - downAt.x,
      y: y - downAt.y
    };
    window.scrollBy(-delta.x, -delta.y);
    return false;
  });

  $('svg').mouseup(function(e) {
    return downAt = null;
  });

  $('svg').mouseleave(function(e) {
    return downAt = null;
  });

}).call(this);
</script></html>