<!DOCTYPE html><html><head><title>krupper</title><meta charset="utf-8" /></head><body><svg width="911pt" height="623pt"
 viewBox="0.00 0.00 910.51 622.60" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 618.6)">
<title>krupper</title>
<polygon fill="white" stroke="none" points="-4,4 -4,-618.6 906.51,-618.6 906.51,4 -4,4"/>
<!-- start -->
<g id="node1" class="node">
<title>start</title>
<ellipse fill="#ffffff" stroke="#000000" cx="179.51" cy="-584.55" rx="27" ry="18"/>
</g>
<!-- critter_p_proc -->
<g id="node2" class="node">
<title>critter_p_proc</title>
<ellipse fill="#ffffff" stroke="#000000" cx="251.51" cy="-584.55" rx="27" ry="18"/>
</g>
<!-- look_at_p_proc -->
<g id="node3" class="node">
<title>look_at_p_proc</title>
<ellipse fill="#ffffff" stroke="#000000" cx="419.51" cy="-584.55" rx="123.21" ry="30.05"/>
<text text-anchor="middle" x="419.51" y="-588.5" font-family="Times,serif" font-size="14.00">Вы видите огромного</text>
<text text-anchor="middle" x="419.51" y="-571.25" font-family="Times,serif" font-size="14.00">мутанта.</text>
</g>
<!-- pickup_p_proc -->
<g id="node4" class="node">
<title>pickup_p_proc</title>
<ellipse fill="#ffffff" stroke="#000000" cx="587.51" cy="-584.55" rx="27" ry="18"/>
</g>
<!-- talk_p_proc -->
<g id="node5" class="node">
<title>talk_p_proc</title>
<ellipse fill="#ffffff" stroke="#000000" cx="659.51" cy="-584.55" rx="27" ry="18"/>
</g>
<!-- krupper01 -->
<g id="node6" class="node">
<title>krupper01</title>
<ellipse fill="#ffffff" stroke="#000000" cx="515.51" cy="-475.25" rx="152.38" ry="42.25"/>
<text text-anchor="middle" x="515.51" y="-487.82" font-family="Times,serif" font-size="14.00">Ты не имеешь права быть</text>
<text text-anchor="middle" x="515.51" y="-470.57" font-family="Times,serif" font-size="14.00">здесь. Сюда закрыт проход</text>
<text text-anchor="middle" x="515.51" y="-453.32" font-family="Times,serif" font-size="14.00">Чадам.</text>
</g>
<!-- talk_p_proc&#45;&gt;krupper01 -->
<g id="edge1" class="edge">
<title>talk_p_proc&#45;&gt;krupper01</title>
<path fill="none" stroke="#555555" stroke-dasharray="1,5" d="M643.16,-570.06C637.05,-565.1 630.01,-559.47 623.51,-554.5 609.21,-543.56 593.63,-532.05 578.88,-521.32"/>
<polygon fill="#555555" stroke="#555555" points="581.45,-518.14 571.3,-515.11 577.34,-523.81 581.45,-518.14"/>
</g>
<!-- krupper00 -->
<g id="node7" class="node">
<title>krupper00</title>
<ellipse fill="#ffffff" stroke="#000000" cx="718.51" cy="-384.95" rx="124.8" ry="30.05"/>
<text text-anchor="middle" x="718.51" y="-388.9" font-family="Times,serif" font-size="14.00">Стой! Ты не сможешь</text>
<text text-anchor="middle" x="718.51" y="-371.65" font-family="Times,serif" font-size="14.00">убежать!</text>
</g>
<!-- talk_p_proc&#45;&gt;krupper00 -->
<g id="edge2" class="edge">
<title>talk_p_proc&#45;&gt;krupper00</title>
<path fill="none" stroke="#555555" stroke-dasharray="1,5" d="M664.54,-566.7C673.78,-535.73 693.72,-468.96 706.6,-425.82"/>
<polygon fill="#555555" stroke="#555555" points="710.21,-426.98 709.71,-416.4 703.5,-424.98 710.21,-426.98"/>
</g>
<!-- kruppercombat -->
<g id="node11" class="node">
<title>kruppercombat</title>
<ellipse fill="#ffffff" stroke="#000000" cx="538.51" cy="-18" rx="27" ry="18"/>
</g>
<!-- krupper01&#45;&gt;kruppercombat -->
<g id="edge5" class="edge">
<title>krupper01&#45;&gt;kruppercombat</title>
<path fill="none" stroke="#559900" d="M520.84,-432.53C521.48,-426.65 522.06,-420.68 522.51,-415 533.39,-277.46 537.04,-112.43 538.11,-47.36"/>
<polygon fill="#559900" stroke="#559900" points="541.63,-47.45 538.28,-37.4 534.63,-47.34 541.63,-47.45"/>
<text text-anchor="middle" x="620.76" y="-196.7" font-family="Times,serif" font-size="14.00" fill="#559900">У меня есть пропуск во</text>
<text text-anchor="middle" x="620.76" y="-179.45" font-family="Times,serif" font-size="14.00" fill="#559900">все места &#45; моя пушка!</text>
</g>
<!-- krupper03 -->
<g id="node12" class="node">
<title>krupper03</title>
<ellipse fill="#ffffff" stroke="#000000" cx="279.51" cy="-282.45" rx="158.22" ry="54.45"/>
<text text-anchor="middle" x="279.51" y="-303.65" font-family="Times,serif" font-size="14.00">Это отделение с камерами</text>
<text text-anchor="middle" x="279.51" y="-286.4" font-family="Times,serif" font-size="14.00">для заключенных. Здесь мы</text>
<text text-anchor="middle" x="279.51" y="-269.15" font-family="Times,serif" font-size="14.00">держим людей, прежде чем</text>
<text text-anchor="middle" x="279.51" y="-251.9" font-family="Times,serif" font-size="14.00">их купают... Классно, да?</text>
</g>
<!-- krupper01&#45;&gt;krupper03 -->
<g id="edge4" class="edge">
<title>krupper01&#45;&gt;krupper03</title>
<path fill="none" stroke="#002899" d="M381.24,-454.92C336.33,-445.52 294.18,-432.41 280.51,-415 265.89,-396.39 262.94,-371.3 264.61,-348.02"/>
<polygon fill="#002899" stroke="#002899" points="268.19,-348.43 265.72,-338.13 261.22,-347.72 268.19,-348.43"/>
<text text-anchor="middle" x="379.51" y="-380.27" font-family="Times,serif" font-size="14.00" fill="#002899">Почему? Что это за место?</text>
</g>
<!-- krupper02 -->
<g id="node13" class="node">
<title>krupper02</title>
<ellipse fill="#ffffff" stroke="#000000" cx="361.51" cy="-115.25" rx="148.67" ry="42.25"/>
<text text-anchor="middle" x="361.51" y="-127.82" font-family="Times,serif" font-size="14.00">Ты говоришь слишком</text>
<text text-anchor="middle" x="361.51" y="-110.57" font-family="Times,serif" font-size="14.00">глупо, ты не Дитя Собора.</text>
<text text-anchor="middle" x="361.51" y="-93.32" font-family="Times,serif" font-size="14.00">Ты, наверно, засланец!</text>
</g>
<!-- krupper01&#45;&gt;krupper02 -->
<g id="edge6" class="edge">
<title>krupper01&#45;&gt;krupper02</title>
<path fill="none" stroke="#990081" d="M512.52,-432.62C506.67,-355.45 493.01,-196.13 478.51,-175.5 473.28,-168.07 466.85,-161.51 459.7,-155.75"/>
<polygon fill="#990081" stroke="#990081" points="462.14,-152.46 452.02,-149.33 457.98,-158.09 462.14,-152.46"/>
<text text-anchor="middle" x="512.51" y="-277.77" font-family="Times,serif" font-size="14.00" fill="#990081">А?</text>
</g>
<!-- krupper00&#45;&gt;kruppercombat -->
<g id="edge3" class="edge">
<title>krupper00&#45;&gt;kruppercombat</title>
<path fill="none" stroke="#555555" stroke-dasharray="1,5" d="M724.59,-354.68C731.82,-312.79 739.73,-234.31 712.51,-175.5 682.09,-109.79 609.7,-59.73 568.51,-35.37"/>
<polygon fill="#555555" stroke="#555555" points="570.66,-31.98 560.25,-30.01 567.15,-38.04 570.66,-31.98"/>
</g>
<!-- timed_event_p_proc -->
<g id="node8" class="node">
<title>timed_event_p_proc</title>
<ellipse fill="#ffffff" stroke="#000000" cx="731.51" cy="-584.55" rx="27" ry="18"/>
</g>
<!-- destroy_p_proc -->
<g id="node9" class="node">
<title>destroy_p_proc</title>
<ellipse fill="#ffffff" stroke="#000000" cx="803.51" cy="-584.55" rx="27" ry="18"/>
</g>
<!-- map_enter_p_proc -->
<g id="node10" class="node">
<title>map_enter_p_proc</title>
<ellipse fill="#ffffff" stroke="#000000" cx="875.51" cy="-584.55" rx="27" ry="18"/>
</g>
<!-- krupper03&#45;&gt;krupper02 -->
<g id="edge8" class="edge">
<title>krupper03&#45;&gt;krupper02</title>
<path fill="none" stroke="#009984" d="M294.61,-227.79C300.4,-210.6 307.75,-191.81 316.51,-175.5 318.24,-172.27 320.14,-169.03 322.15,-165.82"/>
<polygon fill="#009984" stroke="#009984" points="325.46,-168.17 328.06,-157.89 319.62,-164.3 325.46,-168.17"/>
<text text-anchor="middle" x="397.51" y="-188.07" font-family="Times,serif" font-size="14.00" fill="#009984">Что значит &quot;Купают&quot;?</text>
</g>
<!-- krupper04 -->
<g id="node14" class="node">
<title>krupper04</title>
<ellipse fill="#ffffff" stroke="#000000" cx="97.51" cy="-115.25" rx="97.51" ry="18"/>
<text text-anchor="middle" x="97.51" y="-110.57" font-family="Times,serif" font-size="14.00">Ты должен уйти.</text>
</g>
<!-- krupper03&#45;&gt;krupper04 -->
<g id="edge9" class="edge">
<title>krupper03&#45;&gt;krupper04</title>
<path fill="none" stroke="#995700" d="M216.33,-232.38C207.43,-225.04 198.52,-217.44 190.26,-210 165.54,-187.75 139.01,-160.57 120.69,-141.21"/>
<polygon fill="#995700" stroke="#995700" points="123.77,-139.32 114.36,-134.44 118.67,-144.12 123.77,-139.32"/>
<text text-anchor="middle" x="244.13" y="-188.07" font-family="Times,serif" font-size="14.00" fill="#995700">Ясно, спасибо.</text>
</g>
<!-- krupper02&#45;&gt;kruppercombat -->
<g id="edge7" class="edge">
<title>krupper02&#45;&gt;kruppercombat</title>
<path fill="none" stroke="#555555" stroke-dasharray="1,5" d="M429.94,-77.42C457.15,-62.78 487.03,-46.7 508.54,-35.12"/>
<polygon fill="#555555" stroke="#555555" points="509.94,-37.81 517.09,-29.99 506.63,-31.64 509.94,-37.81"/>
</g>
</g>
</svg>
<script>window.Codes = {"start":"[]","critter_p_proc":"if ((local_var(4) == 0) and obj_can_see_obj(self_obj, dude_obj)) then begin\n  dialogue_system_enter;\nend\nif (hostile) then begin\n  hostile := 0;\n  attack_complex(dude_obj, 0, 1, 0, 0, 30000, 0, 0);\nend\n","look_at_p_proc":"script_overrides;\ndisplay_msg(message_str(434, 100));\n","pickup_p_proc":"hostile := 1;\n","talk_p_proc":"if (obj_pid(critter_inven_obj(dude_obj, 0)) == 113) then begin\n  call krupper01;\nend\nelse begin\n  call krupper00;\nend\nset_local_var(4, 1);\n","timed_event_p_proc":"if (obj_can_see_obj(self_obj, dude_obj)) then begin\n  hostile := 1;\nend\n","destroy_p_proc":"if (source_obj == dude_obj) then begin\n  if (((global_var(160) + global_var(159)) >= 25) and ((global_var(159) > (2 * global_var(160))) or (global_var(156) == 1))) then begin\n    set_global_var(156, 1);\n    set_global_var(157, 0);\n  end\n  if (((global_var(160) + global_var(159)) >= 25) and ((global_var(160) > (3 * global_var(159))) or (global_var(157) == 1))) then begin\n    set_global_var(157, 1);\n    set_global_var(156, 0);\n  end\n  set_global_var(160, global_var(160) + 1);\n  if ((global_var(160) % 6) == 0) then begin\n    set_global_var(155, global_var(155) + 1);\n  end\nend\n","map_enter_p_proc":"if (not(initialized)) then begin\n  critter_add_trait(self_obj, 1, 6, 34);\n  critter_add_trait(self_obj, 1, 5, 48);\n  initialized := 1;\nend\n","krupper00":"float_msg(self_obj, message_str(434, 101), 0);\ncall kruppercombat;\n","krupper01":"start_gdialog(434, self_obj, 4, -1, -1);\ngsay_start;\ngsay_reply(434, 102);\ngiq_option(4, 434, 103, krupper03, 50);\ngiq_option(4, 434, 104, kruppercombat, 50);\ngiq_option(-3, 434, 105, krupper02, 50);\ngsay_end;\nend_dialogue;\n","krupper02":"gsay_message(434, 106, 50);\ncall kruppercombat;\n","krupper03":"gsay_reply(434, 107);\ngiq_option(4, 434, 108, krupper02, 50);\ngiq_option(4, 434, 109, krupper04, 50);\n","krupper04":"gsay_message(434, 110, 50);\nadd_timer_event(self_obj, game_ticks(20), 1);\n","kruppercombat":"hostile := 1;\n"}</script></body><script src="../jquery.js"></script><script src="../underscore.js"></script><script>(function() {
  var downAt, hideCode, nodes, positionCode, showCode;

  $('svg').attr('unselectable', 'on').css({
    '-moz-user-select': '-moz-none',
    '-moz-user-select': 'none',
    '-o-user-select': 'none',
    '-khtml-user-select': 'none',
    '-webkit-user-select': 'none',
    '-ms-user-select': 'none',
    'user-select': 'none'
  }).bind('selectstart', function() {
    return false;
  });

  $('<div/>', {
    id: 'thecode'
  }).appendTo('body');

  $('#thecode').css({
    'pointer-events': 'none',
    background: 'white',
    padding: '1em',
    outline: 'solid gray 1px',
    'white-space': 'pre',
    position: 'fixed',
    left: 0,
    top: 0
  });

  showCode = function(name, code, x, y) {
    $('#thecode').show();
    $('#thecode').text("# " + name + "\n" + code);
    return positionCode(x, y);
  };

  hideCode = function() {
    return $('#thecode').hide();
  };

  positionCode = function(x, y) {
    return $('#thecode').css({
      left: x,
      top: y
    });
  };

  nodes = $('.node');

  _.each(nodes, function(node) {
    var nodeName;
    nodeName = $(node).find('title').text();
    $(node).mousemove(function(e) {
      return showCode(nodeName, Codes[nodeName], e.clientX, e.clientY);
    });
    return $(node).mouseleave(function() {
      return hideCode();
    });
  });

  $('svg title').remove();

  downAt = null;

  $('svg').mousedown(function(e) {
    var x, y;
    x = e.pageX;
    y = e.pageY;
    return downAt = {
      x: x,
      y: y
    };
  });

  $('svg').mousemove(function(e) {
    var delta, x, y;
    if (!downAt) {
      return;
    }
    x = e.pageX;
    y = e.pageY;
    delta = {
      x: x - downAt.x,
      y: y - downAt.y
    };
    window.scrollBy(-delta.x, -delta.y);
    return false;
  });

  $('svg').mouseup(function(e) {
    return downAt = null;
  });

  $('svg').mouseleave(function(e) {
    return downAt = null;
  });

}).call(this);
</script></html>