<!DOCTYPE html><html><head><title>ntCar2</title><meta charset="utf-8" /></head><body><svg width="629pt" height="377pt"
 viewBox="0.00 0.00 628.66 376.73" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 372.73)">
<title>ntCar2</title>
<polygon fill="white" stroke="none" points="-4,4 -4,-372.73 624.66,-372.73 624.66,4 -4,4"/>
<!-- start -->
<g id="node1" class="node">
<title>start</title>
<ellipse fill="#ffffff" stroke="#000000" cx="27.16" cy="-350.73" rx="27" ry="18"/>
</g>
<!-- spatial_p_proc -->
<g id="node2" class="node">
<title>spatial_p_proc</title>
<ellipse fill="#ffffff" stroke="#000000" cx="228.16" cy="-350.73" rx="156.43" ry="18"/>
<text text-anchor="middle" x="228.16" y="-346.05" font-family="Times,serif" font-size="14.00">Я же тут парковал машину!</text>
</g>
<!-- Node004 -->
<g id="node3" class="node">
<title>Node004</title>
<ellipse fill="#ffffff" stroke="#000000" cx="228.16" cy="-192.49" rx="161.93" ry="103.24"/>
<text text-anchor="middle" x="228.16" y="-248.19" font-family="Times,serif" font-size="14.00">Вы видите следы машины!</text>
<text text-anchor="middle" x="228.16" y="-230.94" font-family="Times,serif" font-size="14.00">&#45;&#45;&#45;</text>
<text text-anchor="middle" x="228.16" y="-213.69" font-family="Times,serif" font-size="14.00">Когда вы подходите</text>
<text text-anchor="middle" x="228.16" y="-196.44" font-family="Times,serif" font-size="14.00">поближе к тому месту, где</text>
<text text-anchor="middle" x="228.16" y="-179.19" font-family="Times,serif" font-size="14.00">была припаркована машина,</text>
<text text-anchor="middle" x="228.16" y="-161.94" font-family="Times,serif" font-size="14.00">вы замечаете еле видные</text>
<text text-anchor="middle" x="228.16" y="-144.69" font-family="Times,serif" font-size="14.00">следы шин, идущие на</text>
<text text-anchor="middle" x="228.16" y="-127.44" font-family="Times,serif" font-size="14.00">север.</text>
</g>
<!-- spatial_p_proc&#45;&gt;Node004 -->
<g id="edge1" class="edge">
<title>spatial_p_proc&#45;&gt;Node004</title>
<path fill="none" stroke="#555555" stroke-dasharray="1,5" d="M223.73,-332.41C223,-325.35 222.45,-316.55 222.06,-306.84"/>
<polygon fill="#555555" stroke="#555555" points="225.53,-306.86 221.71,-296.98 218.54,-307.09 225.53,-306.86"/>
</g>
<!-- spatial_p_proc&#45;&gt;Node004 -->
<g id="edge2" class="edge">
<title>spatial_p_proc&#45;&gt;Node004</title>
<path fill="none" stroke="#555555" stroke-dasharray="1,5" d="M232.6,-332.41C233.32,-325.35 233.88,-316.55 234.26,-306.84"/>
<polygon fill="#555555" stroke="#555555" points="237.79,-307.09 234.61,-296.98 230.79,-306.86 237.79,-307.09"/>
</g>
<!-- Node990 -->
<g id="node5" class="node">
<title>Node990</title>
<ellipse fill="#ffffff" stroke="#000000" cx="64.16" cy="-18" rx="27" ry="18"/>
</g>
<!-- Node004&#45;&gt;Node990 -->
<g id="edge3" class="edge">
<title>Node004&#45;&gt;Node990</title>
<path fill="none" stroke="#006999" d="M84.68,-144.17C52.36,-126.5 22.06,-102.78 3.16,-71.25 -6.67,-54.85 11.53,-41.03 30.55,-31.73"/>
<polygon fill="#006999" stroke="#006999" points="31.74,-34.58 39.43,-27.29 28.87,-28.2 31.74,-34.58"/>
<text text-anchor="middle" x="54.16" y="-57.95" font-family="Times,serif" font-size="14.00" fill="#006999">(Идти следы!)</text>
</g>
<!-- Node004&#45;&gt;Node990 -->
<g id="edge5" class="edge">
<title>Node004&#45;&gt;Node990</title>
<path fill="none" stroke="#700099" d="M150.79,-101.48C136.02,-85.31 120.4,-68.88 105.16,-54 100.16,-49.11 94.57,-44.08 89.18,-39.43"/>
<polygon fill="#700099" stroke="#700099" points="91.86,-36.27 81.97,-32.48 87.34,-41.61 91.86,-36.27"/>
<text text-anchor="middle" x="209.79" y="-57.95" font-family="Times,serif" font-size="14.00" fill="#700099">(Пойти по этим следам.)</text>
</g>
<!-- Node999 -->
<g id="node6" class="node">
<title>Node999</title>
<ellipse fill="#ffffff" stroke="#000000" cx="401.16" cy="-18" rx="27" ry="18"/>
</g>
<!-- Node004&#45;&gt;Node999 -->
<g id="edge4" class="edge">
<title>Node004&#45;&gt;Node999</title>
<path fill="none" stroke="#959900" d="M289.1,-96.38C301.45,-81.08 315.2,-66.27 329.91,-54 341.1,-44.67 355.2,-37.07 367.9,-31.37"/>
<polygon fill="#959900" stroke="#959900" points="368.87,-34.34 376.7,-27.21 366.13,-27.9 368.87,-34.34"/>
<text text-anchor="middle" x="390.29" y="-57.95" font-family="Times,serif" font-size="14.00" fill="#959900">(Не идти следы.)</text>
</g>
<!-- Node004&#45;&gt;Node999 -->
<g id="edge6" class="edge">
<title>Node004&#45;&gt;Node999</title>
<path fill="none" stroke="#009943" d="M371.32,-143.88C403.38,-126.24 433.41,-102.59 452.16,-71.25 460.57,-57.2 447.5,-44.02 432.5,-34.42"/>
<polygon fill="#009943" stroke="#009943" points="434.48,-30.94 424.08,-28.92 430.95,-36.98 434.48,-30.94"/>
<text text-anchor="middle" x="537.41" y="-57.95" font-family="Times,serif" font-size="14.00" fill="#009943">(Проигнорировать их.)</text>
</g>
<!-- map_update_p_proc -->
<g id="node4" class="node">
<title>map_update_p_proc</title>
<ellipse fill="#ffffff" stroke="#000000" cx="429.16" cy="-350.73" rx="27" ry="18"/>
</g>
</g>
</svg>
<script>window.Codes = {"start":"[]","spatial_p_proc":"if (source_obj == dude_obj) then begin\n  if (global_var(348) == 1) then begin\n    if (((local_var(0) bwand 512) != 0) == 0) then begin\n      set_local_var(0, local_var(0) bwor 512);\n      if ((global_var(495) bwand 67108864) != 0) then begin\n        set_global_var(495, global_var(495) bwand 4227858431);\n        if (global_var(348) < 1) then begin\n          set_global_var(348, 1);\n        end\n        debug_msg(\"ntcar2\" + \": \" + \"stolen_car state == \" + global_var(348) + \"\\n\");\n      end\n      if (is_success(roll_vs_skill(dude_obj, 9, 75)) or (get_critter_stat(dude_obj, 1) > 6)) then begin\n        if (in_dialog == 0) then begin\n          in_dialog := 1;\n          start_gdialog(727, self_obj, 4, 4294967295, 4294967295);\n          gsay_start;\n          call Node004;\n          gsay_end;\n          end_dialogue;\n          in_dialog := 0;\n        end\n        else begin\n          call Node004;\n        end\n      end\n      else begin\n        float_msg(dude_obj, message_str(727, 100 + (get_critter_stat(dude_obj, 4) <= 3)), 8);\n      end\n      set_local_var(0, local_var(0) bwor 1);\n    end\n  end\nend\n","map_update_p_proc":"if (tile_distance(tile_num(self_obj), tile_num(dude_obj)) > 10) then begin\n  set_local_var(0, local_var(0) bwand 4294966783);\nend\n","Node004":"if (get_critter_stat(dude_obj, 4) <= 3) then begin\n  gsay_reply(727, 152);\n  giq_option(1, 727, 153, Node990, 50);\n  giq_option(1, 727, 154, Node999, 50);\nend\nelse begin\n  gsay_reply(727, 150 + ((local_var(0) bwand 1) != 0));\n  giq_option(1, 727, 155, Node990, 50);\n  giq_option(1, 727, 156, Node999, 50);\nend\n","Node999":"[]","Node990":"load_map(58, 888);\n"}</script></body><script src="../jquery.js"></script><script src="../underscore.js"></script><script>(function() {
  var downAt, hideCode, nodes, positionCode, showCode;

  $('svg').attr('unselectable', 'on').css({
    '-moz-user-select': '-moz-none',
    '-moz-user-select': 'none',
    '-o-user-select': 'none',
    '-khtml-user-select': 'none',
    '-webkit-user-select': 'none',
    '-ms-user-select': 'none',
    'user-select': 'none'
  }).bind('selectstart', function() {
    return false;
  });

  $('<div/>', {
    id: 'thecode'
  }).appendTo('body');

  $('#thecode').css({
    'pointer-events': 'none',
    background: 'white',
    padding: '1em',
    outline: 'solid gray 1px',
    'white-space': 'pre',
    position: 'fixed',
    left: 0,
    top: 0
  });

  showCode = function(code, x, y) {
    $('#thecode').show();
    $('#thecode').text(code);
    return positionCode(x, y);
  };

  hideCode = function() {
    return $('#thecode').hide();
  };

  positionCode = function(x, y) {
    return $('#thecode').css({
      left: x,
      top: y
    });
  };

  nodes = $('.node');

  _.each(nodes, function(node) {
    var nodeName;
    nodeName = $(node).find('title').text();
    $(node).mousemove(function(e) {
      return showCode(Codes[nodeName], e.clientX, e.clientY);
    });
    return $(node).mouseleave(function() {
      return hideCode();
    });
  });

  $('svg title').remove();

  downAt = null;

  $('svg').mousedown(function(e) {
    var x, y;
    x = e.pageX;
    y = e.pageY;
    return downAt = {
      x: x,
      y: y
    };
  });

  $('svg').mousemove(function(e) {
    var delta, x, y;
    if (!downAt) {
      return;
    }
    x = e.pageX;
    y = e.pageY;
    delta = {
      x: x - downAt.x,
      y: y - downAt.y
    };
    window.scrollBy(-delta.x, -delta.y);
    return false;
  });

  $('svg').mouseup(function(e) {
    return downAt = null;
  });

  $('svg').mouseleave(function(e) {
    return downAt = null;
  });

}).call(this);
</script></html>