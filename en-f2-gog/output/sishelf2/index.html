<!DOCTYPE html><html><head><title>sishelf2</title><meta charset="utf-8" /></head><body><svg width="2403pt" height="1015pt"
 viewBox="0.00 0.00 2402.61 1015.38" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 1011.38)">
<title>sishelf2</title>
<polygon fill="white" stroke="none" points="-4,4 -4,-1011.38 2398.61,-1011.38 2398.61,4 -4,4"/>
<!-- checkPartyMembersNearDoor -->
<g id="node1" class="node">
<title>checkPartyMembersNearDoor</title>
<ellipse fill="#ffffff" stroke="#000000" cx="27" cy="-855.35" rx="27" ry="18"/>
</g>
<!-- start -->
<g id="node2" class="node">
<title>start</title>
<ellipse fill="#ffffff" stroke="#000000" cx="99" cy="-855.35" rx="27" ry="18"/>
</g>
<!-- use_p_proc -->
<g id="node3" class="node">
<title>use_p_proc</title>
<ellipse fill="#ffffff" stroke="#000000" cx="171" cy="-855.35" rx="27" ry="18"/>
</g>
<!-- look_at_p_proc -->
<g id="node4" class="node">
<title>look_at_p_proc</title>
<ellipse fill="#ffffff" stroke="#000000" cx="351" cy="-855.35" rx="134.88" ry="30.05"/>
<text text-anchor="middle" x="351" y="-859.3" font-family="Times,serif" font-size="14.00">You see a bookcase used</text>
<text text-anchor="middle" x="351" y="-842.05" font-family="Times,serif" font-size="14.00">to store inventory.</text>
</g>
<!-- description_p_proc -->
<g id="node5" class="node">
<title>description_p_proc</title>
<ellipse fill="#ffffff" stroke="#000000" cx="651" cy="-855.35" rx="147.61" ry="66.64"/>
<text text-anchor="middle" x="651" y="-885.17" font-family="Times,serif" font-size="14.00">An old bookcase stands</text>
<text text-anchor="middle" x="651" y="-867.92" font-family="Times,serif" font-size="14.00">here. It seems sturdy</text>
<text text-anchor="middle" x="651" y="-850.67" font-family="Times,serif" font-size="14.00">enough you could probably</text>
<text text-anchor="middle" x="651" y="-833.42" font-family="Times,serif" font-size="14.00">store things on it&#39;s</text>
<text text-anchor="middle" x="651" y="-816.17" font-family="Times,serif" font-size="14.00">shelves.</text>
</g>
<!-- use_skill_on_p_proc -->
<g id="node6" class="node">
<title>use_skill_on_p_proc</title>
<ellipse fill="#ffffff" stroke="#000000" cx="963" cy="-855.35" rx="146.55" ry="152.03"/>
<text text-anchor="middle" x="963" y="-945.55" font-family="Times,serif" font-size="14.00">This bookcase doesn&#39;t</text>
<text text-anchor="middle" x="963" y="-928.3" font-family="Times,serif" font-size="14.00">seem to be trapped.</text>
<text text-anchor="middle" x="963" y="-911.05" font-family="Times,serif" font-size="14.00">&#45;&#45;&#45;</text>
<text text-anchor="middle" x="963" y="-893.8" font-family="Times,serif" font-size="14.00">doesn&#39;t think this</text>
<text text-anchor="middle" x="963" y="-876.55" font-family="Times,serif" font-size="14.00">bookcase is trapped.</text>
<text text-anchor="middle" x="963" y="-859.3" font-family="Times,serif" font-size="14.00">&#45;&#45;&#45;</text>
<text text-anchor="middle" x="963" y="-842.05" font-family="Times,serif" font-size="14.00">Leave the damn bookcases</text>
<text text-anchor="middle" x="963" y="-824.8" font-family="Times,serif" font-size="14.00">alone before I have to</text>
<text text-anchor="middle" x="963" y="-807.55" font-family="Times,serif" font-size="14.00">impose extreme sanctions</text>
<text text-anchor="middle" x="963" y="-790.3" font-family="Times,serif" font-size="14.00">on your ass.</text>
<text text-anchor="middle" x="963" y="-773.05" font-family="Times,serif" font-size="14.00">&#45;&#45;&#45;</text>
<text text-anchor="middle" x="963" y="-755.8" font-family="Times,serif" font-size="14.00">Don&#39;t do that.</text>
</g>
<!-- Skill_Disarm_Traps -->
<g id="node7" class="node">
<title>Skill_Disarm_Traps</title>
<ellipse fill="#ffffff" stroke="#000000" cx="963" cy="-564.08" rx="27" ry="18"/>
</g>
<!-- use_skill_on_p_proc&#45;&gt;Skill_Disarm_Traps -->
<g id="edge1" class="edge">
<title>use_skill_on_p_proc&#45;&gt;Skill_Disarm_Traps</title>
<path fill="none" stroke="#555555" stroke-dasharray="1,5" d="M963,-702.94C963,-660.98 963,-619.77 963,-593.51"/>
<polygon fill="#555555" stroke="#555555" points="966.5,-593.54 963,-583.54 959.5,-593.54 966.5,-593.54"/>
</g>
<!-- Disarm_Traps -->
<g id="node15" class="node">
<title>Disarm_Traps</title>
<ellipse fill="#ffffff" stroke="#000000" cx="963" cy="-248.42" rx="147.61" ry="176.42"/>
<text text-anchor="middle" x="963" y="-355.87" font-family="Times,serif" font-size="14.00">You see a bookcase used</text>
<text text-anchor="middle" x="963" y="-338.62" font-family="Times,serif" font-size="14.00">to store inventory.</text>
<text text-anchor="middle" x="963" y="-321.37" font-family="Times,serif" font-size="14.00">&#45;&#45;&#45;</text>
<text text-anchor="middle" x="963" y="-304.12" font-family="Times,serif" font-size="14.00">An old bookcase stands</text>
<text text-anchor="middle" x="963" y="-286.87" font-family="Times,serif" font-size="14.00">here. It seems sturdy</text>
<text text-anchor="middle" x="963" y="-269.62" font-family="Times,serif" font-size="14.00">enough you could probably</text>
<text text-anchor="middle" x="963" y="-252.37" font-family="Times,serif" font-size="14.00">store things on it&#39;s</text>
<text text-anchor="middle" x="963" y="-235.12" font-family="Times,serif" font-size="14.00">shelves.</text>
<text text-anchor="middle" x="963" y="-217.87" font-family="Times,serif" font-size="14.00">&#45;&#45;&#45;</text>
<text text-anchor="middle" x="963" y="-200.62" font-family="Times,serif" font-size="14.00">This bookcase doesn&#39;t</text>
<text text-anchor="middle" x="963" y="-183.37" font-family="Times,serif" font-size="14.00">seem to be trapped.</text>
<text text-anchor="middle" x="963" y="-166.12" font-family="Times,serif" font-size="14.00">&#45;&#45;&#45;</text>
<text text-anchor="middle" x="963" y="-148.87" font-family="Times,serif" font-size="14.00">doesn&#39;t think this</text>
<text text-anchor="middle" x="963" y="-131.62" font-family="Times,serif" font-size="14.00">bookcase is trapped.</text>
</g>
<!-- Skill_Disarm_Traps&#45;&gt;Disarm_Traps -->
<g id="edge2" class="edge">
<title>Skill_Disarm_Traps&#45;&gt;Disarm_Traps</title>
<path fill="none" stroke="#555555" stroke-dasharray="1,5" d="M963,-545.77C963,-523.24 963,-481.36 963,-436.03"/>
<polygon fill="#555555" stroke="#555555" points="966.5,-436.07 963,-426.07 959.5,-436.07 966.5,-436.07"/>
</g>
<!-- use_obj_on_p_proc -->
<g id="node8" class="node">
<title>use_obj_on_p_proc</title>
<ellipse fill="#ffffff" stroke="#000000" cx="1274" cy="-855.35" rx="146.55" ry="115.44"/>
<text text-anchor="middle" x="1274" y="-919.67" font-family="Times,serif" font-size="14.00">Hey, don&#39;t plant that</text>
<text text-anchor="middle" x="1274" y="-902.42" font-family="Times,serif" font-size="14.00">here!</text>
<text text-anchor="middle" x="1274" y="-885.17" font-family="Times,serif" font-size="14.00">&#45;&#45;&#45;</text>
<text text-anchor="middle" x="1274" y="-867.92" font-family="Times,serif" font-size="14.00">Leave the damn bookcases</text>
<text text-anchor="middle" x="1274" y="-850.67" font-family="Times,serif" font-size="14.00">alone before I have to</text>
<text text-anchor="middle" x="1274" y="-833.42" font-family="Times,serif" font-size="14.00">impose extreme sanctions</text>
<text text-anchor="middle" x="1274" y="-816.17" font-family="Times,serif" font-size="14.00">on your ass.</text>
<text text-anchor="middle" x="1274" y="-798.92" font-family="Times,serif" font-size="14.00">&#45;&#45;&#45;</text>
<text text-anchor="middle" x="1274" y="-781.67" font-family="Times,serif" font-size="14.00">Don&#39;t do that.</text>
</g>
<!-- damage_p_proc -->
<g id="node9" class="node">
<title>damage_p_proc</title>
<ellipse fill="#ffffff" stroke="#000000" cx="1466" cy="-855.35" rx="27" ry="18"/>
</g>
<!-- map_enter_p_proc -->
<g id="node10" class="node">
<title>map_enter_p_proc</title>
<ellipse fill="#ffffff" stroke="#000000" cx="1538" cy="-855.35" rx="27" ry="18"/>
</g>
<!-- map_update_p_proc -->
<g id="node11" class="node">
<title>map_update_p_proc</title>
<ellipse fill="#ffffff" stroke="#000000" cx="1610" cy="-855.35" rx="27" ry="18"/>
</g>
<!-- Look_Traps_And_Locks -->
<g id="node12" class="node">
<title>Look_Traps_And_Locks</title>
<ellipse fill="#ffffff" stroke="#000000" cx="1682" cy="-855.35" rx="27" ry="18"/>
</g>
<!-- Look_Traps -->
<g id="node13" class="node">
<title>Look_Traps</title>
<ellipse fill="#ffffff" stroke="#000000" cx="1754" cy="-855.35" rx="27" ry="18"/>
</g>
<!-- Look_Locks -->
<g id="node14" class="node">
<title>Look_Locks</title>
<ellipse fill="#ffffff" stroke="#000000" cx="1826" cy="-855.35" rx="27" ry="18"/>
</g>
<!-- Damage_Critter -->
<g id="node16" class="node">
<title>Damage_Critter</title>
<ellipse fill="#ffffff" stroke="#000000" cx="1119" cy="-18" rx="27" ry="18"/>
</g>
<!-- Disarm_Traps&#45;&gt;Damage_Critter -->
<g id="edge3" class="edge">
<title>Disarm_Traps&#45;&gt;Damage_Critter</title>
<path fill="none" stroke="#555555" stroke-dasharray="1,5" d="M1056,-111.25C1073.73,-85.29 1090.38,-60.91 1102.11,-43.74"/>
<polygon fill="#555555" stroke="#555555" points="1105.34,-46.2 1108.09,-35.97 1099.56,-42.26 1105.34,-46.2"/>
</g>
<!-- Unlock_Lock -->
<g id="node17" class="node">
<title>Unlock_Lock</title>
<ellipse fill="#ffffff" stroke="#000000" cx="1898" cy="-855.35" rx="27" ry="18"/>
</g>
<!-- Lockpick_Door -->
<g id="node18" class="node">
<title>Lockpick_Door</title>
<ellipse fill="#ffffff" stroke="#000000" cx="1934" cy="-564.08" rx="147.61" ry="103.24"/>
<text text-anchor="middle" x="1934" y="-619.78" font-family="Times,serif" font-size="14.00">You see a bookcase used</text>
<text text-anchor="middle" x="1934" y="-602.53" font-family="Times,serif" font-size="14.00">to store inventory.</text>
<text text-anchor="middle" x="1934" y="-585.28" font-family="Times,serif" font-size="14.00">&#45;&#45;&#45;</text>
<text text-anchor="middle" x="1934" y="-568.03" font-family="Times,serif" font-size="14.00">An old bookcase stands</text>
<text text-anchor="middle" x="1934" y="-550.78" font-family="Times,serif" font-size="14.00">here. It seems sturdy</text>
<text text-anchor="middle" x="1934" y="-533.53" font-family="Times,serif" font-size="14.00">enough you could probably</text>
<text text-anchor="middle" x="1934" y="-516.28" font-family="Times,serif" font-size="14.00">store things on it&#39;s</text>
<text text-anchor="middle" x="1934" y="-499.03" font-family="Times,serif" font-size="14.00">shelves.</text>
</g>
<!-- Unlock_Lock&#45;&gt;Lockpick_Door -->
<g id="edge4" class="edge">
<title>Unlock_Lock&#45;&gt;Lockpick_Door</title>
<path fill="none" stroke="#555555" stroke-dasharray="1,5" d="M1900.14,-837.12C1904.01,-806.03 1912.46,-738.16 1919.95,-678"/>
<polygon fill="#555555" stroke="#555555" points="1923.52,-678.61 1921.28,-668.25 1916.58,-677.74 1923.52,-678.61"/>
</g>
<!-- Lockpick_Lock -->
<g id="node19" class="node">
<title>Lockpick_Lock</title>
<ellipse fill="#ffffff" stroke="#000000" cx="1970" cy="-855.35" rx="27" ry="18"/>
</g>
<!-- Lockpick_Lock&#45;&gt;Lockpick_Door -->
<g id="edge5" class="edge">
<title>Lockpick_Lock&#45;&gt;Lockpick_Door</title>
<path fill="none" stroke="#555555" stroke-dasharray="1,5" d="M1967.86,-837.12C1963.99,-806.03 1955.54,-738.16 1948.05,-678"/>
<polygon fill="#555555" stroke="#555555" points="1951.42,-677.74 1946.72,-668.25 1944.48,-678.61 1951.42,-677.74"/>
</g>
<!-- Lock_Door -->
<g id="node20" class="node">
<title>Lock_Door</title>
<ellipse fill="#ffffff" stroke="#000000" cx="2247" cy="-564.08" rx="147.61" ry="103.24"/>
<text text-anchor="middle" x="2247" y="-619.78" font-family="Times,serif" font-size="14.00">You see a bookcase used</text>
<text text-anchor="middle" x="2247" y="-602.53" font-family="Times,serif" font-size="14.00">to store inventory.</text>
<text text-anchor="middle" x="2247" y="-585.28" font-family="Times,serif" font-size="14.00">&#45;&#45;&#45;</text>
<text text-anchor="middle" x="2247" y="-568.03" font-family="Times,serif" font-size="14.00">An old bookcase stands</text>
<text text-anchor="middle" x="2247" y="-550.78" font-family="Times,serif" font-size="14.00">here. It seems sturdy</text>
<text text-anchor="middle" x="2247" y="-533.53" font-family="Times,serif" font-size="14.00">enough you could probably</text>
<text text-anchor="middle" x="2247" y="-516.28" font-family="Times,serif" font-size="14.00">store things on it&#39;s</text>
<text text-anchor="middle" x="2247" y="-499.03" font-family="Times,serif" font-size="14.00">shelves.</text>
</g>
<!-- Set_Lock -->
<g id="node21" class="node">
<title>Set_Lock</title>
<ellipse fill="#ffffff" stroke="#000000" cx="2211" cy="-855.35" rx="27" ry="18"/>
</g>
<!-- Set_Lock&#45;&gt;Lock_Door -->
<g id="edge6" class="edge">
<title>Set_Lock&#45;&gt;Lock_Door</title>
<path fill="none" stroke="#555555" stroke-dasharray="1,5" d="M2213.14,-837.12C2217.01,-806.03 2225.46,-738.16 2232.95,-678"/>
<polygon fill="#555555" stroke="#555555" points="2236.52,-678.61 2234.28,-668.25 2229.58,-677.74 2236.52,-678.61"/>
</g>
<!-- Set_Lockpick_Lock -->
<g id="node22" class="node">
<title>Set_Lockpick_Lock</title>
<ellipse fill="#ffffff" stroke="#000000" cx="2283" cy="-855.35" rx="27" ry="18"/>
</g>
<!-- Set_Lockpick_Lock&#45;&gt;Lock_Door -->
<g id="edge7" class="edge">
<title>Set_Lockpick_Lock&#45;&gt;Lock_Door</title>
<path fill="none" stroke="#555555" stroke-dasharray="1,5" d="M2280.86,-837.12C2276.99,-806.03 2268.54,-738.16 2261.05,-678"/>
<polygon fill="#555555" stroke="#555555" points="2264.42,-677.74 2259.72,-668.25 2257.48,-678.61 2264.42,-677.74"/>
</g>
<!-- Set_Trap -->
<g id="node23" class="node">
<title>Set_Trap</title>
<ellipse fill="#ffffff" stroke="#000000" cx="1275" cy="-248.42" rx="146.55" ry="115.44"/>
<text text-anchor="middle" x="1275" y="-312.75" font-family="Times,serif" font-size="14.00">Hey, don&#39;t plant that</text>
<text text-anchor="middle" x="1275" y="-295.5" font-family="Times,serif" font-size="14.00">here!</text>
<text text-anchor="middle" x="1275" y="-278.25" font-family="Times,serif" font-size="14.00">&#45;&#45;&#45;</text>
<text text-anchor="middle" x="1275" y="-261" font-family="Times,serif" font-size="14.00">Leave the damn bookcases</text>
<text text-anchor="middle" x="1275" y="-243.75" font-family="Times,serif" font-size="14.00">alone before I have to</text>
<text text-anchor="middle" x="1275" y="-226.5" font-family="Times,serif" font-size="14.00">impose extreme sanctions</text>
<text text-anchor="middle" x="1275" y="-209.25" font-family="Times,serif" font-size="14.00">on your ass.</text>
<text text-anchor="middle" x="1275" y="-192" font-family="Times,serif" font-size="14.00">&#45;&#45;&#45;</text>
<text text-anchor="middle" x="1275" y="-174.75" font-family="Times,serif" font-size="14.00">Don&#39;t do that.</text>
</g>
<!-- Set_Trap&#45;&gt;Damage_Critter -->
<g id="edge8" class="edge">
<title>Set_Trap&#45;&gt;Damage_Critter</title>
<path fill="none" stroke="#555555" stroke-dasharray="1,5" d="M1205.89,-146.24C1179.99,-108.31 1152.77,-68.44 1135.84,-43.66"/>
<polygon fill="#555555" stroke="#555555" points="1138.2,-41.91 1129.67,-35.62 1132.42,-45.86 1138.2,-41.91"/>
</g>
<!-- Pry_Door -->
<g id="node24" class="node">
<title>Pry_Door</title>
<ellipse fill="#ffffff" stroke="#000000" cx="2355" cy="-855.35" rx="27" ry="18"/>
</g>
</g>
</svg>
<script>window.Codes = {"checkPartyMembersNearDoor":"if (party_member_obj(16777278) != 0) then begin\n  if (tile_distance_objs(self_obj, party_member_obj(16777278)) <= 5) then begin\n    return 1;\n  end\nend\nif (party_member_obj(16777376) != 0) then begin\n  if (tile_distance_objs(self_obj, party_member_obj(16777376)) <= 5) then begin\n    return 1;\n  end\nend\nif (party_member_obj(16777377) != 0) then begin\n  if (tile_distance_objs(self_obj, party_member_obj(16777377)) <= 5) then begin\n    return 1;\n  end\nend\nif (party_member_obj(16777305) != 0) then begin\n  if (tile_distance_objs(self_obj, party_member_obj(16777305)) <= 5) then begin\n    return 1;\n  end\nend\nif (party_member_obj(16777313) != 0) then begin\n  if (tile_distance_objs(self_obj, party_member_obj(16777313)) <= 5) then begin\n    return 1;\n  end\nend\nif (party_member_obj(16777323) != 0) then begin\n  if (tile_distance_objs(self_obj, party_member_obj(16777323)) <= 5) then begin\n    return 1;\n  end\nend\nif (party_member_obj(16777352) != 0) then begin\n  if (tile_distance_objs(self_obj, party_member_obj(16777352)) <= 5) then begin\n    return 1;\n  end\nend\nif (party_member_obj(16777378) != 0) then begin\n  if (tile_distance_objs(self_obj, party_member_obj(16777378)) <= 5) then begin\n    return 1;\n  end\nend\nif (party_member_obj(16777368) != 0) then begin\n  if (tile_distance_objs(self_obj, party_member_obj(16777368)) <= 5) then begin\n    return 1;\n  end\nend\nif (party_member_obj(16777379) != 0) then begin\n  if (tile_distance_objs(self_obj, party_member_obj(16777379)) <= 5) then begin\n    return 1;\n  end\nend\nif (party_member_obj(16777380) != 0) then begin\n  if (tile_distance_objs(self_obj, party_member_obj(16777380)) <= 5) then begin\n    return 1;\n  end\nend\nif (party_member_obj(16777295) != 0) then begin\n  if (tile_distance_objs(self_obj, party_member_obj(16777295)) <= 5) then begin\n    return 1;\n  end\nend\nif (party_member_obj(16777381) != 0) then begin\n  if (tile_distance_objs(self_obj, party_member_obj(16777381)) <= 5) then begin\n    return 1;\n  end\nend\nif (party_member_obj(16777407) != 0) then begin\n  if (tile_distance_objs(self_obj, party_member_obj(16777407)) <= 5) then begin\n    return 1;\n  end\nend\nif (party_member_obj(16777411) != 0) then begin\n  if (tile_distance_objs(self_obj, party_member_obj(16777411)) <= 5) then begin\n    return 1;\n  end\nend\nif (party_member_obj(16777412) != 0) then begin\n  if (tile_distance_objs(self_obj, party_member_obj(16777412)) <= 5) then begin\n    return 1;\n  end\nend\nif (party_member_obj(16777413) != 0) then begin\n  if (tile_distance_objs(self_obj, party_member_obj(16777413)) <= 5) then begin\n    return 1;\n  end\nend\nif (party_member_obj(16777481) != 0) then begin\n  if (tile_distance_objs(self_obj, party_member_obj(16777481)) <= 5) then begin\n    return 1;\n  end\nend\nif (party_member_obj(16777558) != 0) then begin\n  if (tile_distance_objs(self_obj, party_member_obj(16777558)) <= 5) then begin\n    return 1;\n  end\nend\nif (party_member_obj(16777600) != 0) then begin\n  if (tile_distance_objs(self_obj, party_member_obj(16777600)) <= 5) then begin\n    return 1;\n  end\nend\nreturn 0;\n","start":"book_obj2 := self_obj;\n","use_p_proc":"if (buster_obj and (buster_obj != -1)) then begin\n  script_overrides;\n  book_obj_look := 2;\nend\n","look_at_p_proc":"script_overrides;\ndisplay_msg(message_str(254, 100));\n","description_p_proc":"script_overrides;\ndisplay_msg(message_str(254, 101));\n","use_skill_on_p_proc":"variable LVar0 := 0;\nLVar0 := action_being_used;\nif (LVar0 == 11) then begin\n  if (local_var(1) == 0) then begin\n    call Skill_Disarm_Traps;\n  end\n  else begin\n    if (source_obj == dude_obj) then begin\n      display_msg(message_str(254, 195));\n    end\n    else begin\n      display_msg(obj_name(source_obj) + message_str(254, 200));\n    end\n  end\nend\nelse begin\n  if (buster_obj) then begin\n    if (not(is_success(roll_vs_skill(dude_obj, LVar0, -35)))) then begin\n      script_overrides;\n      if (Book_Annoy_Count < 2) then begin\n        if (Book_Annoy_Count == (2 - 1)) then begin\n          float_msg(buster_obj, message_str(254, 207), 2);\n        end\n        else begin\n          float_msg(buster_obj, message_str(254, 208), 2);\n        end\n      end\n      else begin\n        book_obj_look := 4;\n      end\n      Book_Annoy_Count := Book_Annoy_Count + 1;\n    end\n  end\nend\n","use_obj_on_p_proc":"variable LVar0 := 0;\nLVar0 := obj_pid(obj_being_used_with);\nif ((LVar0 == 51) or (LVar0 == 85)) then begin\n  if (buster_obj) then begin\n    float_msg(buster_obj, message_str(254, 206), 2);\n    book_obj_look := 4;\n  end\nend\nelse begin\n  if (buster_obj) then begin\n    script_overrides;\n    if (Book_Annoy_Count < 2) then begin\n      if (Book_Annoy_Count == (2 - 1)) then begin\n        float_msg(buster_obj, message_str(254, 207), -2);\n      end\n      else begin\n        float_msg(buster_obj, message_str(254, 208), 2);\n      end\n    end\n    else begin\n      book_obj_look := 4;\n    end\n    Book_Annoy_Count := Book_Annoy_Count + 1;\n  end\nend\n","damage_p_proc":"[]","map_enter_p_proc":"if ((buster_obj != -1) and buster_obj) then begin\n  if (local_var(7) < game_time) then begin\n    restock_amt := random(1, 5);\n    if (obj_is_carrying_obj_pid(self_obj, 4) < restock_amt) then begin\n      if (100 >= random(1, 100)) then begin\n        if (obj_is_carrying_obj_pid(self_obj, 4) < restock_amt) then begin\n          restock_obj := create_object_sid(4, 0, 0, -1);\n          add_mult_objs_to_inven(self_obj, restock_obj, restock_amt - obj_is_carrying_obj_pid(self_obj, 4));\n        end\n        else begin\n          if (obj_is_carrying_obj_pid(self_obj, 4) > restock_amt) then begin\n            removed_qty := obj_is_carrying_obj_pid(self_obj, 4);\n            if ((obj_is_carrying_obj_pid(self_obj, 4) - restock_amt) < removed_qty) then begin\n              removed_qty := obj_is_carrying_obj_pid(self_obj, 4) - restock_amt;\n            end\n            if (removed_qty > 0) then begin\n              restock_obj := obj_carrying_pid_obj(self_obj, 4);\n              if (obj_type(self_obj) == 1) then begin\n                restock_obj := obj_carrying_pid_obj(self_obj, 4);\n                if (critter_inven_obj(self_obj, 0) == restock_obj) then begin\n                  if (obj_item_subtype(critter_inven_obj(self_obj, 0)) == 0) then begin\n                    restock_obj := critter_inven_obj(self_obj, 0);\n                    debug_msg(\"armour pid == \" + obj_pid(restock_obj));\n                    rm_obj_from_inven(self_obj, restock_obj);\n                    add_obj_to_inven(self_obj, restock_obj);\n                  end\n                end\n                else begin\n                  if ((critter_inven_obj(self_obj, 2) == restock_obj) or (critter_inven_obj(self_obj, 1) == restock_obj)) then begin\n                    metarule(43, self_obj);\n                  end\n                end\n              end\n              restock_amt := rm_mult_objs_from_inven(self_obj, restock_obj, removed_qty);\n              destroy_object(restock_obj);\n            end\n            restock_obj := 0;\n            restock_amt := 0;\n          end\n          else begin\n            restock_obj := 0;\n          end\n        end\n      end\n    end\n    else begin\n      if (obj_is_carrying_obj_pid(self_obj, 4) < restock_amt) then begin\n        restock_obj := create_object_sid(4, 0, 0, -1);\n        add_mult_objs_to_inven(self_obj, restock_obj, restock_amt - obj_is_carrying_obj_pid(self_obj, 4));\n      end\n      else begin\n        if (obj_is_carrying_obj_pid(self_obj, 4) > restock_amt) then begin\n          removed_qty := obj_is_carrying_obj_pid(self_obj, 4);\n          if ((obj_is_carrying_obj_pid(self_obj, 4) - restock_amt) < removed_qty) then begin\n            removed_qty := obj_is_carrying_obj_pid(self_obj, 4) - restock_amt;\n          end\n          if (removed_qty > 0) then begin\n            restock_obj := obj_carrying_pid_obj(self_obj, 4);\n            if (obj_type(self_obj) == 1) then begin\n              restock_obj := obj_carrying_pid_obj(self_obj, 4);\n              if (critter_inven_obj(self_obj, 0) == restock_obj) then begin\n                if (obj_item_subtype(critter_inven_obj(self_obj, 0)) == 0) then begin\n                  restock_obj := critter_inven_obj(self_obj, 0);\n                  debug_msg(\"armour pid == \" + obj_pid(restock_obj));\n                  rm_obj_from_inven(self_obj, restock_obj);\n                  add_obj_to_inven(self_obj, restock_obj);\n                end\n              end\n              else begin\n                if ((critter_inven_obj(self_obj, 2) == restock_obj) or (critter_inven_obj(self_obj, 1) == restock_obj)) then begin\n                  metarule(43, self_obj);\n                end\n              end\n            end\n            restock_amt := rm_mult_objs_from_inven(self_obj, restock_obj, removed_qty);\n            destroy_object(restock_obj);\n          end\n          restock_obj := 0;\n          restock_amt := 0;\n        end\n        else begin\n          restock_obj := 0;\n        end\n      end\n    end\n    restock_amt := random(1, 5);\n    if (obj_is_carrying_obj_pid(self_obj, 5) < restock_amt) then begin\n      if (100 >= random(1, 100)) then begin\n        if (obj_is_carrying_obj_pid(self_obj, 5) < restock_amt) then begin\n          restock_obj := create_object_sid(5, 0, 0, -1);\n          add_mult_objs_to_inven(self_obj, restock_obj, restock_amt - obj_is_carrying_obj_pid(self_obj, 5));\n        end\n        else begin\n          if (obj_is_carrying_obj_pid(self_obj, 5) > restock_amt) then begin\n            removed_qty := obj_is_carrying_obj_pid(self_obj, 5);\n            if ((obj_is_carrying_obj_pid(self_obj, 5) - restock_amt) < removed_qty) then begin\n              removed_qty := obj_is_carrying_obj_pid(self_obj, 5) - restock_amt;\n            end\n            if (removed_qty > 0) then begin\n              restock_obj := obj_carrying_pid_obj(self_obj, 5);\n              if (obj_type(self_obj) == 1) then begin\n                restock_obj := obj_carrying_pid_obj(self_obj, 5);\n                if (critter_inven_obj(self_obj, 0) == restock_obj) then begin\n                  if (obj_item_subtype(critter_inven_obj(self_obj, 0)) == 0) then begin\n                    restock_obj := critter_inven_obj(self_obj, 0);\n                    debug_msg(\"armour pid == \" + obj_pid(restock_obj));\n                    rm_obj_from_inven(self_obj, restock_obj);\n                    add_obj_to_inven(self_obj, restock_obj);\n                  end\n                end\n                else begin\n                  if ((critter_inven_obj(self_obj, 2) == restock_obj) or (critter_inven_obj(self_obj, 1) == restock_obj)) then begin\n                    metarule(43, self_obj);\n                  end\n                end\n              end\n              restock_amt := rm_mult_objs_from_inven(self_obj, restock_obj, removed_qty);\n              destroy_object(restock_obj);\n            end\n            restock_obj := 0;\n            restock_amt := 0;\n          end\n          else begin\n            restock_obj := 0;\n          end\n        end\n      end\n    end\n    else begin\n      if (obj_is_carrying_obj_pid(self_obj, 5) < restock_amt) then begin\n        restock_obj := create_object_sid(5, 0, 0, -1);\n        add_mult_objs_to_inven(self_obj, restock_obj, restock_amt - obj_is_carrying_obj_pid(self_obj, 5));\n      end\n      else begin\n        if (obj_is_carrying_obj_pid(self_obj, 5) > restock_amt) then begin\n          removed_qty := obj_is_carrying_obj_pid(self_obj, 5);\n          if ((obj_is_carrying_obj_pid(self_obj, 5) - restock_amt) < removed_qty) then begin\n            removed_qty := obj_is_carrying_obj_pid(self_obj, 5) - restock_amt;\n          end\n          if (removed_qty > 0) then begin\n            restock_obj := obj_carrying_pid_obj(self_obj, 5);\n            if (obj_type(self_obj) == 1) then begin\n              restock_obj := obj_carrying_pid_obj(self_obj, 5);\n              if (critter_inven_obj(self_obj, 0) == restock_obj) then begin\n                if (obj_item_subtype(critter_inven_obj(self_obj, 0)) == 0) then begin\n                  restock_obj := critter_inven_obj(self_obj, 0);\n                  debug_msg(\"armour pid == \" + obj_pid(restock_obj));\n                  rm_obj_from_inven(self_obj, restock_obj);\n                  add_obj_to_inven(self_obj, restock_obj);\n                end\n              end\n              else begin\n                if ((critter_inven_obj(self_obj, 2) == restock_obj) or (critter_inven_obj(self_obj, 1) == restock_obj)) then begin\n                  metarule(43, self_obj);\n                end\n              end\n            end\n            restock_amt := rm_mult_objs_from_inven(self_obj, restock_obj, removed_qty);\n            destroy_object(restock_obj);\n          end\n          restock_obj := 0;\n          restock_amt := 0;\n        end\n        else begin\n          restock_obj := 0;\n        end\n      end\n    end\n    restock_amt := random(1, 5);\n    if (obj_is_carrying_obj_pid(self_obj, 7) < restock_amt) then begin\n      if (100 >= random(1, 100)) then begin\n        if (obj_is_carrying_obj_pid(self_obj, 7) < restock_amt) then begin\n          restock_obj := create_object_sid(7, 0, 0, -1);\n          add_mult_objs_to_inven(self_obj, restock_obj, restock_amt - obj_is_carrying_obj_pid(self_obj, 7));\n        end\n        else begin\n          if (obj_is_carrying_obj_pid(self_obj, 7) > restock_amt) then begin\n            removed_qty := obj_is_carrying_obj_pid(self_obj, 7);\n            if ((obj_is_carrying_obj_pid(self_obj, 7) - restock_amt) < removed_qty) then begin\n              removed_qty := obj_is_carrying_obj_pid(self_obj, 7) - restock_amt;\n            end\n            if (removed_qty > 0) then begin\n              restock_obj := obj_carrying_pid_obj(self_obj, 7);\n              if (obj_type(self_obj) == 1) then begin\n                restock_obj := obj_carrying_pid_obj(self_obj, 7);\n                if (critter_inven_obj(self_obj, 0) == restock_obj) then begin\n                  if (obj_item_subtype(critter_inven_obj(self_obj, 0)) == 0) then begin\n                    restock_obj := critter_inven_obj(self_obj, 0);\n                    debug_msg(\"armour pid == \" + obj_pid(restock_obj));\n                    rm_obj_from_inven(self_obj, restock_obj);\n                    add_obj_to_inven(self_obj, restock_obj);\n                  end\n                end\n                else begin\n                  if ((critter_inven_obj(self_obj, 2) == restock_obj) or (critter_inven_obj(self_obj, 1) == restock_obj)) then begin\n                    metarule(43, self_obj);\n                  end\n                end\n              end\n              restock_amt := rm_mult_objs_from_inven(self_obj, restock_obj, removed_qty);\n              destroy_object(restock_obj);\n            end\n            restock_obj := 0;\n            restock_amt := 0;\n          end\n          else begin\n            restock_obj := 0;\n          end\n        end\n      end\n    end\n    else begin\n      if (obj_is_carrying_obj_pid(self_obj, 7) < restock_amt) then begin\n        restock_obj := create_object_sid(7, 0, 0, -1);\n        add_mult_objs_to_inven(self_obj, restock_obj, restock_amt - obj_is_carrying_obj_pid(self_obj, 7));\n      end\n      else begin\n        if (obj_is_carrying_obj_pid(self_obj, 7) > restock_amt) then begin\n          removed_qty := obj_is_carrying_obj_pid(self_obj, 7);\n          if ((obj_is_carrying_obj_pid(self_obj, 7) - restock_amt) < removed_qty) then begin\n            removed_qty := obj_is_carrying_obj_pid(self_obj, 7) - restock_amt;\n          end\n          if (removed_qty > 0) then begin\n            restock_obj := obj_carrying_pid_obj(self_obj, 7);\n            if (obj_type(self_obj) == 1) then begin\n              restock_obj := obj_carrying_pid_obj(self_obj, 7);\n              if (critter_inven_obj(self_obj, 0) == restock_obj) then begin\n                if (obj_item_subtype(critter_inven_obj(self_obj, 0)) == 0) then begin\n                  restock_obj := critter_inven_obj(self_obj, 0);\n                  debug_msg(\"armour pid == \" + obj_pid(restock_obj));\n                  rm_obj_from_inven(self_obj, restock_obj);\n                  add_obj_to_inven(self_obj, restock_obj);\n                end\n              end\n              else begin\n                if ((critter_inven_obj(self_obj, 2) == restock_obj) or (critter_inven_obj(self_obj, 1) == restock_obj)) then begin\n                  metarule(43, self_obj);\n                end\n              end\n            end\n            restock_amt := rm_mult_objs_from_inven(self_obj, restock_obj, removed_qty);\n            destroy_object(restock_obj);\n          end\n          restock_obj := 0;\n          restock_amt := 0;\n        end\n        else begin\n          restock_obj := 0;\n        end\n      end\n    end\n    restock_amt := random(1, 5);\n    if (obj_is_carrying_obj_pid(self_obj, 19) < restock_amt) then begin\n      if (100 >= random(1, 100)) then begin\n        if (obj_is_carrying_obj_pid(self_obj, 19) < restock_amt) then begin\n          restock_obj := create_object_sid(19, 0, 0, -1);\n          add_mult_objs_to_inven(self_obj, restock_obj, restock_amt - obj_is_carrying_obj_pid(self_obj, 19));\n        end\n        else begin\n          if (obj_is_carrying_obj_pid(self_obj, 19) > restock_amt) then begin\n            removed_qty := obj_is_carrying_obj_pid(self_obj, 19);\n            if ((obj_is_carrying_obj_pid(self_obj, 19) - restock_amt) < removed_qty) then begin\n              removed_qty := obj_is_carrying_obj_pid(self_obj, 19) - restock_amt;\n            end\n            if (removed_qty > 0) then begin\n              restock_obj := obj_carrying_pid_obj(self_obj, 19);\n              if (obj_type(self_obj) == 1) then begin\n                restock_obj := obj_carrying_pid_obj(self_obj, 19);\n                if (critter_inven_obj(self_obj, 0) == restock_obj) then begin\n                  if (obj_item_subtype(critter_inven_obj(self_obj, 0)) == 0) then begin\n                    restock_obj := critter_inven_obj(self_obj, 0);\n                    debug_msg(\"armour pid == \" + obj_pid(restock_obj));\n                    rm_obj_from_inven(self_obj, restock_obj);\n                    add_obj_to_inven(self_obj, restock_obj);\n                  end\n                end\n                else begin\n                  if ((critter_inven_obj(self_obj, 2) == restock_obj) or (critter_inven_obj(self_obj, 1) == restock_obj)) then begin\n                    metarule(43, self_obj);\n                  end\n                end\n              end\n              restock_amt := rm_mult_objs_from_inven(self_obj, restock_obj, removed_qty);\n              destroy_object(restock_obj);\n            end\n            restock_obj := 0;\n            restock_amt := 0;\n          end\n          else begin\n            restock_obj := 0;\n          end\n        end\n      end\n    end\n    else begin\n      if (obj_is_carrying_obj_pid(self_obj, 19) < restock_amt) then begin\n        restock_obj := create_object_sid(19, 0, 0, -1);\n        add_mult_objs_to_inven(self_obj, restock_obj, restock_amt - obj_is_carrying_obj_pid(self_obj, 19));\n      end\n      else begin\n        if (obj_is_carrying_obj_pid(self_obj, 19) > restock_amt) then begin\n          removed_qty := obj_is_carrying_obj_pid(self_obj, 19);\n          if ((obj_is_carrying_obj_pid(self_obj, 19) - restock_amt) < removed_qty) then begin\n            removed_qty := obj_is_carrying_obj_pid(self_obj, 19) - restock_amt;\n          end\n          if (removed_qty > 0) then begin\n            restock_obj := obj_carrying_pid_obj(self_obj, 19);\n            if (obj_type(self_obj) == 1) then begin\n              restock_obj := obj_carrying_pid_obj(self_obj, 19);\n              if (critter_inven_obj(self_obj, 0) == restock_obj) then begin\n                if (obj_item_subtype(critter_inven_obj(self_obj, 0)) == 0) then begin\n                  restock_obj := critter_inven_obj(self_obj, 0);\n                  debug_msg(\"armour pid == \" + obj_pid(restock_obj));\n                  rm_obj_from_inven(self_obj, restock_obj);\n                  add_obj_to_inven(self_obj, restock_obj);\n                end\n              end\n              else begin\n                if ((critter_inven_obj(self_obj, 2) == restock_obj) or (critter_inven_obj(self_obj, 1) == restock_obj)) then begin\n                  metarule(43, self_obj);\n                end\n              end\n            end\n            restock_amt := rm_mult_objs_from_inven(self_obj, restock_obj, removed_qty);\n            destroy_object(restock_obj);\n          end\n          restock_obj := 0;\n          restock_amt := 0;\n        end\n        else begin\n          restock_obj := 0;\n        end\n      end\n    end\n    restock_amt := random(1, 5);\n    if (obj_is_carrying_obj_pid(self_obj, 20) < restock_amt) then begin\n      if (100 >= random(1, 100)) then begin\n        if (obj_is_carrying_obj_pid(self_obj, 20) < restock_amt) then begin\n          restock_obj := create_object_sid(20, 0, 0, -1);\n          add_mult_objs_to_inven(self_obj, restock_obj, restock_amt - obj_is_carrying_obj_pid(self_obj, 20));\n        end\n        else begin\n          if (obj_is_carrying_obj_pid(self_obj, 20) > restock_amt) then begin\n            removed_qty := obj_is_carrying_obj_pid(self_obj, 20);\n            if ((obj_is_carrying_obj_pid(self_obj, 20) - restock_amt) < removed_qty) then begin\n              removed_qty := obj_is_carrying_obj_pid(self_obj, 20) - restock_amt;\n            end\n            if (removed_qty > 0) then begin\n              restock_obj := obj_carrying_pid_obj(self_obj, 20);\n              if (obj_type(self_obj) == 1) then begin\n                restock_obj := obj_carrying_pid_obj(self_obj, 20);\n                if (critter_inven_obj(self_obj, 0) == restock_obj) then begin\n                  if (obj_item_subtype(critter_inven_obj(self_obj, 0)) == 0) then begin\n                    restock_obj := critter_inven_obj(self_obj, 0);\n                    debug_msg(\"armour pid == \" + obj_pid(restock_obj));\n                    rm_obj_from_inven(self_obj, restock_obj);\n                    add_obj_to_inven(self_obj, restock_obj);\n                  end\n                end\n                else begin\n                  if ((critter_inven_obj(self_obj, 2) == restock_obj) or (critter_inven_obj(self_obj, 1) == restock_obj)) then begin\n                    metarule(43, self_obj);\n                  end\n                end\n              end\n              restock_amt := rm_mult_objs_from_inven(self_obj, restock_obj, removed_qty);\n              destroy_object(restock_obj);\n            end\n            restock_obj := 0;\n            restock_amt := 0;\n          end\n          else begin\n            restock_obj := 0;\n          end\n        end\n      end\n    end\n    else begin\n      if (obj_is_carrying_obj_pid(self_obj, 20) < restock_amt) then begin\n        restock_obj := create_object_sid(20, 0, 0, -1);\n        add_mult_objs_to_inven(self_obj, restock_obj, restock_amt - obj_is_carrying_obj_pid(self_obj, 20));\n      end\n      else begin\n        if (obj_is_carrying_obj_pid(self_obj, 20) > restock_amt) then begin\n          removed_qty := obj_is_carrying_obj_pid(self_obj, 20);\n          if ((obj_is_carrying_obj_pid(self_obj, 20) - restock_amt) < removed_qty) then begin\n            removed_qty := obj_is_carrying_obj_pid(self_obj, 20) - restock_amt;\n          end\n          if (removed_qty > 0) then begin\n            restock_obj := obj_carrying_pid_obj(self_obj, 20);\n            if (obj_type(self_obj) == 1) then begin\n              restock_obj := obj_carrying_pid_obj(self_obj, 20);\n              if (critter_inven_obj(self_obj, 0) == restock_obj) then begin\n                if (obj_item_subtype(critter_inven_obj(self_obj, 0)) == 0) then begin\n                  restock_obj := critter_inven_obj(self_obj, 0);\n                  debug_msg(\"armour pid == \" + obj_pid(restock_obj));\n                  rm_obj_from_inven(self_obj, restock_obj);\n                  add_obj_to_inven(self_obj, restock_obj);\n                end\n              end\n              else begin\n                if ((critter_inven_obj(self_obj, 2) == restock_obj) or (critter_inven_obj(self_obj, 1) == restock_obj)) then begin\n                  metarule(43, self_obj);\n                end\n              end\n            end\n            restock_amt := rm_mult_objs_from_inven(self_obj, restock_obj, removed_qty);\n            destroy_object(restock_obj);\n          end\n          restock_obj := 0;\n          restock_amt := 0;\n        end\n        else begin\n          restock_obj := 0;\n        end\n      end\n    end\n    restock_amt := random(1, 5);\n    if (obj_is_carrying_obj_pid(self_obj, 21) < restock_amt) then begin\n      if (100 >= random(1, 100)) then begin\n        if (obj_is_carrying_obj_pid(self_obj, 21) < restock_amt) then begin\n          restock_obj := create_object_sid(21, 0, 0, -1);\n          add_mult_objs_to_inven(self_obj, restock_obj, restock_amt - obj_is_carrying_obj_pid(self_obj, 21));\n        end\n        else begin\n          if (obj_is_carrying_obj_pid(self_obj, 21) > restock_amt) then begin\n            removed_qty := obj_is_carrying_obj_pid(self_obj, 21);\n            if ((obj_is_carrying_obj_pid(self_obj, 21) - restock_amt) < removed_qty) then begin\n              removed_qty := obj_is_carrying_obj_pid(self_obj, 21) - restock_amt;\n            end\n            if (removed_qty > 0) then begin\n              restock_obj := obj_carrying_pid_obj(self_obj, 21);\n              if (obj_type(self_obj) == 1) then begin\n                restock_obj := obj_carrying_pid_obj(self_obj, 21);\n                if (critter_inven_obj(self_obj, 0) == restock_obj) then begin\n                  if (obj_item_subtype(critter_inven_obj(self_obj, 0)) == 0) then begin\n                    restock_obj := critter_inven_obj(self_obj, 0);\n                    debug_msg(\"armour pid == \" + obj_pid(restock_obj));\n                    rm_obj_from_inven(self_obj, restock_obj);\n                    add_obj_to_inven(self_obj, restock_obj);\n                  end\n                end\n                else begin\n                  if ((critter_inven_obj(self_obj, 2) == restock_obj) or (critter_inven_obj(self_obj, 1) == restock_obj)) then begin\n                    metarule(43, self_obj);\n                  end\n                end\n              end\n              restock_amt := rm_mult_objs_from_inven(self_obj, restock_obj, removed_qty);\n              destroy_object(restock_obj);\n            end\n            restock_obj := 0;\n            restock_amt := 0;\n          end\n          else begin\n            restock_obj := 0;\n          end\n        end\n      end\n    end\n    else begin\n      if (obj_is_carrying_obj_pid(self_obj, 21) < restock_amt) then begin\n        restock_obj := create_object_sid(21, 0, 0, -1);\n        add_mult_objs_to_inven(self_obj, restock_obj, restock_amt - obj_is_carrying_obj_pid(self_obj, 21));\n      end\n      else begin\n        if (obj_is_carrying_obj_pid(self_obj, 21) > restock_amt) then begin\n          removed_qty := obj_is_carrying_obj_pid(self_obj, 21);\n          if ((obj_is_carrying_obj_pid(self_obj, 21) - restock_amt) < removed_qty) then begin\n            removed_qty := obj_is_carrying_obj_pid(self_obj, 21) - restock_amt;\n          end\n          if (removed_qty > 0) then begin\n            restock_obj := obj_carrying_pid_obj(self_obj, 21);\n            if (obj_type(self_obj) == 1) then begin\n              restock_obj := obj_carrying_pid_obj(self_obj, 21);\n              if (critter_inven_obj(self_obj, 0) == restock_obj) then begin\n                if (obj_item_subtype(critter_inven_obj(self_obj, 0)) == 0) then begin\n                  restock_obj := critter_inven_obj(self_obj, 0);\n                  debug_msg(\"armour pid == \" + obj_pid(restock_obj));\n                  rm_obj_from_inven(self_obj, restock_obj);\n                  add_obj_to_inven(self_obj, restock_obj);\n                end\n              end\n              else begin\n                if ((critter_inven_obj(self_obj, 2) == restock_obj) or (critter_inven_obj(self_obj, 1) == restock_obj)) then begin\n                  metarule(43, self_obj);\n                end\n              end\n            end\n            restock_amt := rm_mult_objs_from_inven(self_obj, restock_obj, removed_qty);\n            destroy_object(restock_obj);\n          end\n          restock_obj := 0;\n          restock_amt := 0;\n        end\n        else begin\n          restock_obj := 0;\n        end\n      end\n    end\n    restock_amt := random(5, 15);\n    if (obj_is_carrying_obj_pid(self_obj, 45) < restock_amt) then begin\n      if (100 >= random(1, 100)) then begin\n        if (obj_is_carrying_obj_pid(self_obj, 45) < restock_amt) then begin\n          restock_obj := create_object_sid(45, 0, 0, -1);\n          add_mult_objs_to_inven(self_obj, restock_obj, restock_amt - obj_is_carrying_obj_pid(self_obj, 45));\n        end\n        else begin\n          if (obj_is_carrying_obj_pid(self_obj, 45) > restock_amt) then begin\n            removed_qty := obj_is_carrying_obj_pid(self_obj, 45);\n            if ((obj_is_carrying_obj_pid(self_obj, 45) - restock_amt) < removed_qty) then begin\n              removed_qty := obj_is_carrying_obj_pid(self_obj, 45) - restock_amt;\n            end\n            if (removed_qty > 0) then begin\n              restock_obj := obj_carrying_pid_obj(self_obj, 45);\n              if (obj_type(self_obj) == 1) then begin\n                restock_obj := obj_carrying_pid_obj(self_obj, 45);\n                if (critter_inven_obj(self_obj, 0) == restock_obj) then begin\n                  if (obj_item_subtype(critter_inven_obj(self_obj, 0)) == 0) then begin\n                    restock_obj := critter_inven_obj(self_obj, 0);\n                    debug_msg(\"armour pid == \" + obj_pid(restock_obj));\n                    rm_obj_from_inven(self_obj, restock_obj);\n                    add_obj_to_inven(self_obj, restock_obj);\n                  end\n                end\n                else begin\n                  if ((critter_inven_obj(self_obj, 2) == restock_obj) or (critter_inven_obj(self_obj, 1) == restock_obj)) then begin\n                    metarule(43, self_obj);\n                  end\n                end\n              end\n              restock_amt := rm_mult_objs_from_inven(self_obj, restock_obj, removed_qty);\n              destroy_object(restock_obj);\n            end\n            restock_obj := 0;\n            restock_amt := 0;\n          end\n          else begin\n            restock_obj := 0;\n          end\n        end\n      end\n    end\n    else begin\n      if (obj_is_carrying_obj_pid(self_obj, 45) < restock_amt) then begin\n        restock_obj := create_object_sid(45, 0, 0, -1);\n        add_mult_objs_to_inven(self_obj, restock_obj, restock_amt - obj_is_carrying_obj_pid(self_obj, 45));\n      end\n      else begin\n        if (obj_is_carrying_obj_pid(self_obj, 45) > restock_amt) then begin\n          removed_qty := obj_is_carrying_obj_pid(self_obj, 45);\n          if ((obj_is_carrying_obj_pid(self_obj, 45) - restock_amt) < removed_qty) then begin\n            removed_qty := obj_is_carrying_obj_pid(self_obj, 45) - restock_amt;\n          end\n          if (removed_qty > 0) then begin\n            restock_obj := obj_carrying_pid_obj(self_obj, 45);\n            if (obj_type(self_obj) == 1) then begin\n              restock_obj := obj_carrying_pid_obj(self_obj, 45);\n              if (critter_inven_obj(self_obj, 0) == restock_obj) then begin\n                if (obj_item_subtype(critter_inven_obj(self_obj, 0)) == 0) then begin\n                  restock_obj := critter_inven_obj(self_obj, 0);\n                  debug_msg(\"armour pid == \" + obj_pid(restock_obj));\n                  rm_obj_from_inven(self_obj, restock_obj);\n                  add_obj_to_inven(self_obj, restock_obj);\n                end\n              end\n              else begin\n                if ((critter_inven_obj(self_obj, 2) == restock_obj) or (critter_inven_obj(self_obj, 1) == restock_obj)) then begin\n                  metarule(43, self_obj);\n                end\n              end\n            end\n            restock_amt := rm_mult_objs_from_inven(self_obj, restock_obj, removed_qty);\n            destroy_object(restock_obj);\n          end\n          restock_obj := 0;\n          restock_amt := 0;\n        end\n        else begin\n          restock_obj := 0;\n        end\n      end\n    end\n    restock_amt := random(1, 5);\n    if (obj_is_carrying_obj_pid(self_obj, 236) < restock_amt) then begin\n      if (100 >= random(1, 100)) then begin\n        if (obj_is_carrying_obj_pid(self_obj, 236) < restock_amt) then begin\n          restock_obj := create_object_sid(236, 0, 0, -1);\n          add_mult_objs_to_inven(self_obj, restock_obj, restock_amt - obj_is_carrying_obj_pid(self_obj, 236));\n        end\n        else begin\n          if (obj_is_carrying_obj_pid(self_obj, 236) > restock_amt) then begin\n            removed_qty := obj_is_carrying_obj_pid(self_obj, 236);\n            if ((obj_is_carrying_obj_pid(self_obj, 236) - restock_amt) < removed_qty) then begin\n              removed_qty := obj_is_carrying_obj_pid(self_obj, 236) - restock_amt;\n            end\n            if (removed_qty > 0) then begin\n              restock_obj := obj_carrying_pid_obj(self_obj, 236);\n              if (obj_type(self_obj) == 1) then begin\n                restock_obj := obj_carrying_pid_obj(self_obj, 236);\n                if (critter_inven_obj(self_obj, 0) == restock_obj) then begin\n                  if (obj_item_subtype(critter_inven_obj(self_obj, 0)) == 0) then begin\n                    restock_obj := critter_inven_obj(self_obj, 0);\n                    debug_msg(\"armour pid == \" + obj_pid(restock_obj));\n                    rm_obj_from_inven(self_obj, restock_obj);\n                    add_obj_to_inven(self_obj, restock_obj);\n                  end\n                end\n                else begin\n                  if ((critter_inven_obj(self_obj, 2) == restock_obj) or (critter_inven_obj(self_obj, 1) == restock_obj)) then begin\n                    metarule(43, self_obj);\n                  end\n                end\n              end\n              restock_amt := rm_mult_objs_from_inven(self_obj, restock_obj, removed_qty);\n              destroy_object(restock_obj);\n            end\n            restock_obj := 0;\n            restock_amt := 0;\n          end\n          else begin\n            restock_obj := 0;\n          end\n        end\n      end\n    end\n    else begin\n      if (obj_is_carrying_obj_pid(self_obj, 236) < restock_amt) then begin\n        restock_obj := create_object_sid(236, 0, 0, -1);\n        add_mult_objs_to_inven(self_obj, restock_obj, restock_amt - obj_is_carrying_obj_pid(self_obj, 236));\n      end\n      else begin\n        if (obj_is_carrying_obj_pid(self_obj, 236) > restock_amt) then begin\n          removed_qty := obj_is_carrying_obj_pid(self_obj, 236);\n          if ((obj_is_carrying_obj_pid(self_obj, 236) - restock_amt) < removed_qty) then begin\n            removed_qty := obj_is_carrying_obj_pid(self_obj, 236) - restock_amt;\n          end\n          if (removed_qty > 0) then begin\n            restock_obj := obj_carrying_pid_obj(self_obj, 236);\n            if (obj_type(self_obj) == 1) then begin\n              restock_obj := obj_carrying_pid_obj(self_obj, 236);\n              if (critter_inven_obj(self_obj, 0) == restock_obj) then begin\n                if (obj_item_subtype(critter_inven_obj(self_obj, 0)) == 0) then begin\n                  restock_obj := critter_inven_obj(self_obj, 0);\n                  debug_msg(\"armour pid == \" + obj_pid(restock_obj));\n                  rm_obj_from_inven(self_obj, restock_obj);\n                  add_obj_to_inven(self_obj, restock_obj);\n                end\n              end\n              else begin\n                if ((critter_inven_obj(self_obj, 2) == restock_obj) or (critter_inven_obj(self_obj, 1) == restock_obj)) then begin\n                  metarule(43, self_obj);\n                end\n              end\n            end\n            restock_amt := rm_mult_objs_from_inven(self_obj, restock_obj, removed_qty);\n            destroy_object(restock_obj);\n          end\n          restock_obj := 0;\n          restock_amt := 0;\n        end\n        else begin\n          restock_obj := 0;\n        end\n      end\n    end\n    restock_amt := random(1, 2);\n    if (obj_is_carrying_obj_pid(self_obj, 234) < restock_amt) then begin\n      if (60 >= random(1, 100)) then begin\n        if (obj_is_carrying_obj_pid(self_obj, 234) < restock_amt) then begin\n          restock_obj := create_object_sid(234, 0, 0, -1);\n          add_mult_objs_to_inven(self_obj, restock_obj, restock_amt - obj_is_carrying_obj_pid(self_obj, 234));\n        end\n        else begin\n          if (obj_is_carrying_obj_pid(self_obj, 234) > restock_amt) then begin\n            removed_qty := obj_is_carrying_obj_pid(self_obj, 234);\n            if ((obj_is_carrying_obj_pid(self_obj, 234) - restock_amt) < removed_qty) then begin\n              removed_qty := obj_is_carrying_obj_pid(self_obj, 234) - restock_amt;\n            end\n            if (removed_qty > 0) then begin\n              restock_obj := obj_carrying_pid_obj(self_obj, 234);\n              if (obj_type(self_obj) == 1) then begin\n                restock_obj := obj_carrying_pid_obj(self_obj, 234);\n                if (critter_inven_obj(self_obj, 0) == restock_obj) then begin\n                  if (obj_item_subtype(critter_inven_obj(self_obj, 0)) == 0) then begin\n                    restock_obj := critter_inven_obj(self_obj, 0);\n                    debug_msg(\"armour pid == \" + obj_pid(restock_obj));\n                    rm_obj_from_inven(self_obj, restock_obj);\n                    add_obj_to_inven(self_obj, restock_obj);\n                  end\n                end\n                else begin\n                  if ((critter_inven_obj(self_obj, 2) == restock_obj) or (critter_inven_obj(self_obj, 1) == restock_obj)) then begin\n                    metarule(43, self_obj);\n                  end\n                end\n              end\n              restock_amt := rm_mult_objs_from_inven(self_obj, restock_obj, removed_qty);\n              destroy_object(restock_obj);\n            end\n            restock_obj := 0;\n            restock_amt := 0;\n          end\n          else begin\n            restock_obj := 0;\n          end\n        end\n      end\n    end\n    else begin\n      if (obj_is_carrying_obj_pid(self_obj, 234) < restock_amt) then begin\n        restock_obj := create_object_sid(234, 0, 0, -1);\n        add_mult_objs_to_inven(self_obj, restock_obj, restock_amt - obj_is_carrying_obj_pid(self_obj, 234));\n      end\n      else begin\n        if (obj_is_carrying_obj_pid(self_obj, 234) > restock_amt) then begin\n          removed_qty := obj_is_carrying_obj_pid(self_obj, 234);\n          if ((obj_is_carrying_obj_pid(self_obj, 234) - restock_amt) < removed_qty) then begin\n            removed_qty := obj_is_carrying_obj_pid(self_obj, 234) - restock_amt;\n          end\n          if (removed_qty > 0) then begin\n            restock_obj := obj_carrying_pid_obj(self_obj, 234);\n            if (obj_type(self_obj) == 1) then begin\n              restock_obj := obj_carrying_pid_obj(self_obj, 234);\n              if (critter_inven_obj(self_obj, 0) == restock_obj) then begin\n                if (obj_item_subtype(critter_inven_obj(self_obj, 0)) == 0) then begin\n                  restock_obj := critter_inven_obj(self_obj, 0);\n                  debug_msg(\"armour pid == \" + obj_pid(restock_obj));\n                  rm_obj_from_inven(self_obj, restock_obj);\n                  add_obj_to_inven(self_obj, restock_obj);\n                end\n              end\n              else begin\n                if ((critter_inven_obj(self_obj, 2) == restock_obj) or (critter_inven_obj(self_obj, 1) == restock_obj)) then begin\n                  metarule(43, self_obj);\n                end\n              end\n            end\n            restock_amt := rm_mult_objs_from_inven(self_obj, restock_obj, removed_qty);\n            destroy_object(restock_obj);\n          end\n          restock_obj := 0;\n          restock_amt := 0;\n        end\n        else begin\n          restock_obj := 0;\n        end\n      end\n    end\n    restock_amt := random(1, 1);\n    if (obj_is_carrying_obj_pid(self_obj, 160) < restock_amt) then begin\n      if (60 >= random(1, 100)) then begin\n        if (obj_is_carrying_obj_pid(self_obj, 160) < restock_amt) then begin\n          restock_obj := create_object_sid(160, 0, 0, -1);\n          add_mult_objs_to_inven(self_obj, restock_obj, restock_amt - obj_is_carrying_obj_pid(self_obj, 160));\n        end\n        else begin\n          if (obj_is_carrying_obj_pid(self_obj, 160) > restock_amt) then begin\n            removed_qty := obj_is_carrying_obj_pid(self_obj, 160);\n            if ((obj_is_carrying_obj_pid(self_obj, 160) - restock_amt) < removed_qty) then begin\n              removed_qty := obj_is_carrying_obj_pid(self_obj, 160) - restock_amt;\n            end\n            if (removed_qty > 0) then begin\n              restock_obj := obj_carrying_pid_obj(self_obj, 160);\n              if (obj_type(self_obj) == 1) then begin\n                restock_obj := obj_carrying_pid_obj(self_obj, 160);\n                if (critter_inven_obj(self_obj, 0) == restock_obj) then begin\n                  if (obj_item_subtype(critter_inven_obj(self_obj, 0)) == 0) then begin\n                    restock_obj := critter_inven_obj(self_obj, 0);\n                    debug_msg(\"armour pid == \" + obj_pid(restock_obj));\n                    rm_obj_from_inven(self_obj, restock_obj);\n                    add_obj_to_inven(self_obj, restock_obj);\n                  end\n                end\n                else begin\n                  if ((critter_inven_obj(self_obj, 2) == restock_obj) or (critter_inven_obj(self_obj, 1) == restock_obj)) then begin\n                    metarule(43, self_obj);\n                  end\n                end\n              end\n              restock_amt := rm_mult_objs_from_inven(self_obj, restock_obj, removed_qty);\n              destroy_object(restock_obj);\n            end\n            restock_obj := 0;\n            restock_amt := 0;\n          end\n          else begin\n            restock_obj := 0;\n          end\n        end\n      end\n    end\n    else begin\n      if (obj_is_carrying_obj_pid(self_obj, 160) < restock_amt) then begin\n        restock_obj := create_object_sid(160, 0, 0, -1);\n        add_mult_objs_to_inven(self_obj, restock_obj, restock_amt - obj_is_carrying_obj_pid(self_obj, 160));\n      end\n      else begin\n        if (obj_is_carrying_obj_pid(self_obj, 160) > restock_amt) then begin\n          removed_qty := obj_is_carrying_obj_pid(self_obj, 160);\n          if ((obj_is_carrying_obj_pid(self_obj, 160) - restock_amt) < removed_qty) then begin\n            removed_qty := obj_is_carrying_obj_pid(self_obj, 160) - restock_amt;\n          end\n          if (removed_qty > 0) then begin\n            restock_obj := obj_carrying_pid_obj(self_obj, 160);\n            if (obj_type(self_obj) == 1) then begin\n              restock_obj := obj_carrying_pid_obj(self_obj, 160);\n              if (critter_inven_obj(self_obj, 0) == restock_obj) then begin\n                if (obj_item_subtype(critter_inven_obj(self_obj, 0)) == 0) then begin\n                  restock_obj := critter_inven_obj(self_obj, 0);\n                  debug_msg(\"armour pid == \" + obj_pid(restock_obj));\n                  rm_obj_from_inven(self_obj, restock_obj);\n                  add_obj_to_inven(self_obj, restock_obj);\n                end\n              end\n              else begin\n                if ((critter_inven_obj(self_obj, 2) == restock_obj) or (critter_inven_obj(self_obj, 1) == restock_obj)) then begin\n                  metarule(43, self_obj);\n                end\n              end\n            end\n            restock_amt := rm_mult_objs_from_inven(self_obj, restock_obj, removed_qty);\n            destroy_object(restock_obj);\n          end\n          restock_obj := 0;\n          restock_amt := 0;\n        end\n        else begin\n          restock_obj := 0;\n        end\n      end\n    end\n    restock_amt := random(1, 1);\n    if (obj_is_carrying_obj_pid(self_obj, 280) < restock_amt) then begin\n      if (60 >= random(1, 100)) then begin\n        if (obj_is_carrying_obj_pid(self_obj, 280) < restock_amt) then begin\n          restock_obj := create_object_sid(280, 0, 0, -1);\n          add_mult_objs_to_inven(self_obj, restock_obj, restock_amt - obj_is_carrying_obj_pid(self_obj, 280));\n        end\n        else begin\n          if (obj_is_carrying_obj_pid(self_obj, 280) > restock_amt) then begin\n            removed_qty := obj_is_carrying_obj_pid(self_obj, 280);\n            if ((obj_is_carrying_obj_pid(self_obj, 280) - restock_amt) < removed_qty) then begin\n              removed_qty := obj_is_carrying_obj_pid(self_obj, 280) - restock_amt;\n            end\n            if (removed_qty > 0) then begin\n              restock_obj := obj_carrying_pid_obj(self_obj, 280);\n              if (obj_type(self_obj) == 1) then begin\n                restock_obj := obj_carrying_pid_obj(self_obj, 280);\n                if (critter_inven_obj(self_obj, 0) == restock_obj) then begin\n                  if (obj_item_subtype(critter_inven_obj(self_obj, 0)) == 0) then begin\n                    restock_obj := critter_inven_obj(self_obj, 0);\n                    debug_msg(\"armour pid == \" + obj_pid(restock_obj));\n                    rm_obj_from_inven(self_obj, restock_obj);\n                    add_obj_to_inven(self_obj, restock_obj);\n                  end\n                end\n                else begin\n                  if ((critter_inven_obj(self_obj, 2) == restock_obj) or (critter_inven_obj(self_obj, 1) == restock_obj)) then begin\n                    metarule(43, self_obj);\n                  end\n                end\n              end\n              restock_amt := rm_mult_objs_from_inven(self_obj, restock_obj, removed_qty);\n              destroy_object(restock_obj);\n            end\n            restock_obj := 0;\n            restock_amt := 0;\n          end\n          else begin\n            restock_obj := 0;\n          end\n        end\n      end\n    end\n    else begin\n      if (obj_is_carrying_obj_pid(self_obj, 280) < restock_amt) then begin\n        restock_obj := create_object_sid(280, 0, 0, -1);\n        add_mult_objs_to_inven(self_obj, restock_obj, restock_amt - obj_is_carrying_obj_pid(self_obj, 280));\n      end\n      else begin\n        if (obj_is_carrying_obj_pid(self_obj, 280) > restock_amt) then begin\n          removed_qty := obj_is_carrying_obj_pid(self_obj, 280);\n          if ((obj_is_carrying_obj_pid(self_obj, 280) - restock_amt) < removed_qty) then begin\n            removed_qty := obj_is_carrying_obj_pid(self_obj, 280) - restock_amt;\n          end\n          if (removed_qty > 0) then begin\n            restock_obj := obj_carrying_pid_obj(self_obj, 280);\n            if (obj_type(self_obj) == 1) then begin\n              restock_obj := obj_carrying_pid_obj(self_obj, 280);\n              if (critter_inven_obj(self_obj, 0) == restock_obj) then begin\n                if (obj_item_subtype(critter_inven_obj(self_obj, 0)) == 0) then begin\n                  restock_obj := critter_inven_obj(self_obj, 0);\n                  debug_msg(\"armour pid == \" + obj_pid(restock_obj));\n                  rm_obj_from_inven(self_obj, restock_obj);\n                  add_obj_to_inven(self_obj, restock_obj);\n                end\n              end\n              else begin\n                if ((critter_inven_obj(self_obj, 2) == restock_obj) or (critter_inven_obj(self_obj, 1) == restock_obj)) then begin\n                  metarule(43, self_obj);\n                end\n              end\n            end\n            restock_amt := rm_mult_objs_from_inven(self_obj, restock_obj, removed_qty);\n            destroy_object(restock_obj);\n          end\n          restock_obj := 0;\n          restock_amt := 0;\n        end\n        else begin\n          restock_obj := 0;\n        end\n      end\n    end\n    restock_amt := random(1, 1);\n    if (obj_is_carrying_obj_pid(self_obj, 319) < restock_amt) then begin\n      if (60 >= random(1, 100)) then begin\n        if (obj_is_carrying_obj_pid(self_obj, 319) < restock_amt) then begin\n          restock_obj := create_object_sid(319, 0, 0, -1);\n          add_mult_objs_to_inven(self_obj, restock_obj, restock_amt - obj_is_carrying_obj_pid(self_obj, 319));\n        end\n        else begin\n          if (obj_is_carrying_obj_pid(self_obj, 319) > restock_amt) then begin\n            removed_qty := obj_is_carrying_obj_pid(self_obj, 319);\n            if ((obj_is_carrying_obj_pid(self_obj, 319) - restock_amt) < removed_qty) then begin\n              removed_qty := obj_is_carrying_obj_pid(self_obj, 319) - restock_amt;\n            end\n            if (removed_qty > 0) then begin\n              restock_obj := obj_carrying_pid_obj(self_obj, 319);\n              if (obj_type(self_obj) == 1) then begin\n                restock_obj := obj_carrying_pid_obj(self_obj, 319);\n                if (critter_inven_obj(self_obj, 0) == restock_obj) then begin\n                  if (obj_item_subtype(critter_inven_obj(self_obj, 0)) == 0) then begin\n                    restock_obj := critter_inven_obj(self_obj, 0);\n                    debug_msg(\"armour pid == \" + obj_pid(restock_obj));\n                    rm_obj_from_inven(self_obj, restock_obj);\n                    add_obj_to_inven(self_obj, restock_obj);\n                  end\n                end\n                else begin\n                  if ((critter_inven_obj(self_obj, 2) == restock_obj) or (critter_inven_obj(self_obj, 1) == restock_obj)) then begin\n                    metarule(43, self_obj);\n                  end\n                end\n              end\n              restock_amt := rm_mult_objs_from_inven(self_obj, restock_obj, removed_qty);\n              destroy_object(restock_obj);\n            end\n            restock_obj := 0;\n            restock_amt := 0;\n          end\n          else begin\n            restock_obj := 0;\n          end\n        end\n      end\n    end\n    else begin\n      if (obj_is_carrying_obj_pid(self_obj, 319) < restock_amt) then begin\n        restock_obj := create_object_sid(319, 0, 0, -1);\n        add_mult_objs_to_inven(self_obj, restock_obj, restock_amt - obj_is_carrying_obj_pid(self_obj, 319));\n      end\n      else begin\n        if (obj_is_carrying_obj_pid(self_obj, 319) > restock_amt) then begin\n          removed_qty := obj_is_carrying_obj_pid(self_obj, 319);\n          if ((obj_is_carrying_obj_pid(self_obj, 319) - restock_amt) < removed_qty) then begin\n            removed_qty := obj_is_carrying_obj_pid(self_obj, 319) - restock_amt;\n          end\n          if (removed_qty > 0) then begin\n            restock_obj := obj_carrying_pid_obj(self_obj, 319);\n            if (obj_type(self_obj) == 1) then begin\n              restock_obj := obj_carrying_pid_obj(self_obj, 319);\n              if (critter_inven_obj(self_obj, 0) == restock_obj) then begin\n                if (obj_item_subtype(critter_inven_obj(self_obj, 0)) == 0) then begin\n                  restock_obj := critter_inven_obj(self_obj, 0);\n                  debug_msg(\"armour pid == \" + obj_pid(restock_obj));\n                  rm_obj_from_inven(self_obj, restock_obj);\n                  add_obj_to_inven(self_obj, restock_obj);\n                end\n              end\n              else begin\n                if ((critter_inven_obj(self_obj, 2) == restock_obj) or (critter_inven_obj(self_obj, 1) == restock_obj)) then begin\n                  metarule(43, self_obj);\n                end\n              end\n            end\n            restock_amt := rm_mult_objs_from_inven(self_obj, restock_obj, removed_qty);\n            destroy_object(restock_obj);\n          end\n          restock_obj := 0;\n          restock_amt := 0;\n        end\n        else begin\n          restock_obj := 0;\n        end\n      end\n    end\n    restock_amt := random(1, 1);\n    if (obj_is_carrying_obj_pid(self_obj, 116) < restock_amt) then begin\n      if (30 >= random(1, 100)) then begin\n        if (obj_is_carrying_obj_pid(self_obj, 116) < restock_amt) then begin\n          restock_obj := create_object_sid(116, 0, 0, -1);\n          add_mult_objs_to_inven(self_obj, restock_obj, restock_amt - obj_is_carrying_obj_pid(self_obj, 116));\n        end\n        else begin\n          if (obj_is_carrying_obj_pid(self_obj, 116) > restock_amt) then begin\n            removed_qty := obj_is_carrying_obj_pid(self_obj, 116);\n            if ((obj_is_carrying_obj_pid(self_obj, 116) - restock_amt) < removed_qty) then begin\n              removed_qty := obj_is_carrying_obj_pid(self_obj, 116) - restock_amt;\n            end\n            if (removed_qty > 0) then begin\n              restock_obj := obj_carrying_pid_obj(self_obj, 116);\n              if (obj_type(self_obj) == 1) then begin\n                restock_obj := obj_carrying_pid_obj(self_obj, 116);\n                if (critter_inven_obj(self_obj, 0) == restock_obj) then begin\n                  if (obj_item_subtype(critter_inven_obj(self_obj, 0)) == 0) then begin\n                    restock_obj := critter_inven_obj(self_obj, 0);\n                    debug_msg(\"armour pid == \" + obj_pid(restock_obj));\n                    rm_obj_from_inven(self_obj, restock_obj);\n                    add_obj_to_inven(self_obj, restock_obj);\n                  end\n                end\n                else begin\n                  if ((critter_inven_obj(self_obj, 2) == restock_obj) or (critter_inven_obj(self_obj, 1) == restock_obj)) then begin\n                    metarule(43, self_obj);\n                  end\n                end\n              end\n              restock_amt := rm_mult_objs_from_inven(self_obj, restock_obj, removed_qty);\n              destroy_object(restock_obj);\n            end\n            restock_obj := 0;\n            restock_amt := 0;\n          end\n          else begin\n            restock_obj := 0;\n          end\n        end\n      end\n    end\n    else begin\n      if (obj_is_carrying_obj_pid(self_obj, 116) < restock_amt) then begin\n        restock_obj := create_object_sid(116, 0, 0, -1);\n        add_mult_objs_to_inven(self_obj, restock_obj, restock_amt - obj_is_carrying_obj_pid(self_obj, 116));\n      end\n      else begin\n        if (obj_is_carrying_obj_pid(self_obj, 116) > restock_amt) then begin\n          removed_qty := obj_is_carrying_obj_pid(self_obj, 116);\n          if ((obj_is_carrying_obj_pid(self_obj, 116) - restock_amt) < removed_qty) then begin\n            removed_qty := obj_is_carrying_obj_pid(self_obj, 116) - restock_amt;\n          end\n          if (removed_qty > 0) then begin\n            restock_obj := obj_carrying_pid_obj(self_obj, 116);\n            if (obj_type(self_obj) == 1) then begin\n              restock_obj := obj_carrying_pid_obj(self_obj, 116);\n              if (critter_inven_obj(self_obj, 0) == restock_obj) then begin\n                if (obj_item_subtype(critter_inven_obj(self_obj, 0)) == 0) then begin\n                  restock_obj := critter_inven_obj(self_obj, 0);\n                  debug_msg(\"armour pid == \" + obj_pid(restock_obj));\n                  rm_obj_from_inven(self_obj, restock_obj);\n                  add_obj_to_inven(self_obj, restock_obj);\n                end\n              end\n              else begin\n                if ((critter_inven_obj(self_obj, 2) == restock_obj) or (critter_inven_obj(self_obj, 1) == restock_obj)) then begin\n                  metarule(43, self_obj);\n                end\n              end\n            end\n            restock_amt := rm_mult_objs_from_inven(self_obj, restock_obj, removed_qty);\n            destroy_object(restock_obj);\n          end\n          restock_obj := 0;\n          restock_amt := 0;\n        end\n        else begin\n          restock_obj := 0;\n        end\n      end\n    end\n    restock_amt := random(1, 1);\n    if (obj_is_carrying_obj_pid(self_obj, 235) < restock_amt) then begin\n      if (5 >= random(1, 100)) then begin\n        if (obj_is_carrying_obj_pid(self_obj, 235) < restock_amt) then begin\n          restock_obj := create_object_sid(235, 0, 0, -1);\n          add_mult_objs_to_inven(self_obj, restock_obj, restock_amt - obj_is_carrying_obj_pid(self_obj, 235));\n        end\n        else begin\n          if (obj_is_carrying_obj_pid(self_obj, 235) > restock_amt) then begin\n            removed_qty := obj_is_carrying_obj_pid(self_obj, 235);\n            if ((obj_is_carrying_obj_pid(self_obj, 235) - restock_amt) < removed_qty) then begin\n              removed_qty := obj_is_carrying_obj_pid(self_obj, 235) - restock_amt;\n            end\n            if (removed_qty > 0) then begin\n              restock_obj := obj_carrying_pid_obj(self_obj, 235);\n              if (obj_type(self_obj) == 1) then begin\n                restock_obj := obj_carrying_pid_obj(self_obj, 235);\n                if (critter_inven_obj(self_obj, 0) == restock_obj) then begin\n                  if (obj_item_subtype(critter_inven_obj(self_obj, 0)) == 0) then begin\n                    restock_obj := critter_inven_obj(self_obj, 0);\n                    debug_msg(\"armour pid == \" + obj_pid(restock_obj));\n                    rm_obj_from_inven(self_obj, restock_obj);\n                    add_obj_to_inven(self_obj, restock_obj);\n                  end\n                end\n                else begin\n                  if ((critter_inven_obj(self_obj, 2) == restock_obj) or (critter_inven_obj(self_obj, 1) == restock_obj)) then begin\n                    metarule(43, self_obj);\n                  end\n                end\n              end\n              restock_amt := rm_mult_objs_from_inven(self_obj, restock_obj, removed_qty);\n              destroy_object(restock_obj);\n            end\n            restock_obj := 0;\n            restock_amt := 0;\n          end\n          else begin\n            restock_obj := 0;\n          end\n        end\n      end\n    end\n    else begin\n      if (obj_is_carrying_obj_pid(self_obj, 235) < restock_amt) then begin\n        restock_obj := create_object_sid(235, 0, 0, -1);\n        add_mult_objs_to_inven(self_obj, restock_obj, restock_amt - obj_is_carrying_obj_pid(self_obj, 235));\n      end\n      else begin\n        if (obj_is_carrying_obj_pid(self_obj, 235) > restock_amt) then begin\n          removed_qty := obj_is_carrying_obj_pid(self_obj, 235);\n          if ((obj_is_carrying_obj_pid(self_obj, 235) - restock_amt) < removed_qty) then begin\n            removed_qty := obj_is_carrying_obj_pid(self_obj, 235) - restock_amt;\n          end\n          if (removed_qty > 0) then begin\n            restock_obj := obj_carrying_pid_obj(self_obj, 235);\n            if (obj_type(self_obj) == 1) then begin\n              restock_obj := obj_carrying_pid_obj(self_obj, 235);\n              if (critter_inven_obj(self_obj, 0) == restock_obj) then begin\n                if (obj_item_subtype(critter_inven_obj(self_obj, 0)) == 0) then begin\n                  restock_obj := critter_inven_obj(self_obj, 0);\n                  debug_msg(\"armour pid == \" + obj_pid(restock_obj));\n                  rm_obj_from_inven(self_obj, restock_obj);\n                  add_obj_to_inven(self_obj, restock_obj);\n                end\n              end\n              else begin\n                if ((critter_inven_obj(self_obj, 2) == restock_obj) or (critter_inven_obj(self_obj, 1) == restock_obj)) then begin\n                  metarule(43, self_obj);\n                end\n              end\n            end\n            restock_amt := rm_mult_objs_from_inven(self_obj, restock_obj, removed_qty);\n            destroy_object(restock_obj);\n          end\n          restock_obj := 0;\n          restock_amt := 0;\n        end\n        else begin\n          restock_obj := 0;\n        end\n      end\n    end\n    restock_amt := random(0, 2);\n    if (obj_is_carrying_obj_pid(self_obj, 116) < restock_amt) then begin\n      if (100 >= random(1, 100)) then begin\n        if (obj_is_carrying_obj_pid(self_obj, 116) < restock_amt) then begin\n          restock_obj := create_object_sid(116, 0, 0, -1);\n          add_mult_objs_to_inven(self_obj, restock_obj, restock_amt - obj_is_carrying_obj_pid(self_obj, 116));\n        end\n        else begin\n          if (obj_is_carrying_obj_pid(self_obj, 116) > restock_amt) then begin\n            removed_qty := obj_is_carrying_obj_pid(self_obj, 116);\n            if ((obj_is_carrying_obj_pid(self_obj, 116) - restock_amt) < removed_qty) then begin\n              removed_qty := obj_is_carrying_obj_pid(self_obj, 116) - restock_amt;\n            end\n            if (removed_qty > 0) then begin\n              restock_obj := obj_carrying_pid_obj(self_obj, 116);\n              if (obj_type(self_obj) == 1) then begin\n                restock_obj := obj_carrying_pid_obj(self_obj, 116);\n                if (critter_inven_obj(self_obj, 0) == restock_obj) then begin\n                  if (obj_item_subtype(critter_inven_obj(self_obj, 0)) == 0) then begin\n                    restock_obj := critter_inven_obj(self_obj, 0);\n                    debug_msg(\"armour pid == \" + obj_pid(restock_obj));\n                    rm_obj_from_inven(self_obj, restock_obj);\n                    add_obj_to_inven(self_obj, restock_obj);\n                  end\n                end\n                else begin\n                  if ((critter_inven_obj(self_obj, 2) == restock_obj) or (critter_inven_obj(self_obj, 1) == restock_obj)) then begin\n                    metarule(43, self_obj);\n                  end\n                end\n              end\n              restock_amt := rm_mult_objs_from_inven(self_obj, restock_obj, removed_qty);\n              destroy_object(restock_obj);\n            end\n            restock_obj := 0;\n            restock_amt := 0;\n          end\n          else begin\n            restock_obj := 0;\n          end\n        end\n      end\n    end\n    else begin\n      if (obj_is_carrying_obj_pid(self_obj, 116) < restock_amt) then begin\n        restock_obj := create_object_sid(116, 0, 0, -1);\n        add_mult_objs_to_inven(self_obj, restock_obj, restock_amt - obj_is_carrying_obj_pid(self_obj, 116));\n      end\n      else begin\n        if (obj_is_carrying_obj_pid(self_obj, 116) > restock_amt) then begin\n          removed_qty := obj_is_carrying_obj_pid(self_obj, 116);\n          if ((obj_is_carrying_obj_pid(self_obj, 116) - restock_amt) < removed_qty) then begin\n            removed_qty := obj_is_carrying_obj_pid(self_obj, 116) - restock_amt;\n          end\n          if (removed_qty > 0) then begin\n            restock_obj := obj_carrying_pid_obj(self_obj, 116);\n            if (obj_type(self_obj) == 1) then begin\n              restock_obj := obj_carrying_pid_obj(self_obj, 116);\n              if (critter_inven_obj(self_obj, 0) == restock_obj) then begin\n                if (obj_item_subtype(critter_inven_obj(self_obj, 0)) == 0) then begin\n                  restock_obj := critter_inven_obj(self_obj, 0);\n                  debug_msg(\"armour pid == \" + obj_pid(restock_obj));\n                  rm_obj_from_inven(self_obj, restock_obj);\n                  add_obj_to_inven(self_obj, restock_obj);\n                end\n              end\n              else begin\n                if ((critter_inven_obj(self_obj, 2) == restock_obj) or (critter_inven_obj(self_obj, 1) == restock_obj)) then begin\n                  metarule(43, self_obj);\n                end\n              end\n            end\n            restock_amt := rm_mult_objs_from_inven(self_obj, restock_obj, removed_qty);\n            destroy_object(restock_obj);\n          end\n          restock_obj := 0;\n          restock_amt := 0;\n        end\n        else begin\n          restock_obj := 0;\n        end\n      end\n    end\n    restock_amt := random(1, 3);\n    if (obj_is_carrying_obj_pid(self_obj, 241) < restock_amt) then begin\n      if (100 >= random(1, 100)) then begin\n        if (obj_is_carrying_obj_pid(self_obj, 241) < restock_amt) then begin\n          restock_obj := create_object_sid(241, 0, 0, -1);\n          add_mult_objs_to_inven(self_obj, restock_obj, restock_amt - obj_is_carrying_obj_pid(self_obj, 241));\n        end\n        else begin\n          if (obj_is_carrying_obj_pid(self_obj, 241) > restock_amt) then begin\n            removed_qty := obj_is_carrying_obj_pid(self_obj, 241);\n            if ((obj_is_carrying_obj_pid(self_obj, 241) - restock_amt) < removed_qty) then begin\n              removed_qty := obj_is_carrying_obj_pid(self_obj, 241) - restock_amt;\n            end\n            if (removed_qty > 0) then begin\n              restock_obj := obj_carrying_pid_obj(self_obj, 241);\n              if (obj_type(self_obj) == 1) then begin\n                restock_obj := obj_carrying_pid_obj(self_obj, 241);\n                if (critter_inven_obj(self_obj, 0) == restock_obj) then begin\n                  if (obj_item_subtype(critter_inven_obj(self_obj, 0)) == 0) then begin\n                    restock_obj := critter_inven_obj(self_obj, 0);\n                    debug_msg(\"armour pid == \" + obj_pid(restock_obj));\n                    rm_obj_from_inven(self_obj, restock_obj);\n                    add_obj_to_inven(self_obj, restock_obj);\n                  end\n                end\n                else begin\n                  if ((critter_inven_obj(self_obj, 2) == restock_obj) or (critter_inven_obj(self_obj, 1) == restock_obj)) then begin\n                    metarule(43, self_obj);\n                  end\n                end\n              end\n              restock_amt := rm_mult_objs_from_inven(self_obj, restock_obj, removed_qty);\n              destroy_object(restock_obj);\n            end\n            restock_obj := 0;\n            restock_amt := 0;\n          end\n          else begin\n            restock_obj := 0;\n          end\n        end\n      end\n    end\n    else begin\n      if (obj_is_carrying_obj_pid(self_obj, 241) < restock_amt) then begin\n        restock_obj := create_object_sid(241, 0, 0, -1);\n        add_mult_objs_to_inven(self_obj, restock_obj, restock_amt - obj_is_carrying_obj_pid(self_obj, 241));\n      end\n      else begin\n        if (obj_is_carrying_obj_pid(self_obj, 241) > restock_amt) then begin\n          removed_qty := obj_is_carrying_obj_pid(self_obj, 241);\n          if ((obj_is_carrying_obj_pid(self_obj, 241) - restock_amt) < removed_qty) then begin\n            removed_qty := obj_is_carrying_obj_pid(self_obj, 241) - restock_amt;\n          end\n          if (removed_qty > 0) then begin\n            restock_obj := obj_carrying_pid_obj(self_obj, 241);\n            if (obj_type(self_obj) == 1) then begin\n              restock_obj := obj_carrying_pid_obj(self_obj, 241);\n              if (critter_inven_obj(self_obj, 0) == restock_obj) then begin\n                if (obj_item_subtype(critter_inven_obj(self_obj, 0)) == 0) then begin\n                  restock_obj := critter_inven_obj(self_obj, 0);\n                  debug_msg(\"armour pid == \" + obj_pid(restock_obj));\n                  rm_obj_from_inven(self_obj, restock_obj);\n                  add_obj_to_inven(self_obj, restock_obj);\n                end\n              end\n              else begin\n                if ((critter_inven_obj(self_obj, 2) == restock_obj) or (critter_inven_obj(self_obj, 1) == restock_obj)) then begin\n                  metarule(43, self_obj);\n                end\n              end\n            end\n            restock_amt := rm_mult_objs_from_inven(self_obj, restock_obj, removed_qty);\n            destroy_object(restock_obj);\n          end\n          restock_obj := 0;\n          restock_amt := 0;\n        end\n        else begin\n          restock_obj := 0;\n        end\n      end\n    end\n    restock_amt := random(5, 10);\n    if (obj_is_carrying_obj_pid(self_obj, 29) < restock_amt) then begin\n      if (100 >= random(1, 100)) then begin\n        if (obj_is_carrying_obj_pid(self_obj, 29) < restock_amt) then begin\n          restock_obj := create_object_sid(29, 0, 0, -1);\n          add_mult_objs_to_inven(self_obj, restock_obj, restock_amt - obj_is_carrying_obj_pid(self_obj, 29));\n        end\n        else begin\n          if (obj_is_carrying_obj_pid(self_obj, 29) > restock_amt) then begin\n            removed_qty := obj_is_carrying_obj_pid(self_obj, 29);\n            if ((obj_is_carrying_obj_pid(self_obj, 29) - restock_amt) < removed_qty) then begin\n              removed_qty := obj_is_carrying_obj_pid(self_obj, 29) - restock_amt;\n            end\n            if (removed_qty > 0) then begin\n              restock_obj := obj_carrying_pid_obj(self_obj, 29);\n              if (obj_type(self_obj) == 1) then begin\n                restock_obj := obj_carrying_pid_obj(self_obj, 29);\n                if (critter_inven_obj(self_obj, 0) == restock_obj) then begin\n                  if (obj_item_subtype(critter_inven_obj(self_obj, 0)) == 0) then begin\n                    restock_obj := critter_inven_obj(self_obj, 0);\n                    debug_msg(\"armour pid == \" + obj_pid(restock_obj));\n                    rm_obj_from_inven(self_obj, restock_obj);\n                    add_obj_to_inven(self_obj, restock_obj);\n                  end\n                end\n                else begin\n                  if ((critter_inven_obj(self_obj, 2) == restock_obj) or (critter_inven_obj(self_obj, 1) == restock_obj)) then begin\n                    metarule(43, self_obj);\n                  end\n                end\n              end\n              restock_amt := rm_mult_objs_from_inven(self_obj, restock_obj, removed_qty);\n              destroy_object(restock_obj);\n            end\n            restock_obj := 0;\n            restock_amt := 0;\n          end\n          else begin\n            restock_obj := 0;\n          end\n        end\n      end\n    end\n    else begin\n      if (obj_is_carrying_obj_pid(self_obj, 29) < restock_amt) then begin\n        restock_obj := create_object_sid(29, 0, 0, -1);\n        add_mult_objs_to_inven(self_obj, restock_obj, restock_amt - obj_is_carrying_obj_pid(self_obj, 29));\n      end\n      else begin\n        if (obj_is_carrying_obj_pid(self_obj, 29) > restock_amt) then begin\n          removed_qty := obj_is_carrying_obj_pid(self_obj, 29);\n          if ((obj_is_carrying_obj_pid(self_obj, 29) - restock_amt) < removed_qty) then begin\n            removed_qty := obj_is_carrying_obj_pid(self_obj, 29) - restock_amt;\n          end\n          if (removed_qty > 0) then begin\n            restock_obj := obj_carrying_pid_obj(self_obj, 29);\n            if (obj_type(self_obj) == 1) then begin\n              restock_obj := obj_carrying_pid_obj(self_obj, 29);\n              if (critter_inven_obj(self_obj, 0) == restock_obj) then begin\n                if (obj_item_subtype(critter_inven_obj(self_obj, 0)) == 0) then begin\n                  restock_obj := critter_inven_obj(self_obj, 0);\n                  debug_msg(\"armour pid == \" + obj_pid(restock_obj));\n                  rm_obj_from_inven(self_obj, restock_obj);\n                  add_obj_to_inven(self_obj, restock_obj);\n                end\n              end\n              else begin\n                if ((critter_inven_obj(self_obj, 2) == restock_obj) or (critter_inven_obj(self_obj, 1) == restock_obj)) then begin\n                  metarule(43, self_obj);\n                end\n              end\n            end\n            restock_amt := rm_mult_objs_from_inven(self_obj, restock_obj, removed_qty);\n            destroy_object(restock_obj);\n          end\n          restock_obj := 0;\n          restock_amt := 0;\n        end\n        else begin\n          restock_obj := 0;\n        end\n      end\n    end\n    restock_amt := random(5, 10);\n    if (obj_is_carrying_obj_pid(self_obj, 95) < restock_amt) then begin\n      if (100 >= random(1, 100)) then begin\n        if (obj_is_carrying_obj_pid(self_obj, 95) < restock_amt) then begin\n          restock_obj := create_object_sid(95, 0, 0, -1);\n          add_mult_objs_to_inven(self_obj, restock_obj, restock_amt - obj_is_carrying_obj_pid(self_obj, 95));\n        end\n        else begin\n          if (obj_is_carrying_obj_pid(self_obj, 95) > restock_amt) then begin\n            removed_qty := obj_is_carrying_obj_pid(self_obj, 95);\n            if ((obj_is_carrying_obj_pid(self_obj, 95) - restock_amt) < removed_qty) then begin\n              removed_qty := obj_is_carrying_obj_pid(self_obj, 95) - restock_amt;\n            end\n            if (removed_qty > 0) then begin\n              restock_obj := obj_carrying_pid_obj(self_obj, 95);\n              if (obj_type(self_obj) == 1) then begin\n                restock_obj := obj_carrying_pid_obj(self_obj, 95);\n                if (critter_inven_obj(self_obj, 0) == restock_obj) then begin\n                  if (obj_item_subtype(critter_inven_obj(self_obj, 0)) == 0) then begin\n                    restock_obj := critter_inven_obj(self_obj, 0);\n                    debug_msg(\"armour pid == \" + obj_pid(restock_obj));\n                    rm_obj_from_inven(self_obj, restock_obj);\n                    add_obj_to_inven(self_obj, restock_obj);\n                  end\n                end\n                else begin\n                  if ((critter_inven_obj(self_obj, 2) == restock_obj) or (critter_inven_obj(self_obj, 1) == restock_obj)) then begin\n                    metarule(43, self_obj);\n                  end\n                end\n              end\n              restock_amt := rm_mult_objs_from_inven(self_obj, restock_obj, removed_qty);\n              destroy_object(restock_obj);\n            end\n            restock_obj := 0;\n            restock_amt := 0;\n          end\n          else begin\n            restock_obj := 0;\n          end\n        end\n      end\n    end\n    else begin\n      if (obj_is_carrying_obj_pid(self_obj, 95) < restock_amt) then begin\n        restock_obj := create_object_sid(95, 0, 0, -1);\n        add_mult_objs_to_inven(self_obj, restock_obj, restock_amt - obj_is_carrying_obj_pid(self_obj, 95));\n      end\n      else begin\n        if (obj_is_carrying_obj_pid(self_obj, 95) > restock_amt) then begin\n          removed_qty := obj_is_carrying_obj_pid(self_obj, 95);\n          if ((obj_is_carrying_obj_pid(self_obj, 95) - restock_amt) < removed_qty) then begin\n            removed_qty := obj_is_carrying_obj_pid(self_obj, 95) - restock_amt;\n          end\n          if (removed_qty > 0) then begin\n            restock_obj := obj_carrying_pid_obj(self_obj, 95);\n            if (obj_type(self_obj) == 1) then begin\n              restock_obj := obj_carrying_pid_obj(self_obj, 95);\n              if (critter_inven_obj(self_obj, 0) == restock_obj) then begin\n                if (obj_item_subtype(critter_inven_obj(self_obj, 0)) == 0) then begin\n                  restock_obj := critter_inven_obj(self_obj, 0);\n                  debug_msg(\"armour pid == \" + obj_pid(restock_obj));\n                  rm_obj_from_inven(self_obj, restock_obj);\n                  add_obj_to_inven(self_obj, restock_obj);\n                end\n              end\n              else begin\n                if ((critter_inven_obj(self_obj, 2) == restock_obj) or (critter_inven_obj(self_obj, 1) == restock_obj)) then begin\n                  metarule(43, self_obj);\n                end\n              end\n            end\n            restock_amt := rm_mult_objs_from_inven(self_obj, restock_obj, removed_qty);\n            destroy_object(restock_obj);\n          end\n          restock_obj := 0;\n          restock_amt := 0;\n        end\n        else begin\n          restock_obj := 0;\n        end\n      end\n    end\n    set_local_var(7, (random(7, 14) * (24 * (60 * (60 * 10)))) + game_time);\n  end\nend\n","map_update_p_proc":"[]","Look_Traps_And_Locks":"variable LVar0 := 0;\nvariable LVar1 := 0;\nvariable LVar2 := 0;\nLVar0 := do_check(dude_obj, 1, 0);\nLVar1 := roll_vs_skill(dude_obj, 11, 0);\nLVar2 := roll_vs_skill(dude_obj, 9, 0);\nif (is_success(LVar0)) then begin\n  if (is_critical(LVar0)) then begin\n    if (is_success(LVar1)) then begin\n      set_local_var(2, 1);\n      if (is_critical(LVar1)) then begin\n        if (is_success(LVar2)) then begin\n          if (is_critical(LVar2)) then begin\n            display_msg(message_str(254, 102));\n          end\n          else begin\n            display_msg(message_str(254, 103));\n          end\n        end\n        else begin\n          if (is_critical(LVar2)) then begin\n            display_msg(message_str(254, 104));\n          end\n          else begin\n            display_msg(message_str(254, 105));\n          end\n        end\n      end\n      else begin\n        if (is_success(LVar2)) then begin\n          if (is_critical(LVar2)) then begin\n            display_msg(message_str(254, 106));\n          end\n          else begin\n            display_msg(message_str(254, 107));\n          end\n        end\n        else begin\n          if (is_critical(LVar2)) then begin\n            display_msg(message_str(254, 108));\n          end\n          else begin\n            display_msg(message_str(254, 109));\n          end\n        end\n      end\n    end\n    else begin\n      if (is_critical(LVar1)) then begin\n        if (is_success(LVar2)) then begin\n          if (is_critical(LVar2)) then begin\n            display_msg(message_str(254, 110));\n          end\n          else begin\n            display_msg(message_str(254, 111));\n          end\n        end\n        else begin\n          if (is_critical(LVar2)) then begin\n            display_msg(message_str(254, 112));\n          end\n          else begin\n            display_msg(message_str(254, 113));\n          end\n        end\n      end\n      else begin\n        if (is_success(LVar2)) then begin\n          if (is_critical(LVar2)) then begin\n            display_msg(message_str(254, 114));\n          end\n          else begin\n            display_msg(message_str(254, 115));\n          end\n        end\n        else begin\n          if (is_critical(LVar2)) then begin\n            display_msg(message_str(254, 116));\n          end\n          else begin\n            display_msg(message_str(254, 117));\n          end\n        end\n      end\n    end\n  end\n  else begin\n    if (is_success(LVar1)) then begin\n      set_local_var(2, 1);\n      if (is_critical(LVar1)) then begin\n        if (is_success(LVar2)) then begin\n          if (is_critical(LVar2)) then begin\n            display_msg(message_str(254, 118));\n          end\n          else begin\n            display_msg(message_str(254, 119));\n          end\n        end\n        else begin\n          if (is_critical(LVar2)) then begin\n            display_msg(message_str(254, 120));\n          end\n          else begin\n            display_msg(message_str(254, 121));\n          end\n        end\n      end\n      else begin\n        if (is_success(LVar2)) then begin\n          if (is_critical(LVar2)) then begin\n            display_msg(message_str(254, 122));\n          end\n          else begin\n            display_msg(message_str(254, 123));\n          end\n        end\n        else begin\n          if (is_critical(LVar2)) then begin\n            display_msg(message_str(254, 124));\n          end\n          else begin\n            display_msg(message_str(254, 125));\n          end\n        end\n      end\n    end\n    else begin\n      if (is_critical(LVar1)) then begin\n        if (is_success(LVar2)) then begin\n          if (is_critical(LVar2)) then begin\n            display_msg(message_str(254, 126));\n          end\n          else begin\n            display_msg(message_str(254, 127));\n          end\n        end\n        else begin\n          if (is_critical(LVar2)) then begin\n            display_msg(message_str(254, 128));\n          end\n          else begin\n            display_msg(message_str(254, 129));\n          end\n        end\n      end\n      else begin\n        if (is_success(LVar2)) then begin\n          if (is_critical(LVar2)) then begin\n            display_msg(message_str(254, 130));\n          end\n          else begin\n            display_msg(message_str(254, 131));\n          end\n        end\n        else begin\n          if (is_critical(LVar2)) then begin\n            display_msg(message_str(254, 132));\n          end\n          else begin\n            display_msg(message_str(254, 133));\n          end\n        end\n      end\n    end\n  end\nend\nelse begin\n  if (is_critical(LVar0)) then begin\n    if (is_success(LVar1)) then begin\n      set_local_var(2, 1);\n      if (is_critical(LVar1)) then begin\n        if (is_success(LVar2)) then begin\n          if (is_critical(LVar2)) then begin\n            display_msg(message_str(254, 134));\n          end\n          else begin\n            display_msg(message_str(254, 135));\n          end\n        end\n        else begin\n          if (is_critical(LVar2)) then begin\n            display_msg(message_str(254, 136));\n          end\n          else begin\n            display_msg(message_str(254, 137));\n          end\n        end\n      end\n      else begin\n        if (is_success(LVar2)) then begin\n          if (is_critical(LVar2)) then begin\n            display_msg(message_str(254, 138));\n          end\n          else begin\n            display_msg(message_str(254, 139));\n          end\n        end\n        else begin\n          if (is_critical(LVar2)) then begin\n            display_msg(message_str(254, 140));\n          end\n          else begin\n            display_msg(message_str(254, 141));\n          end\n        end\n      end\n    end\n    else begin\n      if (is_critical(LVar1)) then begin\n        if (is_success(LVar2)) then begin\n          if (is_critical(LVar2)) then begin\n            display_msg(message_str(254, 142));\n          end\n          else begin\n            display_msg(message_str(254, 143));\n          end\n        end\n        else begin\n          if (is_critical(LVar2)) then begin\n            display_msg(message_str(254, 144));\n          end\n          else begin\n            display_msg(message_str(254, 145));\n          end\n        end\n      end\n      else begin\n        if (is_success(LVar2)) then begin\n          if (is_critical(LVar2)) then begin\n            display_msg(message_str(254, 146));\n          end\n          else begin\n            display_msg(message_str(254, 147));\n          end\n        end\n        else begin\n          if (is_critical(LVar2)) then begin\n            display_msg(message_str(254, 148));\n          end\n          else begin\n            display_msg(message_str(254, 149));\n          end\n        end\n      end\n    end\n  end\n  else begin\n    if (is_success(LVar1)) then begin\n      set_local_var(2, 1);\n      if (is_critical(LVar1)) then begin\n        if (is_success(LVar2)) then begin\n          if (is_critical(LVar2)) then begin\n            display_msg(message_str(254, 150));\n          end\n          else begin\n            display_msg(message_str(254, 151));\n          end\n        end\n        else begin\n          if (is_critical(LVar2)) then begin\n            display_msg(message_str(254, 152));\n          end\n          else begin\n            display_msg(message_str(254, 153));\n          end\n        end\n      end\n      else begin\n        if (is_success(LVar2)) then begin\n          if (is_critical(LVar2)) then begin\n            display_msg(message_str(254, 154));\n          end\n          else begin\n            display_msg(message_str(254, 155));\n          end\n        end\n        else begin\n          if (is_critical(LVar2)) then begin\n            display_msg(message_str(254, 156));\n          end\n          else begin\n            display_msg(message_str(254, 157));\n          end\n        end\n      end\n    end\n    else begin\n      if (is_critical(LVar1)) then begin\n        if (is_success(LVar2)) then begin\n          if (is_critical(LVar2)) then begin\n            display_msg(message_str(254, 158));\n          end\n          else begin\n            display_msg(message_str(254, 159));\n          end\n        end\n        else begin\n          if (is_critical(LVar2)) then begin\n            display_msg(message_str(254, 160));\n          end\n          else begin\n            display_msg(message_str(254, 161));\n          end\n        end\n      end\n      else begin\n        if (is_success(LVar2)) then begin\n          if (is_critical(LVar2)) then begin\n            display_msg(message_str(254, 162));\n          end\n          else begin\n            display_msg(message_str(254, 163));\n          end\n        end\n        else begin\n          if (is_critical(LVar2)) then begin\n            display_msg(message_str(254, 164));\n          end\n          else begin\n            display_msg(message_str(254, 165));\n          end\n        end\n      end\n    end\n  end\nend\n","Look_Traps":"variable LVar0 := 0;\nvariable LVar1 := 0;\nLVar0 := do_check(dude_obj, 1, 0);\nLVar1 := roll_vs_skill(dude_obj, 11, 0);\nif (is_success(LVar0)) then begin\n  if (is_critical(LVar0)) then begin\n    if (is_success(LVar1)) then begin\n      if (is_critical(LVar1)) then begin\n        display_msg(message_str(254, 104));\n      end\n      else begin\n        display_msg(message_str(254, 108));\n      end\n    end\n    else begin\n      if (is_critical(LVar1)) then begin\n        display_msg(message_str(254, 112));\n      end\n      else begin\n        display_msg(message_str(254, 116));\n      end\n    end\n  end\n  else begin\n    if (is_success(LVar1)) then begin\n      if (is_critical(LVar1)) then begin\n        display_msg(message_str(254, 120));\n      end\n      else begin\n        display_msg(message_str(254, 124));\n      end\n    end\n    else begin\n      if (is_critical(LVar1)) then begin\n        display_msg(message_str(254, 128));\n      end\n      else begin\n        display_msg(message_str(254, 132));\n      end\n    end\n  end\nend\nelse begin\n  if (is_critical(LVar0)) then begin\n    if (is_success(LVar1)) then begin\n      if (is_critical(LVar1)) then begin\n        display_msg(message_str(254, 136));\n      end\n      else begin\n        display_msg(message_str(254, 140));\n      end\n    end\n    else begin\n      if (is_critical(LVar1)) then begin\n        display_msg(message_str(254, 144));\n      end\n      else begin\n        display_msg(message_str(254, 148));\n      end\n    end\n  end\n  else begin\n    if (is_success(LVar1)) then begin\n      if (is_critical(LVar1)) then begin\n        display_msg(message_str(254, 152));\n      end\n      else begin\n        display_msg(message_str(254, 156));\n      end\n    end\n    else begin\n      if (is_critical(LVar1)) then begin\n        display_msg(message_str(254, 160));\n      end\n      else begin\n        display_msg(message_str(254, 164));\n      end\n    end\n  end\nend\n","Look_Locks":"variable LVar0 := 0;\nvariable LVar1 := 0;\nLVar0 := do_check(dude_obj, 1, 0);\nLVar1 := roll_vs_skill(dude_obj, 9, 0);\nif (is_success(LVar0)) then begin\n  if (is_critical(LVar0)) then begin\n    if (is_success(LVar1)) then begin\n      if (is_critical(LVar1)) then begin\n        display_msg(message_str(254, 114));\n      end\n      else begin\n        display_msg(message_str(254, 115));\n      end\n    end\n    else begin\n      if (is_critical(LVar1)) then begin\n        display_msg(message_str(254, 116));\n      end\n      else begin\n        display_msg(message_str(254, 117));\n      end\n    end\n  end\n  else begin\n    if (is_success(LVar1)) then begin\n      if (is_critical(LVar1)) then begin\n        display_msg(message_str(254, 130));\n      end\n      else begin\n        display_msg(message_str(254, 131));\n      end\n    end\n    else begin\n      if (is_critical(LVar1)) then begin\n        display_msg(message_str(254, 132));\n      end\n      else begin\n        display_msg(message_str(254, 133));\n      end\n    end\n  end\nend\nelse begin\n  if (is_critical(LVar0)) then begin\n    if (is_success(LVar1)) then begin\n      if (is_critical(LVar1)) then begin\n        display_msg(message_str(254, 146));\n      end\n      else begin\n        display_msg(message_str(254, 147));\n      end\n    end\n    else begin\n      if (is_critical(LVar1)) then begin\n        display_msg(message_str(254, 148));\n      end\n      else begin\n        display_msg(message_str(254, 149));\n      end\n    end\n  end\n  else begin\n    if (is_success(LVar1)) then begin\n      if (is_critical(LVar1)) then begin\n        display_msg(message_str(254, 162));\n      end\n      else begin\n        display_msg(message_str(254, 163));\n      end\n    end\n    else begin\n      if (is_critical(LVar1)) then begin\n        display_msg(message_str(254, 164));\n      end\n      else begin\n        display_msg(message_str(254, 165));\n      end\n    end\n  end\nend\n","Skill_Disarm_Traps":"Traps_Roll := roll_vs_skill(source_obj, 11, 0);\ncall Disarm_Traps;\n","Disarm_Traps":"if (is_success(Traps_Roll)) then begin\n  if (local_var(2) == 0) then begin\n    set_local_var(2, 1);\n    if (source_obj == dude_obj) then begin\n      display_msg(message_str(254, 194));\n    end\n    else begin\n      display_msg(message_str(254, 199));\n    end\n    if (local_var(6) == 0) then begin\n      set_local_var(6, 1);\n      give_exp_points(25);\n      display_msg(message_str(14, 100) + 25 + message_str(14, 101));\n    end\n  end\n  else begin\n    set_local_var(1, 1);\n    if (source_obj == dude_obj) then begin\n      display_msg(message_str(254, 196));\n    end\n    else begin\n      display_msg(obj_name(source_obj) + message_str(254, 201));\n    end\n  end\nend\nelse begin\n  if (is_critical(Traps_Roll)) then begin\n    call Damage_Critter;\n  end\n  else begin\n    if (local_var(2) == 0) then begin\n      if (source_obj == dude_obj) then begin\n        display_msg(message_str(254, 195));\n      end\n      else begin\n        display_msg(obj_name(source_obj) + message_str(254, 200));\n      end\n    end\n    else begin\n      display_msg(obj_name(source_obj) + message_str(254, 202));\n    end\n  end\nend\n","Unlock_Lock":"Locks_Roll := roll_vs_skill(source_obj, 9, -20);\ncall Lockpick_Door;\n","Lockpick_Lock":"Locks_Roll := roll_vs_skill(source_obj, 9, 0);\ncall Lockpick_Door;\n","Lockpick_Door":"if (is_success(Locks_Roll)) then begin\n  set_local_var(0, 1);\n  obj_unlock(self_obj);\n  if (source_obj == dude_obj) then begin\n    display_msg(message_str(254, 170));\n  end\n  else begin\n    display_msg(obj_name(source_obj) + message_str(254, 173));\n  end\n  if (local_var(5) == 0) then begin\n    set_local_var(5, 1);\n    give_exp_points(25);\n    display_msg(message_str(14, 100) + 25 + message_str(14, 101));\n  end\nend\nelse begin\n  if (is_critical(Locks_Roll)) then begin\n    jam_lock(self_obj);\n    if (source_obj == dude_obj) then begin\n      display_msg(message_str(254, 171));\n    end\n    else begin\n      display_msg(obj_name(source_obj) + message_str(254, 174));\n    end\n  end\n  else begin\n    if (source_obj == dude_obj) then begin\n      display_msg(message_str(254, 172));\n    end\n    else begin\n      display_msg(obj_name(source_obj) + message_str(254, 175));\n    end\n  end\nend\n","Lock_Door":"if (is_success(Locks_Roll)) then begin\n  set_local_var(0, 0);\n  obj_lock(self_obj);\n  if (source_obj == dude_obj) then begin\n    display_msg(message_str(254, 189));\n  end\n  else begin\n    display_msg(obj_name(source_obj) + message_str(254, 191));\n  end\n  if (local_var(5) == 0) then begin\n    set_local_var(5, 1);\n    give_exp_points(25);\n    display_msg(message_str(14, 100) + 25 + message_str(14, 101));\n  end\nend\nelse begin\n  if (source_obj == dude_obj) then begin\n    display_msg(message_str(254, 190));\n  end\n  else begin\n    display_msg(obj_name(source_obj) + message_str(254, 192));\n  end\nend\n","Set_Lock":"Locks_Roll := roll_vs_skill(source_obj, 9, -20);\ncall Lock_Door;\n","Set_Lockpick_Lock":"Locks_Roll := roll_vs_skill(source_obj, 9, 0);\ncall Lock_Door;\n","Set_Trap":"variable LVar0 := 0;\nvariable LVar1 := 0;\nTraps_Roll := roll_vs_skill(source_obj, 11, -10);\nLVar0 := obj_being_used_with;\nif (obj_is_open(self_obj)) then begin\n  script_overrides;\n  if (source_obj == dude_obj) then begin\n    display_msg(message_str(254, 206));\n  end\n  else begin\n    display_msg(obj_name(source_obj) + message_str(254, 207));\n  end\nend\nelse begin\n  script_overrides;\n  LVar1 := rm_mult_objs_from_inven(source_obj, LVar0, 1);\n  if (is_success(Traps_Roll)) then begin\n    set_local_var(1, 0);\n    if (source_obj == dude_obj) then begin\n      display_msg(message_str(254, 208));\n    end\n    else begin\n      display_msg(obj_name(source_obj) + message_str(254, 210));\n    end\n  end\n  else begin\n    if (is_critical(Traps_Roll)) then begin\n      call Damage_Critter;\n    end\n    else begin\n      if (source_obj == dude_obj) then begin\n        display_msg(message_str(254, 209));\n      end\n      else begin\n        display_msg(obj_name(source_obj) + message_str(254, 211));\n      end\n    end\n  end\nend\n","Pry_Door":"variable LVar0 := 0;\nLVar0 := do_check(source_obj, 0, 0);\nif (is_success(LVar0)) then begin\n  set_local_var(0, 1);\n  obj_unlock(self_obj);\n  if (source_obj == dude_obj) then begin\n    display_msg(message_str(254, 176));\n  end\n  else begin\n    display_msg(message_str(254, 181));\n  end\nend\nelse begin\n  if (is_critical(LVar0)) then begin\n    critter_dmg(source_obj, 2, 0 bwor 256);\n    if (source_obj == dude_obj) then begin\n      if (2 == 1) then begin\n        display_msg(message_str(254, 177));\n      end\n      else begin\n        display_msg(message_str(254, 178) + 2 + message_str(254, 179));\n      end\n    end\n    else begin\n      if (get_critter_stat(source_obj, 34) == 0) then begin\n        if (2 == 1) then begin\n          display_msg(message_str(254, 182));\n        end\n        else begin\n          display_msg(message_str(254, 183) + 2 + message_str(254, 184));\n        end\n      end\n      else begin\n        if (2 == 1) then begin\n          display_msg(message_str(254, 186));\n        end\n        else begin\n          display_msg(message_str(254, 187) + 2 + message_str(254, 188));\n        end\n      end\n    end\n  end\n  else begin\n    if (source_obj == dude_obj) then begin\n      display_msg(message_str(254, 180));\n    end\n    else begin\n      display_msg(message_str(254, 185));\n    end\n  end\nend\n","Damage_Critter":"variable LVar0 := 0;\nLVar0 := random(10, 20);\nif (source_obj == dude_obj) then begin\n  critter_dmg(dude_obj, LVar0, 6 bwor 256);\n  display_msg(message_str(254, 166) + LVar0 + message_str(254, 167));\nend\nelse begin\n  critter_dmg(source_obj, LVar0, 6 bwor 256);\n  display_msg(obj_name(source_obj) + message_str(254, 168) + LVar0 + message_str(254, 169));\nend\nset_local_var(1, 1);\n"}</script></body><script src="../jquery.js"></script><script src="../underscore.js"></script><script>(function() {
  var downAt, hideCode, nodes, positionCode, showCode;

  $('svg').attr('unselectable', 'on').css({
    '-moz-user-select': '-moz-none',
    '-moz-user-select': 'none',
    '-o-user-select': 'none',
    '-khtml-user-select': 'none',
    '-webkit-user-select': 'none',
    '-ms-user-select': 'none',
    'user-select': 'none'
  }).bind('selectstart', function() {
    return false;
  });

  $('<div/>', {
    id: 'thecode'
  }).appendTo('body');

  $('#thecode').css({
    'pointer-events': 'none',
    background: 'white',
    padding: '1em',
    outline: 'solid gray 1px',
    'white-space': 'pre',
    position: 'fixed',
    left: 0,
    top: 0
  });

  showCode = function(name, code, x, y) {
    $('#thecode').show();
    $('#thecode').text("# " + name + "\n" + code);
    return positionCode(x, y);
  };

  hideCode = function() {
    return $('#thecode').hide();
  };

  positionCode = function(x, y) {
    return $('#thecode').css({
      left: x,
      top: y
    });
  };

  nodes = $('.node');

  _.each(nodes, function(node) {
    var nodeName;
    nodeName = $(node).find('title').text();
    $(node).mousemove(function(e) {
      return showCode(nodeName, Codes[nodeName], e.clientX, e.clientY);
    });
    return $(node).mouseleave(function() {
      return hideCode();
    });
  });

  $('svg title').remove();

  downAt = null;

  $('svg').mousedown(function(e) {
    var x, y;
    x = e.pageX;
    y = e.pageY;
    return downAt = {
      x: x,
      y: y
    };
  });

  $('svg').mousemove(function(e) {
    var delta, x, y;
    if (!downAt) {
      return;
    }
    x = e.pageX;
    y = e.pageY;
    delta = {
      x: x - downAt.x,
      y: y - downAt.y
    };
    window.scrollBy(-delta.x, -delta.y);
    return false;
  });

  $('svg').mouseup(function(e) {
    return downAt = null;
  });

  $('svg').mouseleave(function(e) {
    return downAt = null;
  });

}).call(this);
</script></html>