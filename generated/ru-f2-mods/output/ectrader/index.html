<!DOCTYPE html><html><head><title>ectrader</title><meta charset="utf-8" /></head><body><svg width="1779pt" height="994pt"
 viewBox="0.00 0.00 1779.43 993.87" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 989.87)">
<title>ectrader</title>
<polygon fill="white" stroke="none" points="-4,4 -4,-989.87 1775.43,-989.87 1775.43,4 -4,4"/>
<!-- start -->
<g id="node1" class="node">
<title>start</title>
<ellipse fill="#ffffff" stroke="#000000" cx="360.67" cy="-967.87" rx="27" ry="18"/>
</g>
<!-- critter_p_proc -->
<g id="node2" class="node">
<title>critter_p_proc</title>
<ellipse fill="#ffffff" stroke="#000000" cx="432.67" cy="-967.87" rx="27" ry="18"/>
</g>
<!-- pickup_p_proc -->
<g id="node3" class="node">
<title>pickup_p_proc</title>
<ellipse fill="#ffffff" stroke="#000000" cx="504.67" cy="-967.87" rx="27" ry="18"/>
</g>
<!-- talk_p_proc -->
<g id="node4" class="node">
<title>talk_p_proc</title>
<ellipse fill="#ffffff" stroke="#000000" cx="576.67" cy="-967.87" rx="27" ry="18"/>
</g>
<!-- Node001 -->
<g id="node5" class="node">
<title>Node001</title>
<ellipse fill="#ffffff" stroke="#000000" cx="398.67" cy="-834.03" rx="144.43" ry="78.84"/>
<text text-anchor="middle" x="398.67" y="-872.48" font-family="Times,serif" font-size="14.00">Привет, дружище, меня</text>
<text text-anchor="middle" x="398.67" y="-855.23" font-family="Times,serif" font-size="14.00">зовут Вилли и я хочу</text>
<text text-anchor="middle" x="398.67" y="-837.98" font-family="Times,serif" font-size="14.00">предложить тебе сделку.</text>
<text text-anchor="middle" x="398.67" y="-820.73" font-family="Times,serif" font-size="14.00">[Он, похоже, читает свою</text>
<text text-anchor="middle" x="398.67" y="-803.48" font-family="Times,serif" font-size="14.00">речь по бумажке, и вас</text>
<text text-anchor="middle" x="398.67" y="-786.23" font-family="Times,serif" font-size="14.00">начинает клонить в сон.]</text>
</g>
<!-- talk_p_proc&#45;&gt;Node001 -->
<g id="edge1" class="edge">
<title>talk_p_proc&#45;&gt;Node001</title>
<path fill="none" stroke="#555555" stroke-dasharray="1,5" d="M558.95,-953.74C542.91,-941.87 517.96,-923.39 492.49,-904.51"/>
<polygon fill="#555555" stroke="#555555" points="494.96,-901.25 484.84,-898.11 490.79,-906.87 494.96,-901.25"/>
</g>
<!-- Node007 -->
<g id="node6" class="node">
<title>Node007</title>
<ellipse fill="#ffffff" stroke="#000000" cx="578.67" cy="-574.49" rx="137" ry="42.25"/>
<text text-anchor="middle" x="578.67" y="-587.06" font-family="Times,serif" font-size="14.00">Эй, это же опять ты. У</text>
<text text-anchor="middle" x="578.67" y="-569.81" font-family="Times,serif" font-size="14.00">меня есть новый товар &#45;</text>
<text text-anchor="middle" x="578.67" y="-552.56" font-family="Times,serif" font-size="14.00">тебе нужно что&#45;нибудь?</text>
</g>
<!-- talk_p_proc&#45;&gt;Node007 -->
<g id="edge2" class="edge">
<title>talk_p_proc&#45;&gt;Node007</title>
<path fill="none" stroke="#555555" stroke-dasharray="1,5" d="M576.76,-949.55C577.04,-893.72 577.95,-716.99 578.4,-627.9"/>
<polygon fill="#555555" stroke="#555555" points="581.91,-627.99 578.46,-617.97 574.91,-627.95 581.91,-627.99"/>
</g>
<!-- Node008 -->
<g id="node7" class="node">
<title>Node008</title>
<ellipse fill="#ffffff" stroke="#000000" cx="749.67" cy="-834.03" rx="147.49" ry="18"/>
<text text-anchor="middle" x="749.67" y="-829.35" font-family="Times,serif" font-size="14.00">Проваливай! У меня дела.</text>
</g>
<!-- talk_p_proc&#45;&gt;Node008 -->
<g id="edge3" class="edge">
<title>talk_p_proc&#45;&gt;Node008</title>
<path fill="none" stroke="#555555" stroke-dasharray="1,5" d="M593.89,-953.74C623.01,-931.55 682.35,-886.33 718.8,-858.55"/>
<polygon fill="#555555" stroke="#555555" points="720.26,-861.07 726.1,-852.23 716.02,-855.51 720.26,-861.07"/>
</g>
<!-- Node009 -->
<g id="node8" class="node">
<title>Node009</title>
<ellipse fill="#ffffff" stroke="#000000" cx="1042.67" cy="-834.03" rx="127.49" ry="18"/>
<text text-anchor="middle" x="1042.67" y="-829.35" font-family="Times,serif" font-size="14.00">Деньги не возвращаю.</text>
</g>
<!-- talk_p_proc&#45;&gt;Node009 -->
<g id="edge4" class="edge">
<title>talk_p_proc&#45;&gt;Node009</title>
<path fill="none" stroke="#555555" stroke-dasharray="1,5" d="M597.56,-956.2C603.01,-953.79 608.96,-951.47 614.67,-949.87 740.2,-914.65 781.98,-954.08 905.67,-912.87 943.98,-900.11 983.65,-876.18 1010.38,-858.21"/>
<polygon fill="#555555" stroke="#555555" points="1012,-860.67 1018.28,-852.13 1008.05,-854.89 1012,-860.67"/>
</g>
<!-- Node002a -->
<g id="node20" class="node">
<title>Node002a</title>
<ellipse fill="#ffffff" stroke="#000000" cx="374.67" cy="-683.93" rx="27" ry="18"/>
</g>
<!-- Node001&#45;&gt;Node002a -->
<g id="edge8" class="edge">
<title>Node001&#45;&gt;Node002a</title>
<path fill="none" stroke="#990015" d="M386.04,-755.08C383.59,-739.97 381.18,-725.09 379.21,-712.94"/>
<polygon fill="#990015" stroke="#990015" points="382.53,-712.53 377.47,-703.22 375.62,-713.65 382.53,-712.53"/>
<text text-anchor="middle" x="417.79" y="-723.88" font-family="Times,serif" font-size="14.00" fill="#990015">Хррррр...</text>
</g>
<!-- Node003 -->
<g id="node22" class="node">
<title>Node003</title>
<ellipse fill="#ffffff" stroke="#000000" cx="545.67" cy="-431.54" rx="27" ry="18"/>
<text text-anchor="middle" x="545.67" y="-426.86" font-family="Times,serif" font-size="14.00">.</text>
</g>
<!-- Node007&#45;&gt;Node003 -->
<g id="edge17" class="edge">
<title>Node007&#45;&gt;Node003</title>
<path fill="none" stroke="#007599" d="M557.13,-532.51C552.95,-522.77 549.18,-512.24 546.92,-502.04 543.96,-488.69 543.38,-473.54 543.64,-460.8"/>
<polygon fill="#007599" stroke="#007599" points="547.18,-461.03 544.09,-450.9 540.18,-460.75 547.18,-461.03"/>
<text text-anchor="middle" x="644.04" y="-488.74" font-family="Times,serif" font-size="14.00" fill="#007599">Конечно, послушаю, что у</text>
<text text-anchor="middle" x="644.04" y="-471.49" font-family="Times,serif" font-size="14.00" fill="#007599">тебя есть.</text>
</g>
<!-- Node005 -->
<g id="node25" class="node">
<title>Node005</title>
<ellipse fill="#ffffff" stroke="#000000" cx="614.67" cy="-143.7" rx="124.8" ry="42.25"/>
<text text-anchor="middle" x="614.67" y="-156.27" font-family="Times,serif" font-size="14.00">Черт! Пустая трата</text>
<text text-anchor="middle" x="614.67" y="-139.02" font-family="Times,serif" font-size="14.00">времени. Давай, вали</text>
<text text-anchor="middle" x="614.67" y="-121.77" font-family="Times,serif" font-size="14.00">отсюда!</text>
</g>
<!-- Node007&#45;&gt;Node005 -->
<g id="edge18" class="edge">
<title>Node007&#45;&gt;Node005</title>
<path fill="none" stroke="#999000" d="M692.19,-550.63C720.25,-540.04 747.89,-524.59 767.67,-502.04 799.73,-465.49 787.08,-443.84 792.67,-395.54 800.42,-328.64 806.84,-268.38 767.67,-216.14 755.16,-199.47 737.8,-186.54 719.24,-176.57"/>
<polygon fill="#999000" stroke="#999000" points="720.95,-173.01 710.45,-171.62 717.8,-179.26 720.95,-173.01"/>
<text text-anchor="middle" x="859.92" y="-382.24" font-family="Times,serif" font-size="14.00" fill="#999000">Ни за что, Вилли.</text>
</g>
<!-- Node007&#45;&gt;Node005 -->
<g id="edge20" class="edge">
<title>Node007&#45;&gt;Node005</title>
<path fill="none" stroke="#009937" d="M684.25,-547.3C706.13,-536.85 726.5,-522.29 739.67,-502.04 755.14,-478.25 770.16,-405.98 699.67,-251.39 690.04,-230.28 675.34,-209.7 660.85,-192.34"/>
<polygon fill="#009937" stroke="#009937" points="662.94,-190.4 653.77,-185.09 657.62,-194.96 662.94,-190.4"/>
<text text-anchor="middle" x="767.42" y="-382.24" font-family="Times,serif" font-size="14.00" fill="#009937">Не&#45;а.</text>
</g>
<!-- Node004 -->
<g id="node26" class="node">
<title>Node004</title>
<ellipse fill="#ffffff" stroke="#000000" cx="323.67" cy="-143.7" rx="148.14" ry="54.45"/>
<text text-anchor="middle" x="323.67" y="-164.9" font-family="Times,serif" font-size="14.00">Отлично, вы об этом не</text>
<text text-anchor="middle" x="323.67" y="-147.65" font-family="Times,serif" font-size="14.00">пожалеете. Приятно было</text>
<text text-anchor="middle" x="323.67" y="-130.4" font-family="Times,serif" font-size="14.00">иметь с вами дело. До</text>
<text text-anchor="middle" x="323.67" y="-113.15" font-family="Times,serif" font-size="14.00">свидания.</text>
</g>
<!-- Node007&#45;&gt;Node004 -->
<g id="edge19" class="edge">
<title>Node007&#45;&gt;Node004</title>
<path fill="none" stroke="#640099" d="M495.65,-540.49C475.26,-533.12 453.34,-525.78 432.67,-520.04 392.11,-508.77 367.18,-533.91 339.67,-502.04 303.11,-459.69 310.09,-299.94 317.43,-209.03"/>
<polygon fill="#640099" stroke="#640099" points="320.98,-209.55 318.32,-199.29 314,-208.97 320.98,-209.55"/>
<text text-anchor="middle" x="328.67" y="-382.24" font-family="Times,serif" font-size="14.00" fill="#640099">Угу.</text>
</g>
<!-- destroy_p_proc -->
<g id="node9" class="node">
<title>destroy_p_proc</title>
<ellipse fill="#ffffff" stroke="#000000" cx="650.67" cy="-967.87" rx="27" ry="18"/>
</g>
<!-- look_at_p_proc -->
<g id="node10" class="node">
<title>look_at_p_proc</title>
<ellipse fill="#ffffff" stroke="#000000" cx="806.67" cy="-967.87" rx="61.73" ry="18"/>
<text text-anchor="middle" x="806.67" y="-963.19" font-family="Times,serif" font-size="14.00">Торговец.</text>
</g>
<!-- description_p_proc -->
<g id="node11" class="node">
<title>description_p_proc</title>
<ellipse fill="#ffffff" stroke="#000000" cx="957.67" cy="-967.87" rx="47" ry="18"/>
<text text-anchor="middle" x="957.67" y="-963.19" font-family="Times,serif" font-size="14.00">Вилли.</text>
</g>
<!-- use_skill_on_p_proc -->
<g id="node12" class="node">
<title>use_skill_on_p_proc</title>
<ellipse fill="#ffffff" stroke="#000000" cx="1061.67" cy="-967.87" rx="27" ry="18"/>
</g>
<!-- damage_p_proc -->
<g id="node13" class="node">
<title>damage_p_proc</title>
<ellipse fill="#ffffff" stroke="#000000" cx="1139.67" cy="-967.87" rx="27" ry="18"/>
</g>
<!-- map_enter_p_proc -->
<g id="node14" class="node">
<title>map_enter_p_proc</title>
<ellipse fill="#ffffff" stroke="#000000" cx="1214.67" cy="-967.87" rx="27" ry="18"/>
</g>
<!-- ChooseItem -->
<g id="node15" class="node">
<title>ChooseItem</title>
<ellipse fill="#ffffff" stroke="#000000" cx="1214.67" cy="-834.03" rx="27" ry="18"/>
</g>
<!-- map_enter_p_proc&#45;&gt;ChooseItem -->
<g id="edge5" class="edge">
<title>map_enter_p_proc&#45;&gt;ChooseItem</title>
<path fill="none" stroke="#555555" stroke-dasharray="1,5" d="M1214.67,-949.63C1214.67,-927.62 1214.67,-889.25 1214.67,-863.02"/>
<polygon fill="#555555" stroke="#555555" points="1218.17,-863.27 1214.67,-853.27 1211.17,-863.27 1218.17,-863.27"/>
</g>
<!-- combat_p_proc -->
<g id="node16" class="node">
<title>combat_p_proc</title>
<ellipse fill="#ffffff" stroke="#000000" cx="1516.67" cy="-967.87" rx="27" ry="18"/>
</g>
<!-- NodeFleeing -->
<g id="node17" class="node">
<title>NodeFleeing</title>
<ellipse fill="#ffffff" stroke="#000000" cx="1383.67" cy="-834.03" rx="124.34" ry="18"/>
<text text-anchor="middle" x="1383.67" y="-829.35" font-family="Times,serif" font-size="14.00">Ладно, я снижу цены.</text>
</g>
<!-- combat_p_proc&#45;&gt;NodeFleeing -->
<g id="edge6" class="edge">
<title>combat_p_proc&#45;&gt;NodeFleeing</title>
<path fill="none" stroke="#555555" stroke-dasharray="1,5" d="M1501.93,-952.25C1479.4,-929.92 1436.13,-887.03 1408.64,-859.78"/>
<polygon fill="#555555" stroke="#555555" points="1411.56,-857.75 1401.99,-853.2 1406.63,-862.73 1411.56,-857.75"/>
</g>
<!-- NodeFighting -->
<g id="node18" class="node">
<title>NodeFighting</title>
<ellipse fill="#ffffff" stroke="#000000" cx="1648.67" cy="-834.03" rx="122.76" ry="18"/>
<text text-anchor="middle" x="1648.67" y="-829.35" font-family="Times,serif" font-size="14.00">Не самый умный ход.</text>
</g>
<!-- combat_p_proc&#45;&gt;NodeFighting -->
<g id="edge7" class="edge">
<title>combat_p_proc&#45;&gt;NodeFighting</title>
<path fill="none" stroke="#555555" stroke-dasharray="1,5" d="M1531.3,-952.25C1553.66,-929.92 1596.61,-887.03 1623.89,-859.78"/>
<polygon fill="#555555" stroke="#555555" points="1625.87,-862.74 1630.47,-853.2 1620.93,-857.79 1625.87,-862.74"/>
</g>
<!-- timed_event_p_proc -->
<g id="node19" class="node">
<title>timed_event_p_proc</title>
<ellipse fill="#ffffff" stroke="#000000" cx="1588.67" cy="-967.87" rx="27" ry="18"/>
</g>
<!-- Node002 -->
<g id="node21" class="node">
<title>Node002</title>
<ellipse fill="#ffffff" stroke="#000000" cx="278.67" cy="-574.49" rx="144.96" ry="54.45"/>
<text text-anchor="middle" x="278.67" y="-595.69" font-family="Times,serif" font-size="14.00">[Вы просыпаетесь оттого,</text>
<text text-anchor="middle" x="278.67" y="-578.44" font-family="Times,serif" font-size="14.00">что вас кто&#45;то пихает в</text>
<text text-anchor="middle" x="278.67" y="-561.19" font-family="Times,serif" font-size="14.00">бок.] Ну как, ты</text>
<text text-anchor="middle" x="278.67" y="-543.94" font-family="Times,serif" font-size="14.00">заинтересован или нет?</text>
</g>
<!-- Node002a&#45;&gt;Node002 -->
<g id="edge21" class="edge">
<title>Node002a&#45;&gt;Node002</title>
<path fill="none" stroke="#555555" stroke-dasharray="1,5" d="M361.32,-667.99C353.21,-658.92 342.28,-646.69 331.03,-634.09"/>
<polygon fill="#555555" stroke="#555555" points="334.28,-632.36 325.01,-627.23 329.06,-637.02 334.28,-632.36"/>
</g>
<!-- Node002&#45;&gt;Node003 -->
<g id="edge9" class="edge">
<title>Node002&#45;&gt;Node003</title>
<path fill="none" stroke="#004299" d="M315.2,-521.54C331.65,-501.78 352.68,-480.84 376.17,-467.54 417.28,-444.26 471.83,-436.37 507.81,-433.75"/>
<polygon fill="#004299" stroke="#004299" points="507.58,-437.21 517.34,-433.1 507.14,-430.22 507.58,-437.21"/>
<text text-anchor="middle" x="458.42" y="-480.11" font-family="Times,serif" font-size="14.00" fill="#004299">В чем заинтересован?</text>
</g>
<!-- Node006 -->
<g id="node23" class="node">
<title>Node006</title>
<ellipse fill="#ffffff" stroke="#000000" cx="148.67" cy="-305.84" rx="148.67" ry="54.45"/>
<text text-anchor="middle" x="148.67" y="-327.04" font-family="Times,serif" font-size="14.00">Что ж, зря выкладывался.</text>
<text text-anchor="middle" x="148.67" y="-309.79" font-family="Times,serif" font-size="14.00">$</text>
<text text-anchor="middle" x="148.67" y="-292.54" font-family="Times,serif" font-size="14.00">&#45;&#45;&#45;</text>
<text text-anchor="middle" x="148.67" y="-275.29" font-family="Times,serif" font-size="14.00">. Так берете или нет?</text>
</g>
<!-- Node002&#45;&gt;Node006 -->
<g id="edge10" class="edge">
<title>Node002&#45;&gt;Node006</title>
<path fill="none" stroke="#6e9900" d="M252.83,-520.49C231.65,-477.05 201.63,-415.47 179.25,-369.58"/>
<polygon fill="#6e9900" stroke="#6e9900" points="181.99,-368.2 174.46,-360.74 175.7,-371.26 181.99,-368.2"/>
<text text-anchor="middle" x="235.17" y="-426.86" font-family="Times,serif" font-size="14.00" fill="#6e9900">Ась?</text>
</g>
<!-- Node0405a -->
<g id="node24" class="node">
<title>Node0405a</title>
<ellipse fill="#ffffff" stroke="#000000" cx="545.67" cy="-305.84" rx="27" ry="18"/>
</g>
<!-- Node003&#45;&gt;Node0405a -->
<g id="edge11" class="edge">
<title>Node003&#45;&gt;Node0405a</title>
<path fill="none" stroke="#970099" d="M545.67,-413.08C545.67,-392.82 545.67,-359.13 545.67,-335.12"/>
<polygon fill="#970099" stroke="#970099" points="549.17,-335.21 545.67,-325.21 542.17,-335.21 549.17,-335.21"/>
<text text-anchor="middle" x="565.92" y="-382.24" font-family="Times,serif" font-size="14.00" fill="#970099">Беру.</text>
</g>
<!-- Node003&#45;&gt;Node005 -->
<g id="edge12" class="edge">
<title>Node003&#45;&gt;Node005</title>
<path fill="none" stroke="#00996a" d="M565.89,-419.5C574.71,-413.6 584.25,-405.48 589.67,-395.54 623.4,-333.66 624.59,-250.36 620.83,-197.09"/>
<polygon fill="#00996a" stroke="#00996a" points="624.24,-196.88 619.96,-187.19 617.26,-197.44 624.24,-196.88"/>
<text text-anchor="middle" x="659.04" y="-301.17" font-family="Times,serif" font-size="14.00" fill="#00996a">Обойдусь.</text>
</g>
<!-- Node006&#45;&gt;Node005 -->
<g id="edge16" class="edge">
<title>Node006&#45;&gt;Node005</title>
<path fill="none" stroke="#990048" d="M262.26,-270.45C326.69,-250.42 408.6,-224.06 480.67,-198.14 495.56,-192.79 511.25,-186.82 526.46,-180.88"/>
<polygon fill="#990048" stroke="#990048" points="527.34,-183.9 535.36,-176.97 524.78,-177.38 527.34,-183.9"/>
<text text-anchor="middle" x="446.42" y="-220.09" font-family="Times,serif" font-size="14.00" fill="#990048">Не&#45;а.</text>
</g>
<!-- Node006&#45;&gt;Node004 -->
<g id="edge15" class="edge">
<title>Node006&#45;&gt;Node004</title>
<path fill="none" stroke="#1c9900" d="M175.01,-252C182.82,-239.36 192.15,-226.53 202.67,-216.14 210.5,-208.42 219.33,-201.2 228.55,-194.54"/>
<polygon fill="#1c9900" stroke="#1c9900" points="230.28,-196.91 236.5,-188.34 226.29,-191.16 230.28,-196.91"/>
<text text-anchor="middle" x="217.67" y="-220.09" font-family="Times,serif" font-size="14.00" fill="#1c9900">Угу.</text>
</g>
<!-- Node0405a&#45;&gt;Node005 -->
<g id="edge23" class="edge">
<title>Node0405a&#45;&gt;Node005</title>
<path fill="none" stroke="#555555" stroke-dasharray="1,5" d="M552.92,-288.01C562.26,-266.34 578.9,-227.71 592.56,-196.02"/>
<polygon fill="#555555" stroke="#555555" points="596.13,-197.57 596.87,-187 589.7,-194.8 596.13,-197.57"/>
</g>
<!-- Node0405a&#45;&gt;Node004 -->
<g id="edge22" class="edge">
<title>Node0405a&#45;&gt;Node004</title>
<path fill="none" stroke="#555555" stroke-dasharray="1,5" d="M527.88,-292.01C500.14,-272 444.98,-232.21 398.98,-199.02"/>
<polygon fill="#555555" stroke="#555555" points="401.37,-195.71 391.21,-192.7 397.27,-201.39 401.37,-195.71"/>
</g>
<!-- Node999 -->
<g id="node27" class="node">
<title>Node999</title>
<ellipse fill="#ffffff" stroke="#000000" cx="468.67" cy="-18" rx="27" ry="18"/>
</g>
<!-- Node005&#45;&gt;Node999 -->
<g id="edge14" class="edge">
<title>Node005&#45;&gt;Node999</title>
<path fill="none" stroke="#110099" d="M569.27,-104.24C544.08,-82.89 513.74,-57.18 493.01,-39.62"/>
<polygon fill="#110099" stroke="#110099" points="495.65,-36.42 485.76,-32.63 491.12,-41.76 495.65,-36.42"/>
<text text-anchor="middle" x="562.04" y="-57.95" font-family="Times,serif" font-size="14.00" fill="#110099">[КОНЕЦ]</text>
</g>
<!-- Node004&#45;&gt;Node999 -->
<g id="edge13" class="edge">
<title>Node004&#45;&gt;Node999</title>
<path fill="none" stroke="#993e00" d="M381.39,-93.45C403.32,-74.75 427.13,-54.44 444.33,-39.76"/>
<polygon fill="#993e00" stroke="#993e00" points="446.34,-41.8 451.68,-32.64 441.8,-36.47 446.34,-41.8"/>
<text text-anchor="middle" x="460.04" y="-57.95" font-family="Times,serif" font-size="14.00" fill="#993e00">[КОНЕЦ]</text>
</g>
</g>
</svg>
<script>window.Codes = {"start":"[]","critter_p_proc":"if ((local_var(5) == 2) and obj_can_see_obj(self_obj, dude_obj)) then begin\n  set_local_var(5, 1);\n  attack_complex(dude_obj, 0, 1, 0, 0, 30000, 0, 0);\nend\nif (local_var(8) == 1) then begin\n  if (obj_on_screen(self_obj)) then begin\n    if (not(anim_busy(self_obj))) then begin\n      reg_anim_func(2, self_obj);\n      reg_anim_func(1, 1);\n      animate_move_obj_to_tile(self_obj, tile_num_in_direction(tile_num(self_obj), rotation_to_tile(tile_num(dude_obj), tile_num(self_obj)), 6), 0);\n      reg_anim_func(3, 0);\n    end\n  end\n  else begin\n    add_timer_event(self_obj, 0, 1);\n  end\nend\n","pickup_p_proc":"if (source_obj == dude_obj) then begin\n  set_local_var(5, 2);\nend\n","talk_p_proc":"if (local_var(9) == 0) then begin\n  if (global_var(360) == 0) then begin\n    start_gdialog(741, self_obj, 4, 4294967295, 4294967295);\n    gsay_start;\n    call Node001;\n    gsay_end;\n    end_dialogue;\n  end\n  else begin\n    start_gdialog(741, self_obj, 4, 4294967295, 4294967295);\n    gsay_start;\n    call Node007;\n    gsay_end;\n    end_dialogue;\n  end\n  set_global_var(360, global_var(360) + 1);\nend\nelse begin\n  if (local_var(9) == 2) then begin\n    call Node008;\n  end\n  else begin\n    if (local_var(9) == 1) then begin\n      call Node009;\n    end\n  end\nend\n","destroy_p_proc":"if (source_obj == dude_obj) then begin\n  set_global_var(5, global_var(5) + 1);\n  if (metarule(51, self_obj) == 2) then begin\n    if (source_obj == dude_obj) then begin\n      set_global_var(2, 0);\n      set_global_var(1, global_var(1) + 1);\n      set_global_var(0, global_var(0) + 4294967281);\n      debug_msg(\"ectrader\" + \": \" + \"Player gains \" + 4294967281 + \" Karma Points.\" + \"\\n\");\n      set_global_var(37, 0);\n      set_global_var(38, 0);\n      set_global_var(39, 0);\n      set_global_var(40, 0);\n      set_global_var(41, 0);\n      set_global_var(42, 0);\n      set_global_var(43, 0);\n      set_global_var(44, 0);\n      set_global_var(45, 0);\n      tmp_gen_rep := global_var(0);\n      if (has_trait(0, dude_obj, 95)) then begin\n        tmp_gen_rep := global_var(0) * 2;\n      end\n      if (tmp_gen_rep >= 1000) then begin\n        set_global_var(37, 1);\n      end\n      else begin\n        if (tmp_gen_rep >= 750) then begin\n          set_global_var(38, 1);\n        end\n        else begin\n          if (tmp_gen_rep >= 500) then begin\n            set_global_var(39, 1);\n          end\n          else begin\n            if (tmp_gen_rep >= 250) then begin\n              set_global_var(40, 1);\n            end\n            else begin\n              if (tmp_gen_rep > 4294967046) then begin\n                set_global_var(41, 1);\n              end\n              else begin\n                if (tmp_gen_rep > 4294966796) then begin\n                  set_global_var(42, 1);\n                end\n                else begin\n                  if (tmp_gen_rep > 4294966546) then begin\n                    set_global_var(43, 1);\n                  end\n                  else begin\n                    if (tmp_gen_rep > 4294966296) then begin\n                      set_global_var(44, 1);\n                    end\n                    else begin\n                      set_global_var(45, 1);\n                    end\n                  end\n                end\n              end\n            end\n          end\n        end\n      end\n    end\n  end\n  if (((global_var(4) + global_var(5)) >= 25) and ((global_var(4) > (3 * global_var(5))) or (global_var(2) == 1)) and (global_var(1) == 0)) then begin\n    set_global_var(2, 1);\n    set_global_var(3, 0);\n  end\n  if (((global_var(4) + global_var(5)) >= 25) and ((global_var(5) > (2 * global_var(4))) or (global_var(3) == 1))) then begin\n    set_global_var(3, 1);\n    set_global_var(2, 0);\n  end\n  set_global_var(0, global_var(0) + 4294967286);\n  debug_msg(\"ectrader\" + \": \" + \"Player gains \" + 4294967286 + \" Karma Points.\" + \"\\n\");\n  set_global_var(37, 0);\n  set_global_var(38, 0);\n  set_global_var(39, 0);\n  set_global_var(40, 0);\n  set_global_var(41, 0);\n  set_global_var(42, 0);\n  set_global_var(43, 0);\n  set_global_var(44, 0);\n  set_global_var(45, 0);\n  tmp_gen_rep := global_var(0);\n  if (has_trait(0, dude_obj, 95)) then begin\n    tmp_gen_rep := global_var(0) * 2;\n  end\n  if (tmp_gen_rep >= 1000) then begin\n    set_global_var(37, 1);\n  end\n  else begin\n    if (tmp_gen_rep >= 750) then begin\n      set_global_var(38, 1);\n    end\n    else begin\n      if (tmp_gen_rep >= 500) then begin\n        set_global_var(39, 1);\n      end\n      else begin\n        if (tmp_gen_rep >= 250) then begin\n          set_global_var(40, 1);\n        end\n        else begin\n          if (tmp_gen_rep > 4294967046) then begin\n            set_global_var(41, 1);\n          end\n          else begin\n            if (tmp_gen_rep > 4294966796) then begin\n              set_global_var(42, 1);\n            end\n            else begin\n              if (tmp_gen_rep > 4294966546) then begin\n                set_global_var(43, 1);\n              end\n              else begin\n                if (tmp_gen_rep > 4294966296) then begin\n                  set_global_var(44, 1);\n                end\n                else begin\n                  set_global_var(45, 1);\n                end\n              end\n            end\n          end\n        end\n      end\n    end\n  end\nend\nset_global_var(359, random(143, 151));\nset_global_var(360, 0);\n","look_at_p_proc":"script_overrides;\ndisplay_msg(message_str(741, 100));\n","description_p_proc":"script_overrides;\nif (local_var(4) == 0) then begin\n  display_msg(message_str(741, 101));\nend\nelse begin\n  display_msg(message_str(741, global_var(359)));\nend\n","use_skill_on_p_proc":"[]","damage_p_proc":"if (source_obj == dude_obj) then begin\n  set_local_var(6, 1);\nend\n","map_enter_p_proc":"critter_add_trait(self_obj, 1, 6, 164);\ncritter_add_trait(self_obj, 1, 5, 12);\nif (not(metarule(22, 0))) then begin\n  call ChooseItem;\n  if ((game_time < 0) and (local_var(13) == 0)) then begin\n    set_local_var(7, game_time - 1);\n    set_local_var(13, 1);\n  end\n  if (local_var(7) < game_time) then begin\n    restock_amt := random(1, 5);\n    if (obj_is_carrying_obj_pid(self_obj, local_var(10)) < restock_amt) then begin\n      if (100 >= random(1, 100)) then begin\n        if (obj_is_carrying_obj_pid(self_obj, local_var(10)) < restock_amt) then begin\n          restock_obj := create_object_sid(local_var(10), 0, 0, 4294967295);\n          add_mult_objs_to_inven(self_obj, restock_obj, restock_amt - obj_is_carrying_obj_pid(self_obj, local_var(10)));\n        end\n        else begin\n          if (obj_is_carrying_obj_pid(self_obj, local_var(10)) > restock_amt) then begin\n            removed_qty := obj_is_carrying_obj_pid(self_obj, local_var(10));\n            if ((obj_is_carrying_obj_pid(self_obj, local_var(10)) - restock_amt) < removed_qty) then begin\n              removed_qty := obj_is_carrying_obj_pid(self_obj, local_var(10)) - restock_amt;\n            end\n            if (removed_qty > 0) then begin\n              restock_obj := obj_carrying_pid_obj(self_obj, local_var(10));\n              if (obj_type(self_obj) == 1) then begin\n                restock_obj := obj_carrying_pid_obj(self_obj, local_var(10));\n                if (critter_inven_obj(self_obj, 0) == restock_obj) then begin\n                  if (obj_item_subtype(critter_inven_obj(self_obj, 0)) == 0) then begin\n                    restock_obj := critter_inven_obj(self_obj, 0);\n                    debug_msg(\"ectrader\" + \": \" + \"armour pid == \" + obj_pid(restock_obj) + \"\\n\");\n                    rm_obj_from_inven(self_obj, restock_obj);\n                    add_obj_to_inven(self_obj, restock_obj);\n                  end\n                end\n                else begin\n                  if ((critter_inven_obj(self_obj, 2) == restock_obj) or (critter_inven_obj(self_obj, 1) == restock_obj)) then begin\n                    metarule(43, self_obj);\n                  end\n                end\n              end\n              restock_amt := rm_mult_objs_from_inven(self_obj, restock_obj, removed_qty);\n              destroy_object(restock_obj);\n            end\n            restock_obj := 0;\n            restock_amt := 0;\n          end\n          else begin\n            restock_obj := 0;\n          end\n        end\n      end\n    end\n    else begin\n      if (obj_is_carrying_obj_pid(self_obj, local_var(10)) < restock_amt) then begin\n        restock_obj := create_object_sid(local_var(10), 0, 0, 4294967295);\n        add_mult_objs_to_inven(self_obj, restock_obj, restock_amt - obj_is_carrying_obj_pid(self_obj, local_var(10)));\n      end\n      else begin\n        if (obj_is_carrying_obj_pid(self_obj, local_var(10)) > restock_amt) then begin\n          removed_qty := obj_is_carrying_obj_pid(self_obj, local_var(10));\n          if ((obj_is_carrying_obj_pid(self_obj, local_var(10)) - restock_amt) < removed_qty) then begin\n            removed_qty := obj_is_carrying_obj_pid(self_obj, local_var(10)) - restock_amt;\n          end\n          if (removed_qty > 0) then begin\n            restock_obj := obj_carrying_pid_obj(self_obj, local_var(10));\n            if (obj_type(self_obj) == 1) then begin\n              restock_obj := obj_carrying_pid_obj(self_obj, local_var(10));\n              if (critter_inven_obj(self_obj, 0) == restock_obj) then begin\n                if (obj_item_subtype(critter_inven_obj(self_obj, 0)) == 0) then begin\n                  restock_obj := critter_inven_obj(self_obj, 0);\n                  debug_msg(\"ectrader\" + \": \" + \"armour pid == \" + obj_pid(restock_obj) + \"\\n\");\n                  rm_obj_from_inven(self_obj, restock_obj);\n                  add_obj_to_inven(self_obj, restock_obj);\n                end\n              end\n              else begin\n                if ((critter_inven_obj(self_obj, 2) == restock_obj) or (critter_inven_obj(self_obj, 1) == restock_obj)) then begin\n                  metarule(43, self_obj);\n                end\n              end\n            end\n            restock_amt := rm_mult_objs_from_inven(self_obj, restock_obj, removed_qty);\n            destroy_object(restock_obj);\n          end\n          restock_obj := 0;\n          restock_amt := 0;\n        end\n        else begin\n          restock_obj := 0;\n        end\n      end\n    end\n    set_local_var(7, (random(6, 12) * 864000) + game_time);\n  end\nend\nif (global_var(359) == 0) then begin\n  set_global_var(359, random(143, 151));\nend\n","combat_p_proc":"if (critter_is_fleeing(self_obj)) then begin\n  if (random(1, 100) <= 20) then begin\n    call NodeFleeing;\n  end\nend\nelse begin\n  if (random(1, 100) <= 20) then begin\n    call NodeFighting;\n  end\nend\n","timed_event_p_proc":"if (fixed_param == 1) then begin\n  destroy_object(self_obj);\nend\n","NodeFleeing":"float_msg(self_obj, message_str(741, 138 + nodeFCount), 8);\nnodeFCount := nodeFCount + 1;\nif (nodeFCount > 4) then begin\n  nodeFCount := 4;\nend\n","NodeFighting":"float_msg(self_obj, message_str(741, 135 + random(0, 2)), 2);\n","Node001":"gsay_reply(741, 103);\ngiq_option(1, 741, 104, Node002a, 50);\n","Node002":"gsay_reply(741, 105);\ngiq_option(4, 741, 106, Node003, 50);\ngiq_option(4294967293, 741, 107, Node006, 50);\n","Node003":"variable LVar0 := 0;\nif (local_var(11) == 1) then begin\n  LVar0 := 108;\nend\nelse begin\n  if (local_var(11) == 3) then begin\n    LVar0 := 109;\n  end\n  else begin\n    if (local_var(11) == 2) then begin\n      LVar0 := 110;\n    end\n    else begin\n      if (local_var(11) == 6) then begin\n        LVar0 := 111;\n      end\n      else begin\n        if (local_var(11) == 5) then begin\n          LVar0 := 112;\n        end\n        else begin\n          if (local_var(11) == 4) then begin\n            LVar0 := 113;\n          end\n        end\n      end\n    end\n  end\nend\ngsay_reply(741, message_str(741, LVar0) + local_var(12) + message_str(741, 200));\ngiq_option(4, 741, 114, Node0405a, 50);\ngiq_option(4, 741, 115, Node005, 50);\n","Node004":"variable LVar0 := 0;\nset_local_var(9, 1);\nset_local_var(8, 1);\nLVar0 := obj_carrying_pid_obj(self_obj, local_var(10));\nif (LVar0) then begin\n  item_caps_adjust(dude_obj, -local_var(12));\n  rm_obj_from_inven(self_obj, LVar0);\n  add_obj_to_inven(dude_obj, LVar0);\nend\ngsay_reply(741, 116);\ngiq_option(1, 741, 117, Node999, 50);\n","Node005":"set_local_var(9, 2);\nset_local_var(8, 1);\ngsay_reply(741, 118);\ngiq_option(1, 741, 119, Node999, 50);\n","Node006":"gsay_reply(741, message_str(741, 120) + local_var(12) + message_str(741, 152));\ngiq_option(4294967293, 741, 121, Node004, 50);\ngiq_option(4294967293, 741, 122, Node005, 50);\n","Node007":"gsay_reply(741, 123);\ngiq_option(4, 741, 124, Node003, 50);\ngiq_option(4, 741, 125, Node005, 50);\ngiq_option(4294967293, 741, 126, Node004, 50);\ngiq_option(4294967293, 741, 127, Node005, 50);\n","Node008":"float_msg(self_obj, message_str(741, 128 + random(0, 2)), 0);\n","Node009":"float_msg(self_obj, message_str(741, 131 + random(0, 3)), 0);\n","ChooseItem":"variable LVar0 := 0;\nvariable LVar1 := 0;\nLVar1 := 11 - get_critter_stat(dude_obj, 6);\nwhile(local_var(10) == 0) do begin\n  LVar0 := random(1, 25);\n  if (LVar0 == 1) then begin\n    if ((get_pc_stat(1) >= 1) and (get_pc_stat(1) <= 3)) then begin\n      set_local_var(10, 4);\n      set_local_var(11, 1);\n      set_local_var(12, 40 * LVar1);\n    end\n  end\n  else begin\n    if (LVar0 == 2) then begin\n      if ((get_pc_stat(1) >= 3) and (get_pc_stat(1) <= 5)) then begin\n        set_local_var(10, 236);\n        set_local_var(11, 1);\n        set_local_var(12, 165 * LVar1);\n      end\n    end\n    else begin\n      if (LVar0 == 3) then begin\n        if ((get_pc_stat(1) >= 1) and (get_pc_stat(1) <= 5)) then begin\n          set_local_var(10, 45);\n          set_local_var(11, 1);\n          set_local_var(12, 100 * LVar1);\n        end\n      end\n      else begin\n        if (LVar0 == 4) then begin\n          if ((get_pc_stat(1) >= 8) and (get_pc_stat(1) <= 1000)) then begin\n            set_local_var(10, 116);\n            set_local_var(11, 1);\n            set_local_var(12, 900 * LVar1);\n          end\n        end\n        else begin\n          if (LVar0 == 5) then begin\n            if ((get_pc_stat(1) >= 1) and (get_pc_stat(1) <= 5)) then begin\n              set_local_var(10, 8);\n              set_local_var(11, 2);\n              set_local_var(12, 250 * LVar1);\n            end\n          end\n          else begin\n            if (LVar0 == 6) then begin\n              if ((get_pc_stat(1) >= 3) and (get_pc_stat(1) <= 5)) then begin\n                set_local_var(10, 18);\n                set_local_var(11, 2);\n                set_local_var(12, 800 * LVar1);\n              end\n            end\n            else begin\n              if (LVar0 == 7) then begin\n                if ((get_pc_stat(1) >= 6) and (get_pc_stat(1) <= 10)) then begin\n                  set_local_var(10, 9);\n                  set_local_var(11, 2);\n                  set_local_var(12, 1000 * LVar1);\n                end\n              end\n              else begin\n                if (LVar0 == 8) then begin\n                  if ((get_pc_stat(1) >= 6) and (get_pc_stat(1) <= 1000)) then begin\n                    set_local_var(10, 22);\n                    set_local_var(11, 2);\n                    set_local_var(12, 1100 * LVar1);\n                  end\n                end\n                else begin\n                  if (LVar0 == 9) then begin\n                    if ((get_pc_stat(1) >= 1) and (get_pc_stat(1) <= 3)) then begin\n                      set_local_var(10, 19);\n                      set_local_var(11, 3);\n                      set_local_var(12, 1 * LVar1);\n                    end\n                  end\n                  else begin\n                    if (LVar0 == 10) then begin\n                      if ((get_pc_stat(1) >= 1) and (get_pc_stat(1) <= 3)) then begin\n                        set_local_var(10, 7);\n                        set_local_var(11, 3);\n                        set_local_var(12, 80 * LVar1);\n                      end\n                    end\n                    else begin\n                      if (LVar0 == 11) then begin\n                        if ((get_pc_stat(1) >= 1) and (get_pc_stat(1) <= 10)) then begin\n                          set_local_var(10, 320);\n                          set_local_var(11, 3);\n                          set_local_var(12, 4 * LVar1);\n                        end\n                      end\n                      else begin\n                        if (LVar0 == 12) then begin\n                          if ((get_pc_stat(1) >= 1) and (get_pc_stat(1) <= 1000)) then begin\n                            set_local_var(10, 280);\n                            set_local_var(11, 3);\n                            set_local_var(12, 100 * LVar1);\n                          end\n                        end\n                        else begin\n                          if (LVar0 == 13) then begin\n                            if ((get_pc_stat(1) >= 6) and (get_pc_stat(1) <= 1000)) then begin\n                              set_local_var(10, 160);\n                              set_local_var(11, 4);\n                              set_local_var(12, 600 * LVar1);\n                            end\n                          end\n                          else begin\n                            if (LVar0 == 14) then begin\n                              if ((get_pc_stat(1) >= 1) and (get_pc_stat(1) <= 5)) then begin\n                                set_local_var(10, 20);\n                                set_local_var(11, 4);\n                                set_local_var(12, 65 * LVar1);\n                              end\n                            end\n                            else begin\n                              if (LVar0 == 15) then begin\n                                if ((get_pc_stat(1) >= 1) and (get_pc_stat(1) <= 5)) then begin\n                                  set_local_var(10, 5);\n                                  set_local_var(11, 4);\n                                  set_local_var(12, 30 * LVar1);\n                                end\n                              end\n                              else begin\n                                if (LVar0 == 16) then begin\n                                  if ((get_pc_stat(1) >= 1) and (get_pc_stat(1) <= 1000)) then begin\n                                    set_local_var(10, 234);\n                                    set_local_var(11, 4);\n                                    set_local_var(12, 250 * LVar1);\n                                  end\n                                end\n                                else begin\n                                  if (LVar0 == 17) then begin\n                                    if ((get_pc_stat(1) >= 1) and (get_pc_stat(1) <= 5)) then begin\n                                      set_local_var(10, 21);\n                                      set_local_var(11, 4);\n                                      set_local_var(12, 40 * LVar1);\n                                    end\n                                  end\n                                  else begin\n                                    if (LVar0 == 18) then begin\n                                      if ((get_pc_stat(1) >= 10) and (get_pc_stat(1) <= 1000)) then begin\n                                        set_local_var(10, 235);\n                                        set_local_var(11, 4);\n                                        set_local_var(12, 2200 * LVar1);\n                                      end\n                                    end\n                                    else begin\n                                      if (LVar0 == 19) then begin\n                                        if ((get_pc_stat(1) >= 3) and (get_pc_stat(1) <= 5)) then begin\n                                          set_local_var(10, 94);\n                                          set_local_var(11, 5);\n                                          set_local_var(12, 800 * LVar1);\n                                        end\n                                      end\n                                      else begin\n                                        if (LVar0 == 20) then begin\n                                          if ((get_pc_stat(1) >= 3) and (get_pc_stat(1) <= 5)) then begin\n                                            set_local_var(10, 10);\n                                            set_local_var(11, 5);\n                                            set_local_var(12, 1000 * LVar1);\n                                          end\n                                        end\n                                        else begin\n                                          if (LVar0 == 21) then begin\n                                            if ((get_pc_stat(1) >= 11) and (get_pc_stat(1) <= 15)) then begin\n                                              set_local_var(10, 23);\n                                              set_local_var(11, 5);\n                                              set_local_var(12, 1300 * LVar1);\n                                            end\n                                          end\n                                          else begin\n                                            if (LVar0 == 22) then begin\n                                              if ((get_pc_stat(1) >= 15) and (get_pc_stat(1) <= 20)) then begin\n                                                set_local_var(10, 12);\n                                                set_local_var(11, 5);\n                                                set_local_var(12, 3800 * LVar1);\n                                              end\n                                            end\n                                            else begin\n                                              if (LVar0 == 23) then begin\n                                                if ((get_pc_stat(1) >= 1) and (get_pc_stat(1) <= 5)) then begin\n                                                  set_local_var(10, 161);\n                                                  set_local_var(11, 5);\n                                                  set_local_var(12, 200 * LVar1);\n                                                end\n                                              end\n                                              else begin\n                                                if (LVar0 == 24) then begin\n                                                  if ((get_pc_stat(1) >= 11) and (get_pc_stat(1) <= 15)) then begin\n                                                    set_local_var(10, 143);\n                                                    set_local_var(11, 5);\n                                                    set_local_var(12, 2200 * LVar1);\n                                                  end\n                                                end\n                                                else begin\n                                                  if (LVar0 == 25) then begin\n                                                    if (is_success(do_check(dude_obj, 6, 0))) then begin\n                                                      if ((get_pc_stat(1) >= 13) and (get_pc_stat(1) <= 1000)) then begin\n                                                        set_local_var(10, 120);\n                                                        set_local_var(11, 6);\n                                                        set_local_var(12, 10000 * LVar1);\n                                                      end\n                                                    end\n                                                  end\n                                                end\n                                              end\n                                            end\n                                          end\n                                        end\n                                      end\n                                    end\n                                  end\n                                end\n                              end\n                            end\n                          end\n                        end\n                      end\n                    end\n                  end\n                end\n              end\n            end\n          end\n        end\n      end\n    end\n  end\nend\n","Node999":"[]","Node002a":"gfade_out(1);\ngame_time_advance(108000);\ngfade_in(1);\ncall Node002;\n","Node0405a":"if (item_caps_total(dude_obj) >= local_var(12)) then begin\n  call Node004;\nend\nelse begin\n  call Node005;\nend\n"}</script></body><script src="../jquery.js"></script><script src="../underscore.js"></script><script>(function() {
  var downAt, hideCode, nodes, positionCode, showCode;

  $('svg').attr('unselectable', 'on').css({
    '-moz-user-select': '-moz-none',
    '-moz-user-select': 'none',
    '-o-user-select': 'none',
    '-khtml-user-select': 'none',
    '-webkit-user-select': 'none',
    '-ms-user-select': 'none',
    'user-select': 'none'
  }).bind('selectstart', function() {
    return false;
  });

  $('<div/>', {
    id: 'thecode'
  }).appendTo('body');

  $('#thecode').css({
    'pointer-events': 'none',
    background: 'white',
    padding: '1em',
    outline: 'solid gray 1px',
    'white-space': 'pre',
    position: 'fixed',
    left: 0,
    top: 0
  });

  showCode = function(name, code, x, y) {
    $('#thecode').show();
    $('#thecode').text("# " + name + "\n" + code);
    return positionCode(x, y);
  };

  hideCode = function() {
    return $('#thecode').hide();
  };

  positionCode = function(x, y) {
    return $('#thecode').css({
      left: x,
      top: y
    });
  };

  nodes = $('.node');

  _.each(nodes, function(node) {
    var nodeName;
    nodeName = $(node).find('title').text();
    $(node).mousemove(function(e) {
      return showCode(nodeName, Codes[nodeName], e.clientX, e.clientY);
    });
    return $(node).mouseleave(function() {
      return hideCode();
    });
  });

  $('svg title').remove();

  downAt = null;

  $('svg').mousedown(function(e) {
    var x, y;
    x = e.pageX;
    y = e.pageY;
    return downAt = {
      x: x,
      y: y
    };
  });

  $('svg').mousemove(function(e) {
    var delta, x, y;
    if (!downAt) {
      return;
    }
    x = e.pageX;
    y = e.pageY;
    delta = {
      x: x - downAt.x,
      y: y - downAt.y
    };
    window.scrollBy(-delta.x, -delta.y);
    return false;
  });

  $('svg').mouseup(function(e) {
    return downAt = null;
  });

  $('svg').mouseleave(function(e) {
    return downAt = null;
  });

}).call(this);
</script></html>