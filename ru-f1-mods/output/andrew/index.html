<!DOCTYPE html><html><head><title>andrew</title><meta charset="utf-8" /></head><body><svg width="1216pt" height="734pt"
 viewBox="0.00 0.00 1216.00 733.75" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 729.75)">
<title>andrew</title>
<polygon fill="white" stroke="none" points="-4,4 -4,-729.75 1212,-729.75 1212,4 -4,4"/>
<!-- start -->
<g id="node1" class="node">
<title>start</title>
<ellipse fill="#ffffff" stroke="#000000" cx="27" cy="-683.5" rx="27" ry="18"/>
</g>
<!-- combat_p_proc -->
<g id="node2" class="node">
<title>combat_p_proc</title>
<ellipse fill="#ffffff" stroke="#000000" cx="99" cy="-683.5" rx="27" ry="18"/>
</g>
<!-- critter_p_proc -->
<g id="node3" class="node">
<title>critter_p_proc</title>
<ellipse fill="#ffffff" stroke="#000000" cx="291" cy="-683.5" rx="146.55" ry="42.25"/>
<text text-anchor="middle" x="291" y="-696.07" font-family="Times,serif" font-size="14.00">Можешь идти.</text>
<text text-anchor="middle" x="291" y="-678.82" font-family="Times,serif" font-size="14.00">&#45;&#45;&#45;</text>
<text text-anchor="middle" x="291" y="-661.57" font-family="Times,serif" font-size="14.00">Эй! Ты что там творишь?!</text>
</g>
<!-- look_at_p_proc -->
<g id="node4" class="node">
<title>look_at_p_proc</title>
<ellipse fill="#ffffff" stroke="#000000" cx="562" cy="-683.5" rx="106.24" ry="30.05"/>
<text text-anchor="middle" x="562" y="-687.45" font-family="Times,serif" font-size="14.00">Вы видите Эндрю,</text>
<text text-anchor="middle" x="562" y="-670.2" font-family="Times,serif" font-size="14.00">тюремщика.</text>
</g>
<!-- pickup_p_proc -->
<g id="node5" class="node">
<title>pickup_p_proc</title>
<ellipse fill="#ffffff" stroke="#000000" cx="713" cy="-683.5" rx="27" ry="18"/>
</g>
<!-- talk_p_proc -->
<g id="node6" class="node">
<title>talk_p_proc</title>
<ellipse fill="#ffffff" stroke="#000000" cx="839" cy="-683.5" rx="80.67" ry="18"/>
<text text-anchor="middle" x="839" y="-678.82" font-family="Times,serif" font-size="14.00">Эй, ты! Стой!</text>
</g>
<!-- Andrew01 -->
<g id="node7" class="node">
<title>Andrew01</title>
<ellipse fill="#ffffff" stroke="#000000" cx="839" cy="-586.25" rx="115.39" ry="18"/>
<text text-anchor="middle" x="839" y="-581.57" font-family="Times,serif" font-size="14.00">Чем я могу помочь?</text>
</g>
<!-- talk_p_proc&#45;&gt;Andrew01 -->
<g id="edge1" class="edge">
<title>talk_p_proc&#45;&gt;Andrew01</title>
<path fill="none" stroke="#555555" stroke-dasharray="1,5" d="M839,-665.03C839,-651.2 839,-631.6 839,-615.54"/>
<polygon fill="#555555" stroke="#555555" points="842.5,-615.61 839,-605.61 835.5,-615.61 842.5,-615.61"/>
</g>
<!-- Andrew02 -->
<g id="node12" class="node">
<title>Andrew02</title>
<ellipse fill="#ffffff" stroke="#000000" cx="604" cy="-472.75" rx="123.21" ry="30.05"/>
<text text-anchor="middle" x="604" y="-476.7" font-family="Times,serif" font-size="14.00">Меня зовут Эндрю. Я</text>
<text text-anchor="middle" x="604" y="-459.45" font-family="Times,serif" font-size="14.00">охраняю тюрьму.</text>
</g>
<!-- Andrew01&#45;&gt;Andrew02 -->
<g id="edge2" class="edge">
<title>Andrew01&#45;&gt;Andrew02</title>
<path fill="none" stroke="#99000e" d="M757.55,-573.17C735.51,-567.98 712.18,-560.62 692,-550.25 672.07,-540 652.92,-524.32 637.6,-509.8"/>
<polygon fill="#99000e" stroke="#99000e" points="640.56,-507.83 630.96,-503.36 635.68,-512.84 640.56,-507.83"/>
<text text-anchor="middle" x="720.5" y="-536.95" font-family="Times,serif" font-size="14.00" fill="#99000e">Кто ты?</text>
</g>
<!-- Andrew03 -->
<g id="node13" class="node">
<title>Andrew03</title>
<ellipse fill="#ffffff" stroke="#000000" cx="643" cy="-335" rx="139.65" ry="42.25"/>
<text text-anchor="middle" x="643" y="-347.57" font-family="Times,serif" font-size="14.00">Я охраняю эту тюрьму.</text>
<text text-anchor="middle" x="643" y="-330.32" font-family="Times,serif" font-size="14.00">Никого в нее не пускаю,</text>
<text text-anchor="middle" x="643" y="-313.07" font-family="Times,serif" font-size="14.00">никого не выпускаю.</text>
</g>
<!-- Andrew01&#45;&gt;Andrew03 -->
<g id="edge3" class="edge">
<title>Andrew01&#45;&gt;Andrew03</title>
<path fill="none" stroke="#003b99" d="M819.46,-568.05C805.67,-554.86 787.82,-535.49 777.25,-515 752.17,-466.4 781.94,-438.9 749,-395.25 743.75,-388.29 737.44,-382.04 730.53,-376.44"/>
<polygon fill="#003b99" stroke="#003b99" points="733.29,-373.38 723.19,-370.17 729.08,-378.98 733.29,-373.38"/>
<text text-anchor="middle" x="839.88" y="-468.07" font-family="Times,serif" font-size="14.00" fill="#003b99">Что ты делаешь?</text>
</g>
<!-- Andrew04 -->
<g id="node14" class="node">
<title>Andrew04</title>
<ellipse fill="#ffffff" stroke="#000000" cx="617" cy="-30.05" rx="153.44" ry="30.05"/>
<text text-anchor="middle" x="617" y="-34" font-family="Times,serif" font-size="14.00">Хорошего дня. Не нарушай</text>
<text text-anchor="middle" x="617" y="-16.75" font-family="Times,serif" font-size="14.00">закон.</text>
</g>
<!-- Andrew01&#45;&gt;Andrew04 -->
<g id="edge4" class="edge">
<title>Andrew01&#45;&gt;Andrew04</title>
<path fill="none" stroke="#689900" d="M860.17,-568.37C882.66,-548.4 915,-512.87 915,-473.75 915,-473.75 915,-473.75 915,-166.8 915,-94.59 841.63,-60.61 767.7,-44.71"/>
<polygon fill="#689900" stroke="#689900" points="768.77,-41.15 758.27,-42.59 767.37,-48.01 768.77,-41.15"/>
<text text-anchor="middle" x="964.5" y="-330.32" font-family="Times,serif" font-size="14.00" fill="#689900">Нет, спасибо.</text>
</g>
<!-- Andrew06 -->
<g id="node15" class="node">
<title>Andrew06</title>
<ellipse fill="#ffffff" stroke="#000000" cx="1057" cy="-472.75" rx="113.67" ry="42.25"/>
<text text-anchor="middle" x="1057" y="-485.32" font-family="Times,serif" font-size="14.00">Проходи, приятель.</text>
<text text-anchor="middle" x="1057" y="-468.07" font-family="Times,serif" font-size="14.00">&#45;&#45;&#45;</text>
<text text-anchor="middle" x="1057" y="-450.82" font-family="Times,serif" font-size="14.00">Проходите, мисс.</text>
</g>
<!-- Andrew01&#45;&gt;Andrew06 -->
<g id="edge5" class="edge">
<title>Andrew01&#45;&gt;Andrew06</title>
<path fill="none" stroke="#990094" d="M884.5,-569.25C898.95,-563.73 914.84,-557.17 929,-550.25 949.98,-539.99 972.07,-527.46 991.88,-515.53"/>
<polygon fill="#990094" stroke="#990094" points="993.38,-518.11 1000.11,-509.93 989.74,-512.13 993.38,-518.11"/>
<text text-anchor="middle" x="986" y="-536.95" font-family="Times,serif" font-size="14.00" fill="#990094">А&#45;ы&#45;ы!</text>
</g>
<!-- timed_event_p_proc -->
<g id="node8" class="node">
<title>timed_event_p_proc</title>
<ellipse fill="#ffffff" stroke="#000000" cx="965" cy="-683.5" rx="27" ry="18"/>
</g>
<!-- damage_p_proc -->
<g id="node9" class="node">
<title>damage_p_proc</title>
<ellipse fill="#ffffff" stroke="#000000" cx="1037" cy="-683.5" rx="27" ry="18"/>
</g>
<!-- destroy_p_proc -->
<g id="node10" class="node">
<title>destroy_p_proc</title>
<ellipse fill="#ffffff" stroke="#000000" cx="1109" cy="-683.5" rx="27" ry="18"/>
</g>
<!-- map_enter_p_proc -->
<g id="node11" class="node">
<title>map_enter_p_proc</title>
<ellipse fill="#ffffff" stroke="#000000" cx="1181" cy="-683.5" rx="27" ry="18"/>
</g>
<!-- Andrew02&#45;&gt;Andrew03 -->
<g id="edge6" class="edge">
<title>Andrew02&#45;&gt;Andrew03</title>
<path fill="none" stroke="#009971" d="M612.04,-442.28C615.95,-428.05 620.78,-410.74 625.25,-395.25 625.95,-392.81 626.68,-390.32 627.41,-387.8"/>
<polygon fill="#009971" stroke="#009971" points="631.01,-388.99 630.48,-378.4 624.3,-387.01 631.01,-388.99"/>
<text text-anchor="middle" x="687.88" y="-399.2" font-family="Times,serif" font-size="14.00" fill="#009971">Что ты делаешь?</text>
</g>
<!-- Andrew02&#45;&gt;Andrew04 -->
<g id="edge7" class="edge">
<title>Andrew02&#45;&gt;Andrew04</title>
<path fill="none" stroke="#994400" d="M557.28,-444.59C496.5,-405.3 400.65,-327.68 424,-240.25 445.79,-158.67 458.4,-132.48 523,-78.1 529.38,-72.73 536.48,-67.78 543.84,-63.27"/>
<polygon fill="#994400" stroke="#994400" points="545.37,-65.84 552.26,-57.79 541.85,-59.79 545.37,-65.84"/>
<text text-anchor="middle" x="473.5" y="-252.82" font-family="Times,serif" font-size="14.00" fill="#994400">Нет, спасибо.</text>
</g>
<!-- Andrew03&#45;&gt;Andrew04 -->
<g id="edge9" class="edge">
<title>Andrew03&#45;&gt;Andrew04</title>
<path fill="none" stroke="#159900" d="M580.95,-296.7C555.68,-277.87 529.23,-252.54 515.5,-222.25 495.52,-178.17 494.68,-157.04 515.5,-113.35 524.64,-94.17 540.68,-78.01 557.35,-65.22"/>
<polygon fill="#159900" stroke="#159900" points="559.08,-67.57 565.09,-58.84 554.95,-61.91 559.08,-67.57"/>
<text text-anchor="middle" x="539.25" y="-163.13" font-family="Times,serif" font-size="14.00" fill="#159900">О как.</text>
</g>
<!-- Andrew05 -->
<g id="node16" class="node">
<title>Andrew05</title>
<ellipse fill="#ffffff" stroke="#000000" cx="729" cy="-167.8" rx="158.22" ry="54.45"/>
<text text-anchor="middle" x="729" y="-189" font-family="Times,serif" font-size="14.00">А вдруг кто&#45;то поможет</text>
<text text-anchor="middle" x="729" y="-171.75" font-family="Times,serif" font-size="14.00">заключенному бежать? Или</text>
<text text-anchor="middle" x="729" y="-154.5" font-family="Times,serif" font-size="14.00">запрется изнутри, и нужно</text>
<text text-anchor="middle" x="729" y="-137.25" font-family="Times,serif" font-size="14.00">будет искать ключи...</text>
</g>
<!-- Andrew03&#45;&gt;Andrew05 -->
<g id="edge8" class="edge">
<title>Andrew03&#45;&gt;Andrew05</title>
<path fill="none" stroke="#180099" d="M664.26,-293.16C673.96,-274.52 685.67,-252.03 696.45,-231.33"/>
<polygon fill="#180099" stroke="#180099" points="699.97,-233.14 701.49,-222.65 693.77,-229.9 699.97,-233.14"/>
<text text-anchor="middle" x="774.5" y="-261.45" font-family="Times,serif" font-size="14.00" fill="#180099">Почему в тюрьму не</text>
<text text-anchor="middle" x="774.5" y="-244.2" font-family="Times,serif" font-size="14.00" fill="#180099">пускают посетителей?</text>
</g>
<!-- Andrew05&#45;&gt;Andrew04 -->
<g id="edge10" class="edge">
<title>Andrew05&#45;&gt;Andrew04</title>
<path fill="none" stroke="#990042" d="M686.34,-115.09C673.52,-99.56 659.72,-82.83 647.82,-68.41"/>
<polygon fill="#990042" stroke="#990042" points="650.13,-66.71 641.07,-61.22 644.73,-71.16 650.13,-66.71"/>
<text text-anchor="middle" x="693.25" y="-82.05" font-family="Times,serif" font-size="14.00" fill="#990042">О как.</text>
</g>
</g>
</svg>
<script>window.Codes = {"start":"[]","combat_p_proc":"if (fixed_param == 4) then begin\n  round_counter := round_counter + 1;\nend\nif (round_counter > 3) then begin\n  if (global_var(247) == 0) then begin\n    set_global_var(247, 1);\n    set_global_var(155, global_var(155) - 5);\n  end\nend\n","critter_p_proc":"if (global_var(247) == 1) then begin\n  if (obj_can_see_obj(self_obj, dude_obj)) then begin\n    attack_complex(dude_obj, 0, 1, 0, 0, 30000, 0, 0);\n  end\nend\nif (hostile) then begin\n  hostile := 0;\n  attack_complex(dude_obj, 0, 1, 0, 0, 30000, 0, 0);\nend\nelse begin\n  if ((map_var(1) == 1) and ((game_time / (10 * 60 * 60 * 24)) > map_var(5))) then begin\n    if (jail_door_ptr != 0) then begin\n      obj_unlock(jail_door_ptr);\n      use_obj(jail_door_ptr);\n      moving_flag := 0;\n      rm_timer_event(self_obj);\n      add_timer_event(self_obj, game_ticks(5), 1);\n    end\n    set_map_var(1, 0);\n    float_msg(self_obj, message_str(172, 101), 3);\n  end\n  else begin\n    if (map_var(3) == 1) then begin\n      set_map_var(3, map_var(3) + 1);\n      float_msg(self_obj, message_str(172, 116), 2);\n    end\n    else begin\n      if (map_var(3) == 3) then begin\n        if (jail_door_ptr != 0) then begin\n          obj_unlock(jail_door_ptr);\n        end\n        hostile := 1;\n      end\n      else begin\n        if (moving_flag == 1) then begin\n          if (tile_num(self_obj) != local_var(1)) then begin\n            animate_move_obj_to_tile(self_obj, local_var(1), 0);\n          end\n        end\n        if ((global_var(247) == 1) and obj_can_see_obj(self_obj, dude_obj)) then begin\n          dialogue_system_enter;\n        end\n      end\n    end\n  end\nend\n","look_at_p_proc":"if (local_var(0) == 1) then begin\n  script_overrides;\n  display_msg(message_str(172, 100));\nend\n","pickup_p_proc":"hostile := 1;\n","talk_p_proc":"if (global_var(247) == 1) then begin\n  float_msg(self_obj, message_str(172, 102), 2);\n  hostile := 1;\nend\nelse begin\n  start_gdialog(172, self_obj, 4, -1, -1);\n  gsay_start;\n  call Andrew01;\n  gsay_end;\n  end_dialogue;\nend\n","timed_event_p_proc":"if (fixed_param == 1) then begin\n  obj_close(jail_door_ptr);\n  rm_timer_event(self_obj);\n  add_timer_event(self_obj, game_ticks(10), 2);\nend\nelse begin\n  if (fixed_param == 2) then begin\n    moving_flag := 1;\n  end\nend\n","damage_p_proc":"if (source_obj == dude_obj) then begin\n  set_global_var(247, 1);\nend\n","destroy_p_proc":"variable LVar0 := 0;\nLVar0 := obj_carrying_pid_obj(self_obj, 1);\nif (LVar0) then begin\n  rm_obj_from_inven(self_obj, LVar0);\n  destroy_object(LVar0);\nend\nif (source_obj == dude_obj) then begin\n  set_global_var(247, 1);\n  if (((global_var(160) + global_var(159)) >= 25) and ((global_var(159) > (2 * global_var(160))) or (global_var(156) == 1))) then begin\n    set_global_var(156, 1);\n    set_global_var(157, 0);\n  end\n  if (((global_var(160) + global_var(159)) >= 25) and ((global_var(160) > (3 * global_var(159))) or (global_var(157) == 1))) then begin\n    set_global_var(157, 1);\n    set_global_var(156, 0);\n  end\n  set_global_var(159, global_var(159) + 1);\n  if ((global_var(159) % 2) == 0) then begin\n    set_global_var(155, global_var(155) - 1);\n  end\nend\n","map_enter_p_proc":"if (global_var(15) == 1) then begin\n  kill_critter(self_obj, 49);\nend\ncritter_add_trait(self_obj, 1, 6, 12);\ncritter_add_trait(self_obj, 1, 5, 17);\nif (local_var(1) == 0) then begin\n  set_local_var(1, tile_num(self_obj));\nend\n","Andrew01":"gsay_reply(172, 103);\ngiq_option(4, 172, 104, Andrew02, 50);\ngiq_option(4, 172, 105, Andrew03, 50);\ngiq_option(4, 172, 106, Andrew04, 50);\ngiq_option(-3, 172, 113, Andrew06, 50);\n","Andrew02":"set_local_var(0, 1);\ngsay_reply(172, 107);\ngiq_option(4, 172, 105, Andrew03, 50);\ngiq_option(4, 172, 106, Andrew04, 50);\n","Andrew03":"gsay_reply(172, 108);\ngiq_option(6, 172, 109, Andrew05, 50);\ngiq_option(4, 172, 110, Andrew04, 50);\n","Andrew04":"gsay_message(172, 111, 50);\n","Andrew05":"gsay_reply(172, 112);\ngiq_option(4, 172, 110, Andrew04, 50);\n","Andrew06":"if (get_critter_stat(dude_obj, 34) == 0) then begin\n  gsay_message(172, 114, 50);\nend\nelse begin\n  gsay_message(172, 115, 50);\nend\n"}</script></body><script src="../jquery.js"></script><script src="../underscore.js"></script><script>(function() {
  var downAt, hideCode, nodes, positionCode, showCode;

  $('svg').attr('unselectable', 'on').css({
    '-moz-user-select': '-moz-none',
    '-moz-user-select': 'none',
    '-o-user-select': 'none',
    '-khtml-user-select': 'none',
    '-webkit-user-select': 'none',
    '-ms-user-select': 'none',
    'user-select': 'none'
  }).bind('selectstart', function() {
    return false;
  });

  $('<div/>', {
    id: 'thecode'
  }).appendTo('body');

  $('#thecode').css({
    'pointer-events': 'none',
    background: 'white',
    padding: '1em',
    outline: 'solid gray 1px',
    'white-space': 'pre',
    position: 'fixed',
    left: 0,
    top: 0
  });

  showCode = function(code, x, y) {
    $('#thecode').show();
    $('#thecode').text(code);
    return positionCode(x, y);
  };

  hideCode = function() {
    return $('#thecode').hide();
  };

  positionCode = function(x, y) {
    return $('#thecode').css({
      left: x,
      top: y
    });
  };

  nodes = $('.node');

  _.each(nodes, function(node) {
    var nodeName;
    nodeName = $(node).find('title').text();
    $(node).mousemove(function(e) {
      return showCode(Codes[nodeName], e.clientX, e.clientY);
    });
    return $(node).mouseleave(function() {
      return hideCode();
    });
  });

  $('svg title').remove();

  downAt = null;

  $('svg').mousedown(function(e) {
    var x, y;
    x = e.pageX;
    y = e.pageY;
    return downAt = {
      x: x,
      y: y
    };
  });

  $('svg').mousemove(function(e) {
    var delta, x, y;
    if (!downAt) {
      return;
    }
    x = e.pageX;
    y = e.pageY;
    delta = {
      x: x - downAt.x,
      y: y - downAt.y
    };
    window.scrollBy(-delta.x, -delta.y);
    return false;
  });

  $('svg').mouseup(function(e) {
    return downAt = null;
  });

  $('svg').mouseleave(function(e) {
    return downAt = null;
  });

}).call(this);
</script></html>