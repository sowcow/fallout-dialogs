<!DOCTYPE html><html><head><title>MOATGRD</title><meta charset="utf-8" /></head><body><svg width="1941pt" height="512pt"
 viewBox="0.00 0.00 1941.00 512.19" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 508.186)">
<title>MOATGRD</title>
<polygon fill="white" stroke="none" points="-4,4 -4,-508.186 1937,-508.186 1937,4 -4,4"/>
<!-- Start -->
<g id="node1" class="node"><title>Start</title>
<ellipse fill="#ffffff" stroke="#000000" cx="315" cy="-486.186" rx="27" ry="18"/>
</g>
<!-- look_at_p_proc -->
<g id="node2" class="node"><title>look_at_p_proc</title>
<ellipse fill="#ffffff" stroke="#000000" cx="433" cy="-486.186" rx="73.387" ry="18"/>
<text text-anchor="middle" x="433" y="-482.486" font-family="Times,serif" font-size="14.00">You see a guard.</text>
</g>
<!-- description_p_proc -->
<g id="node3" class="node"><title>description_p_proc</title>
<ellipse fill="#ffffff" stroke="#000000" cx="598" cy="-486.186" rx="73.387" ry="18"/>
<text text-anchor="middle" x="598" y="-482.486" font-family="Times,serif" font-size="14.00">You see a guard.</text>
</g>
<!-- talk_p_proc -->
<g id="node4" class="node"><title>talk_p_proc</title>
<ellipse fill="#ffffff" stroke="#000000" cx="716" cy="-486.186" rx="27" ry="18"/>
</g>
<!-- get_reaction -->
<g id="node5" class="node"><title>get_reaction</title>
<ellipse fill="#ffffff" stroke="#000000" cx="1330" cy="-404.316" rx="27" ry="18"/>
</g>
<!-- talk_p_proc&#45;&gt;get_reaction -->
<g id="edge1" class="edge"><title>talk_p_proc&#45;&gt;get_reaction</title>
<path fill="none" stroke="#555555" stroke-dasharray="1,5" d="M742.864,-483.071C853.313,-474.323 1267.84,-440.978 1294,-431.186 1298.14,-429.638 1302.23,-427.485 1306.08,-425.075"/>
<polygon fill="#555555" stroke="#555555" points="1308.38,-427.743 1314.57,-419.15 1304.37,-422.003 1308.38,-427.743"/>
</g>
<!-- Moat00 -->
<g id="node6" class="node"><title>Moat00</title>
<ellipse fill="#ffffff" stroke="#000000" cx="651" cy="-404.316" rx="94.5053" ry="26.7407"/>
<text text-anchor="middle" x="651" y="-408.116" font-family="Times,serif" font-size="14.00">What is your busines</text>
<text text-anchor="middle" x="651" y="-393.116" font-family="Times,serif" font-size="14.00">s here?</text>
</g>
<!-- talk_p_proc&#45;&gt;Moat00 -->
<g id="edge2" class="edge"><title>talk_p_proc&#45;&gt;Moat00</title>
<path fill="none" stroke="#555555" stroke-dasharray="1,5" d="M703.467,-469.786C696.294,-460.972 687.003,-449.555 678.236,-438.782"/>
<polygon fill="#555555" stroke="#555555" points="680.705,-436.271 671.678,-430.724 675.276,-440.69 680.705,-436.271"/>
</g>
<!-- ReactToLevel -->
<g id="node21" class="node"><title>ReactToLevel</title>
<ellipse fill="#ffffff" stroke="#000000" cx="1258" cy="-184.723" rx="27" ry="18"/>
</g>
<!-- get_reaction&#45;&gt;ReactToLevel -->
<g id="edge13" class="edge"><title>get_reaction&#45;&gt;ReactToLevel</title>
<path fill="none" stroke="#555555" stroke-dasharray="1,5" d="M1324.47,-386.603C1312.04,-349.027 1281.79,-257.621 1266.77,-212.218"/>
<polygon fill="#555555" stroke="#555555" points="1270.01,-210.887 1263.55,-202.493 1263.37,-213.086 1270.01,-210.887"/>
</g>
<!-- Moat02 -->
<g id="node13" class="node"><title>Moat02</title>
<ellipse fill="#ffffff" stroke="#000000" cx="368" cy="-184.723" rx="92.7622" ry="69.0935"/>
<text text-anchor="middle" x="368" y="-218.523" font-family="Times,serif" font-size="14.00">I have no patience f</text>
<text text-anchor="middle" x="368" y="-203.523" font-family="Times,serif" font-size="14.00">or jokes. If you do </text>
<text text-anchor="middle" x="368" y="-188.523" font-family="Times,serif" font-size="14.00">not leave</text>
<text text-anchor="middle" x="368" y="-173.523" font-family="Times,serif" font-size="14.00"> this area</text>
<text text-anchor="middle" x="368" y="-158.523" font-family="Times,serif" font-size="14.00"> now I will shoot yo</text>
<text text-anchor="middle" x="368" y="-143.523" font-family="Times,serif" font-size="14.00">u!</text>
</g>
<!-- Moat00&#45;&gt;Moat02 -->
<g id="edge3" class="edge"><title>Moat00&#45;&gt;Moat02</title>
<path fill="none" stroke="#4a9900" d="M565.611,-392.478C519.029,-385.093 467.223,-374.007 449,-359.446 418.702,-335.235 399.203,-297.065 386.95,-262.662"/>
<polygon fill="#4a9900" stroke="#4a9900" points="390.221,-261.41 383.683,-253.073 383.595,-263.667 390.221,-261.41"/>
<text text-anchor="middle" x="505" y="-340.746" font-family="Times,serif" font-size="14.00" fill="#4a9900">I&#39;m just looking aro</text>
<text text-anchor="middle" x="505" y="-325.746" font-family="Times,serif" font-size="14.00" fill="#4a9900">und.</text>
</g>
<!-- Moat05 -->
<g id="node14" class="node"><title>Moat05</title>
<ellipse fill="#ffffff" stroke="#000000" cx="578" cy="-184.723" rx="98.9899" ry="111.946"/>
<text text-anchor="middle" x="578" y="-248.523" font-family="Times,serif" font-size="14.00">Ahh, very good. Cust</text>
<text text-anchor="middle" x="578" y="-233.523" font-family="Times,serif" font-size="14.00">omers are always wel</text>
<text text-anchor="middle" x="578" y="-218.523" font-family="Times,serif" font-size="14.00">come.</text>
<text text-anchor="middle" x="578" y="-203.523" font-family="Times,serif" font-size="14.00"> Come in but p</text>
<text text-anchor="middle" x="578" y="-188.523" font-family="Times,serif" font-size="14.00">lease keep your weap</text>
<text text-anchor="middle" x="578" y="-173.523" font-family="Times,serif" font-size="14.00">ons holstered.</text>
<text text-anchor="middle" x="578" y="-158.523" font-family="Times,serif" font-size="14.00"> Go f</text>
<text text-anchor="middle" x="578" y="-143.523" font-family="Times,serif" font-size="14.00">ind Zack, he can set</text>
<text text-anchor="middle" x="578" y="-128.523" font-family="Times,serif" font-size="14.00"> you up with anythin</text>
<text text-anchor="middle" x="578" y="-113.523" font-family="Times,serif" font-size="14.00">g you need.</text>
</g>
<!-- Moat00&#45;&gt;Moat05 -->
<g id="edge4" class="edge"><title>Moat00&#45;&gt;Moat05</title>
<path fill="none" stroke="#990077" d="M600.193,-381.617C591.712,-375.686 584.044,-368.365 579,-359.446 569.75,-343.089 564.944,-324.404 562.965,-305.494"/>
<polygon fill="#990077" stroke="#990077" points="566.436,-304.983 562.163,-295.288 559.457,-305.531 566.436,-304.983"/>
<text text-anchor="middle" x="640.5" y="-340.746" font-family="Times,serif" font-size="14.00" fill="#990077">I want to buy some w</text>
<text text-anchor="middle" x="640.5" y="-325.746" font-family="Times,serif" font-size="14.00" fill="#990077">eapons.</text>
</g>
<!-- Moat03 -->
<g id="node15" class="node"><title>Moat03</title>
<ellipse fill="#ffffff" stroke="#000000" cx="787" cy="-184.723" rx="91.8478" ry="37.4533"/>
<text text-anchor="middle" x="787" y="-196.023" font-family="Times,serif" font-size="14.00">Oh, ok. Gabriel will</text>
<text text-anchor="middle" x="787" y="-181.023" font-family="Times,serif" font-size="14.00"> talk to you. Go on </text>
<text text-anchor="middle" x="787" y="-166.023" font-family="Times,serif" font-size="14.00">in.</text>
</g>
<!-- Moat00&#45;&gt;Moat03 -->
<g id="edge5" class="edge"><title>Moat00&#45;&gt;Moat03</title>
<path fill="none" stroke="#00998e" d="M683.402,-378.932C690.051,-373.014 696.645,-366.378 702,-359.446 704.174,-356.632 740.712,-281.427 765.169,-230.899"/>
<polygon fill="#00998e" stroke="#00998e" points="768.379,-232.301 769.584,-221.775 762.078,-229.252 768.379,-232.301"/>
<text text-anchor="middle" x="781" y="-348.246" font-family="Times,serif" font-size="14.00" fill="#00998e">I need to speak to y</text>
<text text-anchor="middle" x="781" y="-333.246" font-family="Times,serif" font-size="14.00" fill="#00998e">our boss. &#160;It is ver</text>
<text text-anchor="middle" x="781" y="-318.246" font-family="Times,serif" font-size="14.00" fill="#00998e">y important.</text>
</g>
<!-- Moat04 -->
<g id="node16" class="node"><title>Moat04</title>
<ellipse fill="#ffffff" stroke="#000000" cx="1000" cy="-184.723" rx="103.476" ry="26.7407"/>
<text text-anchor="middle" x="1000" y="-188.523" font-family="Times,serif" font-size="14.00">Yeah, I remember you</text>
<text text-anchor="middle" x="1000" y="-173.523" font-family="Times,serif" font-size="14.00">. &#160;Go on in.</text>
</g>
<!-- Moat00&#45;&gt;Moat04 -->
<g id="edge6" class="edge"><title>Moat00&#45;&gt;Moat04</title>
<path fill="none" stroke="#996200" d="M746.002,-403.106C831.126,-400.767 947.312,-391.537 979,-359.446 1014.47,-323.528 1012.74,-261.054 1007.16,-221.626"/>
<polygon fill="#996200" stroke="#996200" points="1010.6,-220.981 1005.6,-211.643 1003.69,-222.065 1010.6,-220.981"/>
<text text-anchor="middle" x="1065" y="-340.746" font-family="Times,serif" font-size="14.00" fill="#996200">I want to buy weapon</text>
<text text-anchor="middle" x="1065" y="-325.746" font-family="Times,serif" font-size="14.00" fill="#996200">s from Zack.</text>
</g>
<!-- Moat00&#45;&gt;Moat04 -->
<g id="edge7" class="edge"><title>Moat00&#45;&gt;Moat04</title>
<path fill="none" stroke="#350099" d="M743.902,-398.875C777.013,-393.139 812.603,-381.692 839,-359.446 855.601,-345.456 843.768,-330.839 858,-314.446 868.194,-302.704 875.717,-305.98 888,-296.446 918.273,-272.949 948.969,-241.992 970.551,-218.787"/>
<polygon fill="#350099" stroke="#350099" points="973.305,-220.963 977.506,-211.237 968.157,-216.22 973.305,-220.963"/>
<text text-anchor="middle" x="916.5" y="-348.246" font-family="Times,serif" font-size="14.00" fill="#350099">I need to speak to G</text>
<text text-anchor="middle" x="916.5" y="-333.246" font-family="Times,serif" font-size="14.00" fill="#350099">abriel. &#160;It is very </text>
<text text-anchor="middle" x="916.5" y="-318.246" font-family="Times,serif" font-size="14.00" fill="#350099">important.</text>
</g>
<!-- MoatCombat -->
<g id="node17" class="node"><title>MoatCombat</title>
<ellipse fill="#ffffff" stroke="#000000" cx="27" cy="-184.723" rx="27" ry="18"/>
</g>
<!-- Moat00&#45;&gt;MoatCombat -->
<g id="edge8" class="edge"><title>Moat00&#45;&gt;MoatCombat</title>
<path fill="none" stroke="#009908" d="M557.683,-399.596C438.869,-394.029 240.64,-381.723 171,-359.446 118.072,-342.514 97.8787,-339.706 63,-296.446 43.4388,-272.184 34.3815,-236.983 30.2713,-212.821"/>
<polygon fill="#009908" stroke="#009908" points="33.7243,-212.247 28.7535,-202.89 26.8046,-213.304 33.7243,-212.247"/>
<text text-anchor="middle" x="229" y="-348.246" font-family="Times,serif" font-size="14.00" fill="#009908">You smell like a bra</text>
<text text-anchor="middle" x="229" y="-333.246" font-family="Times,serif" font-size="14.00" fill="#009908">hma but I bet you&#39;re</text>
<text text-anchor="middle" x="229" y="-318.246" font-family="Times,serif" font-size="14.00" fill="#009908"> not as intelligent.</text>
</g>
<!-- Moat01 -->
<g id="node18" class="node"><title>Moat01</title>
<ellipse fill="#ffffff" stroke="#000000" cx="165" cy="-184.723" rx="92.7622" ry="69.0935"/>
<text text-anchor="middle" x="165" y="-218.523" font-family="Times,serif" font-size="14.00">I have no patience f</text>
<text text-anchor="middle" x="165" y="-203.523" font-family="Times,serif" font-size="14.00">or jokes. If you do </text>
<text text-anchor="middle" x="165" y="-188.523" font-family="Times,serif" font-size="14.00">not leave</text>
<text text-anchor="middle" x="165" y="-173.523" font-family="Times,serif" font-size="14.00"> this area</text>
<text text-anchor="middle" x="165" y="-158.523" font-family="Times,serif" font-size="14.00"> now I will shoot yo</text>
<text text-anchor="middle" x="165" y="-143.523" font-family="Times,serif" font-size="14.00">u!</text>
</g>
<!-- Moat00&#45;&gt;Moat01 -->
<g id="edge9" class="edge"><title>Moat00&#45;&gt;Moat01</title>
<path fill="none" stroke="#990024" d="M560.772,-396.073C507.915,-389.988 440.464,-379.006 383,-359.446 327.091,-340.414 312.562,-332.778 266,-296.446 249.429,-283.516 233.26,-267.721 218.888,-252.157"/>
<polygon fill="#990024" stroke="#990024" points="221.295,-249.601 211.983,-244.548 216.112,-254.306 221.295,-249.601"/>
<text text-anchor="middle" x="396" y="-333.246" font-family="Times,serif" font-size="14.00" fill="#990024">Urr?</text>
</g>
<!-- critter_p_proc -->
<g id="node7" class="node"><title>critter_p_proc</title>
<ellipse fill="#ffffff" stroke="#000000" cx="988" cy="-486.186" rx="27" ry="18"/>
</g>
<!-- damage_p_proc -->
<g id="node8" class="node"><title>damage_p_proc</title>
<ellipse fill="#ffffff" stroke="#000000" cx="1160" cy="-486.186" rx="27" ry="18"/>
</g>
<!-- destroy_p_proc -->
<g id="node9" class="node"><title>destroy_p_proc</title>
<ellipse fill="#ffffff" stroke="#000000" cx="1282" cy="-486.186" rx="27" ry="18"/>
</g>
<!-- timed_event_p_proc -->
<g id="node10" class="node"><title>timed_event_p_proc</title>
<ellipse fill="#ffffff" stroke="#000000" cx="1379" cy="-486.186" rx="27" ry="18"/>
</g>
<!-- map_enter_p_proc -->
<g id="node11" class="node"><title>map_enter_p_proc</title>
<ellipse fill="#ffffff" stroke="#000000" cx="1463" cy="-486.186" rx="27" ry="18"/>
</g>
<!-- pickup_p_proc -->
<g id="node12" class="node"><title>pickup_p_proc</title>
<ellipse fill="#ffffff" stroke="#000000" cx="1541" cy="-486.186" rx="27" ry="18"/>
</g>
<!-- BottomReact -->
<g id="node19" class="node"><title>BottomReact</title>
<ellipse fill="#ffffff" stroke="#000000" cx="165" cy="-18" rx="27" ry="18"/>
</g>
<!-- Moat02&#45;&gt;BottomReact -->
<g id="edge11" class="edge"><title>Moat02&#45;&gt;BottomReact</title>
<path fill="none" stroke="#555555" stroke-dasharray="1,5" d="M321.08,-124.816C305.088,-106.885 286.335,-87.9779 267,-73 245.297,-56.1874 217.607,-41.9029 196.555,-32.2564"/>
<polygon fill="#555555" stroke="#555555" points="197.953,-29.0475 187.396,-28.1582 195.094,-35.4371 197.953,-29.0475"/>
</g>
<!-- MoatCombat&#45;&gt;BottomReact -->
<g id="edge12" class="edge"><title>MoatCombat&#45;&gt;BottomReact</title>
<path fill="none" stroke="#555555" stroke-dasharray="1,5" d="M28.5911,-166.422C31.58,-142.831 39.9755,-100.384 63,-73 80.7473,-51.8922 108.894,-37.8723 131.129,-29.4201"/>
<polygon fill="#555555" stroke="#555555" points="132.333,-32.7065 140.558,-26.0286 129.964,-26.1196 132.333,-32.7065"/>
</g>
<!-- Moat01&#45;&gt;BottomReact -->
<g id="edge10" class="edge"><title>Moat01&#45;&gt;BottomReact</title>
<path fill="none" stroke="#555555" stroke-dasharray="1,5" d="M165,-115.297C165,-91.0602 165,-65.1657 165,-46.3397"/>
<polygon fill="#555555" stroke="#555555" points="168.5,-46.1379 165,-36.1379 161.5,-46.138 168.5,-46.1379"/>
</g>
<!-- MoatEnd -->
<g id="node20" class="node"><title>MoatEnd</title>
<ellipse fill="#ffffff" stroke="#000000" cx="1616" cy="-486.186" rx="27" ry="18"/>
</g>
<!-- LevelToReact -->
<g id="node22" class="node"><title>LevelToReact</title>
<ellipse fill="#ffffff" stroke="#000000" cx="1726" cy="-404.316" rx="27" ry="18"/>
</g>
<!-- UpReact -->
<g id="node23" class="node"><title>UpReact</title>
<ellipse fill="#ffffff" stroke="#000000" cx="1402" cy="-404.316" rx="27" ry="18"/>
</g>
<!-- UpReact&#45;&gt;ReactToLevel -->
<g id="edge14" class="edge"><title>UpReact&#45;&gt;ReactToLevel</title>
<path fill="none" stroke="#555555" stroke-dasharray="1,5" d="M1391.64,-387.667C1366.85,-350.198 1303.92,-255.112 1274.12,-210.081"/>
<polygon fill="#555555" stroke="#555555" points="1276.89,-207.93 1268.46,-201.522 1271.06,-211.793 1276.89,-207.93"/>
</g>
<!-- DownReact -->
<g id="node24" class="node"><title>DownReact</title>
<ellipse fill="#ffffff" stroke="#000000" cx="1114" cy="-404.316" rx="27" ry="18"/>
</g>
<!-- DownReact&#45;&gt;ReactToLevel -->
<g id="edge15" class="edge"><title>DownReact&#45;&gt;ReactToLevel</title>
<path fill="none" stroke="#555555" stroke-dasharray="1,5" d="M1124.36,-387.667C1149.15,-350.198 1212.08,-255.112 1241.88,-210.081"/>
<polygon fill="#555555" stroke="#555555" points="1244.94,-211.793 1247.54,-201.522 1239.11,-207.93 1244.94,-211.793"/>
</g>
<!-- TopReact -->
<g id="node25" class="node"><title>TopReact</title>
<ellipse fill="#ffffff" stroke="#000000" cx="1834" cy="-486.186" rx="27" ry="18"/>
</g>
<!-- BigUpReact -->
<g id="node26" class="node"><title>BigUpReact</title>
<ellipse fill="#ffffff" stroke="#000000" cx="1186" cy="-404.316" rx="27" ry="18"/>
</g>
<!-- BigUpReact&#45;&gt;ReactToLevel -->
<g id="edge16" class="edge"><title>BigUpReact&#45;&gt;ReactToLevel</title>
<path fill="none" stroke="#555555" stroke-dasharray="1,5" d="M1191.53,-386.603C1203.96,-349.027 1234.21,-257.621 1249.23,-212.218"/>
<polygon fill="#555555" stroke="#555555" points="1252.63,-213.086 1252.45,-202.493 1245.99,-210.887 1252.63,-213.086"/>
</g>
<!-- BigDownReact -->
<g id="node27" class="node"><title>BigDownReact</title>
<ellipse fill="#ffffff" stroke="#000000" cx="1258" cy="-404.316" rx="27" ry="18"/>
</g>
<!-- BigDownReact&#45;&gt;ReactToLevel -->
<g id="edge17" class="edge"><title>BigDownReact&#45;&gt;ReactToLevel</title>
<path fill="none" stroke="#555555" stroke-dasharray="1,5" d="M1258,-386.242C1258,-348.678 1258,-258.597 1258,-213.062"/>
<polygon fill="#555555" stroke="#555555" points="1261.5,-213.019 1258,-203.019 1254.5,-213.019 1261.5,-213.019"/>
</g>
<!-- UpReactLevel -->
<g id="node28" class="node"><title>UpReactLevel</title>
<ellipse fill="#ffffff" stroke="#000000" cx="1690" cy="-486.186" rx="27" ry="18"/>
</g>
<!-- UpReactLevel&#45;&gt;LevelToReact -->
<g id="edge18" class="edge"><title>UpReactLevel&#45;&gt;LevelToReact</title>
<path fill="none" stroke="#555555" stroke-dasharray="1,5" d="M1697.46,-468.637C1702.33,-457.821 1708.8,-443.47 1714.35,-431.166"/>
<polygon fill="#555555" stroke="#555555" points="1717.63,-432.399 1718.55,-421.844 1711.25,-429.522 1717.63,-432.399"/>
</g>
<!-- DownReactLevel -->
<g id="node29" class="node"><title>DownReactLevel</title>
<ellipse fill="#ffffff" stroke="#000000" cx="1762" cy="-486.186" rx="27" ry="18"/>
</g>
<!-- DownReactLevel&#45;&gt;LevelToReact -->
<g id="edge19" class="edge"><title>DownReactLevel&#45;&gt;LevelToReact</title>
<path fill="none" stroke="#555555" stroke-dasharray="1,5" d="M1754.54,-468.637C1749.67,-457.821 1743.2,-443.47 1737.65,-431.166"/>
<polygon fill="#555555" stroke="#555555" points="1740.75,-429.522 1733.45,-421.844 1734.37,-432.399 1740.75,-429.522"/>
</g>
<!-- Goodbyes -->
<g id="node30" class="node"><title>Goodbyes</title>
<ellipse fill="#ffffff" stroke="#000000" cx="1906" cy="-486.186" rx="27" ry="18"/>
</g>
</g>
</svg>
<script>window.Codes = {"Start":"if (Initialize) then begin\n  if (obj_is_carrying_obj_pid(self_obj, 41) == 0) then begin\n    item_caps_adjust(self_obj, random(2, 20));\n  end\n  critter_add_trait(self_obj, 1, 6, 48);\n  critter_add_trait(self_obj, 1, 5, 28);\n  if (local_var(4) == 0) then begin\n    DestTile := tile_num(self_obj);\n    set_local_var(4, DestTile);\n  end\n  Initialize := 0;\nend\n","look_at_p_proc":"script_overrides;\ndisplay_msg(message_str(6, 100));\n","description_p_proc":"script_overrides;\ndisplay_msg(message_str(6, 100));\n","talk_p_proc":"if (global_var(617) == 1) then begin\n  float_msg(self_obj, message_str(669, random(100, 105)), 2);\nend\nelse begin\n  call get_reaction;\n  start_gdialog(6, self_obj, -1, -1, -1);\n  gsay_start;\n  call Moat00;\n  gsay_end;\n  end_dialogue;\nend\n","critter_p_proc":"if (tile_num(self_obj) != DestTile) then begin\n  animate_move_obj_to_tile(self_obj, DestTile, 0);\nend\nelse begin\n  anim(self_obj, 1000, 2);\nend\nif (obj_can_see_obj(self_obj, dude_obj)) then begin\n  if (global_var(253) == 1) then begin\n    attack_complex(dude_obj, 0, 1, 0, 0, 30000, 0, 0);\n  end\nend\n","damage_p_proc":"if (source_obj == dude_obj) then begin\n  set_global_var(617, 1);\nend\n","destroy_p_proc":"if (source_obj == dude_obj) then begin\n  set_global_var(617, 1);\n  if (source_obj == dude_obj) then begin\n    if (((global_var(160) + global_var(159)) >= 25) and ((global_var(159) > (2 * global_var(160))) or (global_var(156) == 1))) then begin\n      set_global_var(156, 1);\n      set_global_var(157, 0);\n    end\n    if (((global_var(160) + global_var(159)) >= 25) and ((global_var(160) > (3 * global_var(159))) or (global_var(157) == 1))) then begin\n      set_global_var(157, 1);\n      set_global_var(156, 0);\n    end\n    set_global_var(159, global_var(159) + 1);\n    if ((global_var(159) % 2) == 0) then begin\n      set_global_var(155, global_var(155) - 1);\n    end\n  end\nend\n","timed_event_p_proc":"if (fixed_param == 1) then begin\n  if (tile_distance_objs(self_obj, dude_obj) < 5) then begin\n    set_global_var(617, 1);\n    attack_complex(dude_obj, 0, 1, 0, 0, 30000, 0, 0);\n  end\nend\n","map_enter_p_proc":"move_to(self_obj, local_var(4), 0);\nanim(self_obj, 1000, 2);\n","pickup_p_proc":"set_global_var(617, 1);\n","Moat00":"gsay_reply(6, 101);\ngiq_option(4, 6, 103, Moat02, 50);\nif (local_var(5) == 0) then begin\n  giq_option(4, 6, 104, Moat05, 50);\n  giq_option(4, 6, 115, Moat03, 50);\nend\nelse begin\n  giq_option(4, 6, 119, Moat04, 50);\n  giq_option(4, 6, 118, Moat04, 50);\nend\ngiq_option(4, 6, 111, MoatCombat, 51);\ngiq_option(-3, 6, 102, Moat01, 50);\n","Moat01":"gsay_message(6, 107, 50);\nadd_timer_event(self_obj, game_ticks(10), 1);\ncall BottomReact;\n","Moat02":"gsay_message(6, 107, 50);\nadd_timer_event(self_obj, game_ticks(10 * 2), 1);\ncall BottomReact;\n","Moat03":"gsay_message(6, 116, 50);\nDestTile := 26299;\nset_local_var(5, 1);\n","Moat04":"gsay_message(6, 117, 50);\nDestTile := 26299;\n","Moat05":"gsay_message(6, 113, 50);\nDestTile := 26299;\nset_local_var(5, 1);\n","MoatCombat":"add_timer_event(self_obj, game_ticks(10), 1);\ncall BottomReact;\n","MoatEnd":"[]","get_reaction":"if (local_var(2) == 0) then begin\n  set_local_var(0, 50);\n  set_local_var(1, 2);\n  set_local_var(2, 1);\n  set_local_var(0, local_var(0) + (5 * get_critter_stat(dude_obj, 3)) - 25);\n  set_local_var(0, local_var(0) + (10 * has_trait(0, dude_obj, 10)));\n  if (has_trait(0, dude_obj, 39)) then begin\n    if (global_var(155) > 0) then begin\n      set_local_var(0, local_var(0) + global_var(155));\n    end\n    else begin\n      set_local_var(0, local_var(0) - global_var(155));\n    end\n  end\n  else begin\n    if (local_var(3) == 1) then begin\n      set_local_var(0, local_var(0) - global_var(155));\n    end\n    else begin\n      set_local_var(0, local_var(0) + global_var(155));\n    end\n  end\n  if (global_var(158) > 2) then begin\n    set_local_var(0, local_var(0) - 30);\n  end\n  if (((global_var(160) + global_var(159)) >= 25) and ((global_var(160) > (3 * global_var(159))) or (global_var(157) == 1))) then begin\n    set_local_var(0, local_var(0) + 20);\n  end\n  if (((global_var(160) + global_var(159)) >= 25) and ((global_var(159) > (2 * global_var(160))) or (global_var(156) == 1))) then begin\n    set_local_var(0, local_var(0) - 20);\n  end\n  call ReactToLevel;\nend\n","ReactToLevel":"if (local_var(0) <= 25) then begin\n  set_local_var(1, 1);\nend\nelse begin\n  if (local_var(0) <= 75) then begin\n    set_local_var(1, 2);\n  end\n  else begin\n    set_local_var(1, 3);\n  end\nend\n","LevelToReact":"if (local_var(1) == 1) then begin\n  set_local_var(0, random(1, 25));\nend\nelse begin\n  if (local_var(1) == 2) then begin\n    set_local_var(0, random(26, 75));\n  end\n  else begin\n    set_local_var(0, random(76, 100));\n  end\nend\n","UpReact":"set_local_var(0, local_var(0) + 10);\ncall ReactToLevel;\n","DownReact":"set_local_var(0, local_var(0) - 10);\ncall ReactToLevel;\n","BottomReact":"set_local_var(1, 1);\nset_local_var(0, 1);\n","TopReact":"set_local_var(0, 100);\nset_local_var(1, 3);\n","BigUpReact":"set_local_var(0, local_var(0) + 25);\ncall ReactToLevel;\n","BigDownReact":"set_local_var(0, local_var(0) - 25);\ncall ReactToLevel;\n","UpReactLevel":"set_local_var(1, local_var(1) + 1);\nif (local_var(1) > 3) then begin\n  set_local_var(1, 3);\nend\ncall LevelToReact;\n","DownReactLevel":"set_local_var(1, local_var(1) - 1);\nif (local_var(1) < 1) then begin\n  set_local_var(1, 1);\nend\ncall LevelToReact;\n","Goodbyes":"exit_line := message_str(634, random(100, 105));\n"}</script></body><script src="../jquery.js"></script><script src="../underscore.js"></script><script type="text/javascript">(function() {
  var downAt, hideCode, nodes, positionCode, showCode;

  $('svg').attr('unselectable', 'on').css({
    '-moz-user-select': '-moz-none',
    '-moz-user-select': 'none',
    '-o-user-select': 'none',
    '-khtml-user-select': 'none',
    '-webkit-user-select': 'none',
    '-ms-user-select': 'none',
    'user-select': 'none'
  }).bind('selectstart', function() {
    return false;
  });

  $('<div/>', {
    id: 'thecode'
  }).appendTo('body');

  $('#thecode').css({
    'pointer-events': 'none',
    background: 'white',
    padding: '1em',
    outline: 'solid gray 1px',
    'white-space': 'pre',
    position: 'fixed',
    left: 0,
    top: 0
  });

  showCode = function(code, x, y) {
    $('#thecode').show();
    $('#thecode').text(code);
    return positionCode(x, y);
  };

  hideCode = function() {
    return $('#thecode').hide();
  };

  positionCode = function(x, y) {
    return $('#thecode').css({
      left: x,
      top: y
    });
  };

  nodes = $('.node');

  _.each(nodes, function(node) {
    var nodeName;
    nodeName = $(node).find('title').text();
    $(node).mousemove(function(e) {
      return showCode(Codes[nodeName], e.clientX, e.clientY);
    });
    return $(node).mouseleave(function() {
      return hideCode();
    });
  });

  $('svg title').remove();

  downAt = null;

  $('svg').mousedown(function(e) {
    var x, y;
    x = e.pageX;
    y = e.pageY;
    return downAt = {
      x: x,
      y: y
    };
  });

  $('svg').mousemove(function(e) {
    var delta, x, y;
    if (!downAt) {
      return;
    }
    x = e.pageX;
    y = e.pageY;
    delta = {
      x: x - downAt.x,
      y: y - downAt.y
    };
    window.scrollBy(-delta.x, -delta.y);
    return false;
  });

  $('svg').mouseup(function(e) {
    return downAt = null;
  });

  $('svg').mouseleave(function(e) {
    return downAt = null;
  });

}).call(this);
</script></html>