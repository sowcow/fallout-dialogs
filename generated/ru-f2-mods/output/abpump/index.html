<!DOCTYPE html><html><head><title>abpump</title><meta charset="utf-8" /></head><body><svg width="1598pt" height="1239pt"
 viewBox="0.00 0.00 1598.00 1238.89" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 1234.89)">
<title>abpump</title>
<polygon fill="white" stroke="none" points="-4,4 -4,-1234.89 1594,-1234.89 1594,4 -4,4"/>
<!-- start -->
<g id="node1" class="node">
<title>start</title>
<ellipse fill="#ffffff" stroke="#000000" cx="27" cy="-1054.47" rx="27" ry="18"/>
</g>
<!-- map_enter_p_proc -->
<g id="node2" class="node">
<title>map_enter_p_proc</title>
<ellipse fill="#ffffff" stroke="#000000" cx="99" cy="-1054.47" rx="27" ry="18"/>
</g>
<!-- use_p_proc -->
<g id="node3" class="node">
<title>use_p_proc</title>
<ellipse fill="#ffffff" stroke="#000000" cx="171" cy="-1054.47" rx="27" ry="18"/>
</g>
<!-- Node001 -->
<g id="node4" class="node">
<title>Node001</title>
<ellipse fill="#ffffff" stroke="#000000" cx="171" cy="-762.2" rx="148.14" ry="78.84"/>
<text text-anchor="middle" x="171" y="-800.65" font-family="Times,serif" font-size="14.00">Вы открываете машину и</text>
<text text-anchor="middle" x="171" y="-783.4" font-family="Times,serif" font-size="14.00">заглядываете внутрь. Вы</text>
<text text-anchor="middle" x="171" y="-766.15" font-family="Times,serif" font-size="14.00">видите много ржавых</text>
<text text-anchor="middle" x="171" y="-748.9" font-family="Times,serif" font-size="14.00">шестеренок и двигателей.</text>
<text text-anchor="middle" x="171" y="-731.65" font-family="Times,serif" font-size="14.00">В одном из двигателей</text>
<text text-anchor="middle" x="171" y="-714.4" font-family="Times,serif" font-size="14.00">есть трещины.</text>
</g>
<!-- use_p_proc&#45;&gt;Node001 -->
<g id="edge1" class="edge">
<title>use_p_proc&#45;&gt;Node001</title>
<path fill="none" stroke="#555555" stroke-dasharray="1,5" d="M171,-1036.18C171,-1000.69 171,-917.45 171,-852.15"/>
<polygon fill="#555555" stroke="#555555" points="174.5,-852.43 171,-842.43 167.5,-852.43 174.5,-852.43"/>
</g>
<!-- Node999 -->
<g id="node10" class="node">
<title>Node999</title>
<ellipse fill="#ffffff" stroke="#000000" cx="171" cy="-18" rx="27" ry="18"/>
</g>
<!-- Node001&#45;&gt;Node999 -->
<g id="edge2" class="edge">
<title>Node001&#45;&gt;Node999</title>
<path fill="none" stroke="#990092" d="M166.15,-683.09C164.96,-660.45 163.85,-635.68 163.25,-612.86 157.18,-380.23 150.47,-321.62 163.25,-89.25 164.02,-75.23 165.65,-59.7 167.22,-46.81"/>
<polygon fill="#990092" stroke="#990092" points="170.77,-47.64 168.56,-37.28 163.83,-46.76 170.77,-47.64"/>
<text text-anchor="middle" x="219.88" y="-346.38" font-family="Times,serif" font-size="14.00" fill="#990092">Здесь все ясно.</text>
</g>
<!-- Node002 -->
<g id="node11" class="node">
<title>Node002</title>
<ellipse fill="#ffffff" stroke="#000000" cx="442" cy="-351.06" rx="157.68" ry="261.81"/>
<text text-anchor="middle" x="442" y="-518.88" font-family="Times,serif" font-size="14.00">При ближайшем</text>
<text text-anchor="middle" x="442" y="-501.63" font-family="Times,serif" font-size="14.00">рассмотрении вы</text>
<text text-anchor="middle" x="442" y="-484.38" font-family="Times,serif" font-size="14.00">замечаете, что причиной</text>
<text text-anchor="middle" x="442" y="-467.13" font-family="Times,serif" font-size="14.00">проблемы является не</text>
<text text-anchor="middle" x="442" y="-449.88" font-family="Times,serif" font-size="14.00">трещина, а разъем для</text>
<text text-anchor="middle" x="442" y="-432.63" font-family="Times,serif" font-size="14.00">подключения проводов. Он,</text>
<text text-anchor="middle" x="442" y="-415.38" font-family="Times,serif" font-size="14.00">кажется, прогорел за</text>
<text text-anchor="middle" x="442" y="-398.13" font-family="Times,serif" font-size="14.00">много лет использования.</text>
<text text-anchor="middle" x="442" y="-380.88" font-family="Times,serif" font-size="14.00">Похоже, нужен совершенно</text>
<text text-anchor="middle" x="442" y="-363.63" font-family="Times,serif" font-size="14.00">новый двигатель, а также</text>
<text text-anchor="middle" x="442" y="-346.38" font-family="Times,serif" font-size="14.00">новый набор проводов,</text>
<text text-anchor="middle" x="442" y="-329.13" font-family="Times,serif" font-size="14.00">чтобы заставить эту</text>
<text text-anchor="middle" x="442" y="-311.88" font-family="Times,serif" font-size="14.00">машину работать снова.</text>
<text text-anchor="middle" x="442" y="-294.63" font-family="Times,serif" font-size="14.00">&#45;&#45;&#45;</text>
<text text-anchor="middle" x="442" y="-277.38" font-family="Times,serif" font-size="14.00">Вы узнаете, что случилось</text>
<text text-anchor="middle" x="442" y="-260.13" font-family="Times,serif" font-size="14.00">с водяным насосом.</text>
<text text-anchor="middle" x="442" y="-242.88" font-family="Times,serif" font-size="14.00">&#45;&#45;&#45;</text>
<text text-anchor="middle" x="442" y="-225.63" font-family="Times,serif" font-size="14.00">Вы видите водяной насос.</text>
<text text-anchor="middle" x="442" y="-208.38" font-family="Times,serif" font-size="14.00">&#45;&#45;&#45;</text>
<text text-anchor="middle" x="442" y="-191.13" font-family="Times,serif" font-size="14.00">Вы видите старый водяной</text>
<text text-anchor="middle" x="442" y="-173.88" font-family="Times,serif" font-size="14.00">насос. Похоже, он сломан.</text>
</g>
<!-- Node001&#45;&gt;Node002 -->
<g id="edge3" class="edge">
<title>Node001&#45;&gt;Node002</title>
<path fill="none" stroke="#009973" d="M220.78,-687.76C236.87,-663.92 254.75,-637.3 271,-612.86 287.02,-588.76 303.81,-563.36 320.34,-538.24"/>
<polygon fill="#009973" stroke="#009973" points="323.6,-540.65 326.18,-530.38 317.75,-536.81 323.6,-540.65"/>
<text text-anchor="middle" x="327.38" y="-652.06" font-family="Times,serif" font-size="14.00" fill="#009973">Исследовать более</text>
<text text-anchor="middle" x="327.38" y="-634.81" font-family="Times,serif" font-size="14.00" fill="#009973">подробно.</text>
</g>
<!-- use_obj_on_p_proc -->
<g id="node5" class="node">
<title>use_obj_on_p_proc</title>
<ellipse fill="#ffffff" stroke="#000000" cx="373" cy="-1054.47" rx="156.62" ry="176.42"/>
<text text-anchor="middle" x="373" y="-1161.92" font-family="Times,serif" font-size="14.00">Голыми руками его не</text>
<text text-anchor="middle" x="373" y="-1144.67" font-family="Times,serif" font-size="14.00">починить. Возможно,</text>
<text text-anchor="middle" x="373" y="-1127.42" font-family="Times,serif" font-size="14.00">инструменты помогут в</text>
<text text-anchor="middle" x="373" y="-1110.17" font-family="Times,serif" font-size="14.00">установке этой части.</text>
<text text-anchor="middle" x="373" y="-1092.92" font-family="Times,serif" font-size="14.00">&#45;&#45;&#45;</text>
<text text-anchor="middle" x="373" y="-1075.67" font-family="Times,serif" font-size="14.00">Вы отремонтировали насос.</text>
<text text-anchor="middle" x="373" y="-1058.42" font-family="Times,serif" font-size="14.00">&#45;&#45;&#45;</text>
<text text-anchor="middle" x="373" y="-1041.17" font-family="Times,serif" font-size="14.00">Вы видите водяной насос.</text>
<text text-anchor="middle" x="373" y="-1023.92" font-family="Times,serif" font-size="14.00">&#45;&#45;&#45;</text>
<text text-anchor="middle" x="373" y="-1006.67" font-family="Times,serif" font-size="14.00">Вы видите старый водяной</text>
<text text-anchor="middle" x="373" y="-989.42" font-family="Times,serif" font-size="14.00">насос. Похоже, он сломан.</text>
<text text-anchor="middle" x="373" y="-972.17" font-family="Times,serif" font-size="14.00">&#45;&#45;&#45;</text>
<text text-anchor="middle" x="373" y="-954.92" font-family="Times,serif" font-size="14.00">Вы не смогли починить</text>
<text text-anchor="middle" x="373" y="-937.67" font-family="Times,serif" font-size="14.00">насос.</text>
</g>
<!-- use_skill_on_p_proc -->
<g id="node6" class="node">
<title>use_skill_on_p_proc</title>
<ellipse fill="#ffffff" stroke="#000000" cx="683" cy="-1054.47" rx="134.88" ry="91.04"/>
<text text-anchor="middle" x="683" y="-1101.55" font-family="Times,serif" font-size="14.00">Голыми руками его не</text>
<text text-anchor="middle" x="683" y="-1084.3" font-family="Times,serif" font-size="14.00">починить. Возможно,</text>
<text text-anchor="middle" x="683" y="-1067.05" font-family="Times,serif" font-size="14.00">инструменты помогут в</text>
<text text-anchor="middle" x="683" y="-1049.8" font-family="Times,serif" font-size="14.00">установке этой части.</text>
<text text-anchor="middle" x="683" y="-1032.55" font-family="Times,serif" font-size="14.00">&#45;&#45;&#45;</text>
<text text-anchor="middle" x="683" y="-1015.3" font-family="Times,serif" font-size="14.00">Насос теперь работает</text>
<text text-anchor="middle" x="683" y="-998.05" font-family="Times,serif" font-size="14.00">нормально.</text>
</g>
<!-- timed_event_p_proc -->
<g id="node7" class="node">
<title>timed_event_p_proc</title>
<ellipse fill="#ffffff" stroke="#000000" cx="863" cy="-1054.47" rx="27" ry="18"/>
</g>
<!-- look_at_p_proc -->
<g id="node8" class="node">
<title>look_at_p_proc</title>
<ellipse fill="#ffffff" stroke="#000000" cx="1053" cy="-1054.47" rx="144.86" ry="18"/>
<text text-anchor="middle" x="1053" y="-1049.8" font-family="Times,serif" font-size="14.00">Вы видите водяной насос.</text>
</g>
<!-- description_p_proc -->
<g id="node9" class="node">
<title>description_p_proc</title>
<ellipse fill="#ffffff" stroke="#000000" cx="1367" cy="-1054.47" rx="151.32" ry="66.64"/>
<text text-anchor="middle" x="1367" y="-1084.3" font-family="Times,serif" font-size="14.00">Вы видите старый водяной</text>
<text text-anchor="middle" x="1367" y="-1067.05" font-family="Times,serif" font-size="14.00">насос. Похоже, он сломан.</text>
<text text-anchor="middle" x="1367" y="-1049.8" font-family="Times,serif" font-size="14.00">&#45;&#45;&#45;</text>
<text text-anchor="middle" x="1367" y="-1032.55" font-family="Times,serif" font-size="14.00">Насос теперь работает</text>
<text text-anchor="middle" x="1367" y="-1015.3" font-family="Times,serif" font-size="14.00">нормально.</text>
</g>
<!-- Node002&#45;&gt;Node999 -->
<g id="edge4" class="edge">
<title>Node002&#45;&gt;Node999</title>
<path fill="none" stroke="#994700" d="M332.07,-163.15C313.21,-137.09 292.66,-111.61 271,-89.25 250.14,-67.71 221.83,-48.54 200.65,-35.69"/>
<polygon fill="#994700" stroke="#994700" points="202.86,-32.34 192.48,-30.24 199.29,-38.36 202.86,-32.34"/>
<text text-anchor="middle" x="277.88" y="-57.95" font-family="Times,serif" font-size="14.00" fill="#994700">Выйти.</text>
</g>
<!-- map_update_p_proc -->
<g id="node12" class="node">
<title>map_update_p_proc</title>
<ellipse fill="#ffffff" stroke="#000000" cx="1563" cy="-1054.47" rx="27" ry="18"/>
</g>
</g>
</svg>
<script>window.Codes = {"start":"[]","map_enter_p_proc":"if (global_var(710) >= 4) then begin\n  reg_anim_func(1, 1);\n  reg_anim_animate_forever(self_obj, 0);\n  reg_anim_func(3, 0);\nend\nadd_timer_event(self_obj, 1, 1);\n","use_p_proc":"if (global_var(710) == 1) then begin\n  start_gdialog(1327, self_obj, 4, 4294967295, 4294967295);\n  gsay_start;\n  call Node001;\n  gsay_end;\n  end_dialogue;\nend\n","use_obj_on_p_proc":"variable LVar0 := 0;\nvariable LVar1 := 0;\nvariable LVar2 := 0;\nLVar0 := obj_pid(obj_being_used_with);\nif ((LVar0 == 75) and obj_is_carrying_obj_pid(dude_obj, 89)) then begin\n  script_overrides;\n  LVar1 := roll_vs_skill(source_obj, 13, 4294967276);\nend\nelse begin\n  if ((LVar0 == 308) and obj_is_carrying_obj_pid(dude_obj, 89)) then begin\n    script_overrides;\n    LVar1 := roll_vs_skill(source_obj, 13, 4294967286);\n  end\n  else begin\n    if (LVar0 == 89) then begin\n      script_overrides;\n      display_msg(message_str(1327, 103));\n    end\n  end\nend\nif ((global_var(710) < 4) and obj_is_carrying_obj_pid(dude_obj, 89)) then begin\n  script_overrides;\n  if (is_success(LVar1)) then begin\n    display_msg(message_str(1327, 104));\n    set_global_var(710, 4);\n    give_exp_points(800);\n    display_msg(message_str(14, 100) + 800 + message_str(14, 101));\n    set_global_var(63, global_var(63) + 5);\n    LVar2 := obj_carrying_pid_obj(dude_obj, 89);\n    rm_obj_from_inven(dude_obj, LVar2);\n    destroy_object(LVar2);\n  end\n  else begin\n    display_msg(message_str(1327, 105));\n  end\nend\n","use_skill_on_p_proc":"if (action_being_used == 13) then begin\n  script_overrides;\n  if (global_var(710) < 4) then begin\n    display_msg(message_str(1327, 103));\n  end\n  else begin\n    display_msg(message_str(1327, 102));\n  end\nend\n","timed_event_p_proc":"if (fixed_param == 1) then begin\n  if ((global_var(710) >= 4) and (anim_busy(self_obj) == 0) and (combat_is_initialized == 0)) then begin\n    reg_anim_func(1, 1);\n    reg_anim_animate_forever(self_obj, 0);\n    reg_anim_func(3, 0);\n  end\n  add_timer_event(self_obj, 1, 1);\nend\n","look_at_p_proc":"script_overrides;\ndisplay_msg(message_str(1327, 100));\n","description_p_proc":"script_overrides;\nif (global_var(710) < 4) then begin\n  display_msg(message_str(1327, 101));\nend\nelse begin\n  display_msg(message_str(1327, 102));\nend\n","Node001":"gsay_reply(1327, 200);\ngiq_option(4, 1327, 201, Node999, 50);\ngiq_option(4, 1327, 202, Node002, 50);\n","Node002":"if (global_var(710) < 2) then begin\n  display_msg(message_str(1327, 106));\n  give_exp_points(100);\n  display_msg(message_str(14, 100) + 100 + message_str(14, 101));\n  set_global_var(710, 2);\nend\ngsay_reply(1327, 203);\ngiq_option(4, 1327, 204, Node999, 50);\n","Node999":"[]","map_update_p_proc":"if ((combat_is_initialized == 0) and (global_var(710) >= 4)) then begin\n  reg_anim_func(1, 1);\n  reg_anim_animate_forever(self_obj, 0);\n  reg_anim_func(3, 0);\nend\n"}</script></body><script src="../jquery.js"></script><script src="../underscore.js"></script><script>(function() {
  var downAt, hideCode, nodes, positionCode, showCode;

  $('svg').attr('unselectable', 'on').css({
    '-moz-user-select': '-moz-none',
    '-moz-user-select': 'none',
    '-o-user-select': 'none',
    '-khtml-user-select': 'none',
    '-webkit-user-select': 'none',
    '-ms-user-select': 'none',
    'user-select': 'none'
  }).bind('selectstart', function() {
    return false;
  });

  $('<div/>', {
    id: 'thecode'
  }).appendTo('body');

  $('#thecode').css({
    'pointer-events': 'none',
    background: 'white',
    padding: '1em',
    outline: 'solid gray 1px',
    'white-space': 'pre',
    position: 'fixed',
    left: 0,
    top: 0
  });

  showCode = function(name, code, x, y) {
    $('#thecode').show();
    $('#thecode').text("# " + name + "\n" + code);
    return positionCode(x, y);
  };

  hideCode = function() {
    return $('#thecode').hide();
  };

  positionCode = function(x, y) {
    return $('#thecode').css({
      left: x,
      top: y
    });
  };

  nodes = $('.node');

  _.each(nodes, function(node) {
    var nodeName;
    nodeName = $(node).find('title').text();
    $(node).mousemove(function(e) {
      return showCode(nodeName, Codes[nodeName], e.clientX, e.clientY);
    });
    return $(node).mouseleave(function() {
      return hideCode();
    });
  });

  $('svg title').remove();

  downAt = null;

  $('svg').mousedown(function(e) {
    var x, y;
    x = e.pageX;
    y = e.pageY;
    return downAt = {
      x: x,
      y: y
    };
  });

  $('svg').mousemove(function(e) {
    var delta, x, y;
    if (!downAt) {
      return;
    }
    x = e.pageX;
    y = e.pageY;
    delta = {
      x: x - downAt.x,
      y: y - downAt.y
    };
    window.scrollBy(-delta.x, -delta.y);
    return false;
  });

  $('svg').mouseup(function(e) {
    return downAt = null;
  });

  $('svg').mouseleave(function(e) {
    return downAt = null;
  });

}).call(this);
</script></html>