<!DOCTYPE html><html><head><title>hisafe</title><meta charset="utf-8" /></head><body><svg width="1558pt" height="555pt"
 viewBox="0.00 0.00 1558.00 554.53" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 550.53)">
<title>hisafe</title>
<polygon fill="white" stroke="none" points="-4,4 -4,-550.53 1554,-550.53 1554,4 -4,4"/>
<!-- start -->
<g id="node1" class="node">
<title>start</title>
<ellipse fill="#ffffff" stroke="#000000" cx="27" cy="-479.89" rx="27" ry="18"/>
</g>
<!-- use_p_proc -->
<g id="node2" class="node">
<title>use_p_proc</title>
<ellipse fill="#ffffff" stroke="#000000" cx="199" cy="-479.89" rx="127.49" ry="18"/>
<text text-anchor="middle" x="199" y="-475.21" font-family="Times,serif" font-size="14.00">Сейф надежно заперт.</text>
</g>
<!-- Tamper_Proc2 -->
<g id="node3" class="node">
<title>Tamper_Proc2</title>
<ellipse fill="#ffffff" stroke="#000000" cx="336" cy="-188.62" rx="27" ry="18"/>
</g>
<!-- use_p_proc&#45;&gt;Tamper_Proc2 -->
<g id="edge1" class="edge">
<title>use_p_proc&#45;&gt;Tamper_Proc2</title>
<path fill="none" stroke="#555555" stroke-dasharray="1,5" d="M207.16,-461.66C230.21,-412.99 295.91,-274.27 323.53,-215.95"/>
<polygon fill="#555555" stroke="#555555" points="327.11,-217.57 328.22,-207.04 320.78,-214.58 327.11,-217.57"/>
</g>
<!-- pickup_p_proc -->
<g id="node4" class="node">
<title>pickup_p_proc</title>
<ellipse fill="#ffffff" stroke="#000000" cx="472" cy="-479.89" rx="127.49" ry="18"/>
<text text-anchor="middle" x="472" y="-475.21" font-family="Times,serif" font-size="14.00">Сейф надежно заперт.</text>
</g>
<!-- pickup_p_proc&#45;&gt;Tamper_Proc2 -->
<g id="edge2" class="edge">
<title>pickup_p_proc&#45;&gt;Tamper_Proc2</title>
<path fill="none" stroke="#555555" stroke-dasharray="1,5" d="M463.9,-461.66C441.02,-412.99 375.8,-274.27 348.38,-215.95"/>
<polygon fill="#555555" stroke="#555555" points="351.14,-214.6 343.72,-207.04 344.81,-217.58 351.14,-214.6"/>
</g>
<!-- map_enter_p_proc -->
<g id="node5" class="node">
<title>map_enter_p_proc</title>
<ellipse fill="#ffffff" stroke="#000000" cx="644" cy="-479.89" rx="27" ry="18"/>
</g>
<!-- look_at_p_proc -->
<g id="node6" class="node">
<title>look_at_p_proc</title>
<ellipse fill="#ffffff" stroke="#000000" cx="813" cy="-479.89" rx="123.74" ry="30.05"/>
<text text-anchor="middle" x="813" y="-483.84" font-family="Times,serif" font-size="14.00">Вы видите большой</text>
<text text-anchor="middle" x="813" y="-466.59" font-family="Times,serif" font-size="14.00">металлический сейф.</text>
</g>
<!-- description_p_proc -->
<g id="node7" class="node">
<title>description_p_proc</title>
<ellipse fill="#ffffff" stroke="#000000" cx="1097" cy="-479.89" rx="141.77" ry="66.64"/>
<text text-anchor="middle" x="1097" y="-509.71" font-family="Times,serif" font-size="14.00">Это очень крепкий сейф.</text>
<text text-anchor="middle" x="1097" y="-492.46" font-family="Times,serif" font-size="14.00">Он заперт.</text>
<text text-anchor="middle" x="1097" y="-475.21" font-family="Times,serif" font-size="14.00">&#45;&#45;&#45;</text>
<text text-anchor="middle" x="1097" y="-457.96" font-family="Times,serif" font-size="14.00">Это очень крепкий сейф.</text>
<text text-anchor="middle" x="1097" y="-440.71" font-family="Times,serif" font-size="14.00">Он не заперт.</text>
</g>
<!-- lock_safe -->
<g id="node8" class="node">
<title>lock_safe</title>
<ellipse fill="#ffffff" stroke="#000000" cx="1007" cy="-188.62" rx="136.44" ry="18"/>
<text text-anchor="middle" x="1007" y="-183.95" font-family="Times,serif" font-size="14.00">Вы ловко заперли сейф.</text>
</g>
<!-- unlock_safe -->
<g id="node9" class="node">
<title>unlock_safe</title>
<ellipse fill="#ffffff" stroke="#000000" cx="1320" cy="-188.62" rx="158.22" ry="188.62"/>
<text text-anchor="middle" x="1320" y="-304.7" font-family="Times,serif" font-size="14.00">Вы ловко вскрываете замок</text>
<text text-anchor="middle" x="1320" y="-287.45" font-family="Times,serif" font-size="14.00">на сейфе.</text>
<text text-anchor="middle" x="1320" y="-270.2" font-family="Times,serif" font-size="14.00">&#45;&#45;&#45;</text>
<text text-anchor="middle" x="1320" y="-252.95" font-family="Times,serif" font-size="14.00">Вы видите большой</text>
<text text-anchor="middle" x="1320" y="-235.7" font-family="Times,serif" font-size="14.00">металлический сейф.</text>
<text text-anchor="middle" x="1320" y="-218.45" font-family="Times,serif" font-size="14.00">&#45;&#45;&#45;</text>
<text text-anchor="middle" x="1320" y="-201.2" font-family="Times,serif" font-size="14.00">Это очень крепкий сейф.</text>
<text text-anchor="middle" x="1320" y="-183.95" font-family="Times,serif" font-size="14.00">Он заперт.</text>
<text text-anchor="middle" x="1320" y="-166.7" font-family="Times,serif" font-size="14.00">&#45;&#45;&#45;</text>
<text text-anchor="middle" x="1320" y="-149.45" font-family="Times,serif" font-size="14.00">Из&#45;за ваших плохих</text>
<text text-anchor="middle" x="1320" y="-132.2" font-family="Times,serif" font-size="14.00">навыков замок на этом</text>
<text text-anchor="middle" x="1320" y="-114.95" font-family="Times,serif" font-size="14.00">сейфе заклинило.</text>
<text text-anchor="middle" x="1320" y="-97.7" font-family="Times,serif" font-size="14.00">&#45;&#45;&#45;</text>
<text text-anchor="middle" x="1320" y="-80.45" font-family="Times,serif" font-size="14.00">Вы не в состоянии вскрыть</text>
<text text-anchor="middle" x="1320" y="-63.2" font-family="Times,serif" font-size="14.00">замок на этом сейфе.</text>
</g>
<!-- use_skill_on_p_proc -->
<g id="node10" class="node">
<title>use_skill_on_p_proc</title>
<ellipse fill="#ffffff" stroke="#000000" cx="1356" cy="-479.89" rx="27" ry="18"/>
</g>
<!-- use_skill_on_p_proc&#45;&gt;lock_safe -->
<g id="edge5" class="edge">
<title>use_skill_on_p_proc&#45;&gt;lock_safe</title>
<path fill="none" stroke="#555555" stroke-dasharray="1,5" d="M1351.15,-461.92C1345.94,-446.81 1336.15,-425.29 1320,-413.24 1259.13,-367.85 1217.29,-417.63 1153,-377.24 1088.89,-336.96 1041.69,-258.06 1020.08,-216.58"/>
<polygon fill="#555555" stroke="#555555" points="1022.8,-215.21 1015.15,-207.88 1016.57,-218.38 1022.8,-215.21"/>
</g>
<!-- use_skill_on_p_proc&#45;&gt;unlock_safe -->
<g id="edge4" class="edge">
<title>use_skill_on_p_proc&#45;&gt;unlock_safe</title>
<path fill="none" stroke="#555555" stroke-dasharray="1,5" d="M1353.86,-461.66C1351.77,-444.88 1348.35,-417.41 1344.47,-386.22"/>
<polygon fill="#555555" stroke="#555555" points="1347.84,-386 1343.13,-376.5 1340.9,-386.86 1347.84,-386"/>
</g>
<!-- Tamper_Proc -->
<g id="node11" class="node">
<title>Tamper_Proc</title>
<ellipse fill="#ffffff" stroke="#000000" cx="1523" cy="-188.62" rx="27" ry="18"/>
</g>
<!-- use_skill_on_p_proc&#45;&gt;Tamper_Proc -->
<g id="edge3" class="edge">
<title>use_skill_on_p_proc&#45;&gt;Tamper_Proc</title>
<path fill="none" stroke="#555555" stroke-dasharray="1,5" d="M1377.61,-468.49C1407.34,-453 1460.21,-420.92 1487,-377.24 1517.65,-327.28 1523.14,-256.89 1523.6,-218.08"/>
<polygon fill="#555555" stroke="#555555" points="1527.1,-218.11 1523.6,-208.11 1520.1,-218.11 1527.1,-218.11"/>
</g>
<!-- use_obj_on_p_proc -->
<g id="node12" class="node">
<title>use_obj_on_p_proc</title>
<ellipse fill="#ffffff" stroke="#000000" cx="1284" cy="-479.89" rx="27" ry="18"/>
</g>
<!-- use_obj_on_p_proc&#45;&gt;lock_safe -->
<g id="edge8" class="edge">
<title>use_obj_on_p_proc&#45;&gt;lock_safe</title>
<path fill="none" stroke="#555555" stroke-dasharray="1,5" d="M1272.14,-463.32C1264.58,-448.56 1254.5,-426.72 1239,-413.24 1204.93,-383.61 1180.33,-404.06 1144,-377.24 1083.8,-332.8 1035.64,-257.21 1015.86,-216.87"/>
<polygon fill="#555555" stroke="#555555" points="1018.64,-215.54 1011.25,-207.95 1012.29,-218.5 1018.64,-215.54"/>
</g>
<!-- use_obj_on_p_proc&#45;&gt;lock_safe -->
<g id="edge10" class="edge">
<title>use_obj_on_p_proc&#45;&gt;lock_safe</title>
<path fill="none" stroke="#555555" stroke-dasharray="1,5" d="M1285.5,-461.61C1281.81,-446.92 1271.91,-426.2 1257,-413.24 1222.93,-383.61 1198.33,-404.06 1162,-377.24 1101.41,-332.52 1053.03,-256.24 1026.97,-216.1"/>
<polygon fill="#555555" stroke="#555555" points="1029.38,-214.41 1020.98,-207.95 1023.52,-218.24 1029.38,-214.41"/>
</g>
<!-- use_obj_on_p_proc&#45;&gt;unlock_safe -->
<g id="edge7" class="edge">
<title>use_obj_on_p_proc&#45;&gt;unlock_safe</title>
<path fill="none" stroke="#555555" stroke-dasharray="1,5" d="M1282.73,-461.66C1283.38,-444.67 1285.87,-416.69 1289.32,-384.99"/>
<polygon fill="#555555" stroke="#555555" points="1292.9,-385.44 1290.52,-375.11 1285.94,-384.67 1292.9,-385.44"/>
</g>
<!-- use_obj_on_p_proc&#45;&gt;unlock_safe -->
<g id="edge9" class="edge">
<title>use_obj_on_p_proc&#45;&gt;unlock_safe</title>
<path fill="none" stroke="#555555" stroke-dasharray="1,5" d="M1289.47,-462.08C1292.99,-445.51 1297.37,-418.19 1301.76,-387.1"/>
<polygon fill="#555555" stroke="#555555" points="1305.33,-387.81 1303.24,-377.42 1298.4,-386.85 1305.33,-387.81"/>
</g>
<!-- use_obj_on_p_proc&#45;&gt;Tamper_Proc -->
<g id="edge6" class="edge">
<title>use_obj_on_p_proc&#45;&gt;Tamper_Proc</title>
<path fill="none" stroke="#555555" stroke-dasharray="1,5" d="M1288.85,-461.92C1294.06,-446.81 1303.85,-425.29 1320,-413.24 1380.87,-367.85 1433.93,-431.54 1487,-377.24 1528.87,-334.41 1529.58,-258.63 1526.37,-217.71"/>
<polygon fill="#555555" stroke="#555555" points="1529.77,-217.55 1525.36,-207.92 1522.8,-218.2 1529.77,-217.55"/>
</g>
</g>
</svg>
<script>window.Codes = {"start":"if (not(obj_is_open(self_obj))) then begin\n  set_local_var(2, 0);\nend\n","use_p_proc":"if (has_trait(1, guard2_obj, 666)) then begin\n  call Tamper_Proc2;\nend\nelse begin\n  if (local_var(2) == 0) then begin\n    script_overrides;\n    display_msg(message_str(1381, 200));\n    play_sfx(\"snd_locked\");\n  end\nend\n","pickup_p_proc":"if (has_trait(1, guard2_obj, 666)) then begin\n  call Tamper_Proc2;\nend\nelse begin\n  if (local_var(2) == 0) then begin\n    script_overrides;\n    display_msg(message_str(1381, 200));\n  end\nend\n","map_enter_p_proc":"variable LVar0 := 0;\nif (metarule(14, 0)) then begin\n  LVar0 := create_object_sid(41, 0, 0, 4294967295);\n  add_mult_objs_to_inven(self_obj, LVar0, random(3000, 5000));\n  LVar0 := create_object_sid(119, 0, 0, 4294967295);\n  add_mult_objs_to_inven(self_obj, LVar0, random(1, 3));\n  LVar0 := create_object_sid(546, 0, 0, 4294967295);\n  add_mult_objs_to_inven(self_obj, LVar0, random(1, 2));\n  LVar0 := create_object_sid(547, 0, 0, 4294967295);\n  add_mult_objs_to_inven(self_obj, LVar0, random(0, 2));\nend\n","look_at_p_proc":"script_overrides;\ndisplay_msg(message_str(1381, 100));\n","description_p_proc":"script_overrides;\nif (local_var(2) == 0) then begin\n  display_msg(message_str(1381, 101));\nend\nelse begin\n  display_msg(message_str(1381, 102));\nend\n","lock_safe":"script_overrides;\ngame_time_advance(600);\nset_local_var(2, 0);\nif (source_obj == dude_obj) then begin\n  display_msg(message_str(1381, 189));\nend\n","unlock_safe":"script_overrides;\ngame_time_advance(600);\nif (is_success(Locks_Roll)) then begin\n  set_local_var(2, 1);\n  if (source_obj == dude_obj) then begin\n    display_msg(message_str(1381, 170));\n  end\n  if (local_var(0) == 0) then begin\n    set_local_var(0, 1);\n    give_exp_points(100);\n    display_msg(message_str(14, 100) + 100 + message_str(14, 101));\n  end\nend\nelse begin\n  if (is_critical(Locks_Roll)) then begin\n    jam_lock(self_obj);\n    if (source_obj == dude_obj) then begin\n      display_msg(message_str(1381, 171));\n    end\n  end\n  else begin\n    if (source_obj == dude_obj) then begin\n      display_msg(message_str(1381, 172));\n    end\n  end\nend\n","use_skill_on_p_proc":"variable LVar0 := 0;\nscript_overrides;\nLocks_Roll := roll_vs_skill(source_obj, 9, 4294967196);\nif (has_trait(1, guard2_obj, 666)) then begin\n  object_tamper := 1;\n  call Tamper_Proc;\nend\nelse begin\n  LVar0 := action_being_used;\n  if (LVar0 == 9) then begin\n    if (local_var(2) == 0) then begin\n      call unlock_safe;\n    end\n    else begin\n      call lock_safe;\n    end\n  end\nend\n","use_obj_on_p_proc":"variable LVar0 := 0;\nscript_overrides;\nif (has_trait(1, guard2_obj, 666)) then begin\n  object_tamper := 1;\n  call Tamper_Proc;\nend\nelse begin\n  LVar0 := obj_pid(obj_being_used_with);\n  if (LVar0 == 77) then begin\n    script_overrides;\n    if (local_var(2) == 0) then begin\n      Locks_Roll := roll_vs_skill(source_obj, 9, 4294967216);\n      call unlock_safe;\n    end\n    else begin\n      call lock_safe;\n    end\n  end\n  else begin\n    if (LVar0 == 411) then begin\n      script_overrides;\n      if (local_var(2) == 0) then begin\n        Locks_Roll := roll_vs_skill(source_obj, 9, 4294967236);\n        call unlock_safe;\n      end\n      else begin\n        call lock_safe;\n      end\n    end\n  end\nend\n","Tamper_Proc":"script_overrides;\nadd_timer_event(guard2_obj, 5, 5);\n","Tamper_Proc2":"script_overrides;\nobject_tamper := 2;\nadd_timer_event(guard2_obj, 5, 5);\n"}</script></body><script src="../jquery.js"></script><script src="../underscore.js"></script><script>(function() {
  var downAt, hideCode, nodes, positionCode, showCode;

  $('svg').attr('unselectable', 'on').css({
    '-moz-user-select': '-moz-none',
    '-moz-user-select': 'none',
    '-o-user-select': 'none',
    '-khtml-user-select': 'none',
    '-webkit-user-select': 'none',
    '-ms-user-select': 'none',
    'user-select': 'none'
  }).bind('selectstart', function() {
    return false;
  });

  $('<div/>', {
    id: 'thecode'
  }).appendTo('body');

  $('#thecode').css({
    'pointer-events': 'none',
    background: 'white',
    padding: '1em',
    outline: 'solid gray 1px',
    'white-space': 'pre',
    position: 'fixed',
    left: 0,
    top: 0
  });

  showCode = function(name, code, x, y) {
    $('#thecode').show();
    $('#thecode').text("# " + name + "\n" + code);
    return positionCode(x, y);
  };

  hideCode = function() {
    return $('#thecode').hide();
  };

  positionCode = function(x, y) {
    return $('#thecode').css({
      left: x,
      top: y
    });
  };

  nodes = $('.node');

  _.each(nodes, function(node) {
    var nodeName;
    nodeName = $(node).find('title').text();
    $(node).mousemove(function(e) {
      return showCode(nodeName, Codes[nodeName], e.clientX, e.clientY);
    });
    return $(node).mouseleave(function() {
      return hideCode();
    });
  });

  $('svg title').remove();

  downAt = null;

  $('svg').mousedown(function(e) {
    var x, y;
    x = e.pageX;
    y = e.pageY;
    return downAt = {
      x: x,
      y: y
    };
  });

  $('svg').mousemove(function(e) {
    var delta, x, y;
    if (!downAt) {
      return;
    }
    x = e.pageX;
    y = e.pageY;
    delta = {
      x: x - downAt.x,
      y: y - downAt.y
    };
    window.scrollBy(-delta.x, -delta.y);
    return false;
  });

  $('svg').mouseup(function(e) {
    return downAt = null;
  });

  $('svg').mouseleave(function(e) {
    return downAt = null;
  });

}).call(this);
</script></html>