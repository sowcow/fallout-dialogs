<!DOCTYPE html><html><head><title>tribesp2</title><meta charset="utf-8" /></head><body><svg width="551pt" height="589pt"
 viewBox="0.00 0.00 550.63 588.85" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 584.85)">
<title>tribesp2</title>
<polygon fill="white" stroke="none" points="-4,4 -4,-584.85 546.63,-584.85 546.63,4 -4,4"/>
<!-- start -->
<g id="node1" class="node">
<title>start</title>
<ellipse fill="#ffffff" stroke="#000000" cx="89.93" cy="-526.4" rx="27" ry="18"/>
</g>
<!-- spatial_p_proc -->
<g id="node2" class="node">
<title>spatial_p_proc</title>
<ellipse fill="#ffffff" stroke="#000000" cx="161.93" cy="-526.4" rx="27" ry="18"/>
</g>
<!-- Node004 -->
<g id="node3" class="node">
<title>Node004</title>
<ellipse fill="#ffffff" stroke="#000000" cx="161.93" cy="-270.73" rx="161.93" ry="164.23"/>
<text text-anchor="middle" x="161.93" y="-369.55" font-family="Times,serif" font-size="14.00">Как только ваши глаза</text>
<text text-anchor="middle" x="161.93" y="-352.3" font-family="Times,serif" font-size="14.00">привыкают к темноте</text>
<text text-anchor="middle" x="161.93" y="-335.05" font-family="Times,serif" font-size="14.00">пещеры, вы видите</text>
<text text-anchor="middle" x="161.93" y="-317.8" font-family="Times,serif" font-size="14.00">последствия обвала.</text>
<text text-anchor="middle" x="161.93" y="-300.55" font-family="Times,serif" font-size="14.00">Беззащитный воин лежит на</text>
<text text-anchor="middle" x="161.93" y="-283.3" font-family="Times,serif" font-size="14.00">земле, пытаясь освободить</text>
<text text-anchor="middle" x="161.93" y="-266.05" font-family="Times,serif" font-size="14.00">свою ногу из&#45;под большого</text>
<text text-anchor="middle" x="161.93" y="-248.8" font-family="Times,serif" font-size="14.00">камня, в то время как</text>
<text text-anchor="middle" x="161.93" y="-231.55" font-family="Times,serif" font-size="14.00">золотой гекко</text>
<text text-anchor="middle" x="161.93" y="-214.3" font-family="Times,serif" font-size="14.00">стремительно приближается</text>
<text text-anchor="middle" x="161.93" y="-197.05" font-family="Times,serif" font-size="14.00">к нему. Тело другого</text>
<text text-anchor="middle" x="161.93" y="-179.8" font-family="Times,serif" font-size="14.00">воина неподвижно лежит</text>
<text text-anchor="middle" x="161.93" y="-162.55" font-family="Times,serif" font-size="14.00">рядом.</text>
</g>
<!-- spatial_p_proc&#45;&gt;Node004 -->
<g id="edge1" class="edge">
<title>spatial_p_proc&#45;&gt;Node004</title>
<path fill="none" stroke="#555555" stroke-dasharray="1,5" d="M158.33,-508.36C157.01,-493.86 156.11,-471.38 155.61,-445.92"/>
<polygon fill="#555555" stroke="#555555" points="159.1,-446.18 155.43,-436.24 152.1,-446.3 159.1,-446.18"/>
</g>
<!-- spatial_p_proc&#45;&gt;Node004 -->
<g id="edge2" class="edge">
<title>spatial_p_proc&#45;&gt;Node004</title>
<path fill="none" stroke="#555555" stroke-dasharray="1,5" d="M165.52,-508.36C166.84,-493.86 167.75,-471.38 168.24,-445.92"/>
<polygon fill="#555555" stroke="#555555" points="171.75,-446.3 168.42,-436.24 164.75,-446.18 171.75,-446.3"/>
</g>
<!-- Node006 -->
<g id="node5" class="node">
<title>Node006</title>
<ellipse fill="#ffffff" stroke="#000000" cx="55.93" cy="-18" rx="27" ry="18"/>
</g>
<!-- Node004&#45;&gt;Node006 -->
<g id="edge3" class="edge">
<title>Node004&#45;&gt;Node006</title>
<path fill="none" stroke="#00997f" d="M73.51,-132.88C66.96,-118.32 61.31,-103.38 57.18,-88.5 53.49,-75.24 52.84,-59.99 53.26,-47.17"/>
<polygon fill="#00997f" stroke="#00997f" points="56.81,-47.38 53.88,-37.2 49.82,-46.98 56.81,-47.38"/>
<text text-anchor="middle" x="152.8" y="-75.2" font-family="Times,serif" font-size="14.00" fill="#00997f">Броситься в бой и</text>
<text text-anchor="middle" x="152.8" y="-57.95" font-family="Times,serif" font-size="14.00" fill="#00997f">попытаться спасти воина.</text>
</g>
<!-- Node005 -->
<g id="node6" class="node">
<title>Node005</title>
<ellipse fill="#ffffff" stroke="#000000" cx="268.93" cy="-18" rx="27" ry="18"/>
</g>
<!-- Node004&#45;&gt;Node005 -->
<g id="edge4" class="edge">
<title>Node004&#45;&gt;Node005</title>
<path fill="none" stroke="#995200" d="M232.91,-122.57C237.83,-111.12 242.56,-99.67 246.93,-88.5 252.24,-74.92 257.22,-59.48 261.1,-46.61"/>
<polygon fill="#995200" stroke="#995200" points="264.74,-47.65 264.21,-37.07 258.02,-45.67 264.74,-47.65"/>
<text text-anchor="middle" x="342.3" y="-75.2" font-family="Times,serif" font-size="14.00" fill="#995200">Стоять и смотреть, что</text>
<text text-anchor="middle" x="342.3" y="-57.95" font-family="Times,serif" font-size="14.00" fill="#995200">произойдет.</text>
</g>
<!-- map_update_p_proc -->
<g id="node4" class="node">
<title>map_update_p_proc</title>
<ellipse fill="#ffffff" stroke="#000000" cx="233.93" cy="-526.4" rx="27" ry="18"/>
</g>
<!-- timed_event_p_proc -->
<g id="node7" class="node">
<title>timed_event_p_proc</title>
<ellipse fill="#ffffff" stroke="#000000" cx="410.93" cy="-526.4" rx="131.7" ry="54.45"/>
<text text-anchor="middle" x="410.93" y="-547.6" font-family="Times,serif" font-size="14.00">Если я умру, то я умру</text>
<text text-anchor="middle" x="410.93" y="-530.35" font-family="Times,serif" font-size="14.00">как истинный воин.</text>
<text text-anchor="middle" x="410.93" y="-513.1" font-family="Times,serif" font-size="14.00">&#45;&#45;&#45;</text>
<text text-anchor="middle" x="410.93" y="-495.85" font-family="Times,serif" font-size="14.00">Ааай!</text>
</g>
</g>
</svg>
<script>window.Codes = {"start":"[]","spatial_p_proc":"if (not(global_var(714) == 1)) then begin\n  if (source_obj == dude_obj) then begin\n    if (local_var(4) == 0) then begin\n      set_local_var(4, 1);\n      if (in_dialog == 0) then begin\n        in_dialog := 1;\n        start_gdialog(1357, self_obj, 4, 4294967295, 4294967295);\n        gsay_start;\n        call Node004;\n        gsay_end;\n        end_dialogue;\n        in_dialog := 0;\n      end\n      else begin\n        call Node004;\n      end\n    end\n  end\nend\n","map_update_p_proc":"[]","Node004":"gsay_reply(1357, 100);\ngiq_option(4, 1357, 101, Node006, 50);\ngiq_option(4, 1357, 102, Node005, 50);\n","Node005":"add_timer_event(self_obj, game_ticks(0), 1);\nset_global_var(0, global_var(0) - 10);\nset_global_var(37, 0);\nset_global_var(38, 0);\nset_global_var(39, 0);\nset_global_var(40, 0);\nset_global_var(41, 0);\nset_global_var(42, 0);\nset_global_var(43, 0);\nset_global_var(44, 0);\nset_global_var(45, 0);\ntmp_gen_rep := global_var(0);\nif (has_trait(0, dude_obj, 95)) then begin\n  tmp_gen_rep := global_var(0) * 2;\nend\nif (tmp_gen_rep >= 1000) then begin\n  set_global_var(37, 1);\nend\nelse begin\n  if (tmp_gen_rep >= 750) then begin\n    set_global_var(38, 1);\n  end\n  else begin\n    if (tmp_gen_rep >= 500) then begin\n      set_global_var(39, 1);\n    end\n    else begin\n      if (tmp_gen_rep >= 250) then begin\n        set_global_var(40, 1);\n      end\n      else begin\n        if (tmp_gen_rep > 4294967046) then begin\n          set_global_var(41, 1);\n        end\n        else begin\n          if (tmp_gen_rep > 4294966796) then begin\n            set_global_var(42, 1);\n          end\n          else begin\n            if (tmp_gen_rep > 4294966546) then begin\n              set_global_var(43, 1);\n            end\n            else begin\n              if (tmp_gen_rep > 4294966296) then begin\n                set_global_var(44, 1);\n              end\n              else begin\n                set_global_var(45, 1);\n              end\n            end\n          end\n        end\n      end\n    end\n  end\nend\n","Node006":"attack_setup(GECKO_obj, dude_obj);\n","timed_event_p_proc":"if (fixed_param == 1) then begin\n  debug_msg(\"tribesp2\" + \": \" + \"ECKAGA1: tile_set_center(19903): \" + metarule3(108, 13897, 0, 0) + \"\\n\");\n  add_timer_event(self_obj, game_ticks(0), 2);\nend\nelse begin\n  if (fixed_param == 2) then begin\n    game_ui_disable;\n    add_timer_event(self_obj, game_ticks(1), 3);\n  end\n  else begin\n    if (fixed_param == 3) then begin\n      float_msg(WARRIOR_obj, message_str(1357, 200), 8);\n      add_timer_event(self_obj, game_ticks(5), 4);\n    end\n    else begin\n      if (fixed_param == 4) then begin\n        float_msg(WARRIOR_obj, message_str(1357, 201), 8);\n        add_timer_event(self_obj, game_ticks(1), 5);\n      end\n      else begin\n        if (fixed_param == 5) then begin\n          attack_setup(GECKO_obj, WARRIOR_obj);\n        end\n      end\n    end\n  end\nend\n"}</script></body><script src="../jquery.js"></script><script src="../underscore.js"></script><script>(function() {
  var downAt, hideCode, nodes, positionCode, showCode;

  $('svg').attr('unselectable', 'on').css({
    '-moz-user-select': '-moz-none',
    '-moz-user-select': 'none',
    '-o-user-select': 'none',
    '-khtml-user-select': 'none',
    '-webkit-user-select': 'none',
    '-ms-user-select': 'none',
    'user-select': 'none'
  }).bind('selectstart', function() {
    return false;
  });

  $('<div/>', {
    id: 'thecode'
  }).appendTo('body');

  $('#thecode').css({
    'pointer-events': 'none',
    background: 'white',
    padding: '1em',
    outline: 'solid gray 1px',
    'white-space': 'pre',
    position: 'fixed',
    left: 0,
    top: 0
  });

  showCode = function(name, code, x, y) {
    $('#thecode').show();
    $('#thecode').text("# " + name + "\n" + code);
    return positionCode(x, y);
  };

  hideCode = function() {
    return $('#thecode').hide();
  };

  positionCode = function(x, y) {
    return $('#thecode').css({
      left: x,
      top: y
    });
  };

  nodes = $('.node');

  _.each(nodes, function(node) {
    var nodeName;
    nodeName = $(node).find('title').text();
    $(node).mousemove(function(e) {
      return showCode(nodeName, Codes[nodeName], e.clientX, e.clientY);
    });
    return $(node).mouseleave(function() {
      return hideCode();
    });
  });

  $('svg title').remove();

  downAt = null;

  $('svg').mousedown(function(e) {
    var x, y;
    x = e.pageX;
    y = e.pageY;
    return downAt = {
      x: x,
      y: y
    };
  });

  $('svg').mousemove(function(e) {
    var delta, x, y;
    if (!downAt) {
      return;
    }
    x = e.pageX;
    y = e.pageY;
    delta = {
      x: x - downAt.x,
      y: y - downAt.y
    };
    window.scrollBy(-delta.x, -delta.y);
    return false;
  });

  $('svg').mouseup(function(e) {
    return downAt = null;
  });

  $('svg').mouseleave(function(e) {
    return downAt = null;
  });

}).call(this);
</script></html>