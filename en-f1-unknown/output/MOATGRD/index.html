<!DOCTYPE html><html><head><title>MOATGRD</title><meta charset="utf-8" /></head><body><svg width="2115pt" height="484pt"
 viewBox="0.00 0.00 2115.00 483.93" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 479.93)">
<title>MOATGRD</title>
<polygon fill="white" stroke="none" points="-4,4 -4,-479.93 2111,-479.93 2111,4 -4,4"/>
<!-- Start -->
<g id="node1" class="node">
<title>Start</title>
<ellipse fill="#ffffff" stroke="#000000" cx="417" cy="-457.93" rx="27" ry="18"/>
</g>
<!-- look_at_p_proc -->
<g id="node2" class="node">
<title>look_at_p_proc</title>
<ellipse fill="#ffffff" stroke="#000000" cx="556" cy="-457.93" rx="93.82" ry="18"/>
<text text-anchor="middle" x="556" y="-453.26" font-family="Times,serif" font-size="14.00">You see a guard.</text>
</g>
<!-- description_p_proc -->
<g id="node3" class="node">
<title>description_p_proc</title>
<ellipse fill="#ffffff" stroke="#000000" cx="762" cy="-457.93" rx="93.82" ry="18"/>
<text text-anchor="middle" x="762" y="-453.26" font-family="Times,serif" font-size="14.00">You see a guard.</text>
</g>
<!-- talk_p_proc -->
<g id="node4" class="node">
<title>talk_p_proc</title>
<ellipse fill="#ffffff" stroke="#000000" cx="901" cy="-457.93" rx="27" ry="18"/>
</g>
<!-- get_reaction -->
<g id="node5" class="node">
<title>get_reaction</title>
<ellipse fill="#ffffff" stroke="#000000" cx="1636" cy="-372.88" rx="27" ry="18"/>
</g>
<!-- talk_p_proc&#45;&gt;get_reaction -->
<g id="edge1" class="edge">
<title>talk_p_proc&#45;&gt;get_reaction</title>
<path fill="none" stroke="#555555" stroke-dasharray="1,5" d="M927.81,-454.92C1055.49,-445.3 1596.01,-404.52 1600,-402.93 1604.66,-401.08 1609.19,-398.41 1613.37,-395.42"/>
<polygon fill="#555555" stroke="#555555" points="1615.29,-397.56 1620.9,-388.57 1610.91,-392.1 1615.29,-397.56"/>
</g>
<!-- Moat00 -->
<g id="node6" class="node">
<title>Moat00</title>
<ellipse fill="#ffffff" stroke="#000000" cx="863" cy="-372.88" rx="122.68" ry="30.05"/>
<text text-anchor="middle" x="863" y="-376.83" font-family="Times,serif" font-size="14.00">What is your business</text>
<text text-anchor="middle" x="863" y="-359.58" font-family="Times,serif" font-size="14.00">here?</text>
</g>
<!-- talk_p_proc&#45;&gt;Moat00 -->
<g id="edge2" class="edge">
<title>talk_p_proc&#45;&gt;Moat00</title>
<path fill="none" stroke="#555555" stroke-dasharray="1,5" d="M893.49,-440.53C889.86,-432.6 885.34,-422.71 880.9,-413"/>
<polygon fill="#555555" stroke="#555555" points="883.68,-411.67 876.34,-404.03 877.32,-414.58 883.68,-411.67"/>
</g>
<!-- ReactToLevel -->
<g id="node21" class="node">
<title>ReactToLevel</title>
<ellipse fill="#ffffff" stroke="#000000" cx="1564" cy="-164.04" rx="27" ry="18"/>
</g>
<!-- get_reaction&#45;&gt;ReactToLevel -->
<g id="edge13" class="edge">
<title>get_reaction&#45;&gt;ReactToLevel</title>
<path fill="none" stroke="#555555" stroke-dasharray="1,5" d="M1630.11,-354.96C1617.66,-319.19 1588.58,-235.65 1573.48,-192.27"/>
<polygon fill="#555555" stroke="#555555" points="1576.47,-191.2 1569.87,-182.91 1569.85,-193.51 1576.47,-191.2"/>
</g>
<!-- Moat02 -->
<g id="node13" class="node">
<title>Moat02</title>
<ellipse fill="#ffffff" stroke="#000000" cx="453" cy="-164.04" rx="121.09" ry="66.64"/>
<text text-anchor="middle" x="453" y="-193.86" font-family="Times,serif" font-size="14.00">I have no patience for</text>
<text text-anchor="middle" x="453" y="-176.61" font-family="Times,serif" font-size="14.00">jokes. If you do not</text>
<text text-anchor="middle" x="453" y="-159.36" font-family="Times,serif" font-size="14.00">leave</text>
<text text-anchor="middle" x="453" y="-142.11" font-family="Times,serif" font-size="14.00">this area now I will</text>
<text text-anchor="middle" x="453" y="-124.86" font-family="Times,serif" font-size="14.00">shoot you!</text>
</g>
<!-- Moat00&#45;&gt;Moat02 -->
<g id="edge3" class="edge">
<title>Moat00&#45;&gt;Moat02</title>
<path fill="none" stroke="#005699" d="M750.68,-360.34C687.91,-352.39 616.93,-340.43 589.5,-324.83 552.39,-303.73 520.69,-268.54 497.21,-236.54"/>
<polygon fill="#005699" stroke="#005699" points="499.48,-234.7 490.8,-228.62 493.79,-238.78 499.48,-234.7"/>
<text text-anchor="middle" x="674.75" y="-294.28" font-family="Times,serif" font-size="14.00" fill="#005699">I&#39;m just looking around.</text>
</g>
<!-- Moat05 -->
<g id="node14" class="node">
<title>Moat05</title>
<ellipse fill="#ffffff" stroke="#000000" cx="740" cy="-164.04" rx="148.14" ry="91.04"/>
<text text-anchor="middle" x="740" y="-211.11" font-family="Times,serif" font-size="14.00">Ahh, very good. Customers</text>
<text text-anchor="middle" x="740" y="-193.86" font-family="Times,serif" font-size="14.00">are always welcome.</text>
<text text-anchor="middle" x="740" y="-176.61" font-family="Times,serif" font-size="14.00">Come in but please keep</text>
<text text-anchor="middle" x="740" y="-159.36" font-family="Times,serif" font-size="14.00">your weapons holstered.</text>
<text text-anchor="middle" x="740" y="-142.11" font-family="Times,serif" font-size="14.00">Go find Zack, he can set</text>
<text text-anchor="middle" x="740" y="-124.86" font-family="Times,serif" font-size="14.00">you up with anything you</text>
<text text-anchor="middle" x="740" y="-107.61" font-family="Times,serif" font-size="14.00">need.</text>
</g>
<!-- Moat00&#45;&gt;Moat05 -->
<g id="edge4" class="edge">
<title>Moat00&#45;&gt;Moat05</title>
<path fill="none" stroke="#839900" d="M810.15,-345.32C802.06,-339.45 794.43,-332.62 788.5,-324.83 775.21,-307.39 765.54,-286.31 758.51,-265.26"/>
<polygon fill="#839900" stroke="#839900" points="761.61,-264.44 755.27,-255.95 754.93,-266.54 761.61,-264.44"/>
<text text-anchor="middle" x="857.25" y="-302.9" font-family="Times,serif" font-size="14.00" fill="#839900">I want to buy some</text>
<text text-anchor="middle" x="857.25" y="-285.65" font-family="Times,serif" font-size="14.00" fill="#839900">weapons.</text>
</g>
<!-- Moat03 -->
<g id="node15" class="node">
<title>Moat03</title>
<ellipse fill="#ffffff" stroke="#000000" cx="1037" cy="-164.04" rx="130.64" ry="30.05"/>
<text text-anchor="middle" x="1037" y="-167.99" font-family="Times,serif" font-size="14.00">Oh, ok. Gabriel will talk</text>
<text text-anchor="middle" x="1037" y="-150.74" font-family="Times,serif" font-size="14.00">to you. Go on in.</text>
</g>
<!-- Moat00&#45;&gt;Moat03 -->
<g id="edge5" class="edge">
<title>Moat00&#45;&gt;Moat03</title>
<path fill="none" stroke="#820099" d="M905.31,-344.43C912.47,-338.55 919.39,-331.94 925,-324.83 940.56,-305.1 934.57,-294.47 947.75,-273.08 963.46,-247.59 984.68,-221.65 1002.5,-201.57"/>
<polygon fill="#820099" stroke="#820099" points="1004.56,-204.4 1008.64,-194.62 999.35,-199.72 1004.56,-204.4"/>
<text text-anchor="middle" x="1030.12" y="-311.53" font-family="Times,serif" font-size="14.00" fill="#820099">I need to speak to your</text>
<text text-anchor="middle" x="1030.12" y="-294.28" font-family="Times,serif" font-size="14.00" fill="#820099">boss. &#160;It is very</text>
<text text-anchor="middle" x="1030.12" y="-277.03" font-family="Times,serif" font-size="14.00" fill="#820099">important.</text>
</g>
<!-- Moat04 -->
<g id="node16" class="node">
<title>Moat04</title>
<ellipse fill="#ffffff" stroke="#000000" cx="1331" cy="-164.04" rx="145.49" ry="30.05"/>
<text text-anchor="middle" x="1331" y="-167.99" font-family="Times,serif" font-size="14.00">Yeah, I remember you. &#160;Go</text>
<text text-anchor="middle" x="1331" y="-150.74" font-family="Times,serif" font-size="14.00">on in.</text>
</g>
<!-- Moat00&#45;&gt;Moat04 -->
<g id="edge6" class="edge">
<title>Moat00&#45;&gt;Moat04</title>
<path fill="none" stroke="#009956" d="M985.79,-370.89C1087.58,-367.69 1222.24,-357.19 1265,-324.83 1270.13,-320.95 1298.02,-250.53 1315.86,-204.48"/>
<polygon fill="#009956" stroke="#009956" points="1319.38,-206.08 1319.72,-195.49 1312.85,-203.56 1319.38,-206.08"/>
<text text-anchor="middle" x="1368.62" y="-302.9" font-family="Times,serif" font-size="14.00" fill="#009956">I want to buy weapons</text>
<text text-anchor="middle" x="1368.62" y="-285.65" font-family="Times,serif" font-size="14.00" fill="#009956">from Zack.</text>
</g>
<!-- Moat00&#45;&gt;Moat04 -->
<g id="edge7" class="edge">
<title>Moat00&#45;&gt;Moat04</title>
<path fill="none" stroke="#992900" d="M976.7,-361.28C1032.08,-354.01 1091.15,-342.42 1112,-324.83 1130.76,-309.01 1114.06,-290.59 1131.25,-273.08 1146.56,-257.49 1157.34,-264.62 1177,-255.08 1211.57,-238.3 1248.8,-216.63 1278,-198.76"/>
<polygon fill="#992900" stroke="#992900" points="1279.5,-201.33 1286.18,-193.1 1275.83,-195.37 1279.5,-201.33"/>
<text text-anchor="middle" x="1196.88" y="-311.53" font-family="Times,serif" font-size="14.00" fill="#992900">I need to speak to</text>
<text text-anchor="middle" x="1196.88" y="-294.28" font-family="Times,serif" font-size="14.00" fill="#992900">Gabriel. &#160;It is very</text>
<text text-anchor="middle" x="1196.88" y="-277.03" font-family="Times,serif" font-size="14.00" fill="#992900">important.</text>
</g>
<!-- MoatCombat -->
<g id="node17" class="node">
<title>MoatCombat</title>
<ellipse fill="#ffffff" stroke="#000000" cx="27" cy="-164.04" rx="27" ry="18"/>
</g>
<!-- Moat00&#45;&gt;MoatCombat -->
<g id="edge8" class="edge">
<title>Moat00&#45;&gt;MoatCombat</title>
<path fill="none" stroke="#000499" d="M740.63,-370.01C573.86,-366.32 284.44,-355.59 183.75,-324.83 124.48,-306.72 103.57,-301.93 63,-255.08 47.52,-237.21 38.19,-211.85 32.92,-192.59"/>
<polygon fill="#000499" stroke="#000499" points="36.11,-191.91 30.27,-183.06 29.32,-193.62 36.11,-191.91"/>
<text text-anchor="middle" x="269.12" y="-311.53" font-family="Times,serif" font-size="14.00" fill="#000499">You smell like a brahma</text>
<text text-anchor="middle" x="269.12" y="-294.28" font-family="Times,serif" font-size="14.00" fill="#000499">but I bet you&#39;re not as</text>
<text text-anchor="middle" x="269.12" y="-277.03" font-family="Times,serif" font-size="14.00" fill="#000499">intelligent.</text>
</g>
<!-- Moat01 -->
<g id="node18" class="node">
<title>Moat01</title>
<ellipse fill="#ffffff" stroke="#000000" cx="193" cy="-164.04" rx="121.09" ry="66.64"/>
<text text-anchor="middle" x="193" y="-193.86" font-family="Times,serif" font-size="14.00">I have no patience for</text>
<text text-anchor="middle" x="193" y="-176.61" font-family="Times,serif" font-size="14.00">jokes. If you do not</text>
<text text-anchor="middle" x="193" y="-159.36" font-family="Times,serif" font-size="14.00">leave</text>
<text text-anchor="middle" x="193" y="-142.11" font-family="Times,serif" font-size="14.00">this area now I will</text>
<text text-anchor="middle" x="193" y="-124.86" font-family="Times,serif" font-size="14.00">shoot you!</text>
</g>
<!-- Moat00&#45;&gt;Moat01 -->
<g id="edge9" class="edge">
<title>Moat00&#45;&gt;Moat01</title>
<path fill="none" stroke="#309900" d="M744.51,-364.9C670.9,-358.59 574.85,-346.76 492,-324.83 413.45,-304.04 394.36,-293.94 323,-255.08 306.32,-246 289.16,-235.25 273,-224.39"/>
<polygon fill="#309900" stroke="#309900" points="275.37,-221.09 265.13,-218.36 271.43,-226.88 275.37,-221.09"/>
<text text-anchor="middle" x="508.5" y="-294.28" font-family="Times,serif" font-size="14.00" fill="#309900">Urr?</text>
</g>
<!-- critter_p_proc -->
<g id="node7" class="node">
<title>critter_p_proc</title>
<ellipse fill="#ffffff" stroke="#000000" cx="1167" cy="-457.93" rx="27" ry="18"/>
</g>
<!-- damage_p_proc -->
<g id="node8" class="node">
<title>damage_p_proc</title>
<ellipse fill="#ffffff" stroke="#000000" cx="1336" cy="-457.93" rx="27" ry="18"/>
</g>
<!-- destroy_p_proc -->
<g id="node9" class="node">
<title>destroy_p_proc</title>
<ellipse fill="#ffffff" stroke="#000000" cx="1457" cy="-457.93" rx="27" ry="18"/>
</g>
<!-- timed_event_p_proc -->
<g id="node10" class="node">
<title>timed_event_p_proc</title>
<ellipse fill="#ffffff" stroke="#000000" cx="1553" cy="-457.93" rx="27" ry="18"/>
</g>
<!-- map_enter_p_proc -->
<g id="node11" class="node">
<title>map_enter_p_proc</title>
<ellipse fill="#ffffff" stroke="#000000" cx="1637" cy="-457.93" rx="27" ry="18"/>
</g>
<!-- pickup_p_proc -->
<g id="node12" class="node">
<title>pickup_p_proc</title>
<ellipse fill="#ffffff" stroke="#000000" cx="1715" cy="-457.93" rx="27" ry="18"/>
</g>
<!-- BottomReact -->
<g id="node19" class="node">
<title>BottomReact</title>
<ellipse fill="#ffffff" stroke="#000000" cx="193" cy="-18" rx="27" ry="18"/>
</g>
<!-- Moat02&#45;&gt;BottomReact -->
<g id="edge11" class="edge">
<title>Moat02&#45;&gt;BottomReact</title>
<path fill="none" stroke="#555555" stroke-dasharray="1,5" d="M381.85,-109.75C363.2,-96.9 342.76,-83.79 323,-73 291.56,-55.84 253.52,-40.63 226.73,-30.76"/>
<polygon fill="#555555" stroke="#555555" points="228.3,-27.24 217.7,-27.12 225.91,-33.82 228.3,-27.24"/>
</g>
<!-- MoatCombat&#45;&gt;BottomReact -->
<g id="edge12" class="edge">
<title>MoatCombat&#45;&gt;BottomReact</title>
<path fill="none" stroke="#555555" stroke-dasharray="1,5" d="M29.72,-145.93C33.73,-126 43.02,-93.25 63,-73 88.34,-47.32 127.69,-33.3 156.46,-26.03"/>
<polygon fill="#555555" stroke="#555555" points="156.99,-29.27 165.92,-23.57 155.39,-22.45 156.99,-29.27"/>
</g>
<!-- Moat01&#45;&gt;BottomReact -->
<g id="edge10" class="edge">
<title>Moat01&#45;&gt;BottomReact</title>
<path fill="none" stroke="#555555" stroke-dasharray="1,5" d="M193,-96.92C193,-79.3 193,-61.2 193,-46.89"/>
<polygon fill="#555555" stroke="#555555" points="196.5,-47.3 193,-37.3 189.5,-47.3 196.5,-47.3"/>
</g>
<!-- MoatEnd -->
<g id="node20" class="node">
<title>MoatEnd</title>
<ellipse fill="#ffffff" stroke="#000000" cx="1790" cy="-457.93" rx="27" ry="18"/>
</g>
<!-- LevelToReact -->
<g id="node22" class="node">
<title>LevelToReact</title>
<ellipse fill="#ffffff" stroke="#000000" cx="1900" cy="-372.88" rx="27" ry="18"/>
</g>
<!-- UpReact -->
<g id="node23" class="node">
<title>UpReact</title>
<ellipse fill="#ffffff" stroke="#000000" cx="1708" cy="-372.88" rx="27" ry="18"/>
</g>
<!-- UpReact&#45;&gt;ReactToLevel -->
<g id="edge14" class="edge">
<title>UpReact&#45;&gt;ReactToLevel</title>
<path fill="none" stroke="#555555" stroke-dasharray="1,5" d="M1696.94,-355.99C1671.96,-320.11 1611.03,-232.59 1581.12,-189.64"/>
<polygon fill="#555555" stroke="#555555" points="1583.49,-187.91 1574.9,-181.7 1577.74,-191.9 1583.49,-187.91"/>
</g>
<!-- DownReact -->
<g id="node24" class="node">
<title>DownReact</title>
<ellipse fill="#ffffff" stroke="#000000" cx="1420" cy="-372.88" rx="27" ry="18"/>
</g>
<!-- DownReact&#45;&gt;ReactToLevel -->
<g id="edge15" class="edge">
<title>DownReact&#45;&gt;ReactToLevel</title>
<path fill="none" stroke="#555555" stroke-dasharray="1,5" d="M1431.06,-355.99C1456.04,-320.11 1516.97,-232.59 1546.88,-189.64"/>
<polygon fill="#555555" stroke="#555555" points="1550.26,-191.9 1553.1,-181.7 1544.51,-187.91 1550.26,-191.9"/>
</g>
<!-- TopReact -->
<g id="node25" class="node">
<title>TopReact</title>
<ellipse fill="#ffffff" stroke="#000000" cx="2008" cy="-457.93" rx="27" ry="18"/>
</g>
<!-- BigUpReact -->
<g id="node26" class="node">
<title>BigUpReact</title>
<ellipse fill="#ffffff" stroke="#000000" cx="1492" cy="-372.88" rx="27" ry="18"/>
</g>
<!-- BigUpReact&#45;&gt;ReactToLevel -->
<g id="edge16" class="edge">
<title>BigUpReact&#45;&gt;ReactToLevel</title>
<path fill="none" stroke="#555555" stroke-dasharray="1,5" d="M1497.89,-354.96C1510.34,-319.19 1539.42,-235.65 1554.52,-192.27"/>
<polygon fill="#555555" stroke="#555555" points="1558.15,-193.51 1558.13,-182.91 1551.53,-191.2 1558.15,-193.51"/>
</g>
<!-- BigDownReact -->
<g id="node27" class="node">
<title>BigDownReact</title>
<ellipse fill="#ffffff" stroke="#000000" cx="1564" cy="-372.88" rx="27" ry="18"/>
</g>
<!-- BigDownReact&#45;&gt;ReactToLevel -->
<g id="edge17" class="edge">
<title>BigDownReact&#45;&gt;ReactToLevel</title>
<path fill="none" stroke="#555555" stroke-dasharray="1,5" d="M1564,-354.6C1564,-318.94 1564,-236.88 1564,-193.35"/>
<polygon fill="#555555" stroke="#555555" points="1567.5,-193.42 1564,-183.42 1560.5,-193.42 1567.5,-193.42"/>
</g>
<!-- UpReactLevel -->
<g id="node28" class="node">
<title>UpReactLevel</title>
<ellipse fill="#ffffff" stroke="#000000" cx="1864" cy="-457.93" rx="27" ry="18"/>
</g>
<!-- UpReactLevel&#45;&gt;LevelToReact -->
<g id="edge18" class="edge">
<title>UpReactLevel&#45;&gt;LevelToReact</title>
<path fill="none" stroke="#555555" stroke-dasharray="1,5" d="M1871.29,-440.13C1876.21,-428.76 1882.83,-413.5 1888.46,-400.49"/>
<polygon fill="#555555" stroke="#555555" points="1891.96,-402.23 1892.73,-391.66 1885.54,-399.45 1891.96,-402.23"/>
</g>
<!-- DownReactLevel -->
<g id="node29" class="node">
<title>DownReactLevel</title>
<ellipse fill="#ffffff" stroke="#000000" cx="1936" cy="-457.93" rx="27" ry="18"/>
</g>
<!-- DownReactLevel&#45;&gt;LevelToReact -->
<g id="edge19" class="edge">
<title>DownReactLevel&#45;&gt;LevelToReact</title>
<path fill="none" stroke="#555555" stroke-dasharray="1,5" d="M1928.71,-440.13C1923.79,-428.76 1917.17,-413.5 1911.54,-400.49"/>
<polygon fill="#555555" stroke="#555555" points="1914.46,-399.45 1907.27,-391.66 1908.04,-402.23 1914.46,-399.45"/>
</g>
<!-- Goodbyes -->
<g id="node30" class="node">
<title>Goodbyes</title>
<ellipse fill="#ffffff" stroke="#000000" cx="2080" cy="-457.93" rx="27" ry="18"/>
</g>
</g>
</svg>
<script>window.Codes = {"Start":"if (Initialize) then begin\n  if (obj_is_carrying_obj_pid(self_obj, 41) == 0) then begin\n    item_caps_adjust(self_obj, random(2, 20));\n  end\n  critter_add_trait(self_obj, 1, 6, 48);\n  critter_add_trait(self_obj, 1, 5, 28);\n  if (local_var(4) == 0) then begin\n    DestTile := tile_num(self_obj);\n    set_local_var(4, DestTile);\n  end\n  Initialize := 0;\nend\n","look_at_p_proc":"script_overrides;\ndisplay_msg(message_str(6, 100));\n","description_p_proc":"script_overrides;\ndisplay_msg(message_str(6, 100));\n","talk_p_proc":"if (global_var(617) == 1) then begin\n  float_msg(self_obj, message_str(669, random(100, 105)), 2);\nend\nelse begin\n  call get_reaction;\n  start_gdialog(6, self_obj, -1, -1, -1);\n  gsay_start;\n  call Moat00;\n  gsay_end;\n  end_dialogue;\nend\n","critter_p_proc":"if (tile_num(self_obj) != DestTile) then begin\n  animate_move_obj_to_tile(self_obj, DestTile, 0);\nend\nelse begin\n  anim(self_obj, 1000, 2);\nend\nif (obj_can_see_obj(self_obj, dude_obj)) then begin\n  if (global_var(253) == 1) then begin\n    attack_complex(dude_obj, 0, 1, 0, 0, 30000, 0, 0);\n  end\nend\n","damage_p_proc":"if (source_obj == dude_obj) then begin\n  set_global_var(617, 1);\nend\n","destroy_p_proc":"if (source_obj == dude_obj) then begin\n  set_global_var(617, 1);\n  if (source_obj == dude_obj) then begin\n    if (((global_var(160) + global_var(159)) >= 25) and ((global_var(159) > (2 * global_var(160))) or (global_var(156) == 1))) then begin\n      set_global_var(156, 1);\n      set_global_var(157, 0);\n    end\n    if (((global_var(160) + global_var(159)) >= 25) and ((global_var(160) > (3 * global_var(159))) or (global_var(157) == 1))) then begin\n      set_global_var(157, 1);\n      set_global_var(156, 0);\n    end\n    set_global_var(159, global_var(159) + 1);\n    if ((global_var(159) % 2) == 0) then begin\n      set_global_var(155, global_var(155) - 1);\n    end\n  end\nend\n","timed_event_p_proc":"if (fixed_param == 1) then begin\n  if (tile_distance_objs(self_obj, dude_obj) < 5) then begin\n    set_global_var(617, 1);\n    attack_complex(dude_obj, 0, 1, 0, 0, 30000, 0, 0);\n  end\nend\n","map_enter_p_proc":"move_to(self_obj, local_var(4), 0);\nanim(self_obj, 1000, 2);\n","pickup_p_proc":"set_global_var(617, 1);\n","Moat00":"gsay_reply(6, 101);\ngiq_option(4, 6, 103, Moat02, 50);\nif (local_var(5) == 0) then begin\n  giq_option(4, 6, 104, Moat05, 50);\n  giq_option(4, 6, 115, Moat03, 50);\nend\nelse begin\n  giq_option(4, 6, 119, Moat04, 50);\n  giq_option(4, 6, 118, Moat04, 50);\nend\ngiq_option(4, 6, 111, MoatCombat, 51);\ngiq_option(-3, 6, 102, Moat01, 50);\n","Moat01":"gsay_message(6, 107, 50);\nadd_timer_event(self_obj, game_ticks(10), 1);\ncall BottomReact;\n","Moat02":"gsay_message(6, 107, 50);\nadd_timer_event(self_obj, game_ticks(10 * 2), 1);\ncall BottomReact;\n","Moat03":"gsay_message(6, 116, 50);\nDestTile := 26299;\nset_local_var(5, 1);\n","Moat04":"gsay_message(6, 117, 50);\nDestTile := 26299;\n","Moat05":"gsay_message(6, 113, 50);\nDestTile := 26299;\nset_local_var(5, 1);\n","MoatCombat":"add_timer_event(self_obj, game_ticks(10), 1);\ncall BottomReact;\n","MoatEnd":"[]","get_reaction":"if (local_var(2) == 0) then begin\n  set_local_var(0, 50);\n  set_local_var(1, 2);\n  set_local_var(2, 1);\n  set_local_var(0, local_var(0) + (5 * get_critter_stat(dude_obj, 3)) - 25);\n  set_local_var(0, local_var(0) + (10 * has_trait(0, dude_obj, 10)));\n  if (has_trait(0, dude_obj, 39)) then begin\n    if (global_var(155) > 0) then begin\n      set_local_var(0, local_var(0) + global_var(155));\n    end\n    else begin\n      set_local_var(0, local_var(0) - global_var(155));\n    end\n  end\n  else begin\n    if (local_var(3) == 1) then begin\n      set_local_var(0, local_var(0) - global_var(155));\n    end\n    else begin\n      set_local_var(0, local_var(0) + global_var(155));\n    end\n  end\n  if (global_var(158) > 2) then begin\n    set_local_var(0, local_var(0) - 30);\n  end\n  if (((global_var(160) + global_var(159)) >= 25) and ((global_var(160) > (3 * global_var(159))) or (global_var(157) == 1))) then begin\n    set_local_var(0, local_var(0) + 20);\n  end\n  if (((global_var(160) + global_var(159)) >= 25) and ((global_var(159) > (2 * global_var(160))) or (global_var(156) == 1))) then begin\n    set_local_var(0, local_var(0) - 20);\n  end\n  call ReactToLevel;\nend\n","ReactToLevel":"if (local_var(0) <= 25) then begin\n  set_local_var(1, 1);\nend\nelse begin\n  if (local_var(0) <= 75) then begin\n    set_local_var(1, 2);\n  end\n  else begin\n    set_local_var(1, 3);\n  end\nend\n","LevelToReact":"if (local_var(1) == 1) then begin\n  set_local_var(0, random(1, 25));\nend\nelse begin\n  if (local_var(1) == 2) then begin\n    set_local_var(0, random(26, 75));\n  end\n  else begin\n    set_local_var(0, random(76, 100));\n  end\nend\n","UpReact":"set_local_var(0, local_var(0) + 10);\ncall ReactToLevel;\n","DownReact":"set_local_var(0, local_var(0) - 10);\ncall ReactToLevel;\n","BottomReact":"set_local_var(1, 1);\nset_local_var(0, 1);\n","TopReact":"set_local_var(0, 100);\nset_local_var(1, 3);\n","BigUpReact":"set_local_var(0, local_var(0) + 25);\ncall ReactToLevel;\n","BigDownReact":"set_local_var(0, local_var(0) - 25);\ncall ReactToLevel;\n","UpReactLevel":"set_local_var(1, local_var(1) + 1);\nif (local_var(1) > 3) then begin\n  set_local_var(1, 3);\nend\ncall LevelToReact;\n","DownReactLevel":"set_local_var(1, local_var(1) - 1);\nif (local_var(1) < 1) then begin\n  set_local_var(1, 1);\nend\ncall LevelToReact;\n","Goodbyes":"exit_line := message_str(634, random(100, 105));\n"}</script></body><script src="../jquery.js"></script><script src="../underscore.js"></script><script>(function() {
  var downAt, hideCode, nodes, positionCode, showCode;

  $('svg').attr('unselectable', 'on').css({
    '-moz-user-select': '-moz-none',
    '-moz-user-select': 'none',
    '-o-user-select': 'none',
    '-khtml-user-select': 'none',
    '-webkit-user-select': 'none',
    '-ms-user-select': 'none',
    'user-select': 'none'
  }).bind('selectstart', function() {
    return false;
  });

  $('<div/>', {
    id: 'thecode'
  }).appendTo('body');

  $('#thecode').css({
    'pointer-events': 'none',
    background: 'white',
    padding: '1em',
    outline: 'solid gray 1px',
    'white-space': 'pre',
    position: 'fixed',
    left: 0,
    top: 0
  });

  showCode = function(code, x, y) {
    $('#thecode').show();
    $('#thecode').text(code);
    return positionCode(x, y);
  };

  hideCode = function() {
    return $('#thecode').hide();
  };

  positionCode = function(x, y) {
    return $('#thecode').css({
      left: x,
      top: y
    });
  };

  nodes = $('.node');

  _.each(nodes, function(node) {
    var nodeName;
    nodeName = $(node).find('title').text();
    $(node).mousemove(function(e) {
      return showCode(Codes[nodeName], e.clientX, e.clientY);
    });
    return $(node).mouseleave(function() {
      return hideCode();
    });
  });

  $('svg title').remove();

  downAt = null;

  $('svg').mousedown(function(e) {
    var x, y;
    x = e.pageX;
    y = e.pageY;
    return downAt = {
      x: x,
      y: y
    };
  });

  $('svg').mousemove(function(e) {
    var delta, x, y;
    if (!downAt) {
      return;
    }
    x = e.pageX;
    y = e.pageY;
    delta = {
      x: x - downAt.x,
      y: y - downAt.y
    };
    window.scrollBy(-delta.x, -delta.y);
    return false;
  });

  $('svg').mouseup(function(e) {
    return downAt = null;
  });

  $('svg').mouseleave(function(e) {
    return downAt = null;
  });

}).call(this);
</script></html>