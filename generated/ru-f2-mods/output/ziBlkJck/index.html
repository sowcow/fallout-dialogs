<!DOCTYPE html><html><head><title>ziBlkJck</title><meta charset="utf-8" /></head><body><svg width="1661pt" height="1717pt"
 viewBox="0.00 0.00 1661.25 1716.51" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 1712.51)">
<title>ziBlkJck</title>
<polygon fill="white" stroke="none" points="-4,4 -4,-1712.51 1657.25,-1712.51 1657.25,4 -4,4"/>
<!-- start -->
<g id="node1" class="node">
<title>start</title>
<ellipse fill="#ffffff" stroke="#000000" cx="27" cy="-1446.71" rx="27" ry="18"/>
</g>
<!-- look_at_p_proc -->
<g id="node2" class="node">
<title>look_at_p_proc</title>
<ellipse fill="#ffffff" stroke="#000000" cx="223" cy="-1446.71" rx="151.32" ry="66.64"/>
<text text-anchor="middle" x="223" y="-1476.53" font-family="Times,serif" font-size="14.00">Вы видите крупье игры в</text>
<text text-anchor="middle" x="223" y="-1459.28" font-family="Times,serif" font-size="14.00">Блэк Джек.</text>
<text text-anchor="middle" x="223" y="-1442.03" font-family="Times,serif" font-size="14.00">&#45;&#45;&#45;</text>
<text text-anchor="middle" x="223" y="-1424.78" font-family="Times,serif" font-size="14.00">Вы видите стол для игры в</text>
<text text-anchor="middle" x="223" y="-1407.53" font-family="Times,serif" font-size="14.00">Блэк Джек.</text>
</g>
<!-- description_p_proc -->
<g id="node3" class="node">
<title>description_p_proc</title>
<ellipse fill="#ffffff" stroke="#000000" cx="550" cy="-1446.71" rx="157.68" ry="103.24"/>
<text text-anchor="middle" x="550" y="-1502.41" font-family="Times,serif" font-size="14.00">Вы видите крупье игры в</text>
<text text-anchor="middle" x="550" y="-1485.16" font-family="Times,serif" font-size="14.00">Блэк Джек.</text>
<text text-anchor="middle" x="550" y="-1467.91" font-family="Times,serif" font-size="14.00">&#45;&#45;&#45;</text>
<text text-anchor="middle" x="550" y="-1450.66" font-family="Times,serif" font-size="14.00">Это стол для игры в Блэк</text>
<text text-anchor="middle" x="550" y="-1433.41" font-family="Times,serif" font-size="14.00">Джек. Минимальная ставка</text>
<text text-anchor="middle" x="550" y="-1416.16" font-family="Times,serif" font-size="14.00">$</text>
<text text-anchor="middle" x="550" y="-1398.91" font-family="Times,serif" font-size="14.00">&#45;&#45;&#45;</text>
<text text-anchor="middle" x="550" y="-1381.66" font-family="Times,serif" font-size="14.00">.</text>
</g>
<!-- talk_p_proc -->
<g id="node4" class="node">
<title>talk_p_proc</title>
<ellipse fill="#ffffff" stroke="#000000" cx="753" cy="-1446.71" rx="27" ry="18"/>
</g>
<!-- Node000 -->
<g id="node5" class="node">
<title>Node000</title>
<ellipse fill="#ffffff" stroke="#000000" cx="753" cy="-983.68" rx="159.81" ry="164.23"/>
<text text-anchor="middle" x="753" y="-1082.5" font-family="Times,serif" font-size="14.00">Вам не разрешается больше</text>
<text text-anchor="middle" x="753" y="-1065.25" font-family="Times,serif" font-size="14.00">здесь играть. Пожалуйста,</text>
<text text-anchor="middle" x="753" y="-1048" font-family="Times,serif" font-size="14.00">уходите.</text>
<text text-anchor="middle" x="753" y="-1030.75" font-family="Times,serif" font-size="14.00">&#45;&#45;&#45;</text>
<text text-anchor="middle" x="753" y="-1013.5" font-family="Times,serif" font-size="14.00">Хотите сыграть в Блэк</text>
<text text-anchor="middle" x="753" y="-996.25" font-family="Times,serif" font-size="14.00">Джек? Минимальная ставка</text>
<text text-anchor="middle" x="753" y="-979" font-family="Times,serif" font-size="14.00">составляет $</text>
<text text-anchor="middle" x="753" y="-961.75" font-family="Times,serif" font-size="14.00">&#45;&#45;&#45;</text>
<text text-anchor="middle" x="753" y="-944.5" font-family="Times,serif" font-size="14.00">.</text>
<text text-anchor="middle" x="753" y="-927.25" font-family="Times,serif" font-size="14.00">&#45;&#45;&#45;</text>
<text text-anchor="middle" x="753" y="-910" font-family="Times,serif" font-size="14.00">Вам не разрешается больше</text>
<text text-anchor="middle" x="753" y="-892.75" font-family="Times,serif" font-size="14.00">здесь играть. Пожалуйста,</text>
<text text-anchor="middle" x="753" y="-875.5" font-family="Times,serif" font-size="14.00">уходите.</text>
</g>
<!-- talk_p_proc&#45;&gt;Node000 -->
<g id="edge1" class="edge">
<title>talk_p_proc&#45;&gt;Node000</title>
<path fill="none" stroke="#555555" stroke-dasharray="1,5" d="M753,-1428.48C753,-1384.34 753,-1263.36 753,-1158.84"/>
<polygon fill="#555555" stroke="#555555" points="756.5,-1159.13 753,-1149.13 749.5,-1159.13 756.5,-1159.13"/>
</g>
<!-- Node001 -->
<g id="node8" class="node">
<title>Node001</title>
<ellipse fill="#ffffff" stroke="#000000" cx="1030" cy="-699.55" rx="125.33" ry="66.64"/>
<text text-anchor="middle" x="1030" y="-729.38" font-family="Times,serif" font-size="14.00">Извините, но у вас не</text>
<text text-anchor="middle" x="1030" y="-712.13" font-family="Times,serif" font-size="14.00">хватает денег на</text>
<text text-anchor="middle" x="1030" y="-694.88" font-family="Times,serif" font-size="14.00">минимальную ставку.</text>
<text text-anchor="middle" x="1030" y="-677.63" font-family="Times,serif" font-size="14.00">Заходите, когда у вас</text>
<text text-anchor="middle" x="1030" y="-660.38" font-family="Times,serif" font-size="14.00">будут наличные.</text>
</g>
<!-- Node000&#45;&gt;Node001 -->
<g id="edge2" class="edge">
<title>Node000&#45;&gt;Node001</title>
<path fill="none" stroke="#649900" d="M866.07,-867.52C899.85,-833.11 935.73,-796.56 965.28,-766.47"/>
<polygon fill="#649900" stroke="#649900" points="967.15,-769.55 971.65,-759.96 962.15,-764.64 967.15,-769.55"/>
<text text-anchor="middle" x="974.38" y="-788.15" font-family="Times,serif" font-size="14.00" fill="#649900">Конечно.</text>
</g>
<!-- Node999 -->
<g id="node9" class="node">
<title>Node999</title>
<ellipse fill="#ffffff" stroke="#000000" cx="753" cy="-18" rx="27" ry="18"/>
</g>
<!-- Node000&#45;&gt;Node999 -->
<g id="edge3" class="edge">
<title>Node000&#45;&gt;Node999</title>
<path fill="none" stroke="#990091" d="M619.81,-892.62C564.08,-843.56 512,-777.21 512,-700.55 512,-700.55 512,-700.55 512,-179.29 512,-105.77 557.65,-92.95 620,-54 649.14,-35.8 687.54,-27 715.59,-22.79"/>
<polygon fill="#990091" stroke="#990091" points="715.73,-26.16 725.16,-21.34 714.78,-19.23 715.73,-26.16"/>
<text text-anchor="middle" x="561.5" y="-528.61" font-family="Times,serif" font-size="14.00" fill="#990091">Нет, спасибо.</text>
</g>
<!-- Node000&#45;&gt;Node999 -->
<g id="edge4" class="edge">
<title>Node000&#45;&gt;Node999</title>
<path fill="none" stroke="#009974" d="M668.9,-843.53C649.29,-799.38 634,-749.33 634,-700.55 634,-700.55 634,-700.55 634,-179.29 634,-117.94 690.89,-64.8 726,-37.85"/>
<polygon fill="#009974" stroke="#009974" points="727.49,-40.36 733.41,-31.57 723.3,-34.75 727.49,-40.36"/>
<text text-anchor="middle" x="682" y="-528.61" font-family="Times,serif" font-size="14.00" fill="#009974">Че бляк зяк?</text>
</g>
<!-- Node000&#45;&gt;Node999 -->
<g id="edge5" class="edge">
<title>Node000&#45;&gt;Node999</title>
<path fill="none" stroke="#994800" d="M753,-819.32C753,-780.4 753,-739 753,-700.55 753,-700.55 753,-700.55 753,-179.29 753,-132.94 753,-79.06 753,-47.06"/>
<polygon fill="#994800" stroke="#994800" points="756.5,-47.32 753,-37.32 749.5,-47.32 756.5,-47.32"/>
<text text-anchor="middle" x="837" y="-528.61" font-family="Times,serif" font-size="14.00" fill="#994800">Конечно, нет проблем.</text>
</g>
<!-- Node998 -->
<g id="node10" class="node">
<title>Node998</title>
<ellipse fill="#ffffff" stroke="#000000" cx="1370" cy="-18" rx="27" ry="18"/>
</g>
<!-- Node000&#45;&gt;Node998 -->
<g id="edge6" class="edge">
<title>Node000&#45;&gt;Node998</title>
<path fill="none" stroke="#1b0099" d="M910.54,-954.14C1123.53,-910.99 1477,-821.21 1477,-700.55 1477,-700.55 1477,-700.55 1477,-179.29 1477,-123.26 1497.4,-98.23 1463,-54 1449.75,-36.96 1427.23,-28.22 1407.67,-23.73"/>
<polygon fill="#1b0099" stroke="#1b0099" points="1408.38,-20.1 1397.89,-21.6 1407.02,-26.97 1408.38,-20.1"/>
<text text-anchor="middle" x="1565.12" y="-528.61" font-family="Times,serif" font-size="14.00" fill="#1b0099">Я тебе покажу потолок.</text>
</g>
<!-- pickup_p_proc -->
<g id="node6" class="node">
<title>pickup_p_proc</title>
<ellipse fill="#ffffff" stroke="#000000" cx="825" cy="-1446.71" rx="27" ry="18"/>
</g>
<!-- timed_event_p_proc -->
<g id="node7" class="node">
<title>timed_event_p_proc</title>
<ellipse fill="#ffffff" stroke="#000000" cx="897" cy="-1446.71" rx="27" ry="18"/>
</g>
<!-- Node002 -->
<g id="node11" class="node">
<title>Node002</title>
<ellipse fill="#ffffff" stroke="#000000" cx="1030" cy="-577.91" rx="27" ry="18"/>
</g>
<!-- Node001&#45;&gt;Node002 -->
<g id="edge7" class="edge">
<title>Node001&#45;&gt;Node002</title>
<path fill="none" stroke="#555555" stroke-dasharray="1,5" d="M1030,-632.43C1030,-623.53 1030,-614.82 1030,-607.1"/>
<polygon fill="#555555" stroke="#555555" points="1033.5,-607.24 1030,-597.24 1026.5,-607.24 1033.5,-607.24"/>
</g>
<!-- GiveCards(0) -->
<g id="node12" class="node">
<title>GiveCards(0)</title>
<ellipse fill="none" stroke="black" cx="1030" cy="-415.62" rx="76.99" ry="18"/>
<text text-anchor="middle" x="1030" y="-410.94" font-family="Times,serif" font-size="14.00">GiveCards(0)</text>
</g>
<!-- Node002&#45;&gt;GiveCards(0) -->
<g id="edge8" class="edge">
<title>Node002&#45;&gt;GiveCards(0)</title>
<path fill="none" stroke="#555555" stroke-dasharray="1,5" d="M1030,-559.45C1030,-531.87 1030,-477.95 1030,-444.83"/>
<polygon fill="#555555" stroke="#555555" points="1033.5,-445.06 1030,-435.06 1026.5,-445.06 1033.5,-445.06"/>
</g>
<!-- GiveCards(1) -->
<g id="node13" class="node">
<title>GiveCards(1)</title>
<ellipse fill="none" stroke="black" cx="858" cy="-415.62" rx="76.99" ry="18"/>
<text text-anchor="middle" x="858" y="-410.94" font-family="Times,serif" font-size="14.00">GiveCards(1)</text>
</g>
<!-- Node002&#45;&gt;GiveCards(1) -->
<g id="edge9" class="edge">
<title>Node002&#45;&gt;GiveCards(1)</title>
<path fill="none" stroke="#555555" stroke-dasharray="1,5" d="M1012.67,-563.78C994.92,-550.09 966.78,-527.74 944,-506.66 921.3,-485.65 897.11,-460 880.18,-441.46"/>
<polygon fill="#555555" stroke="#555555" points="883.26,-439.54 873.95,-434.48 878.08,-444.24 883.26,-439.54"/>
</g>
<!-- Node005 -->
<g id="node14" class="node">
<title>Node005</title>
<ellipse fill="#ffffff" stroke="#000000" cx="1242" cy="-415.62" rx="117.38" ry="91.04"/>
<text text-anchor="middle" x="1242" y="-462.69" font-family="Times,serif" font-size="14.00">Игра &#45; это кайф.</text>
<text text-anchor="middle" x="1242" y="-445.44" font-family="Times,serif" font-size="14.00">&#45;&#45;&#45;</text>
<text text-anchor="middle" x="1242" y="-428.19" font-family="Times,serif" font-size="14.00">Вы выиграли $</text>
<text text-anchor="middle" x="1242" y="-410.94" font-family="Times,serif" font-size="14.00">&#45;&#45;&#45;</text>
<text text-anchor="middle" x="1242" y="-393.69" font-family="Times,serif" font-size="14.00">.</text>
<text text-anchor="middle" x="1242" y="-376.44" font-family="Times,serif" font-size="14.00">&#45;&#45;&#45;</text>
<text text-anchor="middle" x="1242" y="-359.19" font-family="Times,serif" font-size="14.00">Крупье выигрывает.</text>
</g>
<!-- Node002&#45;&gt;Node005 -->
<g id="edge10" class="edge">
<title>Node002&#45;&gt;Node005</title>
<path fill="none" stroke="#555555" stroke-dasharray="1,5" d="M1047.35,-563.79C1069.92,-546.73 1111.05,-515.63 1149.7,-486.4"/>
<polygon fill="#555555" stroke="#555555" points="1151.56,-488.63 1157.42,-479.81 1147.33,-483.05 1151.56,-488.63"/>
</g>
<!-- Node006 -->
<g id="node15" class="node">
<title>Node006</title>
<ellipse fill="#ffffff" stroke="#000000" cx="1242" cy="-180.29" rx="143.37" ry="91.04"/>
<text text-anchor="middle" x="1242" y="-227.36" font-family="Times,serif" font-size="14.00">[тасуя карты] Сыграем</text>
<text text-anchor="middle" x="1242" y="-210.11" font-family="Times,serif" font-size="14.00">еще?</text>
<text text-anchor="middle" x="1242" y="-192.86" font-family="Times,serif" font-size="14.00">&#45;&#45;&#45;</text>
<text text-anchor="middle" x="1242" y="-175.61" font-family="Times,serif" font-size="14.00">Извините, но вы уже</text>
<text text-anchor="middle" x="1242" y="-158.36" font-family="Times,serif" font-size="14.00">достигли своего потолка.</text>
<text text-anchor="middle" x="1242" y="-141.11" font-family="Times,serif" font-size="14.00">Мне придется попросить</text>
<text text-anchor="middle" x="1242" y="-123.86" font-family="Times,serif" font-size="14.00">вас уйти.</text>
</g>
<!-- Node005&#45;&gt;Node006 -->
<g id="edge11" class="edge">
<title>Node005&#45;&gt;Node006</title>
<path fill="none" stroke="#129900" d="M1242,-324.41C1242,-310.61 1242,-296.3 1242,-282.29"/>
<polygon fill="#129900" stroke="#129900" points="1245.5,-282.65 1242,-272.65 1238.5,-282.65 1245.5,-282.65"/>
<text text-anchor="middle" x="1274.25" y="-293.28" font-family="Times,serif" font-size="14.00" fill="#129900">[дальше]</text>
</g>
<!-- Node006&#45;&gt;Node001 -->
<g id="edge12" class="edge">
<title>Node006&#45;&gt;Node001</title>
<path fill="none" stroke="#99003e" d="M1324.54,-255.05C1342.24,-275.62 1358.47,-299.32 1368,-324.58 1396.56,-400.3 1408.72,-436.72 1368,-506.66 1321.54,-586.47 1228.16,-635.79 1151.3,-664.41"/>
<polygon fill="#99003e" stroke="#99003e" points="1150.25,-661.43 1142.05,-668.14 1152.65,-668.01 1150.25,-661.43"/>
<text text-anchor="middle" x="1388.38" y="-528.61" font-family="Times,serif" font-size="14.00" fill="#99003e">Конечно.</text>
</g>
<!-- Node006&#45;&gt;Node999 -->
<g id="edge13" class="edge">
<title>Node006&#45;&gt;Node999</title>
<path fill="none" stroke="#006b99" d="M1143.05,-113.9C1104.81,-91.51 1059.77,-68.47 1016,-54 938.79,-28.48 842.99,-21.51 790.96,-19.65"/>
<polygon fill="#006b99" stroke="#006b99" points="791.35,-16.13 781.24,-19.31 791.13,-23.12 791.35,-16.13"/>
<text text-anchor="middle" x="1105.5" y="-57.95" font-family="Times,serif" font-size="14.00" fill="#006b99">Нет, спасибо.</text>
</g>
<!-- Node006&#45;&gt;Node999 -->
<g id="edge14" class="edge">
<title>Node006&#45;&gt;Node999</title>
<path fill="none" stroke="#989900" d="M1105.57,-151.39C1027.38,-133.16 928.32,-106.22 844,-71.25 821.71,-62 798.12,-48.34 780.55,-37.3"/>
<polygon fill="#989900" stroke="#989900" points="782.76,-33.92 772.45,-31.48 778.99,-39.82 782.76,-33.92"/>
<text text-anchor="middle" x="928" y="-57.95" font-family="Times,serif" font-size="14.00" fill="#989900">Конечно, нет проблем.</text>
</g>
<!-- Node006&#45;&gt;Node998 -->
<g id="edge15" class="edge">
<title>Node006&#45;&gt;Node998</title>
<path fill="none" stroke="#6e0099" d="M1263.33,-90.08C1269.33,-76.91 1276.99,-64.32 1286.75,-54 1299.3,-40.74 1317.67,-32.3 1333.96,-27.04"/>
<polygon fill="#6e0099" stroke="#6e0099" points="1334.66,-30.19 1343.28,-24.02 1332.7,-23.47 1334.66,-30.19"/>
<text text-anchor="middle" x="1375.12" y="-57.95" font-family="Times,serif" font-size="14.00" fill="#6e0099">Я тебе покажу потолок.</text>
</g>
<!-- DrawCard -->
<g id="node16" class="node">
<title>DrawCard</title>
<ellipse fill="#ffffff" stroke="#000000" cx="969" cy="-1446.71" rx="27" ry="18"/>
</g>
<!-- GetCardValue -->
<g id="node17" class="node">
<title>GetCardValue</title>
<ellipse fill="#ffffff" stroke="#000000" cx="1041" cy="-1446.71" rx="27" ry="18"/>
</g>
<!-- TotalCards -->
<g id="node18" class="node">
<title>TotalCards</title>
<ellipse fill="#ffffff" stroke="#000000" cx="1113" cy="-1446.71" rx="27" ry="18"/>
</g>
<!-- GiveCards -->
<g id="node19" class="node">
<title>GiveCards</title>
<ellipse fill="#ffffff" stroke="#000000" cx="1185" cy="-1446.71" rx="27" ry="18"/>
</g>
<!-- PrintDrawCardMessages -->
<g id="node20" class="node">
<title>PrintDrawCardMessages</title>
<ellipse fill="#ffffff" stroke="#000000" cx="1331" cy="-1446.71" rx="101.47" ry="261.81"/>
<text text-anchor="middle" x="1331" y="-1614.53" font-family="Times,serif" font-size="14.00"> из</text>
<text text-anchor="middle" x="1331" y="-1597.28" font-family="Times,serif" font-size="14.00">&#45;&#45;&#45;</text>
<text text-anchor="middle" x="1331" y="-1580.03" font-family="Times,serif" font-size="14.00">,</text>
<text text-anchor="middle" x="1331" y="-1562.78" font-family="Times,serif" font-size="14.00">&#45;&#45;&#45;</text>
<text text-anchor="middle" x="1331" y="-1545.53" font-family="Times,serif" font-size="14.00"> из</text>
<text text-anchor="middle" x="1331" y="-1528.28" font-family="Times,serif" font-size="14.00">&#45;&#45;&#45;</text>
<text text-anchor="middle" x="1331" y="-1511.03" font-family="Times,serif" font-size="14.00"> и</text>
<text text-anchor="middle" x="1331" y="-1493.78" font-family="Times,serif" font-size="14.00">&#45;&#45;&#45;</text>
<text text-anchor="middle" x="1331" y="-1476.53" font-family="Times,serif" font-size="14.00"> из</text>
<text text-anchor="middle" x="1331" y="-1459.28" font-family="Times,serif" font-size="14.00">&#45;&#45;&#45;</text>
<text text-anchor="middle" x="1331" y="-1442.03" font-family="Times,serif" font-size="14.00"> на сумму</text>
<text text-anchor="middle" x="1331" y="-1424.78" font-family="Times,serif" font-size="14.00">&#45;&#45;&#45;</text>
<text text-anchor="middle" x="1331" y="-1407.53" font-family="Times,serif" font-size="14.00">. Блэк Джек</text>
<text text-anchor="middle" x="1331" y="-1390.28" font-family="Times,serif" font-size="14.00">&#45;&#45;&#45;</text>
<text text-anchor="middle" x="1331" y="-1373.03" font-family="Times,serif" font-size="14.00">. Банкрот</text>
<text text-anchor="middle" x="1331" y="-1355.78" font-family="Times,serif" font-size="14.00">&#45;&#45;&#45;</text>
<text text-anchor="middle" x="1331" y="-1338.53" font-family="Times,serif" font-size="14.00">.</text>
<text text-anchor="middle" x="1331" y="-1321.28" font-family="Times,serif" font-size="14.00">&#45;&#45;&#45;</text>
<text text-anchor="middle" x="1331" y="-1304.03" font-family="Times,serif" font-size="14.00">Вы вытаскиваете</text>
<text text-anchor="middle" x="1331" y="-1286.78" font-family="Times,serif" font-size="14.00">&#45;&#45;&#45;</text>
<text text-anchor="middle" x="1331" y="-1269.53" font-family="Times,serif" font-size="14.00">У крупье</text>
</g>
</g>
</svg>
<script>window.Codes = {"start":"[]","look_at_p_proc":"script_overrides;\nif (obj_type(self_obj) == 1) then begin\n  display_msg(message_str(70, 101));\nend\nelse begin\n  display_msg(message_str(70, 100));\nend\n","description_p_proc":"script_overrides;\nif (obj_type(self_obj) == 1) then begin\n  display_msg(message_str(70, 101));\nend\nelse begin\n  display_msg(message_str(70, 110) + 20 + message_str(70, 111));\nend\n","talk_p_proc":"call Node000;\n","pickup_p_proc":"if (obj_type(self_obj) == 1) then begin\n  if (critter_is_fleeing(self_obj)) then begin\n    if (anim_busy(self_obj) == 0) then begin\n      if ((tile_distance_objs(self_obj, dude_obj) < 8) or obj_can_see_obj(self_obj, dude_obj)) then begin\n        if (anim_busy(self_obj) == 0) then begin\n          global_temp := rotation_to_tile(tile_num(dude_obj), tile_num(self_obj));\n          animate_move_obj_to_tile(self_obj, tile_num_in_direction(tile_num(self_obj), global_temp, random(3, 10)), 1);\n          global_temp := (global_temp + 1) % 6;\n          while((anim_busy(self_obj) == 0) and (global_temp != rotation_to_tile(tile_num(dude_obj), tile_num(self_obj)))) do begin\n            debug_msg(\"ziblkjck\" + \": \" + \"flee loop: rot == \" + global_temp + \"\\n\");\n            animate_move_obj_to_tile(self_obj, tile_num_in_direction(tile_num(self_obj), global_temp, random(3, 10)), 1);\n            global_temp := (global_temp + 1) % 6;\n          end\n        end\n      end\n    end\n  end\n  else begin\n    attack_complex(dude_obj, 0, 1, 0, 0, 30000, 0, 0);\n  end\nend\n","timed_event_p_proc":"if (obj_type(self_obj) == 1) then begin\n  if (tile_distance_objs(self_obj, dude_obj) <= 4) then begin\n    if (random(0, 4) != 3) then begin\n      play_sfx(\"shuffle\");\n    end\n  end\nend\n","Node000":"if (local_var(0) == 0) then begin\n  start_gdialog(70, self_obj, 4, 4294967295, 4294967295);\n  gsay_start;\n  if (((local_var(1) > 0) or 1) == 0) then begin\n    gsay_reply(70, message_str(70, 102) + 20 + message_str(70, 103));\n    giq_option(4, 70, 104, Node001, 50);\n    giq_option(4, 70, 105, Node999, 50);\n    giq_option(4294967293, 70, 106, Node999, 50);\n  end\n  else begin\n    gsay_reply(70, 129);\n    giq_option(1, 70, 127, Node999, 50);\n    if ((local_var(1) > 0) or 1) then begin\n      giq_option(1, 70, 128, Node998, 50);\n    end\n  end\n  gsay_end;\n  end_dialogue;\nend\nelse begin\n  if (obj_type(self_obj) == 1) then begin\n    float_msg(self_obj, message_str(70, 129), 8);\n  end\nend\n","Node001":"if (item_caps_total(dude_obj) >= 20) then begin\n  player_1_card := 0;\n  player_2_card := 0;\n  player_3_card := 0;\n  player_hand_total := TotalCards(0, 0, 0);\n  dealer_1_card := 0;\n  dealer_2_card := 0;\n  dealer_3_card := 0;\n  dealer_hand_total := TotalCards(0, 0, 0);\n  call Node002;\nend\nelse begin\n  gsay_reply(70, 107);\nend\n","Node002":"call GiveCards(0);\ncall GiveCards(1);\ncall Node005;\n","Node005":"variable LVar0 := 0;\nvariable LVar1 := 0;\nLVar0 := PrintDrawCardMessages(0, player_1_card, player_2_card, player_3_card, player_hand_total) + \"  \" + PrintDrawCardMessages(1, dealer_1_card, dealer_2_card, dealer_3_card, dealer_hand_total) + \"  \";\nif ((player_hand_total == dealer_hand_total) or ((player_hand_total > 21) and (dealer_hand_total > 21))) then begin\n  gsay_reply(70, LVar0 + message_str(70, 126));\nend\nelse begin\n  if ((player_hand_total > dealer_hand_total) or (dealer_hand_total > 21) and (player_hand_total <= 21)) then begin\n    if ((player_hand_total == 21) and (player_3_card == 0)) then begin\n      LVar1 := 30;\n    end\n    else begin\n      LVar1 := 20;\n    end\n    set_local_var(1, local_var(1) + LVar1);\n    item_caps_adjust(dude_obj, LVar1);\n    gsay_reply(70, LVar0 + message_str(70, 131) + LVar1 + message_str(70, 132));\n  end\n  else begin\n    set_local_var(1, local_var(1) + 4294967276);\n    item_caps_adjust(dude_obj, 4294967276);\n    gsay_reply(70, LVar0 + message_str(70, 125));\n  end\nend\ngiq_option(1, 70, 121, Node006, 50);\n","Node006":"if ((local_var(1) > 0) or 1) then begin\n  play_sfx(\"shuffle\");\n  gsay_reply(70, 122);\n  giq_option(1, 70, 104, Node001, 50);\n  giq_option(1, 70, 105, Node999, 50);\nend\nelse begin\n  gsay_reply(70, 123);\n  giq_option(1, 70, 127, Node999, 50);\n  giq_option(1, 70, 128, Node998, 50);\nend\n","DrawCard":"variable LVar1 := 0;\nvariable LVar2 := 0;\nif (arg0 > 0) then begin\n  if (arg0 == 11) then begin\n    LVar1 := 1;\n  end\n  else begin\n    if (arg0 >= 10) then begin\n      LVar1 := random(10, 13);\n    end\n    else begin\n      LVar1 := arg0;\n    end\n  end\n  while((player_1_card == (LVar1 + 0)) or (player_2_card == (LVar1 + 0)) or (player_3_card == (LVar1 + 0)) or ((dealer_1_card == (LVar1 + 0)) or (dealer_2_card == (LVar1 + 0)) or (dealer_3_card == (LVar1 + 0))) or ((player_1_card == (LVar1 + 13)) or (player_2_card == (LVar1 + 13)) or (player_3_card == (LVar1 + 13)) or ((dealer_1_card == (LVar1 + 13)) or (dealer_2_card == (LVar1 + 13)) or (dealer_3_card == (LVar1 + 13)))) or ((player_1_card == (LVar1 + 26)) or (player_2_card == (LVar1 + 26)) or (player_3_card == (LVar1 + 26)) or ((dealer_1_card == (LVar1 + 26)) or (dealer_2_card == (LVar1 + 26)) or (dealer_3_card == (LVar1 + 26)))) or ((player_1_card == (LVar1 + 39)) or (player_2_card == (LVar1 + 39)) or (player_3_card == (LVar1 + 39)) or ((dealer_1_card == (LVar1 + 39)) or (dealer_2_card == (LVar1 + 39)) or (dealer_3_card == (LVar1 + 39))))) do begin\n    if (LVar1 == 1) then begin\n      LVar1 := 13;\n    end\n    else begin\n      LVar1 := LVar1 - 1;\n    end\n  end\n  LVar2 := random(1, 4);\n  while((player_1_card == (LVar1 + ((LVar2 - 1) * 13))) or (player_2_card == (LVar1 + ((LVar2 - 1) * 13))) or (player_3_card == (LVar1 + ((LVar2 - 1) * 13))) or ((dealer_1_card == (LVar1 + ((LVar2 - 1) * 13))) or (dealer_2_card == (LVar1 + ((LVar2 - 1) * 13))) or (dealer_3_card == (LVar1 + ((LVar2 - 1) * 13))))) do begin\n    LVar2 := LVar2 + 1;\n    if (LVar2 > 4) then begin\n      LVar2 := 1;\n    end\n  end\n  return LVar1 + ((LVar2 - 1) * 13);\nend\nelse begin\n  return 0;\nend\n","GetCardValue":"variable LVar1 := 0;\nLVar1 := arg0 - (((((arg0 > 0) and (arg0 <= 13)) * 1) + (((arg0 > 13) and (arg0 <= 26)) * 2) + (((arg0 > 26) and (arg0 <= 39)) * 3) + (((arg0 > 39) and (arg0 <= 52)) * 4) - 1) * 13);\nif (LVar1 > 10) then begin\n  return 10;\nend\nelse begin\n  return LVar1;\nend\n","TotalCards":"variable LVar3 := 0;\nLVar3 := GetCardValue(arg0) + GetCardValue(arg1) + GetCardValue(arg2);\nif ((arg0 == 1) or (arg0 == 14) or (arg0 == 27) or (arg0 == 40) or ((arg1 == 1) or (arg1 == 14) or (arg1 == 27) or (arg1 == 40)) or ((arg2 == 1) or (arg2 == 14) or (arg2 == 27) or (arg2 == 40)) and (LVar3 <= 11)) then begin\n  LVar3 := LVar3 + 10;\nend\nreturn LVar3;\n","GiveCards":"variable LVar1 := 0;\nvariable LVar2 := 0;\nvariable LVar3 := 0;\nvariable LVar4 := 0;\nvariable LVar5 := 0;\nvariable LVar6 := 0;\nLVar6 := roll_vs_skill(dude_obj, 16, 0);\nif (is_critical(LVar6)) then begin\n  if (is_success(LVar6) and (arg0 == 0) or ((is_success(LVar6) == 0) and (arg0 == 1))) then begin\n    LVar1 := DrawCard(11);\n    LVar2 := DrawCard(10);\n  end\n  else begin\n    LVar1 := DrawCard(random(9, 10));\n    LVar2 := DrawCard(random(4, 8));\n    LVar3 := DrawCard(random(9, 10));\n  end\nend\nelse begin\n  if (is_success(LVar6) and (arg0 == 0) or ((is_success(LVar6) == 0) and (arg0 == 1))) then begin\n    LVar4 := random(18, 21);\n  end\n  else begin\n    LVar4 := random(15, 17);\n  end\n  LVar1 := DrawCard(random(1, 13));\n  if ((GetCardValue(LVar1) + 10) <= LVar4) then begin\n    LVar2 := DrawCard(10);\n  end\n  LVar2 := DrawCard(random(1, LVar4 - GetCardValue(LVar1)));\n  LVar5 := TotalCards(LVar1, LVar2, 0);\n  if (LVar4 > LVar5) then begin\n    LVar3 := DrawCard(LVar4 - LVar5);\n  end\nend\nif (arg0 == 0) then begin\n  player_1_card := LVar1;\n  player_2_card := LVar2;\n  player_3_card := LVar3;\n  player_hand_total := TotalCards(LVar1, LVar2, LVar3);\nend\nelse begin\n  dealer_1_card := LVar1;\n  dealer_2_card := LVar2;\n  dealer_3_card := LVar3;\n  dealer_hand_total := TotalCards(LVar1, LVar2, LVar3);\nend\n","Node999":"[]","Node998":"set_local_var(0, 1);\n","PrintDrawCardMessages":"variable LVar5 := 0;\nvariable LVar6 := 0;\nLVar5 := message_str(70, 200 + (arg1 - (((((arg1 > 0) and (arg1 <= 13)) * 1) + (((arg1 > 13) and (arg1 <= 26)) * 2) + (((arg1 > 26) and (arg1 <= 39)) * 3) + (((arg1 > 39) and (arg1 <= 52)) * 4) - 1) * 13))) + message_str(70, 113) + message_str(70, 250 + ((((arg1 > 0) and (arg1 <= 13)) * 1) + (((arg1 > 13) and (arg1 <= 26)) * 2) + (((arg1 > 26) and (arg1 <= 39)) * 3) + (((arg1 > 39) and (arg1 <= 52)) * 4)));\nif (arg3 == 0) then begin\n  LVar6 := arg2;\nend\nelse begin\n  LVar5 := LVar5 + (message_str(70, 114) + message_str(70, 200 + (arg2 - (((((arg2 > 0) and (arg2 <= 13)) * 1) + (((arg2 > 13) and (arg2 <= 26)) * 2) + (((arg2 > 26) and (arg2 <= 39)) * 3) + (((arg2 > 39) and (arg2 <= 52)) * 4) - 1) * 13))) + message_str(70, 113) + message_str(70, 250 + ((((arg2 > 0) and (arg2 <= 13)) * 1) + (((arg2 > 13) and (arg2 <= 26)) * 2) + (((arg2 > 26) and (arg2 <= 39)) * 3) + (((arg2 > 39) and (arg2 <= 52)) * 4))));\n  LVar6 := arg3;\nend\nLVar5 := LVar5 + (message_str(70, 115) + message_str(70, 200 + (LVar6 - (((((LVar6 > 0) and (LVar6 <= 13)) * 1) + (((LVar6 > 13) and (LVar6 <= 26)) * 2) + (((LVar6 > 26) and (LVar6 <= 39)) * 3) + (((LVar6 > 39) and (LVar6 <= 52)) * 4) - 1) * 13))) + message_str(70, 113) + message_str(70, 250 + ((((LVar6 > 0) and (LVar6 <= 13)) * 1) + (((LVar6 > 13) and (LVar6 <= 26)) * 2) + (((LVar6 > 26) and (LVar6 <= 39)) * 3) + (((LVar6 > 39) and (LVar6 <= 52)) * 4))) + message_str(70, 116) + arg4);\nif ((arg4 == 21) and (arg3 == 0)) then begin\n  LVar5 := LVar5 + message_str(70, 117);\nend\nelse begin\n  if (arg4 > 21) then begin\n    LVar5 := LVar5 + message_str(70, 118);\n  end\nend\nLVar5 := LVar5 + message_str(70, 119);\nif (arg0 == 0) then begin\n  LVar5 := message_str(70, 112) + LVar5;\nend\nelse begin\n  LVar5 := message_str(70, 120) + LVar5;\nend\nreturn LVar5;\n"}</script></body><script src="../jquery.js"></script><script src="../underscore.js"></script><script>(function() {
  var downAt, hideCode, nodes, positionCode, showCode;

  $('svg').attr('unselectable', 'on').css({
    '-moz-user-select': '-moz-none',
    '-moz-user-select': 'none',
    '-o-user-select': 'none',
    '-khtml-user-select': 'none',
    '-webkit-user-select': 'none',
    '-ms-user-select': 'none',
    'user-select': 'none'
  }).bind('selectstart', function() {
    return false;
  });

  $('<div/>', {
    id: 'thecode'
  }).appendTo('body');

  $('#thecode').css({
    'pointer-events': 'none',
    background: 'white',
    padding: '1em',
    outline: 'solid gray 1px',
    'white-space': 'pre',
    position: 'fixed',
    left: 0,
    top: 0
  });

  showCode = function(code, x, y) {
    $('#thecode').show();
    $('#thecode').text(code);
    return positionCode(x, y);
  };

  hideCode = function() {
    return $('#thecode').hide();
  };

  positionCode = function(x, y) {
    return $('#thecode').css({
      left: x,
      top: y
    });
  };

  nodes = $('.node');

  _.each(nodes, function(node) {
    var nodeName;
    nodeName = $(node).find('title').text();
    $(node).mousemove(function(e) {
      return showCode(Codes[nodeName], e.clientX, e.clientY);
    });
    return $(node).mouseleave(function() {
      return hideCode();
    });
  });

  $('svg title').remove();

  downAt = null;

  $('svg').mousedown(function(e) {
    var x, y;
    x = e.pageX;
    y = e.pageY;
    return downAt = {
      x: x,
      y: y
    };
  });

  $('svg').mousemove(function(e) {
    var delta, x, y;
    if (!downAt) {
      return;
    }
    x = e.pageX;
    y = e.pageY;
    delta = {
      x: x - downAt.x,
      y: y - downAt.y
    };
    window.scrollBy(-delta.x, -delta.y);
    return false;
  });

  $('svg').mouseup(function(e) {
    return downAt = null;
  });

  $('svg').mouseleave(function(e) {
    return downAt = null;
  });

}).call(this);
</script></html>