<!DOCTYPE html><html><head><title>rndcity</title><meta charset="utf-8" /></head><body><svg width="1882pt" height="380pt"
 viewBox="0.00 0.00 1882.14 380.50" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 376.5)">
<title>rndcity</title>
<polygon fill="white" stroke="none" points="-4,4 -4,-376.5 1878.14,-376.5 1878.14,4 -4,4"/>
<!-- start -->
<g id="node1" class="node">
<title>start</title>
<ellipse fill="#ffffff" stroke="#000000" cx="1608.14" cy="-354.5" rx="27" ry="18"/>
</g>
<!-- map_enter_p_proc -->
<g id="node2" class="node">
<title>map_enter_p_proc</title>
<ellipse fill="#ffffff" stroke="#000000" cx="1298.14" cy="-282.5" rx="27" ry="18"/>
</g>
<!-- start&#45;&gt;map_enter_p_proc -->
<g id="edge1" class="edge">
<title>start&#45;&gt;map_enter_p_proc</title>
<path fill="none" stroke="#555555" stroke-dasharray="1,5" d="M1582.77,-347.77C1527.79,-335.36 1397.53,-305.94 1334.09,-291.62"/>
<polygon fill="#555555" stroke="#555555" points="1334.95,-288 1324.42,-289.21 1333.4,-294.83 1334.95,-288"/>
</g>
<!-- map_update_p_proc -->
<g id="node3" class="node">
<title>map_update_p_proc</title>
<ellipse fill="#ffffff" stroke="#000000" cx="1608.14" cy="-282.5" rx="27" ry="18"/>
</g>
<!-- start&#45;&gt;map_update_p_proc -->
<g id="edge2" class="edge">
<title>start&#45;&gt;map_update_p_proc</title>
<path fill="none" stroke="#555555" stroke-dasharray="1,5" d="M1608.14,-336.2C1608.14,-328.74 1608.14,-319.82 1608.14,-311.46"/>
<polygon fill="#555555" stroke="#555555" points="1611.64,-311.6 1608.14,-301.6 1604.64,-311.6 1611.64,-311.6"/>
</g>
<!-- map_exit_p_proc -->
<g id="node4" class="node">
<title>map_exit_p_proc</title>
<ellipse fill="#ffffff" stroke="#000000" cx="1680.14" cy="-282.5" rx="27" ry="18"/>
</g>
<!-- start&#45;&gt;map_exit_p_proc -->
<g id="edge3" class="edge">
<title>start&#45;&gt;map_exit_p_proc</title>
<path fill="none" stroke="#555555" stroke-dasharray="1,5" d="M1623.06,-339C1633,-329.33 1646.26,-316.44 1657.49,-305.52"/>
<polygon fill="#555555" stroke="#555555" points="1659.51,-308.47 1664.24,-298.98 1654.63,-303.45 1659.51,-308.47"/>
</g>
<!-- City1 -->
<g id="node5" class="node">
<title>City1</title>
<ellipse fill="#ffffff" stroke="#000000" cx="113.14" cy="-186.25" rx="113.14" ry="30.05"/>
<text text-anchor="middle" x="113.14" y="-190.2" font-family="Times,serif" font-size="14.00">Вы попали в засаду</text>
<text text-anchor="middle" x="113.14" y="-172.95" font-family="Times,serif" font-size="14.00">супермутантов!</text>
</g>
<!-- map_enter_p_proc&#45;&gt;City1 -->
<g id="edge4" class="edge">
<title>map_enter_p_proc&#45;&gt;City1</title>
<path fill="none" stroke="#555555" stroke-dasharray="1,5" d="M1271.15,-281.16C1126.58,-279.2 442.53,-267.94 235.14,-228.5 218.58,-225.35 201.21,-220.48 184.92,-215.18"/>
<polygon fill="#555555" stroke="#555555" points="186.53,-211.69 175.94,-211.83 184.31,-218.33 186.53,-211.69"/>
</g>
<!-- City2 -->
<g id="node6" class="node">
<title>City2</title>
<ellipse fill="#ffffff" stroke="#000000" cx="383.14" cy="-186.25" rx="138.59" ry="30.05"/>
<text text-anchor="middle" x="383.14" y="-190.2" font-family="Times,serif" font-size="14.00">Похоже, вы вляпались в</text>
<text text-anchor="middle" x="383.14" y="-172.95" font-family="Times,serif" font-size="14.00">бандитскую разборку!</text>
</g>
<!-- map_enter_p_proc&#45;&gt;City2 -->
<g id="edge5" class="edge">
<title>map_enter_p_proc&#45;&gt;City2</title>
<path fill="none" stroke="#555555" stroke-dasharray="1,5" d="M1270.69,-281.62C1170.66,-281.66 816.58,-278.03 530.14,-228.5 510.32,-225.07 489.34,-220.05 469.63,-214.69"/>
<polygon fill="#555555" stroke="#555555" points="470.71,-211.08 460.13,-211.77 468.83,-217.82 470.71,-211.08"/>
</g>
<!-- City3 -->
<g id="node7" class="node">
<title>City3</title>
<ellipse fill="#ffffff" stroke="#000000" cx="696.14" cy="-186.25" rx="156.62" ry="30.05"/>
<text text-anchor="middle" x="696.14" y="-190.2" font-family="Times,serif" font-size="14.00">Внезапно появляется банда</text>
<text text-anchor="middle" x="696.14" y="-172.95" font-family="Times,serif" font-size="14.00">налетчиков!</text>
</g>
<!-- map_enter_p_proc&#45;&gt;City3 -->
<g id="edge6" class="edge">
<title>map_enter_p_proc&#45;&gt;City3</title>
<path fill="none" stroke="#555555" stroke-dasharray="1,5" d="M1271.17,-279.38C1202.52,-273.73 1015.68,-256.8 862.14,-228.5 840.43,-224.5 817.33,-219.34 795.48,-214.04"/>
<polygon fill="#555555" stroke="#555555" points="796.41,-210.42 785.86,-211.43 794.74,-217.22 796.41,-210.42"/>
</g>
<!-- City4 -->
<g id="node8" class="node">
<title>City4</title>
<ellipse fill="#ffffff" stroke="#000000" cx="995.14" cy="-186.25" rx="124.27" ry="42.25"/>
<text text-anchor="middle" x="995.14" y="-198.82" font-family="Times,serif" font-size="14.00">Большая стая крыс</text>
<text text-anchor="middle" x="995.14" y="-181.57" font-family="Times,serif" font-size="14.00">стремглав несется по</text>
<text text-anchor="middle" x="995.14" y="-164.32" font-family="Times,serif" font-size="14.00">улице!</text>
</g>
<!-- map_enter_p_proc&#45;&gt;City4 -->
<g id="edge7" class="edge">
<title>map_enter_p_proc&#45;&gt;City4</title>
<path fill="none" stroke="#555555" stroke-dasharray="1,5" d="M1273.85,-273.95C1235.68,-262.07 1159.46,-238.36 1096.36,-218.74"/>
<polygon fill="#555555" stroke="#555555" points="1097.54,-215.13 1086.96,-215.5 1095.46,-221.81 1097.54,-215.13"/>
</g>
<!-- City5 -->
<g id="node9" class="node">
<title>City5</title>
<ellipse fill="#ffffff" stroke="#000000" cx="1298.14" cy="-186.25" rx="160.34" ry="30.05"/>
<text text-anchor="middle" x="1298.14" y="-190.2" font-family="Times,serif" font-size="14.00">Внезапно появляется шайка</text>
<text text-anchor="middle" x="1298.14" y="-172.95" font-family="Times,serif" font-size="14.00">бандитов!</text>
</g>
<!-- map_enter_p_proc&#45;&gt;City5 -->
<g id="edge8" class="edge">
<title>map_enter_p_proc&#45;&gt;City5</title>
<path fill="none" stroke="#555555" stroke-dasharray="1,5" d="M1298.14,-264.21C1298.14,-253.94 1298.14,-240.45 1298.14,-227.63"/>
<polygon fill="#555555" stroke="#555555" points="1301.64,-227.65 1298.14,-217.65 1294.64,-227.65 1301.64,-227.65"/>
</g>
<!-- City6 -->
<g id="node10" class="node">
<title>City6</title>
<ellipse fill="#ffffff" stroke="#000000" cx="1603.14" cy="-186.25" rx="126.93" ry="30.05"/>
<text text-anchor="middle" x="1603.14" y="-190.2" font-family="Times,serif" font-size="14.00">Внезапно вас атакуют</text>
<text text-anchor="middle" x="1603.14" y="-172.95" font-family="Times,serif" font-size="14.00">крысы!</text>
</g>
<!-- map_enter_p_proc&#45;&gt;City6 -->
<g id="edge9" class="edge">
<title>map_enter_p_proc&#45;&gt;City6</title>
<path fill="none" stroke="#555555" stroke-dasharray="1,5" d="M1322.32,-274.02C1363.85,-261.19 1450.62,-234.38 1516.79,-213.93"/>
<polygon fill="#555555" stroke="#555555" points="1517.7,-217.01 1526.22,-210.71 1515.63,-210.32 1517.7,-217.01"/>
</g>
<!-- hunters -->
<g id="node11" class="node">
<title>hunters</title>
<ellipse fill="#ffffff" stroke="#000000" cx="1775.14" cy="-186.25" rx="27" ry="18"/>
</g>
<!-- map_enter_p_proc&#45;&gt;hunters -->
<g id="edge10" class="edge">
<title>map_enter_p_proc&#45;&gt;hunters</title>
<path fill="none" stroke="#555555" stroke-dasharray="1,5" d="M1325.44,-280.76C1410.06,-278.06 1666.62,-266.85 1739.14,-228.5 1746.65,-224.53 1753.3,-218.3 1758.78,-211.88"/>
<polygon fill="#555555" stroke="#555555" points="1762.15,-214.25 1765.5,-204.19 1756.61,-209.96 1762.15,-214.25"/>
</g>
<!-- Lighting -->
<g id="node12" class="node">
<title>Lighting</title>
<ellipse fill="#ffffff" stroke="#000000" cx="1847.14" cy="-186.25" rx="27" ry="18"/>
</g>
<!-- map_enter_p_proc&#45;&gt;Lighting -->
<g id="edge11" class="edge">
<title>map_enter_p_proc&#45;&gt;Lighting</title>
<path fill="none" stroke="#555555" stroke-dasharray="1,5" d="M1325.14,-279.87C1424.7,-273.7 1767.71,-251 1811.14,-228.5 1818.68,-224.59 1825.34,-218.38 1830.82,-211.96"/>
<polygon fill="#555555" stroke="#555555" points="1834.2,-214.32 1837.53,-204.26 1828.65,-210.04 1834.2,-214.32"/>
</g>
<!-- map_update_p_proc&#45;&gt;Lighting -->
<g id="edge12" class="edge">
<title>map_update_p_proc&#45;&gt;Lighting</title>
<path fill="none" stroke="#555555" stroke-dasharray="1,5" d="M1629.12,-270.61C1633.97,-268.37 1639.16,-266.19 1644.14,-264.5 1716.05,-240.13 1745.73,-267.07 1811.14,-228.5 1818.34,-224.25 1824.85,-218.05 1830.28,-211.74"/>
<polygon fill="#555555" stroke="#555555" points="1833.54,-214.26 1837,-204.24 1828.05,-209.92 1833.54,-214.26"/>
</g>
<!-- stranger -->
<g id="node13" class="node">
<title>stranger</title>
<ellipse fill="#ffffff" stroke="#000000" cx="1050.14" cy="-90" rx="27" ry="18"/>
</g>
<!-- City1&#45;&gt;stranger -->
<g id="edge21" class="edge">
<title>City1&#45;&gt;stranger</title>
<path fill="none" stroke="#555555" stroke-dasharray="1,5" d="M175.29,-160.75C194.23,-154.24 215.29,-147.93 235.14,-144 386.83,-113.96 871.68,-96.64 1011.85,-92.16"/>
<polygon fill="#555555" stroke="#555555" points="1011.95,-95.63 1021.83,-91.82 1011.73,-88.64 1011.95,-95.63"/>
</g>
<!-- Place_critter -->
<g id="node14" class="node">
<title>Place_critter</title>
<ellipse fill="#ffffff" stroke="#000000" cx="1050.14" cy="-18" rx="27" ry="18"/>
</g>
<!-- City1&#45;&gt;Place_critter -->
<g id="edge19" class="edge">
<title>City1&#45;&gt;Place_critter</title>
<path fill="none" stroke="#555555" stroke-dasharray="1,5" d="M171.94,-160.26C189.21,-154.35 208.24,-148.48 226.14,-144 523.81,-69.5 894.41,-32.12 1012.38,-21.93"/>
<polygon fill="#555555" stroke="#555555" points="1012.64,-25.34 1022.31,-21 1012.05,-18.36 1012.64,-25.34"/>
</g>
<!-- City1&#45;&gt;Place_critter -->
<g id="edge20" class="edge">
<title>City1&#45;&gt;Place_critter</title>
<path fill="none" stroke="#555555" stroke-dasharray="1,5" d="M183.21,-162.3C202.81,-155.73 224.18,-148.99 244.14,-144 535.43,-71.1 896.55,-33.74 1012.54,-22.63"/>
<polygon fill="#555555" stroke="#555555" points="1012.68,-26.03 1022.3,-21.6 1012.01,-19.06 1012.68,-26.03"/>
</g>
<!-- City2&#45;&gt;stranger -->
<g id="edge24" class="edge">
<title>City2&#45;&gt;stranger</title>
<path fill="none" stroke="#555555" stroke-dasharray="1,5" d="M460.36,-160.89C482.69,-154.58 507.22,-148.35 530.14,-144 708.46,-110.15 925.57,-96.84 1012,-92.64"/>
<polygon fill="#555555" stroke="#555555" points="1012.01,-96.1 1021.83,-92.13 1011.68,-89.1 1012.01,-96.1"/>
</g>
<!-- City2&#45;&gt;Place_critter -->
<g id="edge22" class="edge">
<title>City2&#45;&gt;Place_critter</title>
<path fill="none" stroke="#555555" stroke-dasharray="1,5" d="M459.37,-160.82C479.39,-155.15 501,-149.24 521.14,-144 705.13,-96.09 927.49,-44.85 1013.71,-26.26"/>
<polygon fill="#555555" stroke="#555555" points="1014.21,-29.52 1023.25,-24 1012.74,-22.67 1014.21,-29.52"/>
</g>
<!-- City2&#45;&gt;Place_critter -->
<g id="edge23" class="edge">
<title>City2&#45;&gt;Place_critter</title>
<path fill="none" stroke="#555555" stroke-dasharray="1,5" d="M470.6,-162.54C492.97,-156.36 516.95,-149.78 539.14,-144 717.17,-97.64 931.13,-48.16 1014.57,-28.16"/>
<polygon fill="#555555" stroke="#555555" points="1015.33,-31.34 1024.23,-25.6 1013.69,-24.54 1015.33,-31.34"/>
</g>
<!-- City3&#45;&gt;stranger -->
<g id="edge27" class="edge">
<title>City3&#45;&gt;stranger</title>
<path fill="none" stroke="#555555" stroke-dasharray="1,5" d="M785.92,-161.34C860.12,-141.59 961.58,-114.58 1014.59,-100.46"/>
<polygon fill="#555555" stroke="#555555" points="1015.37,-103.61 1024.14,-97.66 1013.57,-96.85 1015.37,-103.61"/>
</g>
<!-- City3&#45;&gt;Place_critter -->
<g id="edge25" class="edge">
<title>City3&#45;&gt;Place_critter</title>
<path fill="none" stroke="#555555" stroke-dasharray="1,5" d="M749.81,-157.61C824.29,-121.48 956.48,-59.6 1017.62,-32.44"/>
<polygon fill="#555555" stroke="#555555" points="1018.76,-35.33 1026.5,-28.09 1015.93,-28.92 1018.76,-35.33"/>
</g>
<!-- City3&#45;&gt;Place_critter -->
<g id="edge26" class="edge">
<title>City3&#45;&gt;Place_critter</title>
<path fill="none" stroke="#555555" stroke-dasharray="1,5" d="M758.53,-158.35C835.37,-123.42 962.57,-63.53 1020.24,-35.01"/>
<polygon fill="#555555" stroke="#555555" points="1021.45,-37.81 1028.84,-30.22 1018.33,-31.55 1021.45,-37.81"/>
</g>
<!-- City4&#45;&gt;stranger -->
<g id="edge29" class="edge">
<title>City4&#45;&gt;stranger</title>
<path fill="none" stroke="#555555" stroke-dasharray="1,5" d="M1018.94,-144.46C1024.45,-135.02 1030.16,-125.23 1035.17,-116.65"/>
<polygon fill="#555555" stroke="#555555" points="1038.65,-118.63 1040.66,-108.23 1032.6,-115.11 1038.65,-118.63"/>
</g>
<!-- City4&#45;&gt;Place_critter -->
<g id="edge28" class="edge">
<title>City4&#45;&gt;Place_critter</title>
<path fill="none" stroke="#555555" stroke-dasharray="1,5" d="M997.8,-143.74C1000.27,-121.79 1005.01,-94.76 1014.14,-72 1018.21,-61.84 1024.47,-51.66 1030.64,-42.98"/>
<polygon fill="#555555" stroke="#555555" points="1034,-45.32 1037.18,-35.21 1028.39,-41.13 1034,-45.32"/>
</g>
<!-- City5&#45;&gt;stranger -->
<g id="edge32" class="edge">
<title>City5&#45;&gt;stranger</title>
<path fill="none" stroke="#555555" stroke-dasharray="1,5" d="M1228.4,-158.75C1180.93,-140.71 1120.26,-117.65 1083.34,-103.62"/>
<polygon fill="#555555" stroke="#555555" points="1084.73,-100.02 1074.14,-99.74 1082.24,-106.57 1084.73,-100.02"/>
</g>
<!-- City5&#45;&gt;Place_critter -->
<g id="edge30" class="edge">
<title>City5&#45;&gt;Place_critter</title>
<path fill="none" stroke="#555555" stroke-dasharray="1,5" d="M1251.14,-157.24C1198.95,-123.75 1116.82,-68.56 1075.48,-39.06"/>
<polygon fill="#555555" stroke="#555555" points="1077.75,-35.67 1067.59,-32.66 1073.66,-41.34 1077.75,-35.67"/>
</g>
<!-- City5&#45;&gt;Place_critter -->
<g id="edge31" class="edge">
<title>City5&#45;&gt;Place_critter</title>
<path fill="none" stroke="#555555" stroke-dasharray="1,5" d="M1260.75,-156.67C1211.17,-121.9 1124.98,-64.33 1079.67,-35.93"/>
<polygon fill="#555555" stroke="#555555" points="1081.73,-32.47 1071.39,-30.17 1078.04,-38.41 1081.73,-32.47"/>
</g>
<!-- City6&#45;&gt;stranger -->
<g id="edge34" class="edge">
<title>City6&#45;&gt;stranger</title>
<path fill="none" stroke="#555555" stroke-dasharray="1,5" d="M1531.38,-161.02C1510.82,-154.76 1488.25,-148.51 1467.14,-144 1328.99,-114.49 1161.36,-99.31 1087.8,-93.65"/>
<polygon fill="#555555" stroke="#555555" points="1088.47,-90.12 1078.23,-92.86 1087.94,-97.1 1088.47,-90.12"/>
</g>
<!-- City6&#45;&gt;Place_critter -->
<g id="edge33" class="edge">
<title>City6&#45;&gt;Place_critter</title>
<path fill="none" stroke="#555555" stroke-dasharray="1,5" d="M1526.55,-161.97C1507.17,-156.09 1486.39,-149.81 1467.14,-144 1325.35,-101.25 1156.32,-50.71 1084.81,-29.35"/>
<polygon fill="#555555" stroke="#555555" points="1086.17,-25.81 1075.59,-26.3 1084.17,-32.51 1086.17,-25.81"/>
</g>
<!-- hunters&#45;&gt;stranger -->
<g id="edge18" class="edge">
<title>hunters&#45;&gt;stranger</title>
<path fill="none" stroke="#555555" stroke-dasharray="1,5" d="M1765.59,-169.14C1759.29,-160.09 1750.18,-149.54 1739.14,-144 1680.79,-114.73 1223.7,-96.92 1088,-92.24"/>
<polygon fill="#555555" stroke="#555555" points="1088.44,-88.72 1078.33,-91.88 1088.2,-95.72 1088.44,-88.72"/>
</g>
<!-- hunters&#45;&gt;Place_critter -->
<g id="edge14" class="edge">
<title>hunters&#45;&gt;Place_critter</title>
<path fill="none" stroke="#555555" stroke-dasharray="1,5" d="M1751.34,-177.11C1737.45,-167.55 1726.19,-151.98 1712.14,-144 1601.54,-81.21 1211.52,-37.56 1087.41,-23.71"/>
<polygon fill="#555555" stroke="#555555" points="1087.91,-20.13 1077.58,-22.5 1087.13,-27.09 1087.91,-20.13"/>
</g>
<!-- hunters&#45;&gt;Place_critter -->
<g id="edge15" class="edge">
<title>hunters&#45;&gt;Place_critter</title>
<path fill="none" stroke="#555555" stroke-dasharray="1,5" d="M1759.26,-171.56C1751.39,-162.29 1741.71,-150.57 1730.14,-144 1617.25,-79.91 1213.24,-35.76 1087.59,-22.88"/>
<polygon fill="#555555" stroke="#555555" points="1088.3,-19.34 1077.99,-21.8 1087.59,-26.3 1088.3,-19.34"/>
</g>
<!-- hunters&#45;&gt;Place_critter -->
<g id="edge16" class="edge">
<title>hunters&#45;&gt;Place_critter</title>
<path fill="none" stroke="#555555" stroke-dasharray="1,5" d="M1772.19,-167.88C1766.87,-159.36 1758.22,-149.73 1748.14,-144 1633.2,-78.75 1216.45,-34.16 1087.99,-22.21"/>
<polygon fill="#555555" stroke="#555555" points="1088.44,-18.65 1078.16,-21.22 1087.8,-25.62 1088.44,-18.65"/>
</g>
<!-- hunters&#45;&gt;Place_critter -->
<g id="edge17" class="edge">
<title>hunters&#45;&gt;Place_critter</title>
<path fill="none" stroke="#555555" stroke-dasharray="1,5" d="M1789.08,-170.36C1786.56,-161.3 1777.21,-150.29 1766.14,-144 1649.16,-77.59 1219.55,-32.59 1087.79,-21.61"/>
<polygon fill="#555555" stroke="#555555" points="1088.3,-18.05 1078.05,-20.73 1087.73,-25.03 1088.3,-18.05"/>
</g>
<!-- stranger&#45;&gt;Place_critter -->
<g id="edge13" class="edge">
<title>stranger&#45;&gt;Place_critter</title>
<path fill="none" stroke="#555555" stroke-dasharray="1,5" d="M1050.14,-71.7C1050.14,-64.24 1050.14,-55.32 1050.14,-46.97"/>
<polygon fill="#555555" stroke="#555555" points="1053.64,-47.1 1050.14,-37.1 1046.64,-47.1 1053.64,-47.1"/>
</g>
</g>
</svg>
<script>window.Codes = {"start":"if (script_action == 15) then begin\n  call map_enter_p_proc;\nend\nelse begin\n  if (script_action == 23) then begin\n    call map_update_p_proc;\n  end\n  else begin\n    if (script_action == 16) then begin\n      call map_exit_p_proc;\n    end\n  end\nend\n","map_enter_p_proc":"if (metarule(14, 0)) then begin\n  dude_pos := random(0, 2);\n  dude_rot := random(0, 5);\n  if (dude_pos == 0) then begin\n    override_map_start(100, 100, 0, dude_rot);\n  end\n  else begin\n    if (dude_pos == 1) then begin\n      override_map_start(116, 83, 0, dude_rot);\n    end\n    else begin\n      override_map_start(92, 110, 0, dude_rot);\n    end\n  end\nend\nif ((global_var(32) != 1) and metarule(14, 0)) then begin\n  Dude_tile := tile_num(dude_obj);\n  Ranger_rerolls := has_trait(0, dude_obj, 47);\n  set_global_var(334, 0);\n  while(Encounter_Num == 0) do begin\n    Encounter_Num := random(1, 6) + random(1, 6) + random(1, 6);\n    if (get_critter_stat(dude_obj, 6) > 8) then begin\n      Encounter_Num := Encounter_Num + 2;\n    end\n    else begin\n      if (get_critter_stat(dude_obj, 6) > 7) then begin\n        Encounter_Num := Encounter_Num + 1;\n      end\n      else begin\n        if (get_critter_stat(dude_obj, 6) < 3) then begin\n          Encounter_Num := Encounter_Num - 1;\n        end\n      end\n    end\n    if ((global_var(123) != 3) and (global_var(158) > 2) and random(0, 1)) then begin\n      Encounter_Num := 7;\n    end\n    else begin\n      if (Encounter_Num <= 3) then begin\n        Encounter_Num := 1;\n      end\n      else begin\n        if (Encounter_Num <= 5) then begin\n          Encounter_Num := 2;\n        end\n        else begin\n          if (Encounter_Num <= 8) then begin\n            Encounter_Num := 3;\n          end\n          else begin\n            if (Encounter_Num <= 12) then begin\n              Encounter_Num := 4;\n            end\n            else begin\n              if (Encounter_Num <= 15) then begin\n                Encounter_Num := 5;\n              end\n              else begin\n                Encounter_Num := 6;\n              end\n            end\n          end\n        end\n      end\n    end\n    if (Ranger_rerolls) then begin\n      if ((Encounter_Num == 1) or (Encounter_Num == 2) or (Encounter_Num == 3) or (Encounter_Num == 3) or (Encounter_Num == 5) or (Encounter_Num == 7)) then begin\n        Encounter_Num := 0;\n      end\n      Ranger_rerolls := Ranger_rerolls - 1;\n    end\n  end\n  if (global_var(295)) then begin\n    Encounter_Num := global_var(295);\n    set_global_var(295, 0);\n    display_msg(\"City encounter type: \" + Encounter_Num);\n  end\n  if (Encounter_Num == 1) then begin\n    call City1;\n  end\n  else begin\n    if (Encounter_Num == 2) then begin\n      call City2;\n    end\n    else begin\n      if (Encounter_Num == 3) then begin\n        call City3;\n      end\n      else begin\n        if (Encounter_Num == 4) then begin\n          call City4;\n        end\n        else begin\n          if (Encounter_Num == 5) then begin\n            call City5;\n          end\n          else begin\n            if (Encounter_Num == 6) then begin\n              call City6;\n            end\n            else begin\n              call hunters;\n            end\n          end\n        end\n      end\n    end\n  end\nend\ncall Lighting;\n","map_update_p_proc":"call Lighting;\n","map_exit_p_proc":"[]","stranger":"if (has_trait(0, dude_obj, 46) and (global_var(601) == 0) and random(0, 1)) then begin\n  Critter_type := 16777520;\n  Critter_script := 856;\n  Critter_direction := random(0, 5);\n  Outer_ring := 7;\n  Inner_ring := 4;\n  call Place_critter;\n  Critter_direction := dude_rot + (random(0, 2) - 1);\n  while(Critter_direction < 0) do begin\n    Critter_direction := Critter_direction + 6;\n  end\n  if (Critter_direction > 5) then begin\n    Critter_direction := Critter_direction % 6;\n  end\n  anim(Critter, 1000, Critter_direction);\n  Item := create_object_sid(40, 0, 0, -1);\n  add_mult_objs_to_inven(Critter, Item, 2);\n  Item := create_object_sid(25, 0, 0, -1);\n  add_obj_to_inven(Critter, Item);\n  Item := create_object_sid(21, 0, 0, -1);\n  add_obj_to_inven(Critter, Item);\n  Item := item_caps_adjust(Critter, random(7, 30) * ((2 * has_trait(0, dude_obj, 20)) + 1));\n  set_global_var(288, 23);\nend\n","Lighting":"variable LVar0 := 0;\nLVar0 := game_time_hour;\nif ((LVar0 >= 600) and (LVar0 < 700)) then begin\n  set_light_level(LVar0 - 600 + 40);\nend\nelse begin\n  if ((LVar0 >= 700) and (LVar0 < 1800)) then begin\n    set_light_level(100);\n  end\n  else begin\n    if ((LVar0 >= 1800) and (LVar0 < 1900)) then begin\n      set_light_level(100 - (LVar0 - 1800));\n    end\n    else begin\n      set_light_level(40);\n    end\n  end\nend\n","Place_critter":"variable LVar0 := 0;\nvariable LVar1 := 0;\nvariable LVar2 := 0;\nCritter := create_object_sid(Critter_type, 0, 0, Critter_script);\nLVar2 := random(Inner_ring, Outer_ring);\nLVar0 := random(0, 5);\nCritter_tile := tile_num_in_direction(Dude_tile, Critter_direction, LVar2);\nLVar1 := tile_num_in_direction(Critter_tile, LVar0, LVar2 / 2);\nif ((tile_distance(Dude_tile, LVar1) <= Outer_ring) and (tile_distance(Dude_tile, LVar1) >= Inner_ring)) then begin\n  Critter_tile := tile_num_in_direction(Critter_tile, LVar0, LVar2 / 2);\nend\ncritter_attempt_placement(Critter, Critter_tile, 0);\n","hunters":"Inner_ring := 8;\nOuter_ring := 5;\ngroup_angle := random(0, 5);\nCritter_direction := group_angle + random(0, 3 * 2) - 3;\nwhile(Critter_direction < 0) do begin\n  Critter_direction := Critter_direction + 6;\nend\nif (Critter_direction > 5) then begin\n  Critter_direction := Critter_direction % 6;\nend\nCritter_type := 16777349;\nCritter_script := 241;\ncall Place_critter;\nanim(Critter, 1000, rotation_to_tile(tile_num(Critter), tile_num(dude_obj)));\nItem := create_object_sid(23, 0, 0, -1);\nadd_obj_to_inven(Critter, Item);\nItem := create_object_sid(36, 0, 0, -1);\nadd_mult_objs_to_inven(Critter, Item, 4 * (has_trait(0, dude_obj, 40) + 1));\nItem := create_object_sid(17, 0, 0, -1);\nadd_obj_to_inven(Critter, Item);\nItem := item_caps_adjust(Critter, random(5, 30) * ((2 * has_trait(0, dude_obj, 20)) + 1));\nItem := create_object_sid(144, 0, 0, -1);\nadd_mult_objs_to_inven(Critter, Item, 2);\nCritter_direction := group_angle + random(0, 3 * 2) - 3;\nwhile(Critter_direction < 0) do begin\n  Critter_direction := Critter_direction + 6;\nend\nif (Critter_direction > 5) then begin\n  Critter_direction := Critter_direction % 6;\nend\nCritter_type := 16777467;\nCritter_script := 383;\ncall Place_critter;\nanim(Critter, 1000, rotation_to_tile(tile_num(Critter), tile_num(dude_obj)));\nItem := create_object_sid(7, 0, 0, -1);\nadd_obj_to_inven(Critter, Item);\nItem := create_object_sid(2, 0, 0, -1);\nadd_obj_to_inven(Critter, Item);\nif (random(0, 2) == 0) then begin\n  Item := item_caps_adjust(Critter, random(5, 30) * ((2 * has_trait(0, dude_obj, 20)) + 1));\nend\nCritter_direction := group_angle + random(0, 3 * 2) - 3;\nwhile(Critter_direction < 0) do begin\n  Critter_direction := Critter_direction + 6;\nend\nif (Critter_direction > 5) then begin\n  Critter_direction := Critter_direction % 6;\nend\nCritter_type := 16777472;\nCritter_script := 383;\ncall Place_critter;\nanim(Critter, 1000, rotation_to_tile(tile_num(Critter), tile_num(dude_obj)));\nItem := create_object_sid(143, 0, 0, -1);\nadd_obj_to_inven(Critter, Item);\nItem := create_object_sid(34, 0, 0, -1);\nadd_mult_objs_to_inven(Critter, Item, 3 * (has_trait(0, dude_obj, 40) + 1));\nItem := create_object_sid(2, 0, 0, -1);\nadd_obj_to_inven(Critter, Item);\nItem := create_object_sid(14, 0, 0, -1);\nadd_mult_objs_to_inven(Critter, Item, 2 * (has_trait(0, dude_obj, 40) + 1));\nif (random(0, 2) == 0) then begin\n  Item := item_caps_adjust(Critter, random(5, 40) * ((2 * has_trait(0, dude_obj, 20)) + 1));\nend\nCritter_direction := group_angle + random(0, 3 * 2) - 3;\nwhile(Critter_direction < 0) do begin\n  Critter_direction := Critter_direction + 6;\nend\nif (Critter_direction > 5) then begin\n  Critter_direction := Critter_direction % 6;\nend\nCritter_type := 16777462;\nCritter_script := 383;\ncall Place_critter;\nanim(Critter, 1000, rotation_to_tile(tile_num(Critter), tile_num(dude_obj)));\nItem := create_object_sid(18, 0, 0, -1);\nadd_obj_to_inven(Critter, Item);\nItem := create_object_sid(31, 0, 0, -1);\nadd_mult_objs_to_inven(Critter, Item, 2 * (has_trait(0, dude_obj, 40) + 1));\nItem := create_object_sid(2, 0, 0, -1);\nadd_obj_to_inven(Critter, Item);\nif (random(0, 2) == 0) then begin\n  Item := item_caps_adjust(Critter, random(5, 30) * ((2 * has_trait(0, dude_obj, 20)) + 1));\nend\ncall stranger;\n","City1":"display_msg(message_str(244, 100));\nOuter_ring := (get_critter_stat(dude_obj, 1) / 2) + 8;\nInner_ring := (get_critter_stat(dude_obj, 1) / 2) + 4;\nTot_Critter_A := random(2, 3);\ngroup_angle := random(0, 5);\nCritter_type := 16777403;\nCritter_script := 850;\nwhile(Tot_Critter_A) do begin\n  Critter_direction := group_angle + (random(0, 2 * 2) - 2);\n  while(Critter_direction < 0) do begin\n    Critter_direction := Critter_direction + 6;\n  end\n  if (Critter_direction > 5) then begin\n    Critter_direction := Critter_direction % 6;\n  end\n  call Place_critter;\n  anim(Critter, 1000, rotation_to_tile(tile_num(Critter), tile_num(dude_obj)));\n  if (random(0, 2) == 0) then begin\n    if (random(0, 1) == 1) then begin\n      Item := create_object_sid(11, 0, 0, -1);\n    end\n    else begin\n      Item := create_object_sid(12, 0, 0, -1);\n    end\n  end\n  else begin\n    Item := create_object_sid(234, 0, 0, -1);\n  end\n  add_obj_to_inven(Critter, Item);\n  Item := create_object_sid(40, 0, 0, -1);\n  add_mult_objs_to_inven(Critter, Item, 1);\n  if (random(0, 2) == 0) then begin\n    Item := item_caps_adjust(Critter, random(5, 20) * ((2 * has_trait(0, dude_obj, 20)) + 1));\n  end\n  Item := create_object_sid(35, 0, 0, -1);\n  add_mult_objs_to_inven(Critter, Item, 1 + has_trait(0, dude_obj, 40));\n  Tot_Critter_A := Tot_Critter_A - 1;\nend\nif (random(0, 2) == 0) then begin\n  Critter_direction := random(0, 5);\n  Critter_script := 854;\n  Critter_type := 16777241;\n  call Place_critter;\n  anim(Critter, 1000, rotation_to_tile(tile_num(Critter), tile_num(dude_obj)));\n  Item := create_object_sid(12, 0, 0, -1);\n  add_obj_to_inven(Critter, Item);\n  Item := item_caps_adjust(Critter, random(5, 20) * ((2 * has_trait(0, dude_obj, 20)) + 1));\nend\ncall stranger;\n","City2":"variable LVar0 := 0;\ndisplay_msg(message_str(244, 101));\ngroup_angle := random(0, 5);\nif ((game_time_hour >= 1900) or (game_time_hour < 600)) then begin\n  Critter := create_object_sid(33554433, 0, 0, -1);\n  Critter_tile := tile_num_in_direction(Dude_tile, group_angle, 4);\n  critter_attempt_placement(Critter, Critter_tile, 0);\n  Critter := create_object_sid(33554433, 0, 0, -1);\n  if (group_angle == 0) then begin\n    Item := 3;\n  end\n  else begin\n    if (group_angle == 1) then begin\n      Item := 4;\n    end\n    else begin\n      if (group_angle == 2) then begin\n        Item := 5;\n      end\n      else begin\n        if (group_angle == 3) then begin\n          Item := 0;\n        end\n        else begin\n          if (group_angle == 4) then begin\n            Item := 1;\n          end\n          else begin\n            if (group_angle == 5) then begin\n              Item := 2;\n            end\n          end\n        end\n      end\n    end\n  end\n  Critter_tile := tile_num_in_direction(Dude_tile, Item, 4);\n  critter_attempt_placement(Critter, Critter_tile, 0);\nend\nOuter_ring := (get_critter_stat(dude_obj, 1) / 2) + 6;\nInner_ring := (get_critter_stat(dude_obj, 1) / 2) + 4;\nTot_Critter_A := random(3, 6);\nTot_Critter_B := random(3, 5);\nCritter_type := 16777419;\nCritter_script := 749;\nwhile(Tot_Critter_A) do begin\n  Critter_direction := group_angle + (random(0, 2) - 1);\n  while(Critter_direction < 0) do begin\n    Critter_direction := Critter_direction + 6;\n  end\n  if (Critter_direction > 5) then begin\n    Critter_direction := Critter_direction % 6;\n  end\n  call Place_critter;\n  if (group_angle == 0) then begin\n    Critter_direction := 3;\n  end\n  else begin\n    if (group_angle == 1) then begin\n      Critter_direction := 4;\n    end\n    else begin\n      if (group_angle == 2) then begin\n        Critter_direction := 5;\n      end\n      else begin\n        if (group_angle == 3) then begin\n          Critter_direction := 0;\n        end\n        else begin\n          if (group_angle == 4) then begin\n            Critter_direction := 1;\n          end\n          else begin\n            if (group_angle == 5) then begin\n              Critter_direction := 2;\n            end\n          end\n        end\n      end\n    end\n  end\n  if (random(0, 2) == 0) then begin\n    Critter_direction := Critter_direction + (random(0, 2) - 1);\n    while(Critter_direction < 0) do begin\n      Critter_direction := Critter_direction + 6;\n    end\n    if (Critter_direction > 5) then begin\n      Critter_direction := Critter_direction % 6;\n    end\n  end\n  anim(Critter, 1000, Critter_direction);\n  LVar0 := random(0, 2);\n  if (LVar0 == 0) then begin\n    Item := create_object_sid(18, 0, 0, -1);\n  end\n  else begin\n    if (LVar0 == 1) then begin\n      Item := create_object_sid(21, 0, 0, -1);\n    end\n    else begin\n      Item := create_object_sid(8, 0, 0, -1);\n    end\n  end\n  add_obj_to_inven(Critter, Item);\n  if (random(0, 2) == 0) then begin\n    Item := item_caps_adjust(Critter, random(5, 25) * ((2 * has_trait(0, dude_obj, 20)) + 1));\n  end\n  Tot_Critter_A := Tot_Critter_A - 1;\nend\nvictim := Critter;\nCritter_type := 16777472;\nCritter_script := 751;\nif (group_angle == 0) then begin\n  group_angle := 3;\nend\nelse begin\n  if (group_angle == 1) then begin\n    group_angle := 4;\n  end\n  else begin\n    if (group_angle == 2) then begin\n      group_angle := 5;\n    end\n    else begin\n      if (group_angle == 3) then begin\n        group_angle := 0;\n      end\n      else begin\n        if (group_angle == 4) then begin\n          group_angle := 1;\n        end\n        else begin\n          if (group_angle == 5) then begin\n            group_angle := 2;\n          end\n        end\n      end\n    end\n  end\nend\nwhile(Tot_Critter_B) do begin\n  Critter_direction := group_angle + (random(0, 2) - 1);\n  while(Critter_direction < 0) do begin\n    Critter_direction := Critter_direction + 6;\n  end\n  if (Critter_direction > 5) then begin\n    Critter_direction := Critter_direction % 6;\n  end\n  call Place_critter;\n  if (group_angle == 0) then begin\n    Critter_direction := 3;\n  end\n  else begin\n    if (group_angle == 1) then begin\n      Critter_direction := 4;\n    end\n    else begin\n      if (group_angle == 2) then begin\n        Critter_direction := 5;\n      end\n      else begin\n        if (group_angle == 3) then begin\n          Critter_direction := 0;\n        end\n        else begin\n          if (group_angle == 4) then begin\n            Critter_direction := 1;\n          end\n          else begin\n            if (group_angle == 5) then begin\n              Critter_direction := 2;\n            end\n          end\n        end\n      end\n    end\n  end\n  if (random(0, 2) == 0) then begin\n    Critter_direction := Critter_direction + (random(0, 2) - 1);\n    while(Critter_direction < 0) do begin\n      Critter_direction := Critter_direction + 6;\n    end\n    if (Critter_direction > 5) then begin\n      Critter_direction := Critter_direction % 6;\n    end\n  end\n  anim(Critter, 1000, Critter_direction);\n  if (random(0, 1)) then begin\n    Item := create_object_sid(4, 0, 0, -1);\n  end\n  else begin\n    Item := create_object_sid(7, 0, 0, -1);\n  end\n  add_obj_to_inven(Critter, Item);\n  if (random(0, 2) == 0) then begin\n    Item := item_caps_adjust(Critter, random(4, 25) * ((2 * has_trait(0, dude_obj, 20)) + 1));\n  end\n  Tot_Critter_B := Tot_Critter_B - 1;\nend\nattack_setup(Critter, victim);\ncall stranger;\n","City3":"display_msg(message_str(244, 102));\nTot_Critter_A := random(2, 4);\nOuter_ring := (get_critter_stat(dude_obj, 1) / 2) + 4;\nInner_ring := (get_critter_stat(dude_obj, 1) / 2) + 3;\ngroup_angle := random(0, 5);\nCritter_type := 16777419;\nCritter_script := 749;\nwhile(Tot_Critter_A) do begin\n  Critter_direction := group_angle + random(0, 2 * 2) - 2;\n  while(Critter_direction < 0) do begin\n    Critter_direction := Critter_direction + 6;\n  end\n  if (Critter_direction > 5) then begin\n    Critter_direction := Critter_direction % 6;\n  end\n  call Place_critter;\n  if (Critter_direction == 0) then begin\n    Critter_direction := 3;\n  end\n  else begin\n    if (Critter_direction == 1) then begin\n      Critter_direction := 4;\n    end\n    else begin\n      if (Critter_direction == 2) then begin\n        Critter_direction := 5;\n      end\n      else begin\n        if (Critter_direction == 3) then begin\n          Critter_direction := 0;\n        end\n        else begin\n          if (Critter_direction == 4) then begin\n            Critter_direction := 1;\n          end\n          else begin\n            if (Critter_direction == 5) then begin\n              Critter_direction := 2;\n            end\n          end\n        end\n      end\n    end\n  end\n  anim(Critter, 1000, Critter_direction);\n  if (random(0, 1)) then begin\n    Item := create_object_sid(8, 0, 0, -1);\n  end\n  else begin\n    Item := create_object_sid(9, 0, 0, -1);\n  end\n  add_obj_to_inven(Critter, Item);\n  if (random(0, 2) == 0) then begin\n    Item := item_caps_adjust(Critter, random(4, 25) * ((2 * has_trait(0, dude_obj, 20)) + 1));\n  end\n  Tot_Critter_A := Tot_Critter_A - 1;\nend\nCritter_direction := group_angle + random(0, 2 * 2) - 2;\nwhile(Critter_direction < 0) do begin\n  Critter_direction := Critter_direction + 6;\nend\nif (Critter_direction > 5) then begin\n  Critter_direction := Critter_direction % 6;\nend\ncall Place_critter;\nif (Critter_direction == 0) then begin\n  Critter_direction := 3;\nend\nelse begin\n  if (Critter_direction == 1) then begin\n    Critter_direction := 4;\n  end\n  else begin\n    if (Critter_direction == 2) then begin\n      Critter_direction := 5;\n    end\n    else begin\n      if (Critter_direction == 3) then begin\n        Critter_direction := 0;\n      end\n      else begin\n        if (Critter_direction == 4) then begin\n          Critter_direction := 1;\n        end\n        else begin\n          if (Critter_direction == 5) then begin\n            Critter_direction := 2;\n          end\n        end\n      end\n    end\n  end\nend\nanim(Critter, 1000, Critter_direction);\nItem := create_object_sid(47, 0, 0, -1);\nadd_obj_to_inven(Critter, Item);\nItem := item_caps_adjust(Critter, random(18, 150) * (has_trait(0, dude_obj, 20) + 1));\nif (random(0, 1)) then begin\n  Item := create_object_sid(38, 0, 0, -1);\n  add_obj_to_inven(Critter, Item);\n  if (has_trait(0, dude_obj, 40)) then begin\n    Item := create_object_sid(38, 0, 0, -1);\n    add_obj_to_inven(Critter, Item);\n  end\nend\nif (random(0, 1)) then begin\n  Item := create_object_sid(6, 0, 0, -1);\n  add_obj_to_inven(Critter, Item);\nend\nif (random(0, 1)) then begin\n  Item := create_object_sid(31, 0, 0, -1);\n  add_obj_to_inven(Critter, Item);\n  if (has_trait(0, dude_obj, 40)) then begin\n    Item := create_object_sid(31, 0, 0, -1);\n    add_obj_to_inven(Critter, Item);\n  end\nend\nif (random(0, 1)) then begin\n  Item := create_object_sid(4, 0, 0, -1);\n  add_obj_to_inven(Critter, Item);\nend\nif (start_attack == 0) then begin\n  attack_complex(dude_obj, 0, 1, 0, 0, 30000, 0, 0);\nend\nstart_attack := 1;\ncall stranger;\n","City4":"display_msg(message_str(244, 103));\nTot_Critter_A := random(5, 15);\nOuter_ring := (get_critter_stat(dude_obj, 1) / 2) + 4;\nInner_ring := (get_critter_stat(dude_obj, 1) / 2) + 1;\ngroup_angle := random(0, 5);\nItem := random(0, 1);\nCritter_type := 16777264;\nCritter_script := 222;\nwhile(Tot_Critter_A) do begin\n  Critter_direction := group_angle + random(0, 1 * 2) - 1;\n  while(Critter_direction < 0) do begin\n    Critter_direction := Critter_direction + 6;\n  end\n  if (Critter_direction > 5) then begin\n    Critter_direction := Critter_direction % 6;\n  end\n  call Place_critter;\n  if (Item) then begin\n    if (random(0, 1)) then begin\n      Critter_direction := 3;\n    end\n    else begin\n      Critter_direction := 4;\n    end\n    anim(Critter, 1000, Critter_direction);\n  end\n  else begin\n    if (random(0, 1)) then begin\n      Critter_direction := 1;\n    end\n    else begin\n      Critter_direction := 2;\n    end\n    anim(Critter, 1000, Critter_direction);\n  end\n  Tot_Critter_A := Tot_Critter_A - 1;\nend\nif (start_attack == 0) then begin\n  attack_complex(dude_obj, 0, 1, 0, 0, 30000, 0, 0);\nend\nstart_attack := 1;\ncall stranger;\n","City5":"display_msg(message_str(244, 104));\nOuter_ring := (get_critter_stat(dude_obj, 1) / 2) + 6;\nInner_ring := (get_critter_stat(dude_obj, 1) / 2) + 2;\nTot_Critter_A := random(3, 5);\ngroup_angle := random(0, 5);\nCritter_type := 16777419;\nCritter_script := 749;\nwhile(Tot_Critter_A) do begin\n  Critter_direction := group_angle + random(0, 1 * 2) - 1;\n  while(Critter_direction < 0) do begin\n    Critter_direction := Critter_direction + 6;\n  end\n  if (Critter_direction > 5) then begin\n    Critter_direction := Critter_direction % 6;\n  end\n  call Place_critter;\n  anim(Critter, 1000, rotation_to_tile(tile_num(Critter), tile_num(dude_obj)));\n  if (random(0, 1)) then begin\n    Item := create_object_sid(8, 0, 0, -1);\n  end\n  else begin\n    Item := create_object_sid(9, 0, 0, -1);\n  end\n  add_obj_to_inven(Critter, Item);\n  if (random(0, 2) == 0) then begin\n    Item := item_caps_adjust(Critter, random(4, 25) * ((2 * has_trait(0, dude_obj, 20)) + 1));\n  end\n  Tot_Critter_A := Tot_Critter_A - 1;\nend\nCritter_type := 16777254;\nCritter_script := 749;\nCritter_direction := group_angle + random(0, 1 * 2) - 1;\nwhile(Critter_direction < 0) do begin\n  Critter_direction := Critter_direction + 6;\nend\nif (Critter_direction > 5) then begin\n  Critter_direction := Critter_direction % 6;\nend\ncall Place_critter;\nanim(Critter, 1000, rotation_to_tile(tile_num(Critter), tile_num(dude_obj)));\nItem := create_object_sid(47, 0, 0, -1);\nadd_obj_to_inven(Critter, Item);\nItem := item_caps_adjust(Critter, random(19, 135) * ((2 * has_trait(0, dude_obj, 20)) + 1));\nif (random(0, 1)) then begin\n  Item := create_object_sid(38, 0, 0, -1);\n  add_mult_objs_to_inven(Critter, Item, has_trait(0, dude_obj, 40) + 1);\nend\nif (random(0, 1)) then begin\n  Item := create_object_sid(6, 0, 0, -1);\n  add_obj_to_inven(Critter, Item);\nend\nif (random(0, 1)) then begin\n  Item := create_object_sid(31, 0, 0, -1);\n  add_mult_objs_to_inven(Critter, Item, has_trait(0, dude_obj, 40) + 1);\nend\nif (random(0, 1)) then begin\n  Item := create_object_sid(4, 0, 0, -1);\n  add_obj_to_inven(Critter, Item);\nend\nif (start_attack == 0) then begin\n  attack_complex(dude_obj, 0, 1, 0, 0, 30000, 0, 0);\nend\nstart_attack := 1;\ncall stranger;\n","City6":"display_msg(message_str(244, 105));\nTot_Critter_A := random(3, 4);\nif ((game_time_hour >= 700) and (game_time_hour < 1800)) then begin\n  Outer_ring := 4;\n  Inner_ring := 2;\nend\nelse begin\n  Outer_ring := 3;\n  Inner_ring := 2;\nend\nCritter_type := 16777264;\nCritter_script := 222;\nwhile(Tot_Critter_A) do begin\n  Critter_direction := random(0, 5);\n  call Place_critter;\n  anim(Critter, 1000, rotation_to_tile(tile_num(Critter), tile_num(dude_obj)));\n  Tot_Critter_A := Tot_Critter_A - 1;\nend\nif (start_attack == 0) then begin\n  attack_complex(dude_obj, 0, 1, 0, 0, 30000, 0, 0);\nend\nstart_attack := 1;\ncall stranger;\n"}</script></body><script src="../jquery.js"></script><script src="../underscore.js"></script><script>(function() {
  var downAt, hideCode, nodes, positionCode, showCode;

  $('svg').attr('unselectable', 'on').css({
    '-moz-user-select': '-moz-none',
    '-moz-user-select': 'none',
    '-o-user-select': 'none',
    '-khtml-user-select': 'none',
    '-webkit-user-select': 'none',
    '-ms-user-select': 'none',
    'user-select': 'none'
  }).bind('selectstart', function() {
    return false;
  });

  $('<div/>', {
    id: 'thecode'
  }).appendTo('body');

  $('#thecode').css({
    'pointer-events': 'none',
    background: 'white',
    padding: '1em',
    outline: 'solid gray 1px',
    'white-space': 'pre',
    position: 'fixed',
    left: 0,
    top: 0
  });

  showCode = function(code, x, y) {
    $('#thecode').show();
    $('#thecode').text(code);
    return positionCode(x, y);
  };

  hideCode = function() {
    return $('#thecode').hide();
  };

  positionCode = function(x, y) {
    return $('#thecode').css({
      left: x,
      top: y
    });
  };

  nodes = $('.node');

  _.each(nodes, function(node) {
    var nodeName;
    nodeName = $(node).find('title').text();
    $(node).mousemove(function(e) {
      return showCode(Codes[nodeName], e.clientX, e.clientY);
    });
    return $(node).mouseleave(function() {
      return hideCode();
    });
  });

  $('svg title').remove();

  downAt = null;

  $('svg').mousedown(function(e) {
    var x, y;
    x = e.pageX;
    y = e.pageY;
    return downAt = {
      x: x,
      y: y
    };
  });

  $('svg').mousemove(function(e) {
    var delta, x, y;
    if (!downAt) {
      return;
    }
    x = e.pageX;
    y = e.pageY;
    delta = {
      x: x - downAt.x,
      y: y - downAt.y
    };
    window.scrollBy(-delta.x, -delta.y);
    return false;
  });

  $('svg').mouseup(function(e) {
    return downAt = null;
  });

  $('svg').mouseleave(function(e) {
    return downAt = null;
  });

}).call(this);
</script></html>