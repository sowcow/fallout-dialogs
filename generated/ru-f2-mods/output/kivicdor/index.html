<!DOCTYPE html><html><head><title>kivicdor</title><meta charset="utf-8" /></head><body><svg width="1454pt" height="430pt"
 viewBox="0.00 0.00 1454.00 430.18" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 426.18)">
<title>kivicdor</title>
<polygon fill="white" stroke="none" points="-4,4 -4,-426.18 1450,-426.18 1450,4 -4,4"/>
<!-- checkPartyMembersNearDoor -->
<g id="node1" class="node">
<title>checkPartyMembersNearDoor</title>
<ellipse fill="#ffffff" stroke="#000000" cx="27" cy="-367.74" rx="27" ry="18"/>
</g>
<!-- map_enter_p_proc -->
<g id="node2" class="node">
<title>map_enter_p_proc</title>
<ellipse fill="#ffffff" stroke="#000000" cx="99" cy="-367.74" rx="27" ry="18"/>
</g>
<!-- start -->
<g id="node3" class="node">
<title>start</title>
<ellipse fill="#ffffff" stroke="#000000" cx="171" cy="-367.74" rx="27" ry="18"/>
</g>
<!-- look_at_p_proc -->
<g id="node4" class="node">
<title>look_at_p_proc</title>
<ellipse fill="#ffffff" stroke="#000000" cx="348" cy="-367.74" rx="131.7" ry="30.05"/>
<text text-anchor="middle" x="348" y="-371.69" font-family="Times,serif" font-size="14.00">Вы видите деревянную</text>
<text text-anchor="middle" x="348" y="-354.44" font-family="Times,serif" font-size="14.00">дверь.</text>
</g>
<!-- description_p_proc -->
<g id="node5" class="node">
<title>description_p_proc</title>
<ellipse fill="#ffffff" stroke="#000000" cx="648" cy="-367.74" rx="150.26" ry="54.45"/>
<text text-anchor="middle" x="648" y="-388.94" font-family="Times,serif" font-size="14.00">Дверь, похоже, заперта на</text>
<text text-anchor="middle" x="648" y="-371.69" font-family="Times,serif" font-size="14.00">крепкий замок.</text>
<text text-anchor="middle" x="648" y="-354.44" font-family="Times,serif" font-size="14.00">&#45;&#45;&#45;</text>
<text text-anchor="middle" x="648" y="-337.19" font-family="Times,serif" font-size="14.00">Дверь незаперта.</text>
</g>
<!-- use_p_proc -->
<g id="node6" class="node">
<title>use_p_proc</title>
<ellipse fill="#ffffff" stroke="#000000" cx="370" cy="-138.64" rx="27" ry="18"/>
</g>
<!-- Damage_Critter -->
<g id="node7" class="node">
<title>Damage_Critter</title>
<ellipse fill="#ffffff" stroke="#000000" cx="370" cy="-18" rx="27" ry="18"/>
</g>
<!-- use_p_proc&#45;&gt;Damage_Critter -->
<g id="edge1" class="edge">
<title>use_p_proc&#45;&gt;Damage_Critter</title>
<path fill="none" stroke="#555555" stroke-dasharray="1,5" d="M365.1,-120.65C362.99,-101.35 362.68,-69.59 364.19,-46.71"/>
<polygon fill="#555555" stroke="#555555" points="367.74,-47.23 365.1,-36.97 360.77,-46.63 367.74,-47.23"/>
</g>
<!-- use_p_proc&#45;&gt;Damage_Critter -->
<g id="edge2" class="edge">
<title>use_p_proc&#45;&gt;Damage_Critter</title>
<path fill="none" stroke="#555555" stroke-dasharray="1,5" d="M374.9,-120.65C377.01,-101.35 377.32,-69.59 375.81,-46.71"/>
<polygon fill="#555555" stroke="#555555" points="379.23,-46.63 374.9,-36.97 372.26,-47.23 379.23,-46.63"/>
</g>
<!-- use_skill_on_p_proc -->
<g id="node8" class="node">
<title>use_skill_on_p_proc</title>
<ellipse fill="#ffffff" stroke="#000000" cx="843" cy="-367.74" rx="27" ry="18"/>
</g>
<!-- Unlock_Lock -->
<g id="node9" class="node">
<title>Unlock_Lock</title>
<ellipse fill="#ffffff" stroke="#000000" cx="987" cy="-259.29" rx="27" ry="18"/>
</g>
<!-- use_skill_on_p_proc&#45;&gt;Unlock_Lock -->
<g id="edge3" class="edge">
<title>use_skill_on_p_proc&#45;&gt;Unlock_Lock</title>
<path fill="none" stroke="#555555" stroke-dasharray="1,5" d="M860.66,-353.68C885.73,-335.15 931.83,-301.07 960.87,-279.61"/>
<polygon fill="#555555" stroke="#555555" points="962.69,-281.88 968.65,-273.12 958.53,-276.25 962.69,-281.88"/>
</g>
<!-- Set_Lock -->
<g id="node10" class="node">
<title>Set_Lock</title>
<ellipse fill="#ffffff" stroke="#000000" cx="843" cy="-259.29" rx="27" ry="18"/>
</g>
<!-- use_skill_on_p_proc&#45;&gt;Set_Lock -->
<g id="edge4" class="edge">
<title>use_skill_on_p_proc&#45;&gt;Set_Lock</title>
<path fill="none" stroke="#555555" stroke-dasharray="1,5" d="M843,-349.63C843,-333.2 843,-308.08 843,-288.65"/>
<polygon fill="#555555" stroke="#555555" points="846.5,-288.7 843,-278.7 839.5,-288.7 846.5,-288.7"/>
</g>
<!-- Skill_Disarm_Traps -->
<g id="node11" class="node">
<title>Skill_Disarm_Traps</title>
<ellipse fill="#ffffff" stroke="#000000" cx="668" cy="-259.29" rx="27" ry="18"/>
</g>
<!-- use_skill_on_p_proc&#45;&gt;Skill_Disarm_Traps -->
<g id="edge5" class="edge">
<title>use_skill_on_p_proc&#45;&gt;Skill_Disarm_Traps</title>
<path fill="none" stroke="#555555" stroke-dasharray="1,5" d="M835.34,-350.26C829.16,-338.53 819.44,-323.17 807,-313.29 776.74,-289.26 734.37,-275.21 704.38,-267.69"/>
<polygon fill="#555555" stroke="#555555" points="705.48,-264.12 694.94,-265.21 703.86,-270.93 705.48,-264.12"/>
</g>
<!-- Lockpick_Door -->
<g id="node21" class="node">
<title>Lockpick_Door</title>
<ellipse fill="#ffffff" stroke="#000000" cx="1203" cy="-138.64" rx="150.26" ry="66.64"/>
<text text-anchor="middle" x="1203" y="-168.47" font-family="Times,serif" font-size="14.00">Вы видите деревянную</text>
<text text-anchor="middle" x="1203" y="-151.22" font-family="Times,serif" font-size="14.00">дверь.</text>
<text text-anchor="middle" x="1203" y="-133.97" font-family="Times,serif" font-size="14.00">&#45;&#45;&#45;</text>
<text text-anchor="middle" x="1203" y="-116.72" font-family="Times,serif" font-size="14.00">Дверь, похоже, заперта на</text>
<text text-anchor="middle" x="1203" y="-99.47" font-family="Times,serif" font-size="14.00">крепкий замок.</text>
</g>
<!-- Unlock_Lock&#45;&gt;Lockpick_Door -->
<g id="edge14" class="edge">
<title>Unlock_Lock&#45;&gt;Lockpick_Door</title>
<path fill="none" stroke="#555555" stroke-dasharray="1,5" d="M1007.32,-247.13C1028.92,-235.27 1064.73,-215.6 1099.85,-196.3"/>
<polygon fill="#555555" stroke="#555555" points="1101.16,-199.03 1108.24,-191.14 1097.79,-192.89 1101.16,-199.03"/>
</g>
<!-- Lock_Door -->
<g id="node22" class="node">
<title>Lock_Door</title>
<ellipse fill="#ffffff" stroke="#000000" cx="884" cy="-138.64" rx="150.26" ry="66.64"/>
<text text-anchor="middle" x="884" y="-168.47" font-family="Times,serif" font-size="14.00">Вы видите деревянную</text>
<text text-anchor="middle" x="884" y="-151.22" font-family="Times,serif" font-size="14.00">дверь.</text>
<text text-anchor="middle" x="884" y="-133.97" font-family="Times,serif" font-size="14.00">&#45;&#45;&#45;</text>
<text text-anchor="middle" x="884" y="-116.72" font-family="Times,serif" font-size="14.00">Дверь, похоже, заперта на</text>
<text text-anchor="middle" x="884" y="-99.47" font-family="Times,serif" font-size="14.00">крепкий замок.</text>
</g>
<!-- Set_Lock&#45;&gt;Lock_Door -->
<g id="edge17" class="edge">
<title>Set_Lock&#45;&gt;Lock_Door</title>
<path fill="none" stroke="#555555" stroke-dasharray="1,5" d="M848.87,-241.29C851.39,-234.01 854.52,-224.97 857.86,-215.29"/>
<polygon fill="#555555" stroke="#555555" points="861.45,-216.62 861.41,-206.03 854.83,-214.33 861.45,-216.62"/>
</g>
<!-- Disarm_Traps -->
<g id="node20" class="node">
<title>Disarm_Traps</title>
<ellipse fill="#ffffff" stroke="#000000" cx="565" cy="-138.64" rx="150.26" ry="66.64"/>
<text text-anchor="middle" x="565" y="-168.47" font-family="Times,serif" font-size="14.00">Вы видите деревянную</text>
<text text-anchor="middle" x="565" y="-151.22" font-family="Times,serif" font-size="14.00">дверь.</text>
<text text-anchor="middle" x="565" y="-133.97" font-family="Times,serif" font-size="14.00">&#45;&#45;&#45;</text>
<text text-anchor="middle" x="565" y="-116.72" font-family="Times,serif" font-size="14.00">Дверь, похоже, заперта на</text>
<text text-anchor="middle" x="565" y="-99.47" font-family="Times,serif" font-size="14.00">крепкий замок.</text>
</g>
<!-- Skill_Disarm_Traps&#45;&gt;Disarm_Traps -->
<g id="edge12" class="edge">
<title>Skill_Disarm_Traps&#45;&gt;Disarm_Traps</title>
<path fill="none" stroke="#555555" stroke-dasharray="1,5" d="M654.95,-243.26C647.15,-234.28 636.62,-222.14 625.51,-209.34"/>
<polygon fill="#555555" stroke="#555555" points="627.73,-207.57 618.53,-202.31 622.45,-212.16 627.73,-207.57"/>
</g>
<!-- use_obj_on_p_proc -->
<g id="node12" class="node">
<title>use_obj_on_p_proc</title>
<ellipse fill="#ffffff" stroke="#000000" cx="1095" cy="-367.74" rx="27" ry="18"/>
</g>
<!-- Lockpick_Lock -->
<g id="node13" class="node">
<title>Lockpick_Lock</title>
<ellipse fill="#ffffff" stroke="#000000" cx="1203" cy="-259.29" rx="27" ry="18"/>
</g>
<!-- use_obj_on_p_proc&#45;&gt;Lockpick_Lock -->
<g id="edge6" class="edge">
<title>use_obj_on_p_proc&#45;&gt;Lockpick_Lock</title>
<path fill="none" stroke="#555555" stroke-dasharray="1,5" d="M1109.57,-352.38C1127.84,-334.37 1159.37,-303.29 1180.7,-282.27"/>
<polygon fill="#555555" stroke="#555555" points="1182.66,-285.27 1187.32,-275.76 1177.74,-280.29 1182.66,-285.27"/>
</g>
<!-- Set_Lockpick_Lock -->
<g id="node14" class="node">
<title>Set_Lockpick_Lock</title>
<ellipse fill="#ffffff" stroke="#000000" cx="915" cy="-259.29" rx="27" ry="18"/>
</g>
<!-- use_obj_on_p_proc&#45;&gt;Set_Lockpick_Lock -->
<g id="edge7" class="edge">
<title>use_obj_on_p_proc&#45;&gt;Set_Lockpick_Lock</title>
<path fill="none" stroke="#555555" stroke-dasharray="1,5" d="M1075.39,-355.14C1043.69,-336.4 981.01,-299.33 944.1,-277.5"/>
<polygon fill="#555555" stroke="#555555" points="946.24,-274.11 935.86,-272.03 942.68,-280.13 946.24,-274.11"/>
</g>
<!-- Super_Lockpick_Lock -->
<g id="node15" class="node">
<title>Super_Lockpick_Lock</title>
<ellipse fill="#ffffff" stroke="#000000" cx="1131" cy="-259.29" rx="27" ry="18"/>
</g>
<!-- use_obj_on_p_proc&#45;&gt;Super_Lockpick_Lock -->
<g id="edge8" class="edge">
<title>use_obj_on_p_proc&#45;&gt;Super_Lockpick_Lock</title>
<path fill="none" stroke="#555555" stroke-dasharray="1,5" d="M1100.62,-350.1C1106.3,-333.33 1115.15,-307.16 1121.84,-287.38"/>
<polygon fill="#555555" stroke="#555555" points="1125.41,-288.75 1125.3,-278.16 1118.78,-286.51 1125.41,-288.75"/>
</g>
<!-- Super_Set_Lockpick_Lock -->
<g id="node16" class="node">
<title>Super_Set_Lockpick_Lock</title>
<ellipse fill="#ffffff" stroke="#000000" cx="1059" cy="-259.29" rx="27" ry="18"/>
</g>
<!-- use_obj_on_p_proc&#45;&gt;Super_Set_Lockpick_Lock -->
<g id="edge9" class="edge">
<title>use_obj_on_p_proc&#45;&gt;Super_Set_Lockpick_Lock</title>
<path fill="none" stroke="#555555" stroke-dasharray="1,5" d="M1089.38,-350.1C1083.7,-333.33 1074.85,-307.16 1068.16,-287.38"/>
<polygon fill="#555555" stroke="#555555" points="1071.22,-286.51 1064.7,-278.16 1064.59,-288.75 1071.22,-286.51"/>
</g>
<!-- Lockpick_Lock&#45;&gt;Lockpick_Door -->
<g id="edge15" class="edge">
<title>Lockpick_Lock&#45;&gt;Lockpick_Door</title>
<path fill="none" stroke="#555555" stroke-dasharray="1,5" d="M1203,-241.04C1203,-234.11 1203,-225.6 1203,-216.49"/>
<polygon fill="#555555" stroke="#555555" points="1206.5,-216.57 1203,-206.57 1199.5,-216.57 1206.5,-216.57"/>
</g>
<!-- Set_Lockpick_Lock&#45;&gt;Lock_Door -->
<g id="edge18" class="edge">
<title>Set_Lockpick_Lock&#45;&gt;Lock_Door</title>
<path fill="none" stroke="#555555" stroke-dasharray="1,5" d="M910.56,-241.29C908.69,-234.14 906.37,-225.27 903.89,-215.78"/>
<polygon fill="#555555" stroke="#555555" points="907.07,-215.08 901.15,-206.29 900.29,-216.85 907.07,-215.08"/>
</g>
<!-- Super_Lockpick_Lock&#45;&gt;Lockpick_Door -->
<g id="edge16" class="edge">
<title>Super_Lockpick_Lock&#45;&gt;Lockpick_Door</title>
<path fill="none" stroke="#555555" stroke-dasharray="1,5" d="M1140.71,-242.29C1145.65,-234.15 1152.03,-223.63 1158.83,-212.43"/>
<polygon fill="#555555" stroke="#555555" points="1162.16,-214.7 1164.35,-204.33 1156.17,-211.06 1162.16,-214.7"/>
</g>
<!-- Super_Set_Lockpick_Lock&#45;&gt;Lock_Door -->
<g id="edge19" class="edge">
<title>Super_Set_Lockpick_Lock&#45;&gt;Lock_Door</title>
<path fill="none" stroke="#555555" stroke-dasharray="1,5" d="M1040.6,-245.82C1024.43,-234.85 999.62,-218.03 974.47,-200.98"/>
<polygon fill="#555555" stroke="#555555" points="976.82,-197.67 966.58,-194.95 972.89,-203.46 976.82,-197.67"/>
</g>
<!-- damage_p_proc -->
<g id="node17" class="node">
<title>damage_p_proc</title>
<ellipse fill="#ffffff" stroke="#000000" cx="1275" cy="-367.74" rx="27" ry="18"/>
</g>
<!-- destroy_p_proc -->
<g id="node18" class="node">
<title>destroy_p_proc</title>
<ellipse fill="#ffffff" stroke="#000000" cx="1275" cy="-259.29" rx="27" ry="18"/>
</g>
<!-- damage_p_proc&#45;&gt;destroy_p_proc -->
<g id="edge10" class="edge">
<title>damage_p_proc&#45;&gt;destroy_p_proc</title>
<path fill="none" stroke="#555555" stroke-dasharray="1,5" d="M1269.89,-349.63C1268.07,-333.11 1267.77,-307.78 1268.97,-288.31"/>
<polygon fill="#555555" stroke="#555555" points="1272.54,-288.61 1269.89,-278.35 1265.57,-288.02 1272.54,-288.61"/>
</g>
<!-- damage_p_proc&#45;&gt;destroy_p_proc -->
<g id="edge11" class="edge">
<title>damage_p_proc&#45;&gt;destroy_p_proc</title>
<path fill="none" stroke="#555555" stroke-dasharray="1,5" d="M1280.11,-349.63C1281.93,-333.11 1282.23,-307.78 1281.03,-288.31"/>
<polygon fill="#555555" stroke="#555555" points="1284.43,-288.02 1280.11,-278.35 1277.46,-288.61 1284.43,-288.02"/>
</g>
<!-- map_update_p_proc -->
<g id="node19" class="node">
<title>map_update_p_proc</title>
<ellipse fill="#ffffff" stroke="#000000" cx="1347" cy="-367.74" rx="27" ry="18"/>
</g>
<!-- Disarm_Traps&#45;&gt;Damage_Critter -->
<g id="edge13" class="edge">
<title>Disarm_Traps&#45;&gt;Damage_Critter</title>
<path fill="none" stroke="#555555" stroke-dasharray="1,5" d="M477.2,-84.22C448.92,-67.02 419.55,-49.15 398.71,-36.47"/>
<polygon fill="#555555" stroke="#555555" points="400.86,-33.07 390.5,-30.86 397.22,-39.05 400.86,-33.07"/>
</g>
<!-- timed_event_p_proc -->
<g id="node23" class="node">
<title>timed_event_p_proc</title>
<ellipse fill="#ffffff" stroke="#000000" cx="1419" cy="-367.74" rx="27" ry="18"/>
</g>
</g>
</svg>
<script>window.Codes = {"checkPartyMembersNearDoor":"if (party_member_obj(16777278) != 0) then begin\n  if (tile_distance_objs(self_obj, party_member_obj(16777278)) <= 5) then begin\n    return 1;\n  end\nend\nif (party_member_obj(16777376) != 0) then begin\n  if (tile_distance_objs(self_obj, party_member_obj(16777376)) <= 5) then begin\n    return 1;\n  end\nend\nif (party_member_obj(16777377) != 0) then begin\n  if (tile_distance_objs(self_obj, party_member_obj(16777377)) <= 5) then begin\n    return 1;\n  end\nend\nif (party_member_obj(16777305) != 0) then begin\n  if (tile_distance_objs(self_obj, party_member_obj(16777305)) <= 5) then begin\n    return 1;\n  end\nend\nif (party_member_obj(16777313) != 0) then begin\n  if (tile_distance_objs(self_obj, party_member_obj(16777313)) <= 5) then begin\n    return 1;\n  end\nend\nif (party_member_obj(16777323) != 0) then begin\n  if (tile_distance_objs(self_obj, party_member_obj(16777323)) <= 5) then begin\n    return 1;\n  end\nend\nif (party_member_obj(16777352) != 0) then begin\n  if (tile_distance_objs(self_obj, party_member_obj(16777352)) <= 5) then begin\n    return 1;\n  end\nend\nif (party_member_obj(16777378) != 0) then begin\n  if (tile_distance_objs(self_obj, party_member_obj(16777378)) <= 5) then begin\n    return 1;\n  end\nend\nif (party_member_obj(16777368) != 0) then begin\n  if (tile_distance_objs(self_obj, party_member_obj(16777368)) <= 5) then begin\n    return 1;\n  end\nend\nif (party_member_obj(16777379) != 0) then begin\n  if (tile_distance_objs(self_obj, party_member_obj(16777379)) <= 5) then begin\n    return 1;\n  end\nend\nif (party_member_obj(16777380) != 0) then begin\n  if (tile_distance_objs(self_obj, party_member_obj(16777380)) <= 5) then begin\n    return 1;\n  end\nend\nif (party_member_obj(16777295) != 0) then begin\n  if (tile_distance_objs(self_obj, party_member_obj(16777295)) <= 5) then begin\n    return 1;\n  end\nend\nif (party_member_obj(16777381) != 0) then begin\n  if (tile_distance_objs(self_obj, party_member_obj(16777381)) <= 5) then begin\n    return 1;\n  end\nend\nif (party_member_obj(16777407) != 0) then begin\n  if (tile_distance_objs(self_obj, party_member_obj(16777407)) <= 5) then begin\n    return 1;\n  end\nend\nif (party_member_obj(16777411) != 0) then begin\n  if (tile_distance_objs(self_obj, party_member_obj(16777411)) <= 5) then begin\n    return 1;\n  end\nend\nif (party_member_obj(16777412) != 0) then begin\n  if (tile_distance_objs(self_obj, party_member_obj(16777412)) <= 5) then begin\n    return 1;\n  end\nend\nif (party_member_obj(16777413) != 0) then begin\n  if (tile_distance_objs(self_obj, party_member_obj(16777413)) <= 5) then begin\n    return 1;\n  end\nend\nif (party_member_obj(16777481) != 0) then begin\n  if (tile_distance_objs(self_obj, party_member_obj(16777481)) <= 5) then begin\n    return 1;\n  end\nend\nif (party_member_obj(16777558) != 0) then begin\n  if (tile_distance_objs(self_obj, party_member_obj(16777558)) <= 5) then begin\n    return 1;\n  end\nend\nif (party_member_obj(16777600) != 0) then begin\n  if (tile_distance_objs(self_obj, party_member_obj(16777600)) <= 5) then begin\n    return 1;\n  end\nend\nif (party_member_obj(16777718) != 0) then begin\n  if (tile_distance_objs(self_obj, party_member_obj(16777718)) <= 5) then begin\n    return 1;\n  end\nend\nif (party_member_obj(16777719) != 0) then begin\n  if (tile_distance_objs(self_obj, party_member_obj(16777719)) <= 5) then begin\n    return 1;\n  end\nend\nif (party_member_obj(16777720) != 0) then begin\n  if (tile_distance_objs(self_obj, party_member_obj(16777720)) <= 5) then begin\n    return 1;\n  end\nend\n","map_enter_p_proc":"[]","start":"[]","look_at_p_proc":"script_overrides;\ndisplay_msg(message_str(1489, 100));\n","description_p_proc":"script_overrides;\nif (obj_is_locked(self_obj)) then begin\n  display_msg(message_str(1489, 101));\nend\nelse begin\n  display_msg(message_str(1489, 102));\nend\n","use_p_proc":"Traps_Roll := roll_vs_skill(source_obj, 11, 0);\nif (local_var(0) == 0) then begin\n  if (is_success(Traps_Roll)) then begin\n    script_overrides;\n    set_local_var(1, 1);\n    reg_anim_func(2, source_obj);\n    if (source_obj == dude_obj) then begin\n      display_msg(message_str(13, 204));\n    end\n    else begin\n      display_msg(message_str(13, 205));\n    end\n  end\n  else begin\n    if (obj_is_locked(self_obj)) then begin\n      script_overrides;\n      display_msg(message_str(13, 203));\n      call Damage_Critter;\n    end\n    else begin\n      call Damage_Critter;\n    end\n  end\nend\nelse begin\n  if (obj_is_locked(self_obj)) then begin\n    script_overrides;\n    display_msg(message_str(13, 203));\n  end\nend\n","use_skill_on_p_proc":"variable LVar0 := 0;\ndebug_msg(\"kivicdor\" + \": \" + \"use_skill_on_p_proc\" + \"\\n\");\nLVar0 := action_being_used;\nif (LVar0 == 9) then begin\n  script_overrides;\n  if (obj_is_locked(self_obj)) then begin\n    call Unlock_Lock;\n  end\n  else begin\n    call Set_Lock;\n  end\nend\nelse begin\n  if (LVar0 == 11) then begin\n    script_overrides;\n    if (local_var(0) == 0) then begin\n      call Skill_Disarm_Traps;\n    end\n    else begin\n      if (source_obj == dude_obj) then begin\n        display_msg(message_str(13, 195));\n      end\n      else begin\n        display_msg(obj_name(source_obj) + message_str(13, 200));\n      end\n    end\n  end\nend\n","use_obj_on_p_proc":"variable LVar0 := 0;\nLVar0 := obj_pid(obj_being_used_with);\nif (LVar0 == 84) then begin\n  script_overrides;\n  if (obj_is_locked(self_obj)) then begin\n    call Lockpick_Lock;\n  end\n  else begin\n    call Set_Lockpick_Lock;\n  end\nend\nelse begin\n  if (LVar0 == 410) then begin\n    script_overrides;\n    if (obj_is_locked(self_obj)) then begin\n      call Super_Lockpick_Lock;\n    end\n    else begin\n      call Super_Set_Lockpick_Lock;\n    end\n  end\nend\n","damage_p_proc":"variable LVar0 := 0;\nif (metarule(49, target_obj) == 6) then begin\n  if (local_var(0) == 0) then begin\n    set_local_var(0, 1);\n    obj_lock(self_obj);\n    LVar0 := random(10, 20);\n    explosion(tile_num(self_obj), elevation(self_obj), LVar0);\n    call destroy_p_proc;\n    destroy_object(self_obj);\n  end\n  else begin\n    set_local_var(0, 1);\n    obj_unlock(self_obj);\n    call destroy_p_proc;\n    destroy_object(self_obj);\n  end\nend\nelse begin\n  display_msg(message_str(13, 193));\nend\n","map_update_p_proc":"if (obj_is_locked(self_obj)) then begin\n  obj_lock(self_obj);\nend\nelse begin\n  obj_unlock(self_obj);\nend\n","destroy_p_proc":"[]","Skill_Disarm_Traps":"Traps_Roll := roll_vs_skill(source_obj, 11, 0);\ncall Disarm_Traps;\n","Disarm_Traps":"if (is_success(Traps_Roll)) then begin\n  if (local_var(1) == 0) then begin\n    set_local_var(1, 1);\n    if (source_obj == dude_obj) then begin\n      display_msg(message_str(13, 194));\n    end\n    else begin\n      display_msg(message_str(13, 199));\n    end\n    if (local_var(5) == 0) then begin\n      set_local_var(5, 1);\n      give_exp_points(25);\n      display_msg(message_str(14, 100) + 25 + message_str(14, 101));\n    end\n  end\n  else begin\n    set_local_var(0, 1);\n    if (source_obj == dude_obj) then begin\n      display_msg(message_str(13, 196));\n    end\n    else begin\n      display_msg(obj_name(source_obj) + message_str(13, 201));\n    end\n  end\nend\nelse begin\n  if (is_critical(Traps_Roll)) then begin\n    call Damage_Critter;\n  end\n  else begin\n    if (local_var(1) == 0) then begin\n      if (source_obj == dude_obj) then begin\n        display_msg(message_str(13, 195));\n      end\n      else begin\n        display_msg(obj_name(source_obj) + message_str(13, 200));\n      end\n    end\n    else begin\n      display_msg(obj_name(source_obj) + message_str(13, 202));\n    end\n  end\nend\n","Unlock_Lock":"Locks_Roll := roll_vs_skill(source_obj, 9, -20);\ncall Lockpick_Door;\n","Lockpick_Lock":"Locks_Roll := roll_vs_skill(source_obj, 9, 0);\ncall Lockpick_Door;\n","Lockpick_Door":"script_overrides;\nif (is_success(Locks_Roll)) then begin\n  obj_unlock(self_obj);\n  if (source_obj == dude_obj) then begin\n    display_msg(message_str(13, 170));\n  end\n  else begin\n    display_msg(obj_name(source_obj) + message_str(13, 173));\n  end\n  if (local_var(4) == 0) then begin\n    set_local_var(4, 1);\n    give_exp_points(25);\n    display_msg(message_str(14, 100) + 25 + message_str(14, 101));\n  end\nend\nelse begin\n  if (is_critical(Locks_Roll)) then begin\n    jam_lock(self_obj);\n    if (source_obj == dude_obj) then begin\n      display_msg(message_str(13, 171));\n    end\n    else begin\n      display_msg(obj_name(source_obj) + message_str(13, 174));\n    end\n  end\n  else begin\n    if (source_obj == dude_obj) then begin\n      display_msg(message_str(13, 172));\n    end\n    else begin\n      display_msg(obj_name(source_obj) + message_str(13, 175));\n    end\n  end\nend\n","Super_Lockpick_Lock":"Locks_Roll := roll_vs_skill(source_obj, 9, 20);\ncall Lockpick_Door;\n","Lock_Door":"script_overrides;\nif (is_success(Locks_Roll)) then begin\n  obj_lock(self_obj);\n  if (source_obj == dude_obj) then begin\n    display_msg(message_str(13, 189));\n  end\n  else begin\n    display_msg(obj_name(source_obj) + message_str(13, 191));\n  end\n  if (local_var(4) == 0) then begin\n    set_local_var(4, 1);\n    give_exp_points(25);\n    display_msg(message_str(14, 100) + 25 + message_str(14, 101));\n  end\nend\nelse begin\n  if (source_obj == dude_obj) then begin\n    display_msg(message_str(13, 190));\n  end\n  else begin\n    display_msg(obj_name(source_obj) + message_str(13, 192));\n  end\nend\n","Set_Lock":"script_overrides;\nLocks_Roll := roll_vs_skill(source_obj, 9, -20);\ncall Lock_Door;\n","Set_Lockpick_Lock":"Locks_Roll := roll_vs_skill(source_obj, 9, 0);\ncall Lock_Door;\n","Super_Set_Lockpick_Lock":"Locks_Roll := roll_vs_skill(source_obj, 9, 20);\ncall Lock_Door;\n","Damage_Critter":"variable LVar0 := 0;\nscript_overrides;\nLVar0 := random(10, 20);\nif (source_obj == dude_obj) then begin\n  script_overrides;\n  critter_dmg(dude_obj, LVar0, 262);\n  display_msg(message_str(13, 166) + LVar0 + message_str(13, 167));\nend\nelse begin\n  script_overrides;\n  critter_dmg(source_obj, LVar0, 262);\n  display_msg(obj_name(source_obj) + message_str(13, 168) + LVar0 + message_str(13, 169));\nend\nset_local_var(0, 1);\n","timed_event_p_proc":"if (obj_is_open(self_obj)) then begin\n  if (not(combat_is_initialized)) then begin\n    if ((tile_distance_objs(dude_obj, self_obj) > 3) and (checkPartyMembersNearDoor == 0) and ((tile_distance_objs(self_obj, 0) > 3) or (critter_state(0) == 1))) then begin\n      obj_close(self_obj);\n    end\n    else begin\n      add_timer_event(self_obj, 10, 1);\n    end\n  end\n  else begin\n    add_timer_event(self_obj, 10, 1);\n  end\nend\n"}</script></body><script src="../jquery.js"></script><script src="../underscore.js"></script><script>(function() {
  var downAt, hideCode, nodes, positionCode, showCode;

  $('svg').attr('unselectable', 'on').css({
    '-moz-user-select': '-moz-none',
    '-moz-user-select': 'none',
    '-o-user-select': 'none',
    '-khtml-user-select': 'none',
    '-webkit-user-select': 'none',
    '-ms-user-select': 'none',
    'user-select': 'none'
  }).bind('selectstart', function() {
    return false;
  });

  $('<div/>', {
    id: 'thecode'
  }).appendTo('body');

  $('#thecode').css({
    'pointer-events': 'none',
    background: 'white',
    padding: '1em',
    outline: 'solid gray 1px',
    'white-space': 'pre',
    position: 'fixed',
    left: 0,
    top: 0
  });

  showCode = function(name, code, x, y) {
    $('#thecode').show();
    $('#thecode').text("# " + name + "\n" + code);
    return positionCode(x, y);
  };

  hideCode = function() {
    return $('#thecode').hide();
  };

  positionCode = function(x, y) {
    return $('#thecode').css({
      left: x,
      top: y
    });
  };

  nodes = $('.node');

  _.each(nodes, function(node) {
    var nodeName;
    nodeName = $(node).find('title').text();
    $(node).mousemove(function(e) {
      return showCode(nodeName, Codes[nodeName], e.clientX, e.clientY);
    });
    return $(node).mouseleave(function() {
      return hideCode();
    });
  });

  $('svg title').remove();

  downAt = null;

  $('svg').mousedown(function(e) {
    var x, y;
    x = e.pageX;
    y = e.pageY;
    return downAt = {
      x: x,
      y: y
    };
  });

  $('svg').mousemove(function(e) {
    var delta, x, y;
    if (!downAt) {
      return;
    }
    x = e.pageX;
    y = e.pageY;
    delta = {
      x: x - downAt.x,
      y: y - downAt.y
    };
    window.scrollBy(-delta.x, -delta.y);
    return false;
  });

  $('svg').mouseup(function(e) {
    return downAt = null;
  });

  $('svg').mouseleave(function(e) {
    return downAt = null;
  });

}).call(this);
</script></html>