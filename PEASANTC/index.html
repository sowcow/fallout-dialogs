<!DOCTYPE html><html><head><title>PEASANTC</title><meta charset="utf-8" /></head><body><svg width="872pt" height="1611pt"
 viewBox="0.00 0.00 871.64 1610.97" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 1606.97)">
<title>PEASANTC</title>
<polygon fill="white" stroke="none" points="-4,4 -4,-1606.97 867.643,-1606.97 867.643,4 -4,4"/>
<!-- start -->
<g id="node1" class="node"><title>start</title>
<ellipse fill="#ffffff" stroke="#000000" cx="171" cy="-1584.97" rx="27" ry="18"/>
</g>
<!-- destroy_p_proc -->
<g id="node2" class="node"><title>destroy_p_proc</title>
<ellipse fill="#ffffff" stroke="#000000" cx="27" cy="-1428.85" rx="27" ry="18"/>
</g>
<!-- start&#45;&gt;destroy_p_proc -->
<g id="edge1" class="edge"><title>start&#45;&gt;destroy_p_proc</title>
<path fill="none" stroke="#555555" stroke-dasharray="1,5" d="M146.224,-1577.46C121.891,-1569.87 85.2715,-1555.05 63,-1529.97 44.7657,-1509.44 35.5688,-1478.99 31.0623,-1457.06"/>
<polygon fill="#555555" stroke="#555555" points="34.4731,-1456.26 29.2077,-1447.07 27.5906,-1457.54 34.4731,-1456.26"/>
</g>
<!-- map_enter_p_proc -->
<g id="node3" class="node"><title>map_enter_p_proc</title>
<ellipse fill="#ffffff" stroke="#000000" cx="99" cy="-1428.85" rx="27" ry="18"/>
</g>
<!-- start&#45;&gt;map_enter_p_proc -->
<g id="edge2" class="edge"><title>start&#45;&gt;map_enter_p_proc</title>
<path fill="none" stroke="#555555" stroke-dasharray="1,5" d="M159.229,-1568.52C151.623,-1558.04 141.893,-1543.65 135,-1529.97 122.916,-1505.98 112.944,-1476.94 106.583,-1456.32"/>
<polygon fill="#555555" stroke="#555555" points="109.91,-1455.23 103.676,-1446.66 103.206,-1457.25 109.91,-1455.23"/>
</g>
<!-- map_update_p_proc -->
<g id="node4" class="node"><title>map_update_p_proc</title>
<ellipse fill="#ffffff" stroke="#000000" cx="171" cy="-1428.85" rx="27" ry="18"/>
</g>
<!-- start&#45;&gt;map_update_p_proc -->
<g id="edge3" class="edge"><title>start&#45;&gt;map_update_p_proc</title>
<path fill="none" stroke="#555555" stroke-dasharray="1,5" d="M171,-1566.89C171,-1540.39 171,-1489.12 171,-1457.36"/>
<polygon fill="#555555" stroke="#555555" points="174.5,-1457.01 171,-1447.01 167.5,-1457.01 174.5,-1457.01"/>
</g>
<!-- pickup_p_proc -->
<g id="node5" class="node"><title>pickup_p_proc</title>
<ellipse fill="#ffffff" stroke="#000000" cx="313" cy="-1428.85" rx="96.7474" ry="26.7407"/>
<text text-anchor="middle" x="313" y="-1432.65" font-family="Times,serif" font-size="14.00">Please leave me alon</text>
<text text-anchor="middle" x="313" y="-1417.65" font-family="Times,serif" font-size="14.00">e!</text>
</g>
<!-- start&#45;&gt;pickup_p_proc -->
<g id="edge4" class="edge"><title>start&#45;&gt;pickup_p_proc</title>
<path fill="none" stroke="#555555" stroke-dasharray="1,5" d="M184.616,-1569.19C207.108,-1544.78 252.551,-1495.46 282.887,-1462.54"/>
<polygon fill="#555555" stroke="#555555" points="285.67,-1464.68 289.872,-1454.95 280.522,-1459.94 285.67,-1464.68"/>
</g>
<!-- talk_p_proc -->
<g id="node6" class="node"><title>talk_p_proc</title>
<ellipse fill="#ffffff" stroke="#000000" cx="525" cy="-1428.85" rx="96.7474" ry="101.233"/>
<text text-anchor="middle" x="525" y="-1485.15" font-family="Times,serif" font-size="14.00">Please leave me alon</text>
<text text-anchor="middle" x="525" y="-1470.15" font-family="Times,serif" font-size="14.00">e!</text>
<text text-anchor="middle" x="525" y="-1455.15" font-family="Times,serif" font-size="14.00">&#45;&#45;&#45;</text>
<text text-anchor="middle" x="525" y="-1440.15" font-family="Times,serif" font-size="14.00">Get out of he</text>
<text text-anchor="middle" x="525" y="-1425.15" font-family="Times,serif" font-size="14.00">re!</text>
<text text-anchor="middle" x="525" y="-1410.15" font-family="Times,serif" font-size="14.00">&#45;&#45;&#45;</text>
<text text-anchor="middle" x="525" y="-1395.15" font-family="Times,serif" font-size="14.00">I&#39;ve heard b</text>
<text text-anchor="middle" x="525" y="-1380.15" font-family="Times,serif" font-size="14.00">ad things about you,</text>
<text text-anchor="middle" x="525" y="-1365.15" font-family="Times,serif" font-size="14.00"> are they true?</text>
</g>
<!-- start&#45;&gt;talk_p_proc -->
<g id="edge5" class="edge"><title>start&#45;&gt;talk_p_proc</title>
<path fill="none" stroke="#555555" stroke-dasharray="1,5" d="M191.557,-1573.1C196.511,-1570.81 201.861,-1568.6 207,-1566.97 298.175,-1538.07 333.502,-1572.84 419,-1529.97 430.07,-1524.42 440.78,-1517.33 450.863,-1509.5"/>
<polygon fill="#555555" stroke="#555555" points="453.235,-1512.08 458.811,-1503.08 448.834,-1506.64 453.235,-1512.08"/>
</g>
<!-- sleeping -->
<g id="node8" class="node"><title>sleeping</title>
<ellipse fill="#ffffff" stroke="#000000" cx="171" cy="-1253.26" rx="27" ry="18"/>
</g>
<!-- map_update_p_proc&#45;&gt;sleeping -->
<g id="edge6" class="edge"><title>map_update_p_proc&#45;&gt;sleeping</title>
<path fill="none" stroke="#555555" stroke-dasharray="1,5" d="M171,-1410.57C171,-1380.42 171,-1317.96 171,-1281.79"/>
<polygon fill="#555555" stroke="#555555" points="174.5,-1281.47 171,-1271.47 167.5,-1281.47 174.5,-1281.47"/>
</g>
<!-- PeasantC00 -->
<g id="node9" class="node"><title>PeasantC00</title>
<ellipse fill="#ffffff" stroke="#000000" cx="525" cy="-1253.26" rx="94.5053" ry="37.4533"/>
<text text-anchor="middle" x="525" y="-1264.56" font-family="Times,serif" font-size="14.00">I hope you&#39;re not go</text>
<text text-anchor="middle" x="525" y="-1249.56" font-family="Times,serif" font-size="14.00">ing to kick me out o</text>
<text text-anchor="middle" x="525" y="-1234.56" font-family="Times,serif" font-size="14.00">f here.</text>
</g>
<!-- talk_p_proc&#45;&gt;PeasantC00 -->
<g id="edge7" class="edge"><title>talk_p_proc&#45;&gt;PeasantC00</title>
<path fill="none" stroke="#555555" stroke-dasharray="1,5" d="M525,-1327.63C525,-1318.43 525,-1309.44 525,-1301.08"/>
<polygon fill="#555555" stroke="#555555" points="528.5,-1300.86 525,-1290.86 521.5,-1300.86 528.5,-1300.86"/>
</g>
<!-- damage_p_proc -->
<g id="node7" class="node"><title>damage_p_proc</title>
<ellipse fill="#ffffff" stroke="#000000" cx="243" cy="-1584.97" rx="27" ry="18"/>
</g>
<!-- PeasantCEnd -->
<g id="node10" class="node"><title>PeasantCEnd</title>
<ellipse fill="#ffffff" stroke="#000000" cx="451" cy="-26.8701" rx="27" ry="18"/>
</g>
<!-- PeasantC00&#45;&gt;PeasantCEnd -->
<g id="edge8" class="edge"><title>PeasantC00&#45;&gt;PeasantCEnd</title>
<path fill="none" stroke="#99004b" d="M485.405,-1218.95C449.448,-1184.76 402,-1127.99 402,-1066.49 402,-1066.49 402,-1066.49 402,-374.562 402,-254.101 431.361,-112.394 444.627,-54.5139"/>
<polygon fill="#99004b" stroke="#99004b" points="448.052,-55.2388 446.907,-44.7061 441.234,-53.6543 448.052,-55.2388"/>
<text text-anchor="middle" x="412.5" y="-762.684" font-family="Times,serif" font-size="14.00" fill="#99004b">No.</text>
</g>
<!-- PeasantC00a -->
<g id="node11" class="node"><title>PeasantC00a</title>
<ellipse fill="#ffffff" stroke="#000000" cx="525" cy="-1065.49" rx="27" ry="18"/>
</g>
<!-- PeasantC00&#45;&gt;PeasantC00a -->
<g id="edge9" class="edge"><title>PeasantC00&#45;&gt;PeasantC00a</title>
<path fill="none" stroke="#007899" d="M525,-1215.56C525,-1179.65 525,-1125.79 525,-1093.59"/>
<polygon fill="#007899" stroke="#007899" points="528.5,-1093.56 525,-1083.56 521.5,-1093.56 528.5,-1093.56"/>
<text text-anchor="middle" x="582.5" y="-1186.58" font-family="Times,serif" font-size="14.00" fill="#007899">That&#39;s a strange way</text>
<text text-anchor="middle" x="582.5" y="-1171.58" font-family="Times,serif" font-size="14.00" fill="#007899"> to start a conversa</text>
<text text-anchor="middle" x="582.5" y="-1156.58" font-family="Times,serif" font-size="14.00" fill="#007899">tion.</text>
</g>
<!-- PeasantC01 -->
<g id="node12" class="node"><title>PeasantC01</title>
<ellipse fill="#ffffff" stroke="#000000" cx="664" cy="-1065.49" rx="94.0904" ry="69.0935"/>
<text text-anchor="middle" x="664" y="-1099.29" font-family="Times,serif" font-size="14.00">Oh, well, if you wan</text>
<text text-anchor="middle" x="664" y="-1084.29" font-family="Times,serif" font-size="14.00">t to stay a while, g</text>
<text text-anchor="middle" x="664" y="-1069.29" font-family="Times,serif" font-size="14.00">o right ahead. I thi</text>
<text text-anchor="middle" x="664" y="-1054.29" font-family="Times,serif" font-size="14.00">nk we are</text>
<text text-anchor="middle" x="664" y="-1039.29" font-family="Times,serif" font-size="14.00"> safe here</text>
<text text-anchor="middle" x="664" y="-1024.29" font-family="Times,serif" font-size="14.00">.</text>
</g>
<!-- PeasantC00&#45;&gt;PeasantC01 -->
<g id="edge10" class="edge"><title>PeasantC00&#45;&gt;PeasantC01</title>
<path fill="none" stroke="#998d00" d="M600.077,-1230.35C616.035,-1222.45 631.28,-1211.87 642,-1197.78 653.509,-1182.66 659.894,-1163.71 663.26,-1144.95"/>
<polygon fill="#998d00" stroke="#998d00" points="666.749,-1145.28 664.794,-1134.87 659.828,-1144.23 666.749,-1145.28"/>
<text text-anchor="middle" x="678" y="-1171.58" font-family="Times,serif" font-size="14.00" fill="#998d00">Hnnn.</text>
</g>
<!-- PeasantC03 -->
<g id="node13" class="node"><title>PeasantC03</title>
<ellipse fill="#ffffff" stroke="#000000" cx="525" cy="-879.287" rx="94.5053" ry="79.8062"/>
<text text-anchor="middle" x="525" y="-920.587" font-family="Times,serif" font-size="14.00">Well, it&#39;s true. Aft</text>
<text text-anchor="middle" x="525" y="-905.587" font-family="Times,serif" font-size="14.00">er what happened to </text>
<text text-anchor="middle" x="525" y="-890.587" font-family="Times,serif" font-size="14.00">my friends, I gotta </text>
<text text-anchor="middle" x="525" y="-875.587" font-family="Times,serif" font-size="14.00">protect my</text>
<text text-anchor="middle" x="525" y="-860.587" font-family="Times,serif" font-size="14.00"> turf. I </text>
<text text-anchor="middle" x="525" y="-845.587" font-family="Times,serif" font-size="14.00">just hope you&#39;re not</text>
<text text-anchor="middle" x="525" y="-830.587" font-family="Times,serif" font-size="14.00"> gonna kill me.</text>
</g>
<!-- PeasantC00a&#45;&gt;PeasantC03 -->
<g id="edge11" class="edge"><title>PeasantC00a&#45;&gt;PeasantC03</title>
<path fill="none" stroke="#555555" stroke-dasharray="1,5" d="M525,-1047.16C525,-1028.97 525,-998.967 525,-969.377"/>
<polygon fill="#555555" stroke="#555555" points="528.5,-969.375 525,-959.375 521.5,-969.375 528.5,-969.375"/>
</g>
<!-- PeasantC02 -->
<g id="node14" class="node"><title>PeasantC02</title>
<ellipse fill="#ffffff" stroke="#000000" cx="733" cy="-879.287" rx="94.5053" ry="69.0935"/>
<text text-anchor="middle" x="733" y="-913.087" font-family="Times,serif" font-size="14.00">Well, you gotta be c</text>
<text text-anchor="middle" x="733" y="-898.087" font-family="Times,serif" font-size="14.00">areful these days. I</text>
<text text-anchor="middle" x="733" y="-883.087" font-family="Times,serif" font-size="14.00"> hope you&#39;re having </text>
<text text-anchor="middle" x="733" y="-868.087" font-family="Times,serif" font-size="14.00">a better life</text>
<text text-anchor="middle" x="733" y="-853.087" font-family="Times,serif" font-size="14.00"> than </text>
<text text-anchor="middle" x="733" y="-838.087" font-family="Times,serif" font-size="14.00">I am.</text>
</g>
<!-- PeasantC00a&#45;&gt;PeasantC02 -->
<g id="edge12" class="edge"><title>PeasantC00a&#45;&gt;PeasantC02</title>
<path fill="none" stroke="#555555" stroke-dasharray="1,5" d="M530.686,-1047.6C536.419,-1032.61 546.501,-1010.88 561,-996.19 585.168,-971.701 600.102,-977.863 629,-959.19 639.694,-952.28 650.703,-944.603 661.374,-936.828"/>
<polygon fill="#555555" stroke="#555555" points="663.481,-939.623 669.457,-930.875 659.329,-933.987 663.481,-939.623"/>
</g>
<!-- PeasantC03&#45;&gt;PeasantCEnd -->
<g id="edge15" class="edge"><title>PeasantC03&#45;&gt;PeasantCEnd</title>
<path fill="none" stroke="#990700" d="M495.074,-803.43C487.466,-781.232 480.249,-756.634 476,-733.384 428.42,-473.024 443.323,-149.888 449.151,-55.1531"/>
<polygon fill="#990700" stroke="#990700" points="452.655,-55.1944 449.796,-44.9927 445.669,-54.7508 452.655,-55.1944"/>
<text text-anchor="middle" x="477.5" y="-668.184" font-family="Times,serif" font-size="14.00" fill="#990700">No.</text>
</g>
<!-- PeasantC04 -->
<g id="node15" class="node"><title>PeasantC04</title>
<ellipse fill="#ffffff" stroke="#000000" cx="519" cy="-715.384" rx="33.5952" ry="18"/>
<text text-anchor="middle" x="519" y="-711.684" font-family="Times,serif" font-size="14.00">Gack!</text>
</g>
<!-- PeasantC03&#45;&gt;PeasantC04 -->
<g id="edge13" class="edge"><title>PeasantC03&#45;&gt;PeasantC04</title>
<path fill="none" stroke="#610099" d="M520.685,-799.235C520.427,-793.195 520.194,-787.192 520,-781.384 519.584,-768.948 519.34,-755.168 519.198,-743.508"/>
<polygon fill="#610099" stroke="#610099" points="522.698,-743.458 519.094,-733.495 515.699,-743.531 522.698,-743.458"/>
<text text-anchor="middle" x="577.5" y="-770.184" font-family="Times,serif" font-size="14.00" fill="#610099">No, I won&#39;t hurt you</text>
<text text-anchor="middle" x="577.5" y="-755.184" font-family="Times,serif" font-size="14.00" fill="#610099">. Much.</text>
</g>
<!-- PeasantC03a -->
<g id="node16" class="node"><title>PeasantC03a</title>
<ellipse fill="#ffffff" stroke="#000000" cx="657" cy="-715.384" rx="27" ry="18"/>
</g>
<!-- PeasantC03&#45;&gt;PeasantC03a -->
<g id="edge14" class="edge"><title>PeasantC03&#45;&gt;PeasantC03a</title>
<path fill="none" stroke="#009934" d="M595.771,-825.812C610.229,-812.564 624.279,-797.483 635,-781.384 642.635,-769.918 647.861,-755.55 651.297,-743.24"/>
<polygon fill="#009934" stroke="#009934" points="654.703,-744.047 653.775,-733.493 647.919,-742.322 654.703,-744.047"/>
<text text-anchor="middle" x="710.5" y="-762.684" font-family="Times,serif" font-size="14.00" fill="#009934">Why do you say that?</text>
</g>
<!-- PeasantC06 -->
<g id="node17" class="node"><title>PeasantC06</title>
<ellipse fill="#ffffff" stroke="#000000" cx="587" cy="-375.562" rx="101.233" ry="270.644"/>
<text text-anchor="middle" x="587" y="-551.862" font-family="Times,serif" font-size="14.00">Those &#39;helpful&#39; heal</text>
<text text-anchor="middle" x="587" y="-536.862" font-family="Times,serif" font-size="14.00">ing guys wanted my f</text>
<text text-anchor="middle" x="587" y="-521.862" font-family="Times,serif" font-size="14.00">riend&#39;s place, so th</text>
<text text-anchor="middle" x="587" y="-506.862" font-family="Times,serif" font-size="14.00">ey took it.</text>
<text text-anchor="middle" x="587" y="-491.862" font-family="Times,serif" font-size="14.00"> I don&#39;t</text>
<text text-anchor="middle" x="587" y="-476.862" font-family="Times,serif" font-size="14.00"> know what happened </text>
<text text-anchor="middle" x="587" y="-461.862" font-family="Times,serif" font-size="14.00">to my friends.</text>
<text text-anchor="middle" x="587" y="-446.862" font-family="Times,serif" font-size="14.00">&#45;&#45;&#45;</text>
<text text-anchor="middle" x="587" y="-431.862" font-family="Times,serif" font-size="14.00"> </text>
<text text-anchor="middle" x="587" y="-416.862" font-family="Times,serif" font-size="14.00">There&#39;s nobody aroun</text>
<text text-anchor="middle" x="587" y="-401.862" font-family="Times,serif" font-size="14.00">d to help me.</text>
<text text-anchor="middle" x="587" y="-386.862" font-family="Times,serif" font-size="14.00">&#45;&#45;&#45;</text>
<text text-anchor="middle" x="587" y="-371.862" font-family="Times,serif" font-size="14.00"> G</text>
<text text-anchor="middle" x="587" y="-356.862" font-family="Times,serif" font-size="14.00">izmo laughed at me w</text>
<text text-anchor="middle" x="587" y="-341.862" font-family="Times,serif" font-size="14.00">hen I asked for his </text>
<text text-anchor="middle" x="587" y="-326.862" font-family="Times,serif" font-size="14.00">help.</text>
<text text-anchor="middle" x="587" y="-311.862" font-family="Times,serif" font-size="14.00">&#45;&#45;&#45;</text>
<text text-anchor="middle" x="587" y="-296.862" font-family="Times,serif" font-size="14.00"> Killian i</text>
<text text-anchor="middle" x="587" y="-281.862" font-family="Times,serif" font-size="14.00">s too busy cleaning </text>
<text text-anchor="middle" x="587" y="-266.862" font-family="Times,serif" font-size="14.00">up Gizmo&#39;s mess to h</text>
<text text-anchor="middle" x="587" y="-251.862" font-family="Times,serif" font-size="14.00">elp.</text>
<text text-anchor="middle" x="587" y="-236.862" font-family="Times,serif" font-size="14.00">&#45;&#45;&#45;</text>
<text text-anchor="middle" x="587" y="-221.862" font-family="Times,serif" font-size="14.00"> And Killia</text>
<text text-anchor="middle" x="587" y="-206.862" font-family="Times,serif" font-size="14.00">n is too busy to hel</text>
<text text-anchor="middle" x="587" y="-191.862" font-family="Times,serif" font-size="14.00">p me.</text>
</g>
<!-- PeasantC03a&#45;&gt;PeasantC06 -->
<g id="edge16" class="edge"><title>PeasantC03a&#45;&gt;PeasantC06</title>
<path fill="none" stroke="#555555" stroke-dasharray="1,5" d="M653.432,-697.167C650.037,-680.778 644.492,-654.022 638.015,-622.763"/>
<polygon fill="#555555" stroke="#555555" points="641.433,-622.006 635.977,-612.924 634.578,-623.426 641.433,-622.006"/>
</g>
<!-- PeasantC05 -->
<g id="node18" class="node"><title>PeasantC05</title>
<ellipse fill="#ffffff" stroke="#000000" cx="785" cy="-375.562" rx="78.7863" ry="18"/>
<text text-anchor="middle" x="785" y="-371.862" font-family="Times,serif" font-size="14.00">No reason. Really.</text>
</g>
<!-- PeasantC03a&#45;&gt;PeasantC05 -->
<g id="edge17" class="edge"><title>PeasantC03a&#45;&gt;PeasantC05</title>
<path fill="none" stroke="#555555" stroke-dasharray="1,5" d="M667.552,-698.697C676.275,-685.241 688.557,-665.114 697,-646.384 735.577,-560.803 765.475,-453.159 778.245,-403.692"/>
<polygon fill="#555555" stroke="#555555" points="781.694,-404.33 780.776,-393.775 774.912,-402.599 781.694,-404.33"/>
</g>
<!-- PeasantC06&#45;&gt;PeasantCEnd -->
<g id="edge19" class="edge"><title>PeasantC06&#45;&gt;PeasantCEnd</title>
<path fill="none" stroke="#529900" d="M513.924,-188.277C493.204,-135.457 473.116,-84.2494 461.413,-54.415"/>
<polygon fill="#529900" stroke="#529900" points="464.546,-52.8172 457.636,-44.786 458.029,-55.3735 464.546,-52.8172"/>
<text text-anchor="middle" x="517" y="-75.5401" font-family="Times,serif" font-size="14.00" fill="#529900">That&#39;s a shame.</text>
</g>
<!-- PeasantC07 -->
<g id="node19" class="node"><title>PeasantC07</title>
<ellipse fill="#ffffff" stroke="#000000" cx="593" cy="-26.8701" rx="85.6199" ry="26.7407"/>
<text text-anchor="middle" x="593" y="-30.6701" font-family="Times,serif" font-size="14.00">I hope so, I really </text>
<text text-anchor="middle" x="593" y="-15.6701" font-family="Times,serif" font-size="14.00">hope so.</text>
</g>
<!-- PeasantC06&#45;&gt;PeasantC07 -->
<g id="edge18" class="edge"><title>PeasantC06&#45;&gt;PeasantC07</title>
<path fill="none" stroke="#002599" d="M591.668,-104.812C591.935,-89.4188 592.175,-75.5124 592.377,-63.8912"/>
<polygon fill="#002599" stroke="#002599" points="595.876,-63.9431 592.55,-53.884 588.877,-63.8219 595.876,-63.9431"/>
<text text-anchor="middle" x="632" y="-75.5401" font-family="Times,serif" font-size="14.00" fill="#002599">Are you safe?</text>
</g>
</g>
</svg>
<script>window.Codes = {"start":"if (script_action == 18) then begin\n  call destroy_p_proc;\nend\nelse begin\n  if (script_action == 15) then begin\n    call map_enter_p_proc;\n  end\n  else begin\n    if (script_action == 23) then begin\n      call map_update_p_proc;\n    end\n    else begin\n      if (script_action == 4) then begin\n        call pickup_p_proc;\n      end\n      else begin\n        if (script_action == 11) then begin\n          call talk_p_proc;\n        end\n      end\n    end\n  end\nend\n","damage_p_proc":"if (source_obj == dude_obj) then begin\n  set_global_var(247, 1);\nend\n","destroy_p_proc":"if (source_obj == dude_obj) then begin\n  set_global_var(247, 1);\n  if (source_obj == dude_obj) then begin\n    if (((global_var(160) + global_var(159)) >= 25) and ((global_var(159) > (2 * global_var(160))) or (global_var(156) == 1))) then begin\n      set_global_var(156, 1);\n      set_global_var(157, 0);\n    end\n    if (((global_var(160) + global_var(159)) >= 25) and ((global_var(160) > (3 * global_var(159))) or (global_var(157) == 1))) then begin\n      set_global_var(157, 1);\n      set_global_var(156, 0);\n    end\n    set_global_var(159, global_var(159) + 1);\n    if ((global_var(159) % 2) == 0) then begin\n      set_global_var(155, global_var(155) - 1);\n    end\n  end\nend\n","map_enter_p_proc":"if (map_var(2) == 1) then begin\n  set_obj_visibility(self_obj, 1);\n  removal_ptr := self_obj;\nend\nelse begin\n  sleep_time := random(2215, 2230);\n  wake_time := random(715, 730);\n  if ((game_time / (10 * 60 * 60 * 24)) < 80) then begin\n    sleep_tile := 15275;\n    home_tile := 14267;\n  end\n  else begin\n    sleep_tile := 23524;\n    home_tile := 23923;\n  end\nend\n","map_update_p_proc":"call sleeping;\n","pickup_p_proc":"set_local_var(1, 1);\nfloat_msg(self_obj, message_str(438, 124), 2);\n","talk_p_proc":"if (local_var(2) == 1) then begin\n  float_msg(self_obj, message_str(185, 166), 0);\nend\nelse begin\n  if (local_var(1) == 1) then begin\n    float_msg(self_obj, message_str(438, 124), 2);\n  end\n  else begin\n    if ((game_time / (10 * 60 * 60 * 24)) < 80) then begin\n      set_local_var(0, 1);\n      if (global_var(247) == 1) then begin\n        float_msg(self_obj, message_str(438, 100), 2);\n      end\n      else begin\n        if (global_var(155) < -10) then begin\n          float_msg(self_obj, message_str(438, 101), 7);\n        end\n        else begin\n          if (get_critter_stat(dude_obj, 34) == 0) then begin\n            float_msg(self_obj, message_str(438, random(102, 103)), 3);\n          end\n          else begin\n            float_msg(self_obj, message_str(438, random(102, 104)), 3);\n          end\n        end\n      end\n    end\n    else begin\n      set_map_var(2, 1);\n      start_gdialog(438, self_obj, 4, -1, -1);\n      gsay_start;\n      call PeasantC00;\n      gsay_end;\n      end_dialogue;\n    end\n  end\nend\n","PeasantC00":"gsay_reply(438, 105);\ngiq_option(4, 438, 106, PeasantCEnd, 50);\ngiq_option(5, 438, 107, PeasantC00a, 50);\ngiq_option(-3, 438, 108, PeasantC01, 50);\n","PeasantC00a":"if (is_success(roll_vs_skill(dude_obj, 14, 0))) then begin\n  call PeasantC03;\nend\nelse begin\n  call PeasantC02;\nend\n","PeasantC01":"gsay_message(438, 109, 50);\n","PeasantC02":"gsay_message(438, 110, 50);\n","PeasantC03":"gsay_reply(438, 111);\ngiq_option(5, 438, 112, PeasantC04, 51);\ngiq_option(6, 438, 113, PeasantC03a, 50);\ngiq_option(4, 438, 106, PeasantCEnd, 50);\n","PeasantC03a":"if (is_success(roll_vs_skill(dude_obj, 14, -10))) then begin\n  call PeasantC06;\nend\nelse begin\n  call PeasantC05;\nend\n","PeasantC04":"set_local_var(1, 1);\ngsay_message(438, 114, 51);\n","PeasantC05":"gsay_message(438, 115, 50);\n","PeasantC06":"variable LVar0 := 0;\nLVar0 := message_str(438, 116);\nif (global_var(37) == 1) then begin\n  if (global_var(38) == 1) then begin\n    LVar0 := LVar0 + message_str(438, 120);\n  end\n  else begin\n    LVar0 := LVar0 + message_str(438, 119);\n  end\nend\nelse begin\n  if (global_var(38) == 1) then begin\n    LVar0 := LVar0 + message_str(438, 118);\n  end\n  else begin\n    LVar0 := LVar0 + message_str(438, 117);\n  end\nend\ngsay_reply(438, LVar0);\ngiq_option(5, 438, 121, PeasantC07, 50);\ngiq_option(5, 438, 122, PeasantCEnd, 50);\n","PeasantC07":"gsay_message(438, 123, 50);\n","PeasantCEnd":"[]","sleeping":"if (local_var(2) == 1) then begin\n  if (not(night_person) and (game_time_hour >= wake_time) and (game_time_hour < sleep_time) or (night_person and ((game_time_hour >= wake_time) or (game_time_hour < sleep_time)))) then begin\n    if (((game_time_hour - wake_time) < 10) and ((game_time_hour - wake_time) > 0)) then begin\n      if (tile_num(self_obj) != home_tile) then begin\n        animate_move_obj_to_tile(self_obj, home_tile, 0);\n      end\n      else begin\n        set_local_var(2, 0);\n      end\n    end\n    else begin\n      move_to(self_obj, home_tile, elevation(self_obj));\n      if (tile_num(self_obj) == home_tile) then begin\n        set_local_var(2, 0);\n      end\n    end\n  end\nend\nelse begin\n  if (night_person and (game_time_hour >= sleep_time) and (game_time_hour < wake_time) or (not(night_person) and ((game_time_hour >= sleep_time) or (game_time_hour < wake_time)))) then begin\n    if (((game_time_hour - sleep_time) < 10) and ((game_time_hour - sleep_time) > 0)) then begin\n      if (tile_num(self_obj) != sleep_tile) then begin\n        animate_move_obj_to_tile(self_obj, self_obj, 0);\n      end\n      else begin\n        set_local_var(2, 1);\n      end\n    end\n    else begin\n      if (tile_num(self_obj) != sleep_tile) then begin\n        move_to(self_obj, sleep_tile, elevation(self_obj));\n      end\n      else begin\n        set_local_var(2, 1);\n      end\n    end\n  end\nend\n"}</script></body><script src="../jquery.js"></script><script src="../underscore.js"></script><script type="text/javascript">(function() {
  var downAt, hideCode, nodes, positionCode, showCode;

  $('svg').attr('unselectable', 'on').css({
    '-moz-user-select': '-moz-none',
    '-moz-user-select': 'none',
    '-o-user-select': 'none',
    '-khtml-user-select': 'none',
    '-webkit-user-select': 'none',
    '-ms-user-select': 'none',
    'user-select': 'none'
  }).bind('selectstart', function() {
    return false;
  });

  $('<div/>', {
    id: 'thecode'
  }).appendTo('body');

  $('#thecode').css({
    'pointer-events': 'none',
    background: 'white',
    padding: '1em',
    outline: 'solid gray 1px',
    'white-space': 'pre',
    position: 'fixed',
    left: 0,
    top: 0
  });

  showCode = function(code, x, y) {
    $('#thecode').show();
    $('#thecode').text(code);
    return positionCode(x, y);
  };

  hideCode = function() {
    return $('#thecode').hide();
  };

  positionCode = function(x, y) {
    return $('#thecode').css({
      left: x,
      top: y
    });
  };

  nodes = $('.node');

  _.each(nodes, function(node) {
    var nodeName;
    nodeName = $(node).find('title').text();
    $(node).mousemove(function(e) {
      return showCode(Codes[nodeName], e.clientX, e.clientY);
    });
    return $(node).mouseleave(function() {
      return hideCode();
    });
  });

  $('svg title').remove();

  downAt = null;

  $('svg').mousedown(function(e) {
    var x, y;
    x = e.pageX;
    y = e.pageY;
    return downAt = {
      x: x,
      y: y
    };
  });

  $('svg').mousemove(function(e) {
    var delta, x, y;
    if (!downAt) {
      return;
    }
    x = e.pageX;
    y = e.pageY;
    delta = {
      x: x - downAt.x,
      y: y - downAt.y
    };
    window.scrollBy(-delta.x, -delta.y);
    return false;
  });

  $('svg').mouseup(function(e) {
    return downAt = null;
  });

  $('svg').mouseleave(function(e) {
    return downAt = null;
  });

}).call(this);
</script></html>