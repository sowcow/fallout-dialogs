<!DOCTYPE html><html><head><title>PRISONR</title><meta charset="utf-8" /></head><body><svg width="1174pt" height="1049pt"
 viewBox="0.00 0.00 1173.93 1048.65" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 1044.65)">
<title>PRISONR</title>
<polygon fill="white" stroke="none" points="-4,4 -4,-1044.65 1169.93,-1044.65 1169.93,4 -4,4"/>
<!-- start -->
<g id="node1" class="node"><title>start</title>
<ellipse fill="#ffffff" stroke="#000000" cx="392.928" cy="-1003.17" rx="114.603" ry="37.4533"/>
<text text-anchor="middle" x="392.928" y="-1014.47" font-family="Times,serif" font-size="14.00">Thanks again.</text>
<text text-anchor="middle" x="392.928" y="-999.474" font-family="Times,serif" font-size="14.00">&#45;&#45;&#45;</text>
<text text-anchor="middle" x="392.928" y="-984.474" font-family="Times,serif" font-size="14.00">You see a ghoul prisoner.</text>
</g>
<!-- timeforwhat -->
<g id="node2" class="node"><title>timeforwhat</title>
<ellipse fill="#ffffff" stroke="#000000" cx="320.928" cy="-910.698" rx="27" ry="18"/>
</g>
<!-- start&#45;&gt;timeforwhat -->
<g id="edge1" class="edge"><title>start&#45;&gt;timeforwhat</title>
<path fill="none" stroke="#555555" stroke-dasharray="1,5" d="M364.679,-966.675C356.269,-956.107 347.266,-944.794 339.627,-935.195"/>
<polygon fill="#555555" stroke="#555555" points="342.28,-932.908 333.314,-927.262 336.803,-937.267 342.28,-932.908"/>
</g>
<!-- do_dialogue -->
<g id="node3" class="node"><title>do_dialogue</title>
<ellipse fill="#ffffff" stroke="#000000" cx="392.928" cy="-910.698" rx="27" ry="18"/>
</g>
<!-- start&#45;&gt;do_dialogue -->
<g id="edge2" class="edge"><title>start&#45;&gt;do_dialogue</title>
<path fill="none" stroke="#555555" stroke-dasharray="1,5" d="M392.928,-965.635C392.928,-956.669 392.928,-947.229 392.928,-938.797"/>
<polygon fill="#555555" stroke="#555555" points="396.428,-938.767 392.928,-928.767 389.428,-938.767 396.428,-938.767"/>
</g>
<!-- leave_map -->
<g id="node4" class="node"><title>leave_map</title>
<ellipse fill="#ffffff" stroke="#000000" cx="464.928" cy="-910.698" rx="27" ry="18"/>
</g>
<!-- start&#45;&gt;leave_map -->
<g id="edge3" class="edge"><title>start&#45;&gt;leave_map</title>
<path fill="none" stroke="#555555" stroke-dasharray="1,5" d="M421.178,-966.675C429.588,-956.107 438.59,-944.794 446.229,-935.195"/>
<polygon fill="#555555" stroke="#555555" points="449.054,-937.267 452.542,-927.262 443.576,-932.908 449.054,-937.267"/>
</g>
<!-- prisonr06 -->
<g id="node5" class="node"><title>prisonr06</title>
<ellipse fill="#ffffff" stroke="#000000" cx="137.928" cy="-765.188" rx="98.9899" ry="90.5193"/>
<text text-anchor="middle" x="137.928" y="-813.988" font-family="Times,serif" font-size="14.00">Thanks for letting me</text>
<text text-anchor="middle" x="137.928" y="-798.988" font-family="Times,serif" font-size="14.00">out.</text>
<text text-anchor="middle" x="137.928" y="-783.988" font-family="Times,serif" font-size="14.00">&#45;&#45;&#45;</text>
<text text-anchor="middle" x="137.928" y="-768.988" font-family="Times,serif" font-size="14.00">You gained </text>
<text text-anchor="middle" x="137.928" y="-753.988" font-family="Times,serif" font-size="14.00">&#45;&#45;&#45;</text>
<text text-anchor="middle" x="137.928" y="-738.988" font-family="Times,serif" font-size="14.00">experience points for</text>
<text text-anchor="middle" x="137.928" y="-723.988" font-family="Times,serif" font-size="14.00">freeing the ghoul</text>
<text text-anchor="middle" x="137.928" y="-708.988" font-family="Times,serif" font-size="14.00">prisoner.</text>
</g>
<!-- do_dialogue&#45;&gt;prisonr06 -->
<g id="edge4" class="edge"><title>do_dialogue&#45;&gt;prisonr06</title>
<path fill="none" stroke="#555555" stroke-dasharray="1,5" d="M372.919,-898.437C342.452,-881.291 282.508,-847.555 230.791,-818.449"/>
<polygon fill="#555555" stroke="#555555" points="232.336,-815.303 221.905,-813.449 228.903,-821.403 232.336,-815.303"/>
</g>
<!-- prisonr05 -->
<g id="node6" class="node"><title>prisonr05</title>
<ellipse fill="#ffffff" stroke="#000000" cx="392.928" cy="-765.188" rx="74.9875" ry="18"/>
<text text-anchor="middle" x="392.928" y="-761.488" font-family="Times,serif" font-size="14.00">Please let me go.</text>
</g>
<!-- do_dialogue&#45;&gt;prisonr05 -->
<g id="edge5" class="edge"><title>do_dialogue&#45;&gt;prisonr05</title>
<path fill="none" stroke="#555555" stroke-dasharray="1,5" d="M392.928,-892.672C392.928,-868.181 392.928,-822.748 392.928,-793.522"/>
<polygon fill="#555555" stroke="#555555" points="396.428,-793.192 392.928,-783.192 389.428,-793.192 396.428,-793.192"/>
</g>
<!-- prisonr00 -->
<g id="node7" class="node"><title>prisonr00</title>
<ellipse fill="#ffffff" stroke="#000000" cx="616.928" cy="-765.188" rx="98.5829" ry="18"/>
<text text-anchor="middle" x="616.928" y="-761.488" font-family="Times,serif" font-size="14.00">Wha&#45;what do you want.</text>
</g>
<!-- do_dialogue&#45;&gt;prisonr00 -->
<g id="edge6" class="edge"><title>do_dialogue&#45;&gt;prisonr00</title>
<path fill="none" stroke="#555555" stroke-dasharray="1,5" d="M411.641,-897.709C449.256,-873.61 534.525,-818.981 582.494,-788.249"/>
<polygon fill="#555555" stroke="#555555" points="584.465,-791.143 590.997,-782.802 580.688,-785.249 584.465,-791.143"/>
</g>
<!-- prisonrend -->
<g id="node9" class="node"><title>prisonrend</title>
<ellipse fill="#ffffff" stroke="#000000" cx="339.928" cy="-18" rx="27" ry="18"/>
</g>
<!-- prisonr06&#45;&gt;prisonrend -->
<g id="edge15" class="edge"><title>prisonr06&#45;&gt;prisonrend</title>
<path fill="none" stroke="#009936" d="M97.6771,-682.226C30.6528,-532.652 -80.3538,-215.954 91.9282,-54 121.653,-26.0576 241.045,-20.2736 302.684,-19.177"/>
<polygon fill="#009936" stroke="#009936" points="302.825,-22.6754 312.773,-19.0303 302.723,-15.6761 302.825,-22.6754"/>
<text text-anchor="middle" x="28.9282" y="-348.533" font-family="Times,serif" font-size="14.00" fill="#009936">No prob.</text>
</g>
<!-- prisonr06&#45;&gt;prisonrend -->
<g id="edge17" class="edge"><title>prisonr06&#45;&gt;prisonrend</title>
<path fill="none" stroke="#002499" d="M108.303,-678.79C68.1986,-546.712 13.6025,-290.089 124.928,-117 164.497,-55.4788 253.256,-32.115 303.481,-23.6004"/>
<polygon fill="#002499" stroke="#002499" points="304.253,-27.0219 313.582,-22.0005 303.157,-20.1081 304.253,-27.0219"/>
<text text-anchor="middle" x="69.9282" y="-348.533" font-family="Times,serif" font-size="14.00" fill="#002499">Ya.</text>
</g>
<!-- prisonr07 -->
<g id="node14" class="node"><title>prisonr07</title>
<ellipse fill="#ffffff" stroke="#000000" cx="251.928" cy="-496.955" rx="115.017" ry="111.946"/>
<text text-anchor="middle" x="251.928" y="-560.755" font-family="Times,serif" font-size="14.00">They pump it up from the</text>
<text text-anchor="middle" x="251.928" y="-545.755" font-family="Times,serif" font-size="14.00">wells below. There is a</text>
<text text-anchor="middle" x="251.928" y="-530.755" font-family="Times,serif" font-size="14.00">manhole</text>
<text text-anchor="middle" x="251.928" y="-515.755" font-family="Times,serif" font-size="14.00">in the cell next door</text>
<text text-anchor="middle" x="251.928" y="-500.755" font-family="Times,serif" font-size="14.00">that leads to the old</text>
<text text-anchor="middle" x="251.928" y="-485.755" font-family="Times,serif" font-size="14.00">vault. This is</text>
<text text-anchor="middle" x="251.928" y="-470.755" font-family="Times,serif" font-size="14.00">the source of the water.</text>
<text text-anchor="middle" x="251.928" y="-455.755" font-family="Times,serif" font-size="14.00">If it wasn&#39;t for those</text>
<text text-anchor="middle" x="251.928" y="-440.755" font-family="Times,serif" font-size="14.00">ones below, we would be</text>
<text text-anchor="middle" x="251.928" y="-425.755" font-family="Times,serif" font-size="14.00">a lot better off.</text>
</g>
<!-- prisonr06&#45;&gt;prisonr07 -->
<g id="edge16" class="edge"><title>prisonr06&#45;&gt;prisonr07</title>
<path fill="none" stroke="#990900" d="M173.686,-680.681C183.313,-658.199 193.883,-633.513 204.055,-609.758"/>
<polygon fill="#990900" stroke="#990900" points="207.363,-610.924 208.081,-600.354 200.928,-608.169 207.363,-610.924"/>
<text text-anchor="middle" x="275.428" y="-645.478" font-family="Times,serif" font-size="14.00" fill="#990900">Where does the water come</text>
<text text-anchor="middle" x="275.428" y="-630.478" font-family="Times,serif" font-size="14.00" fill="#990900">from?</text>
</g>
<!-- prisonr00&#45;&gt;prisonrend -->
<g id="edge7" class="edge"><title>prisonr00&#45;&gt;prisonrend</title>
<path fill="none" stroke="#009969" d="M598.429,-747.189C570.949,-720.651 520.198,-666.404 497.928,-608.678 419.004,-404.092 531.383,-323.255 456.928,-117 445.332,-84.8761 438.959,-76.109 412.928,-54 401.291,-44.116 386.385,-36.318 373.08,-30.6155"/>
<polygon fill="#009969" stroke="#009969" points="374.327,-27.3445 363.744,-26.8337 371.699,-33.8323 374.327,-27.3445"/>
<text text-anchor="middle" x="513.428" y="-348.533" font-family="Times,serif" font-size="14.00" fill="#009969">Uh, nothing.</text>
</g>
<!-- prisonr01 -->
<g id="node10" class="node"><title>prisonr01</title>
<ellipse fill="#ffffff" stroke="#000000" cx="848.928" cy="-496.955" rx="103.889" ry="37.4533"/>
<text text-anchor="middle" x="848.928" y="-508.255" font-family="Times,serif" font-size="14.00">Hey, I don&#39;t care about</text>
<text text-anchor="middle" x="848.928" y="-493.255" font-family="Times,serif" font-size="14.00">that, just get me outta</text>
<text text-anchor="middle" x="848.928" y="-478.255" font-family="Times,serif" font-size="14.00">here!</text>
</g>
<!-- prisonr00&#45;&gt;prisonr01 -->
<g id="edge8" class="edge"><title>prisonr00&#45;&gt;prisonr01</title>
<path fill="none" stroke="#993c00" d="M636.891,-747.28C660.477,-726.88 700.372,-691.03 730.928,-656.678 763.504,-620.056 796.439,-574.926 819.205,-542.162"/>
<polygon fill="#993c00" stroke="#993c00" points="822.253,-543.907 825.057,-533.689 816.494,-539.928 822.253,-543.907"/>
<text text-anchor="middle" x="768.928" y="-637.978" font-family="Times,serif" font-size="14.00" fill="#993c00">Hng.</text>
</g>
<!-- prisonr02 -->
<g id="node11" class="node"><title>prisonr02</title>
<ellipse fill="#ffffff" stroke="#000000" cx="797.928" cy="-18" rx="58.4896" ry="18"/>
<text text-anchor="middle" x="797.928" y="-14.3" font-family="Times,serif" font-size="14.00">Great! Do it!</text>
</g>
<!-- prisonr00&#45;&gt;prisonr02 -->
<g id="edge9" class="edge"><title>prisonr00&#45;&gt;prisonr02</title>
<path fill="none" stroke="#100099" d="M694.041,-753.794C776.399,-738.128 903.007,-699.867 961.928,-608.678 1080.65,-424.935 1048.48,-306.358 938.928,-117 917.189,-79.4227 874.557,-52.8854 841.836,-36.9874"/>
<polygon fill="#100099" stroke="#100099" points="843.005,-33.6698 832.465,-32.59 840.031,-40.0068 843.005,-33.6698"/>
<text text-anchor="middle" x="1100.93" y="-348.533" font-family="Times,serif" font-size="14.00" fill="#100099">I&#39;m here to let you out.</text>
</g>
<!-- prisonr03 -->
<g id="node12" class="node"><title>prisonr03</title>
<ellipse fill="#ffffff" stroke="#000000" cx="616.928" cy="-496.955" rx="110.118" ry="37.4533"/>
<text text-anchor="middle" x="616.928" y="-508.255" font-family="Times,serif" font-size="14.00">I stole some water. Hey,</text>
<text text-anchor="middle" x="616.928" y="-493.255" font-family="Times,serif" font-size="14.00">I was thirsty! It wasn&#39;t</text>
<text text-anchor="middle" x="616.928" y="-478.255" font-family="Times,serif" font-size="14.00">like I hurt somebody.</text>
</g>
<!-- prisonr00&#45;&gt;prisonr03 -->
<g id="edge10" class="edge"><title>prisonr00&#45;&gt;prisonr03</title>
<path fill="none" stroke="#1d9900" d="M616.928,-747.129C616.928,-706.879 616.928,-604.858 616.928,-544.575"/>
<polygon fill="#1d9900" stroke="#1d9900" points="620.428,-544.552 616.928,-534.552 613.428,-544.552 620.428,-544.552"/>
<text text-anchor="middle" x="671.928" y="-637.978" font-family="Times,serif" font-size="14.00" fill="#1d9900">What&#39;d you expect.</text>
</g>
<!-- prisonrcbt -->
<g id="node8" class="node"><title>prisonrcbt</title>
<ellipse fill="#ffffff" stroke="#000000" cx="552.928" cy="-1003.17" rx="27" ry="18"/>
</g>
<!-- prisonr03&#45;&gt;prisonr02 -->
<g id="edge12" class="edge"><title>prisonr03&#45;&gt;prisonr02</title>
<path fill="none" stroke="#007699" d="M650.279,-461.092C673.202,-438.122 704.98,-408.166 735.928,-385.233 748.729,-375.747 758.374,-380.673 766.928,-367.233 832.39,-264.37 814.206,-108.52 803.34,-46.1747"/>
<polygon fill="#007699" stroke="#007699" points="806.781,-45.5325 801.546,-36.3216 799.894,-46.7869 806.781,-45.5325"/>
<text text-anchor="middle" x="874.428" y="-221.916" font-family="Times,serif" font-size="14.00" fill="#007699">Ah, that&#39;s nothing. I&#39;ll</text>
<text text-anchor="middle" x="874.428" y="-206.916" font-family="Times,serif" font-size="14.00" fill="#007699">get you out.</text>
</g>
<!-- prisonr04 -->
<g id="node13" class="node"><title>prisonr04</title>
<ellipse fill="#ffffff" stroke="#000000" cx="616.928" cy="-218.116" rx="107.46" ry="79.8063"/>
<text text-anchor="middle" x="616.928" y="-259.416" font-family="Times,serif" font-size="14.00">I would&#39;ve died without</text>
<text text-anchor="middle" x="616.928" y="-244.416" font-family="Times,serif" font-size="14.00">the water. It was only a</text>
<text text-anchor="middle" x="616.928" y="-229.416" font-family="Times,serif" font-size="14.00">cupful.</text>
<text text-anchor="middle" x="616.928" y="-214.416" font-family="Times,serif" font-size="14.00">Just enough to keep me</text>
<text text-anchor="middle" x="616.928" y="-199.416" font-family="Times,serif" font-size="14.00">alive. You gotta get me</text>
<text text-anchor="middle" x="616.928" y="-184.416" font-family="Times,serif" font-size="14.00">out of here!</text>
<text text-anchor="middle" x="616.928" y="-169.416" font-family="Times,serif" font-size="14.00"> I&#39;m going insane.</text>
</g>
<!-- prisonr03&#45;&gt;prisonr04 -->
<g id="edge11" class="edge"><title>prisonr03&#45;&gt;prisonr04</title>
<path fill="none" stroke="#99004a" d="M616.928,-459.193C616.928,-420.86 616.928,-359.345 616.928,-308.182"/>
<polygon fill="#99004a" stroke="#99004a" points="620.428,-308.097 616.928,-298.097 613.428,-308.097 620.428,-308.097"/>
<text text-anchor="middle" x="689.928" y="-356.033" font-family="Times,serif" font-size="14.00" fill="#99004a">You took more than your</text>
<text text-anchor="middle" x="689.928" y="-341.033" font-family="Times,serif" font-size="14.00" fill="#99004a">rightful share.</text>
</g>
<!-- prisonr04&#45;&gt;prisonrend -->
<g id="edge14" class="edge"><title>prisonr04&#45;&gt;prisonrend</title>
<path fill="none" stroke="#620099" d="M555.604,-152.118C541.157,-135.404 526.359,-117.033 513.928,-99 501.063,-80.3379 507.903,-67.8082 489.928,-54 457.398,-29.0108 409.994,-21.4023 377.222,-19.3176"/>
<polygon fill="#620099" stroke="#620099" points="377.294,-15.817 367.133,-18.8198 376.949,-22.8085 377.294,-15.817"/>
<text text-anchor="middle" x="571.428" y="-87.8" font-family="Times,serif" font-size="14.00" fill="#620099">I think I&#39;ll let the</text>
<text text-anchor="middle" x="571.428" y="-72.8" font-family="Times,serif" font-size="14.00" fill="#620099">authorities deal with</text>
<text text-anchor="middle" x="571.428" y="-57.8" font-family="Times,serif" font-size="14.00" fill="#620099">you.</text>
</g>
<!-- prisonr04&#45;&gt;prisonr02 -->
<g id="edge13" class="edge"><title>prisonr04&#45;&gt;prisonr02</title>
<path fill="none" stroke="#998f00" d="M625.343,-138.016C630.672,-102.759 638.88,-66.3931 650.928,-54 662.787,-41.8016 700.361,-32.9798 734.55,-27.2442"/>
<polygon fill="#998f00" stroke="#998f00" points="735.23,-30.6798 744.547,-25.6356 734.118,-23.7686 735.23,-30.6798"/>
<text text-anchor="middle" x="717.428" y="-72.8" font-family="Times,serif" font-size="14.00" fill="#998f00">Ok, hold on a moment.</text>
</g>
<!-- prisonr07&#45;&gt;prisonrend -->
<g id="edge19" class="edge"><title>prisonr07&#45;&gt;prisonrend</title>
<path fill="none" stroke="#99007d" d="M335.465,-419.721C349.156,-403.61 361.821,-385.816 370.928,-367.233 401.628,-304.587 424.71,-115.581 391.928,-54 387.347,-45.3937 379.603,-38.5245 371.471,-33.2306"/>
<polygon fill="#99007d" stroke="#99007d" points="373.033,-30.09 362.627,-28.0968 369.519,-36.144 373.033,-30.09"/>
<text text-anchor="middle" x="430.428" y="-214.416" font-family="Times,serif" font-size="14.00" fill="#99007d">Thanks.</text>
</g>
<!-- prisonr08 -->
<g id="node15" class="node"><title>prisonr08</title>
<ellipse fill="#ffffff" stroke="#000000" cx="251.928" cy="-218.116" rx="118.174" ry="101.233"/>
<text text-anchor="middle" x="251.928" y="-274.416" font-family="Times,serif" font-size="14.00">It&#39;s difficult to make</text>
<text text-anchor="middle" x="251.928" y="-259.416" font-family="Times,serif" font-size="14.00">the old tech work</text>
<text text-anchor="middle" x="251.928" y="-244.416" font-family="Times,serif" font-size="14.00">properly, sometimes.</text>
<text text-anchor="middle" x="251.928" y="-229.416" font-family="Times,serif" font-size="14.00">The glowing ones lash</text>
<text text-anchor="middle" x="251.928" y="-214.416" font-family="Times,serif" font-size="14.00">out whenever we go down</text>
<text text-anchor="middle" x="251.928" y="-199.416" font-family="Times,serif" font-size="14.00">there. Us ghouls</text>
<text text-anchor="middle" x="251.928" y="-184.416" font-family="Times,serif" font-size="14.00">just leave them alone.</text>
<text text-anchor="middle" x="251.928" y="-169.416" font-family="Times,serif" font-size="14.00">And the big mutants don&#39;t</text>
<text text-anchor="middle" x="251.928" y="-154.416" font-family="Times,serif" font-size="14.00">seem to care one bit.</text>
</g>
<!-- prisonr07&#45;&gt;prisonr08 -->
<g id="edge18" class="edge"><title>prisonr07&#45;&gt;prisonr08</title>
<path fill="none" stroke="#509900" d="M251.928,-384.949C251.928,-366.673 251.928,-347.731 251.928,-329.47"/>
<polygon fill="#509900" stroke="#509900" points="255.428,-329.404 251.928,-319.404 248.428,-329.404 255.428,-329.404"/>
<text text-anchor="middle" x="309.428" y="-348.533" font-family="Times,serif" font-size="14.00" fill="#509900">What do you mean?</text>
</g>
<!-- prisonr08&#45;&gt;prisonrend -->
<g id="edge20" class="edge"><title>prisonr08&#45;&gt;prisonrend</title>
<path fill="none" stroke="#009989" d="M268.773,-118.029C275.331,-95.8243 284.402,-73.1867 296.928,-54 301.052,-47.683 306.682,-41.9534 312.508,-37.0436"/>
<polygon fill="#009989" stroke="#009989" points="314.698,-39.7745 320.452,-30.8785 310.406,-34.2445 314.698,-39.7745"/>
<text text-anchor="middle" x="344.428" y="-72.8" font-family="Times,serif" font-size="14.00" fill="#009989">Good luck. Bye.</text>
</g>
</g>
</svg>
<script>window.Codes = {"start":"if (not(init_teams)) then begin\n  init_teams := 1;\n  if (local_var(3) > 9) then begin\n    set_obj_visibility(self_obj, 1);\n  end\n  critter_add_trait(self_obj, 1, 6, 30);\n  critter_add_trait(self_obj, 1, 5, 40);\nend\nif (local_var(3) < 10) then begin\n  if (script_action == 22) then begin\n    call timeforwhat;\n  end\n  else begin\n    if (script_action == 11) then begin\n      if (local_var(1) == 0) then begin\n        call do_dialogue;\n      end\n      else begin\n        float_msg(self_obj, message_str(89, 126), 2);\n      end\n    end\n    else begin\n      if ((script_action == 21) or (script_action == 3)) then begin\n        script_overrides;\n        display_msg(message_str(89, 100));\n      end\n      else begin\n        if (script_action == 4) then begin\n          Hostile := 1;\n        end\n        else begin\n          if (script_action == 12) then begin\n            if (map_var(6) != 0) then begin\n              if (local_var(1) == 1) then begin\n                call leave_map;\n              end\n              else begin\n                if (obj_can_see_obj(self_obj, dude_obj) and (tile_distance_objs(self_obj, dude_obj) < 5)) then begin\n                  dialogue_system_enter;\n                end\n              end\n            end\n            else begin\n              if (Hostile) then begin\n                Hostile := 0;\n                attack_complex(dude_obj, 0, 1, 0, 0, 30000, 0, 0);\n              end\n            end\n          end\n          else begin\n            if (script_action == 18) then begin\n              if (source_obj == dude_obj) then begin\n                if (((global_var(160) + global_var(159)) >= 25) and ((global_var(159) > (2 * global_var(160))) or (global_var(156) == 1))) then begin\n                  set_global_var(156, 1);\n                  set_global_var(157, 0);\n                end\n                if (((global_var(160) + global_var(159)) >= 25) and ((global_var(160) > (3 * global_var(159))) or (global_var(157) == 1))) then begin\n                  set_global_var(157, 1);\n                  set_global_var(156, 0);\n                end\n                set_global_var(159, global_var(159) + 1);\n                if ((global_var(159) % 2) == 0) then begin\n                  set_global_var(155, global_var(155) - 1);\n                end\n              end\n            end\n          end\n        end\n      end\n    end\n  end\nend\n","timeforwhat":"if (fixed_param == 1) then begin\n  Hostile := 1;\nend\n","do_dialogue":"start_gdialog(89, self_obj, 4, -1, -1);\ngsay_start;\nif (map_var(6) != 0) then begin\n  call prisonr06;\nend\nelse begin\n  if (local_var(0)) then begin\n    call prisonr05;\n  end\n  else begin\n    set_local_var(0, 1);\n    call prisonr00;\n  end\nend\ngsay_end;\nend_dialogue;\n","prisonrcbt":"add_timer_event(self_obj, game_ticks(2), 1);\n","prisonrend":"[]","prisonr00":"gsay_reply(89, 101);\ngiq_option(4, 89, 102, prisonrend, 50);\ngiq_option(-3, 89, 103, prisonr01, 50);\ngiq_option(4, 89, 104, prisonr02, 50);\ngiq_option(6, 89, 105, prisonr03, 50);\n","prisonr01":"gsay_message(89, 106, 50);\n","prisonr02":"gsay_message(89, 107, 50);\n","prisonr03":"gsay_reply(89, 108);\ngiq_option(6, 89, 109, prisonr04, 50);\ngiq_option(6, 89, 110, prisonr02, 50);\n","prisonr04":"gsay_reply(89, 111);\ngiq_option(6, 89, 112, prisonr02, 50);\ngiq_option(6, 89, 113, prisonrend, 50);\n","prisonr05":"gsay_message(89, 114, 50);\n","prisonr06":"set_local_var(2, 15863);\nset_local_var(3, 0);\nset_local_var(1, 1);\ngive_exp_points(500);\ndisplay_msg(message_str(89, 124) + 500 + message_str(89, 125));\ngsay_reply(89, 115);\ngiq_option(4, 89, 116, prisonrend, 50);\ngiq_option(5, 89, 117, prisonr07, 50);\ngiq_option(-3, 89, 118, prisonrend, 50);\n","prisonr07":"gsay_reply(89, 119);\ngiq_option(5, 89, 120, prisonr08, 50);\ngiq_option(5, 89, 121, prisonrend, 50);\n","prisonr08":"gsay_reply(89, 122);\ngiq_option(5, 89, 123, prisonrend, 50);\n","leave_map":"my_hex := tile_num(self_obj);\nif (my_hex == local_var(2)) then begin\n  set_local_var(3, local_var(3) + 1);\n  if (local_var(3) > 7) then begin\n    set_global_var(155, global_var(155) + 1);\n    set_local_var(3, 10);\n    set_obj_visibility(self_obj, 1);\n    move_to(self_obj, 0, 0);\n  end\n  else begin\n    if (local_var(3) == 1) then begin\n      set_local_var(2, 15863);\n    end\n    else begin\n      if (local_var(3) == 2) then begin\n        set_local_var(2, 13065);\n      end\n      else begin\n        if (local_var(3) == 3) then begin\n          set_local_var(2, 13081);\n        end\n        else begin\n          if (local_var(3) == 4) then begin\n            set_local_var(2, 14496);\n          end\n          else begin\n            if (local_var(3) == 5) then begin\n              set_local_var(2, 11900);\n            end\n            else begin\n              if (local_var(3) == 6) then begin\n                set_local_var(2, 8700);\n              end\n              else begin\n                if (local_var(3) == 7) then begin\n                  set_local_var(2, 5900);\n                end\n              end\n            end\n          end\n        end\n      end\n    end\n    animate_move_obj_to_tile(self_obj, local_var(2), 0);\n  end\nend\nanimate_move_obj_to_tile(self_obj, local_var(2), 0);\n"}</script></body><script src="../jquery.js"></script><script src="../underscore.js"></script><script type="text/javascript">(function() {
  var downAt, hideCode, nodes, positionCode, showCode;

  $('svg').attr('unselectable', 'on').css({
    '-moz-user-select': '-moz-none',
    '-moz-user-select': 'none',
    '-o-user-select': 'none',
    '-khtml-user-select': 'none',
    '-webkit-user-select': 'none',
    '-ms-user-select': 'none',
    'user-select': 'none'
  }).bind('selectstart', function() {
    return false;
  });

  $('<div/>', {
    id: 'thecode'
  }).appendTo('body');

  $('#thecode').css({
    'pointer-events': 'none',
    background: 'white',
    padding: '1em',
    outline: 'solid gray 1px',
    'white-space': 'pre',
    position: 'fixed',
    left: 0,
    top: 0
  });

  showCode = function(code, x, y) {
    $('#thecode').show();
    $('#thecode').text(code);
    return positionCode(x, y);
  };

  hideCode = function() {
    return $('#thecode').hide();
  };

  positionCode = function(x, y) {
    return $('#thecode').css({
      left: x,
      top: y
    });
  };

  nodes = $('.node');

  _.each(nodes, function(node) {
    var nodeName;
    nodeName = $(node).find('title').text();
    $(node).mousemove(function(e) {
      return showCode(Codes[nodeName], e.clientX, e.clientY);
    });
    return $(node).mouseleave(function() {
      return hideCode();
    });
  });

  $('svg title').remove();

  downAt = null;

  $('svg').mousedown(function(e) {
    var x, y;
    x = e.pageX;
    y = e.pageY;
    return downAt = {
      x: x,
      y: y
    };
  });

  $('svg').mousemove(function(e) {
    var delta, x, y;
    if (!downAt) {
      return;
    }
    x = e.pageX;
    y = e.pageY;
    delta = {
      x: x - downAt.x,
      y: y - downAt.y
    };
    window.scrollBy(-delta.x, -delta.y);
    return false;
  });

  $('svg').mouseup(function(e) {
    return downAt = null;
  });

  $('svg').mouseleave(function(e) {
    return downAt = null;
  });

}).call(this);
</script></html>